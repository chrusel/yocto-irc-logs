<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Saturday, 2022-02-19</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Saturday, 2022-02-19</h1>
<div class="navigation"> <a href="%23yocto.2022-02-18.log.html">&#171; Friday, 2022-02-18</a> <a href="index.html">Index</a> <a href="%23yocto.2022-02-20.log.html">Sunday, 2022-02-20 &#187;</a> </div>
<table class="irclog">
<tr id="t2022-02-19T00:00:20"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: if we really want that level of redesign, now isn't the time :( Why can't people work on this at the start of releases :/</td><td class="time"><a href="#t2022-02-19T00:00:20" class="time">00:00</a></td></tr>
<tr id="t2022-02-19T00:00:29"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP, JPEW: I like the idea of switching to the SPDX license names in `LICENSE`. However, I do not think we want to try to validate that _only_ SPDX names are used. Instead you could warn or fail if any of the old mappings are used. This is because you can add other licenses than the SPDX licenses in your own layers and to handle that we would probably have to keep `AVAILABLE_LICENSES` around, which we don't want.</td><td class="time"><a href="#t2022-02-19T00:00:29" class="time">00:00</a></td></tr>
<tr id="t2022-02-19T00:01:18"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: true, although we may want to ensure the license is defined somewhere, maybe as accepted non spdx licenses</td><td class="time"><a href="#t2022-02-19T00:01:18" class="time">00:01</a></td></tr>
<tr id="t2022-02-19T00:01:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: it also brings to mind the idea of layer specific namespace variables</td><td class="time"><a href="#t2022-02-19T00:01:42" class="time">00:01</a></td></tr>
<tr id="t2022-02-19T00:02:09"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I wish we'd had time for that one but I can barely keep things holding together</td><td class="time"><a href="#t2022-02-19T00:02:09" class="time">00:02</a></td></tr>
<tr id="t2022-02-19T00:02:17"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I do want to do it</td><td class="time"><a href="#t2022-02-19T00:02:17" class="time">00:02</a></td></tr>
<tr id="t2022-02-19T00:03:38"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Well, what worries me more is that we do a simplistic &quot;redesign&quot; of the licensing variables now, and then have to redo it all again to get it right (because what's currently there isn't right).</td><td class="time"><a href="#t2022-02-19T00:03:38" class="time">00:03</a></td></tr>
<tr id="t2022-02-19T00:04:17"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: I'm kind of resigned to that now. Incrementally improve but know we'll have to do better</td><td class="time"><a href="#t2022-02-19T00:04:17" class="time">00:04</a></td></tr>
<tr id="t2022-02-19T00:09:35"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">On an unrelated note, totally assuming that you have not had any time to look at the problem with the missing logs, would you accept a revert of the bitbake change for now? The reason I think this is warranted is that I believe it is better with some duplicated logs than with some missing logs. I will also throw in a bugzilla issue for good measures to describe the current problem.</td><td class="time"><a href="#t2022-02-19T00:09:35" class="time">00:09</a></td></tr>
<tr id="t2022-02-19T00:10:53"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: It regresses on case in favour of another and if I take that it encourages nobody to fix anything and destroys the test cases I was trying to build. So no.</td><td class="time"><a href="#t2022-02-19T00:10:53" class="time">00:10</a></td></tr>
<tr id="t2022-02-19T00:14:42"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Well, the problem now is that there is no information in the log about what caused a failure, making it impossible to debug it. Yesterday we upgraded to Hardknott 3.3.4, which has this change, and today I was faced with an error in package_write_rpm causing one of all our products to fail. Thankfully the error was consistent so that it was possible to rerun the build with `bitbake -v` and catch what actually happened, but that is not always the</td><td class="time"><a href="#t2022-02-19T00:14:42" class="time">00:14</a></td></tr>
<tr id="t2022-02-19T00:14:42-2"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">case.</td><td class="time"><a href="#t2022-02-19T00:14:42-2" class="time">00:14</a></td></tr>
<tr id="t2022-02-19T00:15:56"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">(Oh, and I will throw in the bugzilla issue regardless as the problem needs to be documented.)</td><td class="time"><a href="#t2022-02-19T00:15:56" class="time">00:15</a></td></tr>
<tr id="t2022-02-19T00:17:51"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: I'm stressed, tired and it is past midnight here, even later for you. I'm trying very hard not to get annoyed/frustrated. The project is struggling with people expecting me to solve all these things. I can't do it all. I'm not taking hacks reverting things like that, particularly when your incentive to fix the real issue becomes near zero and it becomes &quot;my&quot; problem.</td><td class="time"><a href="#t2022-02-19T00:17:51" class="time">00:17</a></td></tr>
<tr id="t2022-02-19T00:18:40"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I agree it is an issue. I don't believe for a second that I'm the only person who can fix it.</td><td class="time"><a href="#t2022-02-19T00:18:40" class="time">00:18</a></td></tr>
<tr id="t2022-02-19T00:22:47"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Sorry, I am really not trying to push it on you. I know you are stressed, and the situation with the variable renamings and redesign isn't helping this at all. I really wish I could do more, and do my outmost to try to improve OE-Core where possible. Unfortunately, we do not have many developers inhouse with deep OE knowledge (I am one of the few), which means a lot of my time goes to help all the other developers with their more mundane OE</td><td class="time"><a href="#t2022-02-19T00:22:47" class="time">00:22</a></td></tr>
<tr id="t2022-02-19T00:22:47-2"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">related issues.</td><td class="time"><a href="#t2022-02-19T00:22:47-2" class="time">00:22</a></td></tr>
<tr id="t2022-02-19T00:24:32"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">You're worried about the issue and would like my help with it. I get that. I just don't have enough time :( This story repeats across so many people/companies</td><td class="time"><a href="#t2022-02-19T00:24:32" class="time">00:24</a></td></tr>
<tr id="t2022-02-19T00:25:47"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I'm really close to just saying that if everyone thinks they can do this better with github pull requests and linting, that the current designs of things are stupid and easy to fix, that breaking changes should just be merged and people deal with it, then I'll just step aside and let everyone get on with it. I'm clearly too old, stuck in my ways and no use to the project. People would get quite the shock if I did that :/</td><td class="time"><a href="#t2022-02-19T00:25:47" class="time">00:25</a></td></tr>
<tr id="t2022-02-19T00:28:57"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Well, I for one do not want to switch to github, because I hate its code review system. If you said Gerrit on the other hand, I would be all for it. ;) (And no, unfortunately I do not expect Gerrit to ever be considered as a replacement, regardless if it is way superior when it comes to reviewing code.)</td><td class="time"><a href="#t2022-02-19T00:28:57" class="time">00:28</a></td></tr>
<tr id="t2022-02-19T00:29:48"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: sure, but I'm getting tired of trying to discuss it over and over again and defend the decision to use email. I'm getting really tired of a number of things :(</td><td class="time"><a href="#t2022-02-19T00:29:48" class="time">00:29</a></td></tr>
<tr id="t2022-02-19T00:36:40"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Well, I do agree with the decision to stick with email. I think it works great in that it allows me to see everything that happens. It allows me to skip changes in recipes I do not care about but still know that something is going on in that area. I can also happen to see something in a mail and suddenly I have reviewed something that I probably will never even use, but knowing that OE as such will be a little bit better due to it. There are some</td><td class="time"><a href="#t2022-02-19T00:36:40" class="time">00:36</a></td></tr>
<tr id="t2022-02-19T00:36:40-2"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">drawbacks compared to a deicated review system&nbsp;&nbsp;such as Gerrit (or even github), but on the whole I think it is the right choice.</td><td class="time"><a href="#t2022-02-19T00:36:40-2" class="time">00:36</a></td></tr>
<tr id="t2022-02-19T00:38:38"><td class="action" colspan="2">* moto-timo in the same row on the bus as RP</td><td><a href="#t2022-02-19T00:38:38" class="time">00:38</a></td></tr>
<tr id="t2022-02-19T00:39:02"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Tired. Just chill out please.</td><td class="time"><a href="#t2022-02-19T00:39:02" class="time">00:39</a></td></tr>
<tr id="t2022-02-19T00:39:09"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: lets just not do the debate yet again</td><td class="time"><a href="#t2022-02-19T00:39:09" class="time">00:39</a></td></tr>
<tr id="t2022-02-19T00:39:18"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: that isn't going to help anyone</td><td class="time"><a href="#t2022-02-19T00:39:18" class="time">00:39</a></td></tr>
<tr id="t2022-02-19T00:40:12"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Sorry, was not going for a debate. I just wanted to give you some encouragement that your choice was the right one.</td><td class="time"><a href="#t2022-02-19T00:40:12" class="time">00:40</a></td></tr>
<tr id="t2022-02-19T00:40:40"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">I don‚Äôt see anyone remembering the mass exodus from GitHub when Microsoft bought it. And then the mass exodus back from GitLab. What‚Äôs next? Do you want your project to be tied to one vendor in ten years? Twenty?</td><td class="time"><a href="#t2022-02-19T00:40:40" class="time">00:40</a></td></tr>
<tr id="t2022-02-19T00:42:04"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Email is relatively simple infrastructure. And I‚Äôll shut up now.</td><td class="time"><a href="#t2022-02-19T00:42:04" class="time">00:42</a></td></tr>
<tr id="t2022-02-19T00:47:32"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">My internal nag alarm reminds me that the distutils classes need to get moved to meta-python. The fallout has already been dealt with in the common, high-impact layers.</td><td class="time"><a href="#t2022-02-19T00:47:32" class="time">00:47</a></td></tr>
<tr id="t2022-02-19T00:48:51"><td class="action" colspan="2">* RP tries to remember what he was doing before getting pulled into a license discussion. Something about autobuilder build fixing</td><td><a href="#t2022-02-19T00:48:51" class="time">00:48</a></td></tr>
<tr id="t2022-02-19T00:49:28"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Something about saving the future</td><td class="time"><a href="#t2022-02-19T00:49:28" class="time">00:49</a></td></tr>
<tr id="t2022-02-19T00:50:59"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Parse errors will happen when distutils classes move. Unless someone can think of a warning mechanism for ‚Äòinherit not-here-anymore‚Äô</td><td class="time"><a href="#t2022-02-19T00:50:59" class="time">00:50</a></td></tr>
<tr id="t2022-02-19T00:51:49"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">moto-timo: I think meta-oe still thinks it should override oe-core so if you leave class files with errors in oe-core, people should hit those if meta-oe isn't present?</td><td class="time"><a href="#t2022-02-19T00:51:49" class="time">00:51</a></td></tr>
<tr id="t2022-02-19T00:53:03"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">bbclass ‚Äúbbfatal this has been moved to meta-python‚Äù</td><td class="time"><a href="#t2022-02-19T00:53:03" class="time">00:53</a></td></tr>
<tr id="t2022-02-19T00:53:42"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Slightly more helpful than a parse error</td><td class="time"><a href="#t2022-02-19T00:53:42" class="time">00:53</a></td></tr>
<tr id="t2022-02-19T00:53:56"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Stick a python() {&nbsp;&nbsp;... }&nbsp;&nbsp;around that and you're about done. :)</td><td class="time"><a href="#t2022-02-19T00:53:56" class="time">00:53</a></td></tr>
<tr id="t2022-02-19T00:54:27"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">moto-timo: you know we could add a mechanism for this where a missing class triggers a message defined a bit like we did for BB_RENAMED_VARIABLES</td><td class="time"><a href="#t2022-02-19T00:54:27" class="time">00:54</a></td></tr>
<tr id="t2022-02-19T00:54:32"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">because RP really wants more anonymous Python in core. Lol</td><td class="time"><a href="#t2022-02-19T00:54:32" class="time">00:54</a></td></tr>
<tr id="t2022-02-19T00:54:51"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">RP: better!</td><td class="time"><a href="#t2022-02-19T00:54:51" class="time">00:54</a></td></tr>
<tr id="t2022-02-19T00:55:19"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Well, in a removed class it wouldn't make a difference as it is not expected to be included in the first place.</td><td class="time"><a href="#t2022-02-19T00:55:19" class="time">00:55</a></td></tr>
<tr id="t2022-02-19T00:55:29"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">BB_REMOVED_CLASS_MSGS[image-prelink] = &quot;fix USER_CLASSES in&nbsp;&nbsp;your local.conf&quot;</td><td class="time"><a href="#t2022-02-19T00:55:29" class="time">00:55</a></td></tr>
<tr id="t2022-02-19T00:56:16"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">And all this magically by Monday! ü§£</td><td class="time"><a href="#t2022-02-19T00:56:16" class="time">00:56</a></td></tr>
<tr id="t2022-02-19T00:56:30"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Just kidding</td><td class="time"><a href="#t2022-02-19T00:56:30" class="time">00:56</a></td></tr>
<tr id="t2022-02-19T00:56:49"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Well, I guess that is not an all bad idea... Would avoid having to keep the oldclass.bcclass file around.</td><td class="time"><a href="#t2022-02-19T00:56:49" class="time">00:56</a></td></tr>
<tr id="t2022-02-19T00:57:02"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">I need a search engine for my search engine</td><td class="time"><a href="#t2022-02-19T00:57:02" class="time">00:57</a></td></tr>
<tr id="t2022-02-19T00:57:20"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">moto-timo: according to the mailing list we only do broken feature additions so please include some bugs we can fix later</td><td class="time"><a href="#t2022-02-19T00:57:20" class="time">00:57</a></td></tr>
<tr id="t2022-02-19T00:57:43"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">\o/</td><td class="time"><a href="#t2022-02-19T00:57:43" class="time">00:57</a></td></tr>
<tr id="t2022-02-19T00:58:24"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Saur[m]:&nbsp;&nbsp;indeed. Wheels are turning (no pun intended)</td><td class="time"><a href="#t2022-02-19T00:58:24" class="time">00:58</a></td></tr>
<tr id="t2022-02-19T00:59:04"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">the nice thing for that warning is there will be a clear area in the code to check the variable and show the message so there is little overhead</td><td class="time"><a href="#t2022-02-19T00:59:04" class="time">00:59</a></td></tr>
<tr id="t2022-02-19T00:59:17"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">moto-timo:&nbsp;&nbsp;Well, I know (almost) nothing about eggs end wheels, but I take it from you that it's a good thing. :)</td><td class="time"><a href="#t2022-02-19T00:59:17" class="time">00:59</a></td></tr>
<tr id="t2022-02-19T01:00:06"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Saur[m]:&nbsp;&nbsp;it is future bullet proof promise</td><td class="time"><a href="#t2022-02-19T01:00:06" class="time">01:00</a></td></tr>
<tr id="t2022-02-19T01:00:41"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Somehow I think I'll record that as famous last words. ;)</td><td class="time"><a href="#t2022-02-19T01:00:41" class="time">01:00</a></td></tr>
<tr id="t2022-02-19T01:01:21"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">And I don‚Äôt want to be bitching about kirkstone in two years like I sometimes feel with dunfell (dunfell was a GoodThingTM)</td><td class="time"><a href="#t2022-02-19T01:01:21" class="time">01:01</a></td></tr>
<tr id="t2022-02-19T01:01:57"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Saur[m]: indeed. I will be buying you beers now doubt</td><td class="time"><a href="#t2022-02-19T01:01:57" class="time">01:01</a></td></tr>
<tr id="t2022-02-19T01:03:12"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">&quot;AssertionError: False is not true&quot; - No matter how many of these I fix, there are still more :(</td><td class="time"><a href="#t2022-02-19T01:03:12" class="time">01:03</a></td></tr>
<tr id="t2022-02-19T01:03:26"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Lol. I doubt now, but ‚Äòno doubt‚Äô to be certain</td><td class="time"><a href="#t2022-02-19T01:03:26" class="time">01:03</a></td></tr>
<tr id="t2022-02-19T01:03:28"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">moto-timo: I wish we all could come together and buy some beers. It has just been too long. :(</td><td class="time"><a href="#t2022-02-19T01:03:28" class="time">01:03</a></td></tr>
<tr id="t2022-02-19T01:03:50"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Extreme understatement.</td><td class="time"><a href="#t2022-02-19T01:03:50" class="time">01:03</a></td></tr>
<tr id="t2022-02-19T01:07:56"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">I hope no one has tooling assuming eggs or egg-info. They will shortly be damned. üî• üî• üëø üî• üî•</td><td class="time"><a href="#t2022-02-19T01:07:56" class="time">01:07</a></td></tr>
<tr id="t2022-02-19T01:08:45"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">moto-timo: Well, sometimes you just have to break some eggs (pun totally intended). ;)</td><td class="time"><a href="#t2022-02-19T01:08:45" class="time">01:08</a></td></tr>
<tr id="t2022-02-19T01:08:45-2"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">We will not have any eggs anywhere</td><td class="time"><a href="#t2022-02-19T01:08:45-2" class="time">01:08</a></td></tr>
<tr id="t2022-02-19T01:09:12"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Saur[m]: indeed! ü§£</td><td class="time"><a href="#t2022-02-19T01:09:12" class="time">01:09</a></td></tr>
<tr id="t2022-02-19T01:09:34"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Reinvented the wheel!</td><td class="time"><a href="#t2022-02-19T01:09:34" class="time">01:09</a></td></tr>
<tr id="t2022-02-19T01:12:11"><th class="nick" style="background: #818144">moto-timo</th><td class="text" style="color: #818144">Can we rename kirkstone to super secret code name ‚Äúomelette‚Äù?</td><td class="time"><a href="#t2022-02-19T01:12:11" class="time">01:12</a></td></tr>
<tr id="t2022-02-19T01:12:23"><td class="action" colspan="2">* moto-timo ducks</td><td><a href="#t2022-02-19T01:12:23" class="time">01:12</a></td></tr>
<tr id="t2022-02-19T03:06:18-2"><td class="nickchange" colspan="2">*** jclsn77 is now known as jclsn7</td><td><a href="#t2022-02-19T03:06:18-2" class="time">03:06</a></td></tr>
<tr id="t2022-02-19T11:54:58"><td class="action" colspan="2">* RP wonders if any python experts are around</td><td><a href="#t2022-02-19T11:54:58" class="time">11:54</a></td></tr>
<tr id="t2022-02-19T11:55:40"><td class="action" colspan="2">* RP is wondering if the &quot;**&quot; in <a href="https://git.yoctoproject.org/poky/tree/bitbake/lib/bb/fetch2/wget.py#n328" rel="nofollow">https://git.yoctoproject.org/poky/tree/bitbake/lib/bb/fetch2/wget.py#n328</a>  is correct</td><td><a href="#t2022-02-19T11:55:40" class="time">11:55</a></td></tr>
<tr id="t2022-02-19T13:31:54"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: hey, correct in which sense?</td><td class="time"><a href="#t2022-02-19T13:31:54" class="time">13:31</a></td></tr>
<tr id="t2022-02-19T13:32:19"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">if my memory is correct this will accept any named arguments and present them as a dict</td><td class="time"><a href="#t2022-02-19T13:32:19" class="time">13:32</a></td></tr>
<tr id="t2022-02-19T13:32:56"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">ah, wait, the other way around</td><td class="time"><a href="#t2022-02-19T13:32:56" class="time">13:32</a></td></tr>
<tr id="t2022-02-19T13:33:17"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">line 328 will call environment expanding the dict to arguments</td><td class="time"><a href="#t2022-02-19T13:33:17" class="time">13:33</a></td></tr>
<tr id="t2022-02-19T13:33:21"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so yeah, it looks correct from this POV</td><td class="time"><a href="#t2022-02-19T13:33:21" class="time">13:33</a></td></tr>
<tr id="t2022-02-19T13:40:34"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: but does it make sense for the way it is used on the receiving end?</td><td class="time"><a href="#t2022-02-19T13:40:34" class="time">13:40</a></td></tr>
<tr id="t2022-02-19T13:40:53"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">put another way, how do we reproduce <a href="https://autobuilder.yoctoproject.org/typhoon/#/builders/60/builds/4732/steps/16/logs/stdio" rel="nofollow">https://autobuilder.yoctoproject.org/typhoon/#/builders/60/builds/4732/steps/16/logs/stdio</a></td><td class="time"><a href="#t2022-02-19T13:40:53" class="time">13:40</a></td></tr>
<tr id="t2022-02-19T13:41:24"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">Let me look</td><td class="time"><a href="#t2022-02-19T13:41:24" class="time">13:41</a></td></tr>
<tr id="t2022-02-19T13:42:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I think it probably is ok and the issue may be dict(os.environ) needs to be os.environ.copy()</td><td class="time"><a href="#t2022-02-19T13:42:42" class="time">13:42</a></td></tr>
<tr id="t2022-02-19T13:43:37"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">but you'd think dict() should work. I just know os.environ can be a bit tricky</td><td class="time"><a href="#t2022-02-19T13:43:37" class="time">13:43</a></td></tr>
<tr id="t2022-02-19T13:56:05"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">looking at the internal implementation it can't be that</td><td class="time"><a href="#t2022-02-19T13:56:05" class="time">13:56</a></td></tr>
<tr id="t2022-02-19T14:04:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">back from lunch, at keyboard</td><td class="time"><a href="#t2022-02-19T14:04:08" class="time">14:04</a></td></tr>
<tr id="t2022-02-19T14:06:29"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: trying to grok the issue, how do you know GIT_SSL_CAINFO is in the process environment?</td><td class="time"><a href="#t2022-02-19T14:06:29" class="time">14:06</a></td></tr>
<tr id="t2022-02-19T14:08:33"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: reading that block of code above the with statement I'm curious about two things</td><td class="time"><a href="#t2022-02-19T14:08:33" class="time">14:08</a></td></tr>
<tr id="t2022-02-19T14:08:43"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: first of all, the code won't work with empty but defined values</td><td class="time"><a href="#t2022-02-19T14:08:43" class="time">14:08</a></td></tr>
<tr id="t2022-02-19T14:09:15"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: second of all, should origenv be moved out of the loop? <a href="https://git.yoctoproject.org/poky/tree/bitbake/lib/bb/fetch2/wget.py#n322" rel="nofollow">https://git.yoctoproject.org/poky/tree/bitbake/lib/bb/fetch2/wget.py#n322</a></td><td class="time"><a href="#t2022-02-19T14:09:15" class="time">14:09</a></td></tr>
<tr id="t2022-02-19T14:10:14"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: are there any unit tests for that logic that can be used to debug this without performing full builds?</td><td class="time"><a href="#t2022-02-19T14:10:14" class="time">14:10</a></td></tr>
<tr id="t2022-02-19T14:11:23"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: I don't think it's dict vs clone, I could be wrong but I think the reason is elsewhere</td><td class="time"><a href="#t2022-02-19T14:11:23" class="time">14:11</a></td></tr>
<tr id="t2022-02-19T14:11:36"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: origenv could be moved out the loop, yes. That wouldn't break it though</td><td class="time"><a href="#t2022-02-19T14:11:36" class="time">14:11</a></td></tr>
<tr id="t2022-02-19T14:11:40"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685"> * RP: are there any unit tests for that logic that can be used to debug this without performing full builds?</td><td class="time"><a href="#t2022-02-19T14:11:40" class="time">14:11</a></td></tr>
<tr id="t2022-02-19T14:11:49"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">the empty values thing is a concern.</td><td class="time"><a href="#t2022-02-19T14:11:49" class="time">14:11</a></td></tr>
<tr id="t2022-02-19T14:12:22"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I don't know how to reprocude the issue, no unit test I know of triggers this</td><td class="time"><a href="#t2022-02-19T14:12:22" class="time">14:12</a></td></tr>
<tr id="t2022-02-19T14:12:33"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">It doesn't even happen reliably in full builds</td><td class="time"><a href="#t2022-02-19T14:12:33" class="time">14:12</a></td></tr>
<tr id="t2022-02-19T14:12:46"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">not being versed in yocto, does d.getVars return None or an empty string in case the key is missing?</td><td class="time"><a href="#t2022-02-19T14:12:46" class="time">14:12</a></td></tr>
<tr id="t2022-02-19T14:12:53"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">None</td><td class="time"><a href="#t2022-02-19T14:12:53" class="time">14:12</a></td></tr>
<tr id="t2022-02-19T14:13:03"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so that's something that's easy to fix</td><td class="time"><a href="#t2022-02-19T14:13:03" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">the empty values</td><td class="time"><a href="#t2022-02-19T14:13:08" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:11"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">just test with is None</td><td class="time"><a href="#t2022-02-19T14:13:11" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:31"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I suspect we don't ever use empty values here</td><td class="time"><a href="#t2022-02-19T14:13:31" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">i.e. it is a tangental issue</td><td class="time"><a href="#t2022-02-19T14:13:42" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:51"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">tangential</td><td class="time"><a href="#t2022-02-19T14:13:51" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:13:59"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so there are other places that could be the problem</td><td class="time"><a href="#t2022-02-19T14:13:59" class="time">14:13</a></td></tr>
<tr id="t2022-02-19T14:14:26"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">one thing I recall</td><td class="time"><a href="#t2022-02-19T14:14:26" class="time">14:14</a></td></tr>
<tr id="t2022-02-19T14:14:27"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">could it be inside bb.utils.environment?</td><td class="time"><a href="#t2022-02-19T14:14:27" class="time">14:14</a></td></tr>
<tr id="t2022-02-19T14:14:29"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">ha, actually</td><td class="time"><a href="#t2022-02-19T14:14:29" class="time">14:14</a></td></tr>
<tr id="t2022-02-19T14:15:00"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">one thing that is somewhat tricky/annoying is that manipulations of the environment of the current process are racy in stdlib</td><td class="time"><a href="#t2022-02-19T14:15:00" class="time">14:15</a></td></tr>
<tr id="t2022-02-19T14:15:03"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(in C stlib)</td><td class="time"><a href="#t2022-02-19T14:15:03" class="time">14:15</a></td></tr>
<tr id="t2022-02-19T14:15:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">not sure if that affects os.environ</td><td class="time"><a href="#t2022-02-19T14:15:08" class="time">14:15</a></td></tr>
<tr id="t2022-02-19T14:15:35"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I bumped into this while running concurent test in my Go programs</td><td class="time"><a href="#t2022-02-19T14:15:35" class="time">14:15</a></td></tr>
<tr id="t2022-02-19T14:16:01"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I ended up entirely avoiding environment changes and instead make my logic run other process with a new env block</td><td class="time"><a href="#t2022-02-19T14:16:01" class="time">14:16</a></td></tr>
<tr id="t2022-02-19T14:17:26"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: a silly way to debug this might be to log the new environement and see what the system says next time this happens</td><td class="time"><a href="#t2022-02-19T14:17:26" class="time">14:17</a></td></tr>
<tr id="t2022-02-19T14:17:38"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">silly but perhaps practical</td><td class="time"><a href="#t2022-02-19T14:17:38" class="time">14:17</a></td></tr>
<tr id="t2022-02-19T14:17:44"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">especially for rare issues that don't reproduce easily</td><td class="time"><a href="#t2022-02-19T14:17:44" class="time">14:17</a></td></tr>
<tr id="t2022-02-19T14:17:55"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">it might even be logged when the key error happens</td><td class="time"><a href="#t2022-02-19T14:17:55" class="time">14:17</a></td></tr>
<tr id="t2022-02-19T14:18:03"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so it would not spam users by default</td><td class="time"><a href="#t2022-02-19T14:18:03" class="time">14:18</a></td></tr>
<tr id="t2022-02-19T14:25:23"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: back to your original question, ** works fine assuming that bb.utils.environment takes ** on the other side</td><td class="time"><a href="#t2022-02-19T14:25:23" class="time">14:25</a></td></tr>
<tr id="t2022-02-19T14:25:57"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so, if it does, the problem must be elsewhere</td><td class="time"><a href="#t2022-02-19T14:25:57" class="time">14:25</a></td></tr>
<tr id="t2022-02-19T14:30:25"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: looking at the traceback, the issue is that dict(os.environ) faults whilst iterating it's own internal data. I think the only way this can happen is if the lang encoding breaks :/</td><td class="time"><a href="#t2022-02-19T14:30:25" class="time">14:30</a></td></tr>
<tr id="t2022-02-19T14:30:42"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I didn't notice that</td><td class="time"><a href="#t2022-02-19T14:30:42" class="time">14:30</a></td></tr>
<tr id="t2022-02-19T14:30:42-2"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">oooh</td><td class="time"><a href="#t2022-02-19T14:30:42-2" class="time">14:30</a></td></tr>
<tr id="t2022-02-19T14:30:48"><td class="action" colspan="2">* zyga[m] looks at the backtrace again</td><td><a href="#t2022-02-19T14:30:48" class="time">14:30</a></td></tr>
<tr id="t2022-02-19T14:34:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">so the bottom of the stack is indeed in os.py</td><td class="time"><a href="#t2022-02-19T14:34:08" class="time">14:34</a></td></tr>
<tr id="t2022-02-19T14:35:44"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">looking at sys.getfilesystemencoding</td><td class="time"><a href="#t2022-02-19T14:35:44" class="time">14:35</a></td></tr>
<tr id="t2022-02-19T14:36:17"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: what is LC_CTYPE set to during the build?</td><td class="time"><a href="#t2022-02-19T14:36:17" class="time">14:36</a></td></tr>
<tr id="t2022-02-19T14:36:27"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">from <a href="https://docs.python.org/3/library/os.html#utf8-mode" rel="nofollow">https://docs.python.org/3/library/os.html#utf8-mode</a></td><td class="time"><a href="#t2022-02-19T14:36:27" class="time">14:36</a></td></tr>
<tr id="t2022-02-19T14:36:31"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">&quot;The Python UTF-8 Mode is enabled if the LC_CTYPE locale is C or POSIX at Python startup (see the PyConfig_Read() function).&quot;</td><td class="time"><a href="#t2022-02-19T14:36:31" class="time">14:36</a></td></tr>
<tr id="t2022-02-19T14:37:16"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">since python 3.7 sys.getfilesystemencoding retunrs 'utf-8' in the &quot;python utf8 mode&quot;</td><td class="time"><a href="#t2022-02-19T14:37:16" class="time">14:37</a></td></tr>
<tr id="t2022-02-19T14:37:53"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I honestly don't know what to expect now, this is in the bowels of the python stack, where things are arguably a bit complex</td><td class="time"><a href="#t2022-02-19T14:37:53" class="time">14:37</a></td></tr>
<tr id="t2022-02-19T14:38:01"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">assuming it is using utf8</td><td class="time"><a href="#t2022-02-19T14:38:01" class="time">14:38</a></td></tr>
<tr id="t2022-02-19T14:38:23"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I don't see how we would fail on encoding</td><td class="time"><a href="#t2022-02-19T14:38:23" class="time">14:38</a></td></tr>
<tr id="t2022-02-19T14:39:59"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP:my last idea is that modifying os.environ indeed calls putenv which may end up doing stuff I remarked upon earlier (race), but I don't think this is very likely</td><td class="time"><a href="#t2022-02-19T14:39:59" class="time">14:39</a></td></tr>
<tr id="t2022-02-19T14:44:34"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: whether it does or doesn't the question is how does os.environ's self._data become inconsistent</td><td class="time"><a href="#t2022-02-19T14:44:34" class="time">14:44</a></td></tr>
<tr id="t2022-02-19T14:45:06"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">it should be set to something utf-8 and should be encoding/decoding consistently</td><td class="time"><a href="#t2022-02-19T14:45:06" class="time">14:45</a></td></tr>
<tr id="t2022-02-19T14:46:29"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: is there any chance there are concurrent usages of the environment?</td><td class="time"><a href="#t2022-02-19T14:46:29" class="time">14:46</a></td></tr>
<tr id="t2022-02-19T14:46:57"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: one more wild idea is surrogate escapes or whatever that thing was called exactly,</td><td class="time"><a href="#t2022-02-19T14:46:57" class="time">14:46</a></td></tr>
<tr id="t2022-02-19T14:47:07"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">invalid thing encoding happily but upsetting on the receiving end somehow</td><td class="time"><a href="#t2022-02-19T14:47:07" class="time">14:47</a></td></tr>
<tr id="t2022-02-19T14:47:10"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">just wild guess</td><td class="time"><a href="#t2022-02-19T14:47:10" class="time">14:47</a></td></tr>
<tr id="t2022-02-19T14:49:31"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: you may have an idea there actually, sstate.bbclass does put this in a ThreadPool</td><td class="time"><a href="#t2022-02-19T14:49:31" class="time">14:49</a></td></tr>
<tr id="t2022-02-19T14:49:38"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">!</td><td class="time"><a href="#t2022-02-19T14:49:38" class="time">14:49</a></td></tr>
<tr id="t2022-02-19T14:49:49"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">there's no safety against concurrent modification</td><td class="time"><a href="#t2022-02-19T14:49:49" class="time">14:49</a></td></tr>
<tr id="t2022-02-19T14:50:23"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">well, python is meant to have some, but...</td><td class="time"><a href="#t2022-02-19T14:50:23" class="time">14:50</a></td></tr>
<tr id="t2022-02-19T14:50:32"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I meant in os._Environ</td><td class="time"><a href="#t2022-02-19T14:50:32" class="time">14:50</a></td></tr>
<tr id="t2022-02-19T14:50:41"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">python only guarantees so much</td><td class="time"><a href="#t2022-02-19T14:50:41" class="time">14:50</a></td></tr>
<tr id="t2022-02-19T14:50:46"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">for larger structures there is none</td><td class="time"><a href="#t2022-02-19T14:50:46" class="time">14:50</a></td></tr>
<tr id="t2022-02-19T14:50:48"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">right</td><td class="time"><a href="#t2022-02-19T14:50:48" class="time">14:50</a></td></tr>
<tr id="t2022-02-19T14:51:02"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">your earlier remark, about copying the whole thing as a dict might be interesting</td><td class="time"><a href="#t2022-02-19T14:51:02" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:06"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">then you get a plain python dic</td><td class="time"><a href="#t2022-02-19T14:51:06" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:13"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">not the more complex and fancy _Environ type</td><td class="time"><a href="#t2022-02-19T14:51:13" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:19"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">no changes to libc environment</td><td class="time"><a href="#t2022-02-19T14:51:19" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:30"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">and you can grab a lock (bitbake side) around access to os.environ</td><td class="time"><a href="#t2022-02-19T14:51:30" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:36"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">We need to setup the environment correctly at the top level, then it won't need to mess around with it</td><td class="time"><a href="#t2022-02-19T14:51:36" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:51:43"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I'm on super weak network until I have a replacement link installed but I'm trying to clone bitbake to make a small patch</td><td class="time"><a href="#t2022-02-19T14:51:43" class="time">14:51</a></td></tr>
<tr id="t2022-02-19T14:52:47"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">This isn't as simple as a lock. It will fix some errors but not others</td><td class="time"><a href="#t2022-02-19T14:52:47" class="time">14:52</a></td></tr>
<tr id="t2022-02-19T14:54:30"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I'm not sure if you need to modify the real environment of the python process</td><td class="time"><a href="#t2022-02-19T14:54:30" class="time">14:54</a></td></tr>
<tr id="t2022-02-19T14:54:49"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">but if not, you can move out of the real environment type and use a plain dict (early, with a lock)</td><td class="time"><a href="#t2022-02-19T14:54:49" class="time">14:54</a></td></tr>
<tr id="t2022-02-19T14:55:05"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">and then pass the simpler env dict down to whatever needs it</td><td class="time"><a href="#t2022-02-19T14:55:05" class="time">14:55</a></td></tr>
<tr id="t2022-02-19T14:55:25"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">IIRC python still guarantees dict modification to be atomic (for the moment)</td><td class="time"><a href="#t2022-02-19T14:55:25" class="time">14:55</a></td></tr>
<tr id="t2022-02-19T14:56:15"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: separately, would you be interested in <a href="https://paste.ubuntu.com/p/HZxMHzSrtn/?" rel="nofollow">https://paste.ubuntu.com/p/HZxMHzSrtn/?</a></td><td class="time"><a href="#t2022-02-19T14:56:15" class="time">14:56</a></td></tr>
<tr id="t2022-02-19T14:56:57"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: to clarify some of my earlier comments, I cannot send mail from my work address at all, not from an environment that I cannot use for work (inside corp vpn that is disconnected from internet)</td><td class="time"><a href="#t2022-02-19T14:56:57" class="time">14:56</a></td></tr>
<tr id="t2022-02-19T14:57:50"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: we need to modify the environment</td><td class="time"><a href="#t2022-02-19T14:57:50" class="time">14:57</a></td></tr>
<tr id="t2022-02-19T14:58:10"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">the real process environment you mean?</td><td class="time"><a href="#t2022-02-19T14:58:10" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:15"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">yes</td><td class="time"><a href="#t2022-02-19T14:58:15" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:20"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(vs having a modified env block to pass to subprocess)</td><td class="time"><a href="#t2022-02-19T14:58:20" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:21"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">ok</td><td class="time"><a href="#t2022-02-19T14:58:21" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:29"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">hmm, then that has to be guarded with some lock :/</td><td class="time"><a href="#t2022-02-19T14:58:29" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:30"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">It says I need to login to see that paste :/</td><td class="time"><a href="#t2022-02-19T14:58:30" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T14:58:50"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I think this is a wake up call for this code, there are likely other issues here</td><td class="time"><a href="#t2022-02-19T14:58:50" class="time">14:58</a></td></tr>
<tr id="t2022-02-19T15:01:06"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Not being able to send email from work is problematic given it is how the project operates :(</td><td class="time"><a href="#t2022-02-19T15:01:06" class="time">15:01</a></td></tr>
<tr id="t2022-02-19T15:01:48"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I might send it from my personal address where I have a working SMTP system I can use while on the normal internet</td><td class="time"><a href="#t2022-02-19T15:01:48" class="time">15:01</a></td></tr>
<tr id="t2022-02-19T15:02:33"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: can you use a pastebin which doesn't require a login?</td><td class="time"><a href="#t2022-02-19T15:02:33" class="time">15:02</a></td></tr>
<tr id="t2022-02-19T15:02:46"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">sure, sorry, I use this one since it's the default</td><td class="time"><a href="#t2022-02-19T15:02:46" class="time">15:02</a></td></tr>
<tr id="t2022-02-19T15:03:06"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(ubuntu pastebin is using this to prevent people from hosting content there and using it for attacks)</td><td class="time"><a href="#t2022-02-19T15:03:06" class="time">15:03</a></td></tr>
<tr id="t2022-02-19T15:03:53"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Using a different email address like that may be a necessary workaround. Some people have trouble accessing the web too, corporate environments are tricky :(</td><td class="time"><a href="#t2022-02-19T15:03:53" class="time">15:03</a></td></tr>
<tr id="t2022-02-19T15:04:47"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685"><a href="https://paste.debian.net/1231511/" rel="nofollow">https://paste.debian.net/1231511/</a></td><td class="time"><a href="#t2022-02-19T15:04:47" class="time">15:04</a></td></tr>
<tr id="t2022-02-19T15:04:50"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">this one should work</td><td class="time"><a href="#t2022-02-19T15:04:50" class="time">15:04</a></td></tr>
<tr id="t2022-02-19T15:06:18"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">looking at utils.py's environment function I would really stick a lock around that clone but that's only as good as having the same lock around all the other modifications</td><td class="time"><a href="#t2022-02-19T15:06:18" class="time">15:06</a></td></tr>
<tr id="t2022-02-19T15:06:58"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">there are 127 references to os.environ in bitbake tree now</td><td class="time"><a href="#t2022-02-19T15:06:58" class="time">15:06</a></td></tr>
<tr id="t2022-02-19T15:07:04"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">yes, that does. The third patch is fine. The second patch worries me a bit as we probably don't handle empty values elsewhere well and it may be easier not to support them</td><td class="time"><a href="#t2022-02-19T15:07:04" class="time">15:07</a></td></tr>
<tr id="t2022-02-19T15:07:40"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">The first change should be cosmetic but I am not so keen on them in general as there is a risk of breaking things for not that much gain</td><td class="time"><a href="#t2022-02-19T15:07:40" class="time">15:07</a></td></tr>
<tr id="t2022-02-19T15:08:18"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: the lock would fix this error but not the big picture issue of why these are being set in the first place</td><td class="time"><a href="#t2022-02-19T15:08:18" class="time">15:08</a></td></tr>
<tr id="t2022-02-19T15:13:42"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: one more (perhaps ugly) idea is to monkey-patch os.environ with a thread safe copy</td><td class="time"><a href="#t2022-02-19T15:13:42" class="time">15:13</a></td></tr>
<tr id="t2022-02-19T15:13:53"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">that is, a class that hides the real value and grabs a lock around all ops</td><td class="time"><a href="#t2022-02-19T15:13:53" class="time">15:13</a></td></tr>
<tr id="t2022-02-19T15:14:10-2"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">no more corrputed representation</td><td class="time"><a href="#t2022-02-19T15:14:10-2" class="time">15:14</a></td></tr>
<tr id="t2022-02-19T15:14:21"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">but not sure how that affects the fact that many threads think they own environment</td><td class="time"><a href="#t2022-02-19T15:14:21" class="time">15:14</a></td></tr>
<tr id="t2022-02-19T15:14:26"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">probably only a little</td><td class="time"><a href="#t2022-02-19T15:14:26" class="time">15:14</a></td></tr>
<tr id="t2022-02-19T15:15:36"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: I have a few more patches that fix typos I found while looking</td><td class="time"><a href="#t2022-02-19T15:15:36" class="time">15:15</a></td></tr>
<tr id="t2022-02-19T15:20:59"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: as I said, this bug shows there is a higher level threading issue in sstate.bbclass so I need to focus on fixing that</td><td class="time"><a href="#t2022-02-19T15:20:59" class="time">15:20</a></td></tr>
<tr id="t2022-02-19T15:21:07"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: typo fixes sound good</td><td class="time"><a href="#t2022-02-19T15:21:07" class="time">15:21</a></td></tr>
<tr id="t2022-02-19T15:21:16"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">as one or as many small patches?</td><td class="time"><a href="#t2022-02-19T15:21:16" class="time">15:21</a></td></tr>
<tr id="t2022-02-19T15:21:32"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: depends on where/what they are :/</td><td class="time"><a href="#t2022-02-19T15:21:32" class="time">15:21</a></td></tr>
<tr id="t2022-02-19T15:21:44"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">54978697 (HEAD -&gt; master) tinfoil: fix typo: &quot;something&quot;... (full message at <a href="https://libera.ems.host/_matrix/media/r0/download/libera.chat/5057fc3882dd52ab36ebc11f1f704f5bd16ba406" rel="nofollow">https://libera.ems.host/_matrix/media/r0/download/libera.chat/5057fc3882dd52ab36ebc11f1f704f5bd16ba406</a>)</td><td class="time"><a href="#t2022-02-19T15:21:44" class="time">15:21</a></td></tr>
<tr id="t2022-02-19T15:22:58"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: individually should be ok for those, they look to all be in bitbake</td><td class="time"><a href="#t2022-02-19T15:22:58" class="time">15:22</a></td></tr>
<tr id="t2022-02-19T15:23:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">ok</td><td class="time"><a href="#t2022-02-19T15:23:08" class="time">15:23</a></td></tr>
<tr id="t2022-02-19T15:41:53"><td class="action" colspan="2">* zyga[m] has a bag of patches and wonders what to do with them</td><td><a href="#t2022-02-19T15:41:53" class="time">15:41</a></td></tr>
<tr id="t2022-02-19T15:45:14"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685"><a href="https://github.com/openembedded/bitbake/compare/master...zyga:tweak/typos?expand=1" rel="nofollow">https://github.com/openembedded/bitbake/compare/master...zyga:tweak/typos?expand=1</a> is the set I have</td><td class="time"><a href="#t2022-02-19T15:45:14" class="time">15:45</a></td></tr>
<tr id="t2022-02-19T15:46:24"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">again, no smtp setup I can use</td><td class="time"><a href="#t2022-02-19T15:46:24" class="time">15:46</a></td></tr>
<tr id="t2022-02-19T15:49:27"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: If I remember correctly, you told me that there is a way to configure the PR server so that if you, e.g., make a change, build, and then revert the change, the PR server still increases the PR rather than go back to the previous PR. But I have not been able to figure out how to do that.</td><td class="time"><a href="#t2022-02-19T15:49:27" class="time">15:49</a></td></tr>
<tr id="t2022-02-19T15:55:45"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: change prserv.db.PRData(self.dbfile, read_only=self.read_only) to prserv.db.PRData(self.dbfile, read_only=self.read_only, nohist=False)</td><td class="time"><a href="#t2022-02-19T15:55:45" class="time">15:55</a></td></tr>
<tr id="t2022-02-19T15:57:06"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: it was at some point a config but is only a parameter now :/</td><td class="time"><a href="#t2022-02-19T15:57:06" class="time">15:57</a></td></tr>
<tr id="t2022-02-19T15:58:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I thought you said you had a personal account?</td><td class="time"><a href="#t2022-02-19T15:58:42" class="time">15:58</a></td></tr>
<tr id="t2022-02-19T15:59:02"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">yes but it doesn't let me send with @huawei.com account</td><td class="time"><a href="#t2022-02-19T15:59:02" class="time">15:59</a></td></tr>
<tr id="t2022-02-19T15:59:11"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I just tried sending and got &quot;5.7.1 Not authorised to send from this header address&quot;</td><td class="time"><a href="#t2022-02-19T15:59:11" class="time">15:59</a></td></tr>
<tr id="t2022-02-19T15:59:35"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I don't know what to do with that</td><td class="time"><a href="#t2022-02-19T15:59:35" class="time">15:59</a></td></tr>
<tr id="t2022-02-19T15:59:43"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">my personal mail is on fastmail</td><td class="time"><a href="#t2022-02-19T15:59:43" class="time">15:59</a></td></tr>
<tr id="t2022-02-19T16:00:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: you can just put a From: XXX &lt;yyy@zzz&gt; line at the start of the mail</td><td class="time"><a href="#t2022-02-19T16:00:42" class="time">16:00</a></td></tr>
<tr id="t2022-02-19T16:01:18"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">the commit will apply from the yyy@zzz address</td><td class="time"><a href="#t2022-02-19T16:01:18" class="time">16:01</a></td></tr>
<tr id="t2022-02-19T16:05:21"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: not sure if that worked, git printed tons of mail headers back on me</td><td class="time"><a href="#t2022-02-19T16:05:21" class="time">16:05</a></td></tr>
<tr id="t2022-02-19T16:05:26"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">result 250</td><td class="time"><a href="#t2022-02-19T16:05:26" class="time">16:05</a></td></tr>
<tr id="t2022-02-19T16:12:41"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: No wonder I couldn't find that. I was expecting a bitbake variable PRSERV_&lt;something&gt; or similar. Is there any reason this is not more easily available, or is jus that no one has implemented support for it?</td><td class="time"><a href="#t2022-02-19T16:12:41" class="time">16:12</a></td></tr>
<tr id="t2022-02-19T16:13:06"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: I think it just got lost, no good reason</td><td class="time"><a href="#t2022-02-19T16:13:06" class="time">16:13</a></td></tr>
<tr id="t2022-02-19T16:20:19"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Ok, then I'll see if I can implement the necessary support. Previously having the PR go backwards when revering a change was normally just a nuisance, but with the recent change that causes the build to fail also for errors has made this a bit more irritating.</td><td class="time"><a href="#t2022-02-19T16:20:19" class="time">16:20</a></td></tr>
<tr id="t2022-02-19T16:21:36"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Is `PRSERV_NOHIST` ok as variable to control this?</td><td class="time"><a href="#t2022-02-19T16:21:36" class="time">16:21</a></td></tr>
<tr id="t2022-02-19T16:26:56"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: PRSERV_HISTORY_MODE ?</td><td class="time"><a href="#t2022-02-19T16:26:56" class="time">16:26</a></td></tr>
<tr id="t2022-02-19T16:27:11"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Works for me :)</td><td class="time"><a href="#t2022-02-19T16:27:11" class="time">16:27</a></td></tr>
<tr id="t2022-02-19T16:28:46"><th class="nick" style="background: #488888">smurray</th><td class="text" style="color: #488888">Saur[m]: I think dl9pf is considering setting up a binary packagefeed for AGL, so this caught my eye.&nbsp;&nbsp;I'm guessing it's difficult to have dnf do the rollback in this situation?</td><td class="time"><a href="#t2022-02-19T16:28:46" class="time">16:28</a></td></tr>
<tr id="t2022-02-19T16:29:11"><td class="action" colspan="2">* RP ponders what to do with the license changes</td><td><a href="#t2022-02-19T16:29:11" class="time">16:29</a></td></tr>
<tr id="t2022-02-19T16:29:36"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: I'm trying to cross reference with <a href="https://lists.openembedded.org/g/bitbake-devel/messages" rel="nofollow">https://lists.openembedded.org/g/bitbake-devel/messages</a> - did any of the typo patches arrive?</td><td class="time"><a href="#t2022-02-19T16:29:36" class="time">16:29</a></td></tr>
<tr id="t2022-02-19T16:29:46"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">I think we're not going to get any more patches until next week, which is understandable but leaves me with a master-next I can't do much with now :/</td><td class="time"><a href="#t2022-02-19T16:29:46" class="time">16:29</a></td></tr>
<tr id="t2022-02-19T16:30:22"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I can't see any in my email</td><td class="time"><a href="#t2022-02-19T16:30:22" class="time">16:30</a></td></tr>
<tr id="t2022-02-19T16:30:42"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: Non-member zygmunt.krynicki@huawei.com attempted to send message &quot;[PATCH 17/17] wget: Fix grammar &quot;can happen&quot;&quot;, via email&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="time"><a href="#t2022-02-19T16:30:42" class="time">16:30</a></td></tr>
<tr id="t2022-02-19T16:30:49"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">i.e. you're not a list member</td><td class="time"><a href="#t2022-02-19T16:30:49" class="time">16:30</a></td></tr>
<tr id="t2022-02-19T16:30:58"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I have to subscribe?</td><td class="time"><a href="#t2022-02-19T16:30:58" class="time">16:30</a></td></tr>
<tr id="t2022-02-19T16:31:19"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: yes, but you can suspend mail delivery if you don't want the email</td><td class="time"><a href="#t2022-02-19T16:31:19" class="time">16:31</a></td></tr>
<tr id="t2022-02-19T16:32:12"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Another thing that I have seen now and then is that the PRServer seems to forget what its been doing and goes back to 0 for all packages, causing errors like &quot;Package version for package alsa-lib went backwards which would break package feeds (from 0:1.2.6.1-r0.4 to 0:1.2.6.1-r0.0)&quot; for basically everything. Is this a known problem?</td><td class="time"><a href="#t2022-02-19T16:32:12" class="time">16:32</a></td></tr>
<tr id="t2022-02-19T16:32:34"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: no</td><td class="time"><a href="#t2022-02-19T16:32:34" class="time">16:32</a></td></tr>
<tr id="t2022-02-19T16:32:53"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Hmm, ok.</td><td class="time"><a href="#t2022-02-19T16:32:53" class="time">16:32</a></td></tr>
<tr id="t2022-02-19T16:33:29"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">I have no idea what's causing it, and have not seen any pattern to when it happens, so I don't have much to go on.</td><td class="time"><a href="#t2022-02-19T16:33:29" class="time">16:33</a></td></tr>
<tr id="t2022-02-19T16:40:28"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: sent again</td><td class="time"><a href="#t2022-02-19T16:40:28" class="time">16:40</a></td></tr>
<tr id="t2022-02-19T16:41:30"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I think they got through this time</td><td class="time"><a href="#t2022-02-19T16:41:30" class="time">16:41</a></td></tr>
<tr id="t2022-02-19T16:41:54"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: they did</td><td class="time"><a href="#t2022-02-19T16:41:54" class="time">16:41</a></td></tr>
<tr id="t2022-02-19T16:42:19"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: should I post the other three? I think you had doubts about the safety of the empty-value env items</td><td class="time"><a href="#t2022-02-19T16:42:19" class="time">16:42</a></td></tr>
<tr id="t2022-02-19T16:43:19"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: the last one was fine</td><td class="time"><a href="#t2022-02-19T16:43:19" class="time">16:43</a></td></tr>
<tr id="t2022-02-19T16:43:50"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">the loop invariant one?</td><td class="time"><a href="#t2022-02-19T16:43:50" class="time">16:43</a></td></tr>
<tr id="t2022-02-19T16:44:06"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">yes</td><td class="time"><a href="#t2022-02-19T16:44:06" class="time">16:44</a></td></tr>
<tr id="t2022-02-19T16:44:09"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">k</td><td class="time"><a href="#t2022-02-19T16:44:09" class="time">16:44</a></td></tr>
<tr id="t2022-02-19T16:44:41"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">done</td><td class="time"><a href="#t2022-02-19T16:44:41" class="time">16:44</a></td></tr>
<tr id="t2022-02-19T16:45:20"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">while I can fake-send my mail via fastmail, I can only receive feedback on my work computer</td><td class="time"><a href="#t2022-02-19T16:45:20" class="time">16:45</a></td></tr>
<tr id="t2022-02-19T16:45:43"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I will try to check any comments via the website</td><td class="time"><a href="#t2022-02-19T16:45:43" class="time">16:45</a></td></tr>
<tr id="t2022-02-19T16:46:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(that's a windows machine not connected to the regular internet)</td><td class="time"><a href="#t2022-02-19T16:46:08" class="time">16:46</a></td></tr>
<tr id="t2022-02-19T16:49:31"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">zyga[m]: Commented. ;)</td><td class="time"><a href="#t2022-02-19T16:49:31" class="time">16:49</a></td></tr>
<tr id="t2022-02-19T16:52:48"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">saur2000[m]: what should I do now? re-send?</td><td class="time"><a href="#t2022-02-19T16:52:48" class="time">16:52</a></td></tr>
<tr id="t2022-02-19T16:53:00"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(I have no way to see my work email here, I can only look at the website)</td><td class="time"><a href="#t2022-02-19T16:53:00" class="time">16:53</a></td></tr>
<tr id="t2022-02-19T16:53:31"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">(I've made the changes locally)</td><td class="time"><a href="#t2022-02-19T16:53:31" class="time">16:53</a></td></tr>
<tr id="t2022-02-19T16:54:08"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">zyga[m]: Well, typically, if you agree with my suggested changes, you update the commit locally, generate a new patch (with an increased patch number) and send it just like you sent the first patch.</td><td class="time"><a href="#t2022-02-19T16:54:08" class="time">16:54</a></td></tr>
<tr id="t2022-02-19T16:54:23"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">what is an increased patch number?</td><td class="time"><a href="#t2022-02-19T16:54:23" class="time">16:54</a></td></tr>
<tr id="t2022-02-19T16:54:45"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">and when I send it again, do I have to refer to the earlier mail message somehow?</td><td class="time"><a href="#t2022-02-19T16:54:45" class="time">16:54</a></td></tr>
<tr id="t2022-02-19T16:56:31"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">In the mail subject, the first patch you sent had '[PATCH]' in it. Update that to, e.g., '[PATCHv2]'. You can do that with by using `git format-patch --subject-prefix='PATCHv2' ...` when you generate the patch.</td><td class="time"><a href="#t2022-02-19T16:56:31" class="time">16:56</a></td></tr>
<tr id="t2022-02-19T16:57:00"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I see, is --subject-prefix also applicable to git send-email?</td><td class="time"><a href="#t2022-02-19T16:57:00" class="time">16:57</a></td></tr>
<tr id="t2022-02-19T16:57:30"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I think so</td><td class="time"><a href="#t2022-02-19T16:57:30" class="time">16:57</a></td></tr>
<tr id="t2022-02-19T16:59:51"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">re-sent</td><td class="time"><a href="#t2022-02-19T16:59:51" class="time">16:59</a></td></tr>
<tr id="t2022-02-19T17:00:53"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Looks correct. :)</td><td class="time"><a href="#t2022-02-19T17:00:53" class="time">17:00</a></td></tr>
<tr id="t2022-02-19T17:01:14"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">thanks!</td><td class="time"><a href="#t2022-02-19T17:01:14" class="time">17:01</a></td></tr>
<tr id="t2022-02-19T17:06:34"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I think this may get somewhat tedious once I do any non-trivial changes</td><td class="time"><a href="#t2022-02-19T17:06:34" class="time">17:06</a></td></tr>
<tr id="t2022-02-19T17:09:27"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: you could use a different email address and just put the From: at the start of the commit log which git will then handle correctly</td><td class="time"><a href="#t2022-02-19T17:09:27" class="time">17:09</a></td></tr>
<tr id="t2022-02-19T17:20:56"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: I'll ask my colleagues how they handle this</td><td class="time"><a href="#t2022-02-19T17:20:56" class="time">17:20</a></td></tr>
<tr id="t2022-02-19T17:21:21"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">offtopic: is there anyone looking at type hints for bitbake?</td><td class="time"><a href="#t2022-02-19T17:21:21" class="time">17:21</a></td></tr>
<tr id="t2022-02-19T17:24:28"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: should I start from master or master-next?</td><td class="time"><a href="#t2022-02-19T17:24:28" class="time">17:24</a></td></tr>
<tr id="t2022-02-19T17:27:29"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: for what?</td><td class="time"><a href="#t2022-02-19T17:27:29" class="time">17:27</a></td></tr>
<tr id="t2022-02-19T17:27:50"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: for any changes I make</td><td class="time"><a href="#t2022-02-19T17:27:50" class="time">17:27</a></td></tr>
<tr id="t2022-02-19T17:28:00"><td class="action" colspan="2">* zyga[m] is unsure about what master-next is for</td><td><a href="#t2022-02-19T17:28:00" class="time">17:28</a></td></tr>
<tr id="t2022-02-19T17:29:53"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">zyga[m]: master-next is typically where RP tests and verifies changes before they are integrated. It also makes it possible for the rest of us to see what is on its way in.</td><td class="time"><a href="#t2022-02-19T17:29:53" class="time">17:29</a></td></tr>
<tr id="t2022-02-19T17:30:12"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">aha, so it's more like the outbox while master is the inbox?</td><td class="time"><a href="#t2022-02-19T17:30:12" class="time">17:30</a></td></tr>
<tr id="t2022-02-19T17:30:35"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Typically you base your work on master. Only if you are making changes that depend on other changes that are in master-next should you use that instead.</td><td class="time"><a href="#t2022-02-19T17:30:35" class="time">17:30</a></td></tr>
<tr id="t2022-02-19T17:32:14"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">understood</td><td class="time"><a href="#t2022-02-19T17:32:14" class="time">17:32</a></td></tr>
<tr id="t2022-02-19T18:05:09"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: where you've changed the same file I've squashed the commits</td><td class="time"><a href="#t2022-02-19T18:05:09" class="time">18:05</a></td></tr>
<tr id="t2022-02-19T18:05:30"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: sure</td><td class="time"><a href="#t2022-02-19T18:05:30" class="time">18:05</a></td></tr>
<tr id="t2022-02-19T18:05:44"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I sorted by file to make that easier</td><td class="time"><a href="#t2022-02-19T18:05:44" class="time">18:05</a></td></tr>
<tr id="t2022-02-19T18:23:27"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: does bitbake still tries to support python 2.x?</td><td class="time"><a href="#t2022-02-19T18:23:27" class="time">18:23</a></td></tr>
<tr id="t2022-02-19T18:24:25"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: no</td><td class="time"><a href="#t2022-02-19T18:24:25" class="time">18:24</a></td></tr>
<tr id="t2022-02-19T18:24:45"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: I'm looking at lib/codegen, shall I send a patch that removes two python2.6 specific node visitors?</td><td class="time"><a href="#t2022-02-19T18:24:45" class="time">18:24</a></td></tr>
<tr id="t2022-02-19T18:24:50"><td class="action" colspan="2">* zyga[m] is trying to grok bitbake better </td><td><a href="#t2022-02-19T18:24:50" class="time">18:24</a></td></tr>
<tr id="t2022-02-19T18:25:43"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: some of code there is copied from an upstream so I suspect that one can be left</td><td class="time"><a href="#t2022-02-19T18:25:43" class="time">18:25</a></td></tr>
<tr id="t2022-02-19T18:26:29"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I was thinking of Source.Generator.visit_{Print,Repr}</td><td class="time"><a href="#t2022-02-19T18:26:29" class="time">18:26</a></td></tr>
<tr id="t2022-02-19T18:26:40"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Minimum Python version for bitbake is currently 3.6. However, we have not started to use 3.6-features like f-strings as it makes it harder to backport code to the Dunfell LTS release.</td><td class="time"><a href="#t2022-02-19T18:26:40" class="time">18:26</a></td></tr>
<tr id="t2022-02-19T18:27:08"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">based on my understanding that is dead code as the corresponding AST nodes no longer exist</td><td class="time"><a href="#t2022-02-19T18:27:08" class="time">18:27</a></td></tr>
<tr id="t2022-02-19T18:29:31"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: when you say &quot;can be left&quot; do you mean &quot;can be left intact&quot; or &quot;can be removed&quot;</td><td class="time"><a href="#t2022-02-19T18:29:31" class="time">18:29</a></td></tr>
<tr id="t2022-02-19T18:29:53"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: please just leave that file alone, it is a copy of an upstream module</td><td class="time"><a href="#t2022-02-19T18:29:53" class="time">18:29</a></td></tr>
<tr id="t2022-02-19T18:29:57"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40"><a href="https://pypi.org/project/codegen/" rel="nofollow">https://pypi.org/project/codegen/</a></td><td class="time"><a href="#t2022-02-19T18:29:57" class="time">18:29</a></td></tr>
<tr id="t2022-02-19T18:30:01"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">I see</td><td class="time"><a href="#t2022-02-19T18:30:01" class="time">18:30</a></td></tr>
<tr id="t2022-02-19T18:37:53"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Hmm, now I've been looking at the PRServer code for a while, and if I read the code and comments correctly, the default is `nohist=True`, which according to the documentation, means that the server should run in a mode where the PR can never go backwards (which is what I want). However, this does not match my experience if I do a build, make a change, do a build, revert the change, do a build as this leads to a PR going backwards. If I change</td><td class="time"><a href="#t2022-02-19T18:37:53" class="time">18:37</a></td></tr>
<tr id="t2022-02-19T18:37:53-2"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">it to `nohist=False`, the behavior remains the same... So it seems my quest for an option to make the PRServer do what I want has turned into a quest to find out why it is not doing what it is expected to do. Back to debugging...</td><td class="time"><a href="#t2022-02-19T18:37:53-2" class="time">18:37</a></td></tr>
<tr id="t2022-02-19T18:39:38"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: you can see the nohist True/False codepaths and in theory this is what those did</td><td class="time"><a href="#t2022-02-19T18:39:38" class="time">18:39</a></td></tr>
<tr id="t2022-02-19T18:39:59"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: I did wonder why it was defaulting to True and not working :/</td><td class="time"><a href="#t2022-02-19T18:39:59" class="time">18:39</a></td></tr>
<tr id="t2022-02-19T18:40:15"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: you know as much as I do on this at this point. It once did work</td><td class="time"><a href="#t2022-02-19T18:40:15" class="time">18:40</a></td></tr>
<tr id="t2022-02-19T18:52:36"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Yeah, that's what I assumed. Will have to dig through 10 years of changes... But first, dinner.</td><td class="time"><a href="#t2022-02-19T18:52:36" class="time">18:52</a></td></tr>
<tr id="t2022-02-19T19:15:26"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: looks like a switch was never there from when it was added: <a href="https://git.yoctoproject.org/poky/commit/bitbake/lib/prserv?id=30a9bc6c92a8920d6e9c4a4b93b83bdbe5d48e78" rel="nofollow">https://git.yoctoproject.org/poky/commit/bitbake/lib/prserv?id=30a9bc6c92a8920d6e9c4a4b93b83bdbe5d48e78</a></td><td class="time"><a href="#t2022-02-19T19:15:26" class="time">19:15</a></td></tr>
<tr id="t2022-02-19T19:30:17"><th class="nick" style="background: #8c4a4a">JaMa</th><td class="text" style="color: #8c4a4a">should glibc LICENSE include BSD-4-Clause-UC ? LICENSES file still refers to it in <a href="https://github.com/bminor/glibc/blob/master/LICENSES#L9" rel="nofollow">https://github.com/bminor/glibc/blob/master/LICENSES#L9</a> but it's not clear which files are &quot;All code incorporated from 4.4 BSD&quot;</td><td class="time"><a href="#t2022-02-19T19:30:17" class="time">19:30</a></td></tr>
<tr id="t2022-02-19T19:31:18"><th class="nick" style="background: #8c4a4a">JaMa</th><td class="text" style="color: #8c4a4a">I was just wondering what to do with bbappend from 2014 originally for eglibc <a href="https://github.com/openwebos/meta-webos/commit/8eb313e4303defbe495cf7f91974799046975fca" rel="nofollow">https://github.com/openwebos/meta-webos/commit/8eb313e4303defbe495cf7f91974799046975fca</a></td><td class="time"><a href="#t2022-02-19T19:31:18" class="time">19:31</a></td></tr>
<tr id="t2022-02-19T19:38:27"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">JaMa: Based on that the license file says the third clause was removed on <a href="https://github.com/bminor/glibc/blob/b98d0bbf747f39770e0caba7e984ce9f8f900330/LICENSES#L24" rel="nofollow">https://github.com/bminor/glibc/blob/b98d0bbf747f39770e0caba7e984ce9f8f900330/LICENSES#L24</a> I would argue that it shouldn't include BSD-4-Clause.</td><td class="time"><a href="#t2022-02-19T19:38:27" class="time">19:38</a></td></tr>
<tr id="t2022-02-19T19:41:08"><th class="nick" style="background: #8c4a4a">JaMa</th><td class="text" style="color: #8c4a4a">Saur[m]: good point, I was just looking which BSD-* in common-licenses and completely overlooked this removed part, thanks</td><td class="time"><a href="#t2022-02-19T19:41:08" class="time">19:41</a></td></tr>
<tr id="t2022-02-19T19:41:39"><th class="nick" style="background: #8c4a4a">JaMa</th><td class="text" style="color: #8c4a4a">which looks the closest</td><td class="time"><a href="#t2022-02-19T19:41:39" class="time">19:41</a></td></tr>
<tr id="t2022-02-19T20:20:57"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">JaMa: it does look like some BSD should be listed there</td><td class="time"><a href="#t2022-02-19T20:20:57" class="time">20:20</a></td></tr>
<tr id="t2022-02-19T20:21:11"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">JaMa: what do the other distros like debian do?</td><td class="time"><a href="#t2022-02-19T20:21:11" class="time">20:21</a></td></tr>
<tr id="t2022-02-19T20:22:16"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: a few more patches, not sure if you like type annotations, I sent an rfc to test the waters</td><td class="time"><a href="#t2022-02-19T20:22:16" class="time">20:22</a></td></tr>
<tr id="t2022-02-19T20:22:24"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: also one more typo and a small tweak</td><td class="time"><a href="#t2022-02-19T20:22:24" class="time">20:22</a></td></tr>
<tr id="t2022-02-19T20:22:50"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: from an outsider pov it would be good to drop a comment to files imported from other places, to make it clear that changes there are undesired</td><td class="time"><a href="#t2022-02-19T20:22:50" class="time">20:22</a></td></tr>
<tr id="t2022-02-19T20:22:57"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: We are not adding type annotations to bitbake</td><td class="time"><a href="#t2022-02-19T20:22:57" class="time">20:22</a></td></tr>
<tr id="t2022-02-19T20:23:26"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I suspect simplediff comes from an external source too, similar to codegen :/</td><td class="time"><a href="#t2022-02-19T20:23:26" class="time">20:23</a></td></tr>
<tr id="t2022-02-19T20:23:27"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: oh, too bad, I think they are very helpful</td><td class="time"><a href="#t2022-02-19T20:23:27" class="time">20:23</a></td></tr>
<tr id="t2022-02-19T20:23:42"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: that's fine, it's just an RFC</td><td class="time"><a href="#t2022-02-19T20:23:42" class="time">20:23</a></td></tr>
<tr id="t2022-02-19T20:24:28"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: may I ask why type annotations were rejected earlier?</td><td class="time"><a href="#t2022-02-19T20:24:28" class="time">20:24</a></td></tr>
<tr id="t2022-02-19T20:26:05"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: it is not standard python, it looks ugly and I don't think it aids readability at all, I think it makes it worse</td><td class="time"><a href="#t2022-02-19T20:26:05" class="time">20:26</a></td></tr>
<tr id="t2022-02-19T20:26:18"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: what do you mean it is not standard python?</td><td class="time"><a href="#t2022-02-19T20:26:18" class="time">20:26</a></td></tr>
<tr id="t2022-02-19T20:26:40"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">It's not only standard python but the semantics have now been standardized and typing has been added to stdlib</td><td class="time"><a href="#t2022-02-19T20:26:40" class="time">20:26</a></td></tr>
<tr id="t2022-02-19T20:26:54"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">it's not about readability, it's about machine verification in large codebases</td><td class="time"><a href="#t2022-02-19T20:26:54" class="time">20:26</a></td></tr>
<tr id="t2022-02-19T20:28:42"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Where does log messages from the PR Server end up? In the normal bitbake log, or somewhere else?</td><td class="time"><a href="#t2022-02-19T20:28:42" class="time">20:28</a></td></tr>
<tr id="t2022-02-19T20:29:23"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I don't see wide usage of that kind of typing in general python code and I'm not convinced it will help much of what bitbake does</td><td class="time"><a href="#t2022-02-19T20:29:23" class="time">20:29</a></td></tr>
<tr id="t2022-02-19T20:29:39"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: I do care a lot more about how readable the code is</td><td class="time"><a href="#t2022-02-19T20:29:39" class="time">20:29</a></td></tr>
<tr id="t2022-02-19T20:30:24"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: to be honest I don't remember</td><td class="time"><a href="#t2022-02-19T20:30:24" class="time">20:30</a></td></tr>
<tr id="t2022-02-19T20:30:43"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">why am I still here on a weekend :(</td><td class="time"><a href="#t2022-02-19T20:30:43" class="time">20:30</a></td></tr>
<tr id="t2022-02-19T20:30:44"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Ok, no problem, I'll figure it out. ;)</td><td class="time"><a href="#t2022-02-19T20:30:44" class="time">20:30</a></td></tr>
<tr id="t2022-02-19T20:34:36"><th class="nick" style="background: #854685">zyga[m]</th><td class="text" style="color: #854685">RP: if that's the final decision I have no other things to convince you, bitbake is a huge python application and having type checking would definitely help to spot elusive and rare mistakes but it's certainly a change in how the code looks like. It serves as additional documentation but I guess not everyone likes it.</td><td class="time"><a href="#t2022-02-19T20:34:36" class="time">20:34</a></td></tr>
<tr id="t2022-02-19T20:35:08"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">zyga[m]: our time is better spent elsewhere</td><td class="time"><a href="#t2022-02-19T20:35:08" class="time">20:35</a></td></tr>
<tr id="t2022-02-19T20:38:24"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">sakoman: unfortunately I suspect dunfell is open to the race I'm trying to fix in master but in dunfell it is through the env changes in bb.utils.export_proxies :/</td><td class="time"><a href="#t2022-02-19T20:38:24" class="time">20:38</a></td></tr>
<tr id="t2022-02-19T20:38:36"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">sakoman: caused by the threading in sstate.bbclass</td><td class="time"><a href="#t2022-02-19T20:38:36" class="time">20:38</a></td></tr>
<tr id="t2022-02-19T20:39:11"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">sakoman: it less likely in dunfell on the autobuilder due to the lack of proxy vars in use there</td><td class="time"><a href="#t2022-02-19T20:39:11" class="time">20:39</a></td></tr>
<tr id="t2022-02-19T21:39:32"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">Saur[m]: I did have a look at that logging change. If I split the tests into 16 originals and 4 from you, reverting that change gives 13 pass 7 failures compared to 19 pass and 1 fail before reverting it :/</td><td class="time"><a href="#t2022-02-19T21:39:32" class="time">21:39</a></td></tr>
<tr id="t2022-02-19T21:40:21"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">sorry, 12 original and 8 from you</td><td class="time"><a href="#t2022-02-19T21:40:21" class="time">21:40</a></td></tr>
<tr id="t2022-02-19T22:01:23"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">RP: Yes, I am aware that reverting the change will bring back duplicated logs in a number of cases, and it is definitely not what I really want. However, that one case where there now is no log is a serious problem when something does go wrong. That said, if you happen to have some idea on how to fix it then I am all ears. Otherwise leave it be for now and I'll look at it. It's no real hurry since we would not be able to fix it in time for</td><td class="time"><a href="#t2022-02-19T22:01:23" class="time">22:01</a></td></tr>
<tr id="t2022-02-19T22:01:23-2"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Honister 3.4.2 anyway (as I believe it is already in QA).</td><td class="time"><a href="#t2022-02-19T22:01:23-2" class="time">22:01</a></td></tr>
<tr id="t2022-02-19T22:04:20"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">I have a strict no-fork policy for Yocto/OE, and we only use the official Yocto releases, so I have until 3.4.3 to fix it. Until then we will have to make do with `bitbake -v`.</td><td class="time"><a href="#t2022-02-19T22:04:20" class="time">22:04</a></td></tr>
<tr id="t2022-02-19T23:49:09"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Ok, I've looked into the prserver now, and it is not to blame. It is doing what it is supposed to, based on some extra logging I added (I found the logs in `cache/prserv.log`). It is probably the sstate cache that is too good at what it does.</td><td class="time"><a href="#t2022-02-19T23:49:09" class="time">23:49</a></td></tr>
<tr id="t2022-02-19T23:52:29"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">The typical use case is `devtool modify foo`, modify foo and build it a couple of times, `devtool reset foo`, build foo and the PR goes backwards because the sstate is now back where it was before the `devtool modify` and since externalsrc is no longer active, there is nothing that invalidates the cache for foo and thus nothing will cause a new PR to be requested.</td><td class="time"><a href="#t2022-02-19T23:52:29" class="time">23:52</a></td></tr>
<tr id="t2022-02-19T23:52:53"><th class="nick" style="background: #42427e">Saur[m]</th><td class="text" style="color: #42427e">Oh well, at least I now know a bit more about the PRServer.</td><td class="time"><a href="#t2022-02-19T23:52:53" class="time">23:52</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2022-02-18.log.html">&#171; Friday, 2022-02-18</a> <a href="index.html">Index</a> <a href="%23yocto.2022-02-20.log.html">Sunday, 2022-02-20 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
