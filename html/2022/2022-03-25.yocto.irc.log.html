<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Friday, 2022-03-25</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Friday, 2022-03-25</h1>
<div class="navigation"> <a href="%23yocto.2022-03-24.log.html">&#171; Thursday, 2022-03-24</a> <a href="index.html">Index</a> <a href="%23yocto.2022-03-26.log.html">Saturday, 2022-03-26 &#187;</a> </div>
<table class="irclog">
<tr id="t2022-03-25T00:50:04"><th class="nick" style="background: #407a40">vmeson</th><td class="text" style="color: #407a40">ah, here I went and dug up the origin of decafbadbeef for Guest11 and they're gone. Oh, well, if they are searching archives: <a href="https://git.yoctoproject.org/poky/commit/?id=d0f0e5d9e69cc22f0c6635c7e416de93660c6bca" rel="nofollow">https://git.yoctoproject.org/poky/commit/?id=d0f0e5d9e69cc22f0c6635c7e416de93660c6bca</a></td><td class="time"><a href="#t2022-03-25T00:50:04" class="time">00:50</a></td></tr>
<tr id="t2022-03-25T00:52:05"><th class="nick" style="background: #407a40">vmeson</th><td class="text" style="color: #407a40">I started manualy wget'ing the opencv tarball. It's 1.9 GB and downloading on my lowly home connection is going to take almost an hour! Speed is varying b/w 250 KB/s and 1.2 MB/s.&nbsp;&nbsp;I think I'll make a graph of it!</td><td class="time"><a href="#t2022-03-25T00:52:05" class="time">00:52</a></td></tr>
<tr id="t2022-03-25T01:07:22"><th class="nick" style="background: #407a40">vmeson</th><td class="text" style="color: #407a40">There: Not so shocking that YP dlds are much slower than github downloads: <a href="https://postimg.cc/94H4zQ6p" rel="nofollow">https://postimg.cc/94H4zQ6p</a></td><td class="time"><a href="#t2022-03-25T01:07:22" class="time">01:07</a></td></tr>
<tr id="t2022-03-25T01:08:39"><th class="nick" style="background: #407a40">vmeson</th><td class="text" style="color: #407a40">halstead: the variation in dl speed does seem larger than expected but I honestly haven't been making enough graphs of t-put variation recently to know if this is expected.</td><td class="time"><a href="#t2022-03-25T01:08:39" class="time">01:08</a></td></tr>
<tr id="t2022-03-25T01:17:24"><td class="action" colspan="2">* vmeson notes frequent TCP &quot;Errors&quot; in the dl from YP but decides to use the bandwidth for Netflix rather than more tests.</td><td><a href="#t2022-03-25T01:17:24" class="time">01:17</a></td></tr>
<tr id="t2022-03-25T04:50:07"><th class="nick" style="background: #42427e">halstead</th><td class="text" style="color: #42427e">that server is on AWS euro network I believe. Let's run some tests in the morning.</td><td class="time"><a href="#t2022-03-25T04:50:07" class="time">04:50</a></td></tr>
<tr id="t2022-03-25T04:51:30"><th class="nick" style="background: #42427e">halstead</th><td class="text" style="color: #42427e">git.yoctoproject.org is anyway. Seeing the IP would help since there are multiple. downloads.yoxtoproject.org is in Portland Oregon USA.</td><td class="time"><a href="#t2022-03-25T04:51:30" class="time">04:51</a></td></tr>
<tr id="t2022-03-25T06:38:46"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">hi working porting an old BSP (Mentor) to dunfell, i gat this error</td><td class="time"><a href="#t2022-03-25T06:38:46" class="time">06:38</a></td></tr>
<tr id="t2022-03-25T06:38:50"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">ERROR: Nothing RPROVIDES 'nativesdk-qtbase-tools'</td><td class="time"><a href="#t2022-03-25T06:38:50" class="time">06:38</a></td></tr>
<tr id="t2022-03-25T06:39:15"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">there is no recipe for qtbase-tools btw</td><td class="time"><a href="#t2022-03-25T06:39:15" class="time">06:39</a></td></tr>
<tr id="t2022-03-25T06:39:23"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">only a &quot;qtbase&quot;</td><td class="time"><a href="#t2022-03-25T06:39:23" class="time">06:39</a></td></tr>
<tr id="t2022-03-25T07:23:32"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">&lt;dirtyflag&gt; &quot;hi working porting an old BSP (...&quot; &lt;- in what layer is the&nbsp;&nbsp;old nativesdk-qtbase-tools</td><td class="time"><a href="#t2022-03-25T07:23:32" class="time">07:23</a></td></tr>
<tr id="t2022-03-25T07:25:57"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">hmw[m]: unfortunately i have been provided only with a customer layer, where it's not</td><td class="time"><a href="#t2022-03-25T07:25:57" class="time">07:25</a></td></tr>
<tr id="t2022-03-25T07:26:30"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">looks like i have found a nativesdk-qttools</td><td class="time"><a href="#t2022-03-25T07:26:30" class="time">07:26</a></td></tr>
<tr id="t2022-03-25T07:27:20"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">dirtyflag: if i quick search <a href="https://layers.openembedded.org/layerindex/branch/dunfell/recipes/" rel="nofollow">https://layers.openembedded.org/layerindex/branch/dunfell/recipes/</a> i canÂ´t find it for you ( also not on older branches)</td><td class="time"><a href="#t2022-03-25T07:27:20" class="time">07:27</a></td></tr>
<tr id="t2022-03-25T07:27:59"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">hmw[m]: thanks, i have found a &quot;nativesdk-packagegroup-qt5-toolchain-host&quot;</td><td class="time"><a href="#t2022-03-25T07:27:59" class="time">07:27</a></td></tr>
<tr id="t2022-03-25T07:28:04"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">that seems ok for my case.</td><td class="time"><a href="#t2022-03-25T07:28:04" class="time">07:28</a></td></tr>
<tr id="t2022-03-25T07:30:12"><th class="nick" style="background: #818144">dirtyflag</th><td class="text" style="color: #818144">anyway, it brings in perl too, that gives a new romantic error &quot;maximum shebang size exceeded, the maximum size is 128&quot;</td><td class="time"><a href="#t2022-03-25T07:30:12" class="time">07:30</a></td></tr>
<tr id="t2022-03-25T07:39:09"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2022-03-25T07:39:09" class="time">07:39</a></td></tr>
<tr id="t2022-03-25T07:47:18"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">shebang is the first line of a script that starts with !# that may not be longer as 128</td><td class="time"><a href="#t2022-03-25T07:47:18" class="time">07:47</a></td></tr>
<tr id="t2022-03-25T09:37:10"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">yo dudX</td><td class="time"><a href="#t2022-03-25T09:37:10" class="time">09:37</a></td></tr>
<tr id="t2022-03-25T09:43:31"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">how do i force debug compile when compiling applications whit an yocto sdk</td><td class="time"><a href="#t2022-03-25T09:43:31" class="time">09:43</a></td></tr>
<tr id="t2022-03-25T09:44:49"><th class="nick" style="background: #8c4a4a">kroon_</th><td class="text" style="color: #8c4a4a">hmw[m], what build system is your application using ?</td><td class="time"><a href="#t2022-03-25T09:44:49" class="time">09:44</a></td></tr>
<tr id="t2022-03-25T09:45:18"><th class="nick" style="background: #8c4a4a">kroon_</th><td class="text" style="color: #8c4a4a">cause i would it say, it depends on the build system used</td><td class="time"><a href="#t2022-03-25T09:45:18" class="time">09:45</a></td></tr>
<tr id="t2022-03-25T09:45:24"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">qmake</td><td class="time"><a href="#t2022-03-25T09:45:24" class="time">09:45</a></td></tr>
<tr id="t2022-03-25T09:47:49"><th class="nick" style="background: #8c4a4a">kroon_</th><td class="text" style="color: #8c4a4a">I don't know much about qmake, but I would assume the same tricks apply even when building with a yocto sdk as when doing a native build with the host compiler</td><td class="time"><a href="#t2022-03-25T09:47:49" class="time">09:47</a></td></tr>
<tr id="t2022-03-25T09:47:55"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">my code crashes on call x when i have something that is &quot;not executed yet &quot;&nbsp;&nbsp;if i comment the newly added line way below it is not&nbsp;&nbsp;crashing</td><td class="time"><a href="#t2022-03-25T09:47:55" class="time">09:47</a></td></tr>
<tr id="t2022-03-25T11:05:57"><th class="nick" style="background: #4b904b">wyre</th><td class="text" style="color: #4b904b">should the .dtb filename in the dts/Makefile match exactly the filename of your custom .dts file? ðŸ¤”</td><td class="time"><a href="#t2022-03-25T11:05:57" class="time">11:05</a></td></tr>
<tr id="t2022-03-25T11:09:52"><th class="nick" style="background: #4b904b">wyre</th><td class="text" style="color: #4b904b">I mean ... I've got this inside meta-mylayer/recipes-kernel/linux folder <a href="https://bpa.st/2JLA" rel="nofollow">https://bpa.st/2JLA</a></td><td class="time"><a href="#t2022-03-25T11:09:52" class="time">11:09</a></td></tr>
<tr id="t2022-03-25T11:10:17"><th class="nick" style="background: #4b904b">wyre</th><td class="text" style="color: #4b904b">and I'm not sure if I'm patching properly the Makefile, as my dts is actually called imx6ull-microgea-joifi.dts ðŸ¤”</td><td class="time"><a href="#t2022-03-25T11:10:17" class="time">11:10</a></td></tr>
<tr id="t2022-03-25T11:10:38"><th class="nick" style="background: #4b904b">wyre</th><td class="text" style="color: #4b904b">so I'm not sure if I should patch the kernel Makefile with `imx6ull-microgea-joifi.dtb`</td><td class="time"><a href="#t2022-03-25T11:10:38" class="time">11:10</a></td></tr>
<tr id="t2022-03-25T11:35:30"><th class="nick" style="background: #4d4d93">mckoan</th><td class="text" style="color: #4d4d93">wyre: the names have to be identical</td><td class="time"><a href="#t2022-03-25T11:35:30" class="time">11:35</a></td></tr>
<tr id="t2022-03-25T11:36:46"><th class="nick" style="background: #97974f">pasherring</th><td class="text" style="color: #97974f">Hey yoctoers! I have a quirky make based project, in which the Makefile is not in the root dir. Is there a proper way to append the do_compile[dirs] variable from the recipe itself?</td><td class="time"><a href="#t2022-03-25T11:36:46" class="time">11:36</a></td></tr>
<tr id="t2022-03-25T11:38:47"><th class="nick" style="background: #97974f">pasherring</th><td class="text" style="color: #97974f">tried do_compile[dirs] =+ &quot; ${B}/path/to/Makefile&quot; to no avail</td><td class="time"><a href="#t2022-03-25T11:38:47" class="time">11:38</a></td></tr>
<tr id="t2022-03-25T11:44:28"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">pasherring: just set B variable accordingly?</td><td class="time"><a href="#t2022-03-25T11:44:28" class="time">11:44</a></td></tr>
<tr id="t2022-03-25T11:45:51"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">pasherring: worst case, do_compile() { oe_runmake -C ${B}/path/to/makefile }</td><td class="time"><a href="#t2022-03-25T11:45:51" class="time">11:45</a></td></tr>
<tr id="t2022-03-25T11:46:11"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">default do_compile is just oe_runmake, so just pass -C</td><td class="time"><a href="#t2022-03-25T11:46:11" class="time">11:46</a></td></tr>
<tr id="t2022-03-25T11:46:28"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">adding that -C to OE_EXTRAMAKE should work nicely</td><td class="time"><a href="#t2022-03-25T11:46:28" class="time">11:46</a></td></tr>
<tr id="t2022-03-25T11:47:03"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">erm EXTRA_OEMAKE</td><td class="time"><a href="#t2022-03-25T11:47:03" class="time">11:47</a></td></tr>
<tr id="t2022-03-25T11:47:05"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">its early ;)</td><td class="time"><a href="#t2022-03-25T11:47:05" class="time">11:47</a></td></tr>
<tr id="t2022-03-25T11:47:20"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">rburton: its always beer o'clock!</td><td class="time"><a href="#t2022-03-25T11:47:20" class="time">11:47</a></td></tr>
<tr id="t2022-03-25T11:47:28"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">but as qschulz said, if *all* of the build happens under a directory, setting B works just as well</td><td class="time"><a href="#t2022-03-25T11:47:28" class="time">11:47</a></td></tr>
<tr id="t2022-03-25T11:50:49"><th class="nick" style="background: #97974f">pasherring</th><td class="text" style="color: #97974f">Alright! Both easier than getting an extra compile dir :) Thanks a bunch!</td><td class="time"><a href="#t2022-03-25T11:50:49" class="time">11:50</a></td></tr>
<tr id="t2022-03-25T12:13:30"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">Hello!</td><td class="time"><a href="#t2022-03-25T12:13:30" class="time">12:13</a></td></tr>
<tr id="t2022-03-25T12:13:36"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">Still here:/</td><td class="time"><a href="#t2022-03-25T12:13:36" class="time">12:13</a></td></tr>
<tr id="t2022-03-25T12:13:50"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">Is no one else seeing issues with the mirror?</td><td class="time"><a href="#t2022-03-25T12:13:50" class="time">12:13</a></td></tr>
<tr id="t2022-03-25T12:13:50-2"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555"><a href="http://downloads.yoctoproject.org/mirror/sources/git2_github.com.opencv.opencv_3rdparty.git.tar.gz" rel="nofollow">http://downloads.yoctoproject.org/mirror/sources/git2_github.com.opencv.opencv_3rdparty.git.tar.gz</a></td><td class="time"><a href="#t2022-03-25T12:13:50-2" class="time">12:13</a></td></tr>
<tr id="t2022-03-25T12:15:19"><th class="nick" style="background: #57a657">ilunev</th><td class="text" style="color: #57a657">Hello! Is there a way to enable pretty-print support for gcc@yocto? So that gdb prints std::vector etc nicely? I found some gdb scripts but they are really slow</td><td class="time"><a href="#t2022-03-25T12:15:19" class="time">12:15</a></td></tr>
<tr id="t2022-03-25T12:16:34"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">Guest11: known infra problems.&nbsp;&nbsp;set PREMIRRORS=&quot;&quot; to not use it.</td><td class="time"><a href="#t2022-03-25T12:16:34" class="time">12:16</a></td></tr>
<tr id="t2022-03-25T12:25:14"><th class="nick" style="background: #57a657">ilunev</th><td class="text" style="color: #57a657">ah, looks like I can just use python for this</td><td class="time"><a href="#t2022-03-25T12:25:14" class="time">12:25</a></td></tr>
<tr id="t2022-03-25T12:34:52"><th class="nick" style="background: #4b904b">wyre</th><td class="text" style="color: #4b904b">would it be possible to include a custom U-Boot env in the .wic image file? ðŸ¤” I'm not sure if I should do also a .bbappend for the u-boot recipe ..</td><td class="time"><a href="#t2022-03-25T12:34:52" class="time">12:34</a></td></tr>
<tr id="t2022-03-25T12:43:15"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">rburton Thank you for confirming! I PREMIRROR and MIRROR set to &quot;&quot; ðŸ™‡</td><td class="time"><a href="#t2022-03-25T12:43:15" class="time">12:43</a></td></tr>
<tr id="t2022-03-25T12:53:38"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">how do i add libmysqlclient.so to my target ?</td><td class="time"><a href="#t2022-03-25T12:53:38" class="time">12:53</a></td></tr>
<tr id="t2022-03-25T12:54:41"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">hmw[m]: oe-pkgdata-util find-path '*libmysqlclient.so*'</td><td class="time"><a href="#t2022-03-25T12:54:41" class="time">12:54</a></td></tr>
<tr id="t2022-03-25T12:54:59"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if nothing's returned by this command</td><td class="time"><a href="#t2022-03-25T12:54:59" class="time">12:54</a></td></tr>
<tr id="t2022-03-25T12:55:21"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">you need to find out which recipe builds this file</td><td class="time"><a href="#t2022-03-25T12:55:21" class="time">12:55</a></td></tr>
<tr id="t2022-03-25T12:55:29"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">likely mysql/mariadb?</td><td class="time"><a href="#t2022-03-25T12:55:29" class="time">12:55</a></td></tr>
<tr id="t2022-03-25T12:55:59"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">returns libmysqlclient-dev : /usr/lib/libmysqlclient.so</td><td class="time"><a href="#t2022-03-25T12:55:59" class="time">12:55</a></td></tr>
<tr id="t2022-03-25T12:55:59-2"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">so IMAGE_INSTALL += &quot;&nbsp;&nbsp;libmysqlclient-dev &quot;</td><td class="time"><a href="#t2022-03-25T12:55:59-2" class="time">12:55</a></td></tr>
<tr id="t2022-03-25T12:56:05"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">yes</td><td class="time"><a href="#t2022-03-25T12:56:05" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:06"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">hmw[m]: mmmm</td><td class="time"><a href="#t2022-03-25T12:56:06" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:11"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">likely not what you want</td><td class="time"><a href="#t2022-03-25T12:56:11" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:13"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">well</td><td class="time"><a href="#t2022-03-25T12:56:13" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:23"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">you would want the versioned library in your image</td><td class="time"><a href="#t2022-03-25T12:56:23" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:25"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">are you asking as you want to compile code and link</td><td class="time"><a href="#t2022-03-25T12:56:25" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:34"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">which is libmysqlclient.so.X.Y.Z</td><td class="time"><a href="#t2022-03-25T12:56:34" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:56:40"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">(replace X,Y,Z)</td><td class="time"><a href="#t2022-03-25T12:56:40" class="time">12:56</a></td></tr>
<tr id="t2022-03-25T12:57:00"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">except if some other prebuilt binary/lib is requesting this unversioned lib</td><td class="time"><a href="#t2022-03-25T12:57:00" class="time">12:57</a></td></tr>
<tr id="t2022-03-25T12:57:15"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685">donÂ´t cair (qt sql is not working without it )</td><td class="time"><a href="#t2022-03-25T12:57:15" class="time">12:57</a></td></tr>
<tr id="t2022-03-25T12:57:39"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">you'll want the runtime version, libmysqlclient, probably</td><td class="time"><a href="#t2022-03-25T12:57:39" class="time">12:57</a></td></tr>
<tr id="t2022-03-25T12:57:53"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">if qtsql opens the development link then its very, very stupid</td><td class="time"><a href="#t2022-03-25T12:57:53" class="time">12:57</a></td></tr>
<tr id="t2022-03-25T12:58:48"><th class="nick" style="background: #5959a9">selff</th><td class="text" style="color: #5959a9">Hi, guys. I have been dealing with this problem for 2 weeks, do you have any ideas or suggestions? <a href="https://stackoverflow.com/questions/71335803/executable-gives-different-fps-values-in-yocto-and-raspbianeverything-looks-th" rel="nofollow">https://stackoverflow.com/questions/71335803/executable-gives-different-fps-values-in-yocto-and-raspbianeverything-looks-th</a></td><td class="time"><a href="#t2022-03-25T12:58:48" class="time">12:58</a></td></tr>
<tr id="t2022-03-25T12:59:54"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">try building opencv manually on the rpi to see if its being cross compiled that is the problem</td><td class="time"><a href="#t2022-03-25T12:59:54" class="time">12:59</a></td></tr>
<tr id="t2022-03-25T13:00:15"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">building opencv properly is non-trivial and its possible that nobody cared enough to check that opencv is configured right on rpi</td><td class="time"><a href="#t2022-03-25T13:00:15" class="time">13:00</a></td></tr>
<tr id="t2022-03-25T13:01:10"><th class="nick" style="background: #854685">hmw[m]</th><td class="text" style="color: #854685"> qschulz tnx rburton tnx</td><td class="time"><a href="#t2022-03-25T13:01:10" class="time">13:01</a></td></tr>
<tr id="t2022-03-25T13:04:23"><th class="nick" style="background: #5959a9">selff</th><td class="text" style="color: #5959a9">rburton did you write the comment for me?</td><td class="time"><a href="#t2022-03-25T13:04:23" class="time">13:04</a></td></tr>
<tr id="t2022-03-25T13:04:33"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">selff: yes</td><td class="time"><a href="#t2022-03-25T13:04:33" class="time">13:04</a></td></tr>
<tr id="t2022-03-25T13:09:27"><th class="nick" style="background: #5959a9">selff</th><td class="text" style="color: #5959a9">rburton i didnt fully understand what you meant. the yocto image contains opencv. do i have to install it in runtime and try?</td><td class="time"><a href="#t2022-03-25T13:09:27" class="time">13:09</a></td></tr>
<tr id="t2022-03-25T13:10:00"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">if you want to debug where the performance difference comes from, that's what I suggest</td><td class="time"><a href="#t2022-03-25T13:10:00" class="time">13:10</a></td></tr>
<tr id="t2022-03-25T13:12:30"><th class="nick" style="background: #5959a9">selff</th><td class="text" style="color: #5959a9">rburton thanks for the help, i will share the latest status after installing and testing opencv in runtime on yocto side.</td><td class="time"><a href="#t2022-03-25T13:12:30" class="time">13:12</a></td></tr>
<tr id="t2022-03-25T13:37:19"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">Is there a way to enable timestamps for bitbake console-latest.log ?</td><td class="time"><a href="#t2022-03-25T13:37:19" class="time">13:37</a></td></tr>
<tr id="t2022-03-25T13:52:18"><th class="nick" style="background: #a25555">Guest11</th><td class="text" style="color: #a25555">rburton ah I didn't think this through. Now a number of other dependencies are failing because they don't exist upstream anymore</td><td class="time"><a href="#t2022-03-25T13:52:18" class="time">13:52</a></td></tr>
<tr id="t2022-03-25T15:59:50"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">Shouldn't we include packagegroup-machine-base in INITRAMFS_SCRIPTS by default?</td><td class="time"><a href="#t2022-03-25T15:59:50" class="time">15:59</a></td></tr>
<tr id="t2022-03-25T16:01:05"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">like if a machine has an encrypted rootfs partition, one would likely add cryptsetup to MACHINE_EXTRA_RDEPENDS if they follow the guidelines</td><td class="time"><a href="#t2022-03-25T16:01:05" class="time">16:01</a></td></tr>
<tr id="t2022-03-25T16:01:36"><th class="nick" style="background: #b15db1">khem</th><td class="text" style="color: #b15db1">that will suck-in all kernel modules etc. which might be too much for a initramfs kernel</td><td class="time"><a href="#t2022-03-25T16:01:36" class="time">16:01</a></td></tr>
<tr id="t2022-03-25T16:02:05"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">khem: only the modules described by the machine as necessary to boot such critical partitions</td><td class="time"><a href="#t2022-03-25T16:02:05" class="time">16:02</a></td></tr>
<tr id="t2022-03-25T16:02:17"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">that you do want in the initramfs</td><td class="time"><a href="#t2022-03-25T16:02:17" class="time">16:02</a></td></tr>
<tr id="t2022-03-25T16:03:51"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">if I have a luks2+btrfs rootfs, I am supposed to set MACHINE_EXTRA_RDEPENDS = &quot;cryptsetup&quot; MACHINE_EXTRA_RRECOMMENDS = &quot;kernel-module-btrfs&quot;, these are part of packagegroup-machine-base and I do need to duplicate that in the initramfs</td><td class="time"><a href="#t2022-03-25T16:03:51" class="time">16:03</a></td></tr>
<tr id="t2022-03-25T16:06:53"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">one could argue that this is a distro choice, but it becomes critical to successfully boot a system</td><td class="time"><a href="#t2022-03-25T16:06:53" class="time">16:06</a></td></tr>
<tr id="t2022-03-25T16:27:55"><th class="nick" style="background: #b15db1">khem</th><td class="text" style="color: #b15db1">you want those called out explicitly in initramfs image with PACKAGE_INSTALL</td><td class="time"><a href="#t2022-03-25T16:27:55" class="time">16:27</a></td></tr>
<tr id="t2022-03-25T16:28:08"><th class="nick" style="background: #b15db1">khem</th><td class="text" style="color: #b15db1">these images should be minimal</td><td class="time"><a href="#t2022-03-25T16:28:08" class="time">16:28</a></td></tr>
<tr id="t2022-03-25T16:30:10"><th class="nick" style="background: #b15db1">khem</th><td class="text" style="color: #b15db1">its easy to build ground up.</td><td class="time"><a href="#t2022-03-25T16:30:10" class="time">16:30</a></td></tr>
<tr id="t2022-03-25T16:34:49"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">khem: I think what's missing is DISTRO_ESSENTIAL_EXTRA_RDEPENDS/RRECOMMENDS and have packagegroup-core-boot depends on split packagegroup-machine-boot and packagegroup-distro-boot.</td><td class="time"><a href="#t2022-03-25T16:34:49" class="time">16:34</a></td></tr>
<tr id="t2022-03-25T16:39:31"><th class="nick" style="background: #b15db1">khem</th><td class="text" style="color: #b15db1">introducing another abstraction and variable does need to have some benefits. So If I can blindly build a common initramfs image that will boot every board and is lean and mean, I do see benefits but I think we are not there</td><td class="time"><a href="#t2022-03-25T16:39:31" class="time">16:39</a></td></tr>
<tr id="t2022-03-25T16:41:04"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">there's also room for some potential for wackiness with vendor BSPs throwing piles of stuff into MACHINE_EXTRA* that you might not want in an initramfs</td><td class="time"><a href="#t2022-03-25T16:41:04" class="time">16:41</a></td></tr>
<tr id="t2022-03-25T16:41:46"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">s/potential for/potential/</td><td class="time"><a href="#t2022-03-25T16:41:46" class="time">16:41</a></td></tr>
<tr id="t2022-03-25T16:46:32"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">I see</td><td class="time"><a href="#t2022-03-25T16:46:32" class="time">16:46</a></td></tr>
<tr id="t2022-03-25T16:47:00"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">that ends up being a distro configuration in fact</td><td class="time"><a href="#t2022-03-25T16:47:00" class="time">16:47</a></td></tr>
<tr id="t2022-03-25T16:47:44"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">and thus only packagegroup-distro-base may be safe to rely on, if the distro wants to add it to INITRAMFS_SCRIPTS</td><td class="time"><a href="#t2022-03-25T16:47:44" class="time">16:47</a></td></tr>
<tr id="t2022-03-25T16:48:56"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">The confusing part is that most of the packagegroup-*base* groups are in fact machine specific</td><td class="time"><a href="#t2022-03-25T16:48:56" class="time">16:48</a></td></tr>
<tr id="t2022-03-25T16:52:12"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">or packagegroup-machine-base, assuming the distro carefully control what the BSP layer put in there</td><td class="time"><a href="#t2022-03-25T16:52:12" class="time">16:52</a></td></tr>
<tr id="t2022-03-25T17:00:07"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: the choice of luks2+btrfs is not a machine thing in my mind, so tying it to the distro somehow would be the way to go</td><td class="time"><a href="#t2022-03-25T17:00:07" class="time">17:00</a></td></tr>
<tr id="t2022-03-25T17:01:10"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: definitely</td><td class="time"><a href="#t2022-03-25T17:01:10" class="time">17:01</a></td></tr>
<tr id="t2022-03-25T17:02:00"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">I think I'm trying to hard to rely on a well configured distro in order to simply build core-image-minimal-initramfs and core-image-base for my machines, but it looks like explicit images are always preferred.</td><td class="time"><a href="#t2022-03-25T17:02:00" class="time">17:02</a></td></tr>
<tr id="t2022-03-25T17:03:02"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">But specific image recipes tend to introduce machine-specific bits and I don't like this much</td><td class="time"><a href="#t2022-03-25T17:03:02" class="time">17:03</a></td></tr>
<tr id="t2022-03-25T17:10:51"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2022-03-25T17:10:51" class="time">17:10</a></td></tr>
<tr id="t2022-03-25T17:11:49"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: poky is an example/sample, at some point defining your own packagegroups for your own distro is perfectly reasonable.&nbsp;&nbsp;I suspect there a lot of downstream distros that don't use core-base and its packagroups</td><td class="time"><a href="#t2022-03-25T17:11:49" class="time">17:11</a></td></tr>
<tr id="t2022-03-25T17:14:30"><th class="nick" style="background: #b86161">alejandrohs</th><td class="text" style="color: #b86161">I got someone asking me about running the mount command inside a bitbake task, which returns some permission error, my guess is its because of pseudo, the only thing I can think of is sort of removing pseudo from the environment and run sudo, which sounds like a bad idea, Does anyone have any good ideas on how to achieve something like that?</td><td class="time"><a href="#t2022-03-25T17:14:30" class="time">17:14</a></td></tr>
<tr id="t2022-03-25T17:20:08"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">i'm terrified to ask why you'd mount in a task</td><td class="time"><a href="#t2022-03-25T17:20:08" class="time">17:20</a></td></tr>
<tr id="t2022-03-25T17:20:21"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">remember even if you call sudo you can't enter a password</td><td class="time"><a href="#t2022-03-25T17:20:21" class="time">17:20</a></td></tr>
<tr id="t2022-03-25T17:20:47"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">Ya, equally terrified</td><td class="time"><a href="#t2022-03-25T17:20:47" class="time">17:20</a></td></tr>
<tr id="t2022-03-25T17:21:20"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">you can avoid pseudo in specific tasks.. but mounting a disk requires specific permissions, ones that you really shouldn't trust in the build environment</td><td class="time"><a href="#t2022-03-25T17:21:20" class="time">17:21</a></td></tr>
<tr id="t2022-03-25T17:22:04"><th class="nick" style="background: #6464bf">peoliye</th><td class="text" style="color: #6464bf">I have two kernel modules A&nbsp;&nbsp;&amp; B which I am building using separate recipes. I am able to build A successfully but B is failing. It is failing because it is not able to find the exports symbols from A. I tried this <a href="https://stackoverflow.com/questions/68567412/how-to-use-exported-symbol-on-another-kernel-module" rel="nofollow">https://stackoverflow.com/questions/68567412/how-to-use-exported-symbol-on-another-kernel-module</a> but that doesn't help. Any clues? I</td><td class="time"><a href="#t2022-03-25T17:22:04" class="time">17:22</a></td></tr>
<tr id="t2022-03-25T17:22:05"><th class="nick" style="background: #6464bf">peoliye</th><td class="text" style="color: #6464bf">also tried giving explicit KBUILD_EXTRA_SYMBOLS to the exact path of Module.symvers but that didn't help either.</td><td class="time"><a href="#t2022-03-25T17:22:05" class="time">17:22</a></td></tr>
<tr id="t2022-03-25T17:22:59"><th class="nick" style="background: #6464bf">peoliye</th><td class="text" style="color: #6464bf">It is failing during MODPOST.</td><td class="time"><a href="#t2022-03-25T17:22:59" class="time">17:22</a></td></tr>
<tr id="t2022-03-25T17:26:30"><th class="nick" style="background: #539e9e">rburton</th><td class="text" style="color: #539e9e">alejandrohs: and pseudo isn't enabled so is basically passthrough in most tasks, so it shouldn't get in the way if the user has rights to mount without any ACLs involved</td><td class="time"><a href="#t2022-03-25T17:26:30" class="time">17:26</a></td></tr>
<tr id="t2022-03-25T17:27:32"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">Anyone around who fancies talking through a parser multiprocessing deadlock?</td><td class="time"><a href="#t2022-03-25T17:27:32" class="time">17:27</a></td></tr>
<tr id="t2022-03-25T17:31:08"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: really? wouldn't that seem weird to reinvent the wheel and define your own base package groups? Like the init manager, all modules, etc.</td><td class="time"><a href="#t2022-03-25T17:31:08" class="time">17:31</a></td></tr>
<tr id="t2022-03-25T17:31:57"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">RP: Happy to listen, but not sure how much help I can be.</td><td class="time"><a href="#t2022-03-25T17:31:57" class="time">17:31</a></td></tr>
<tr id="t2022-03-25T17:34:30"><th class="nick" style="background: #b86161">alejandrohs</th><td class="text" style="color: #b86161">hahaha believ me I dont like it either</td><td class="time"><a href="#t2022-03-25T17:34:30" class="time">17:34</a></td></tr>
<tr id="t2022-03-25T17:35:09"><th class="nick" style="background: #b86161">alejandrohs</th><td class="text" style="color: #b86161">thanks rburton fray</td><td class="time"><a href="#t2022-03-25T17:35:09" class="time">17:35</a></td></tr>
<tr id="t2022-03-25T17:35:17"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: sttuf like that is in core-boot.&nbsp;&nbsp;It's the base/base-extended packagegroups that I suspect are perhaps not widely used.&nbsp;&nbsp;e.g. we don't use them in AGL</td><td class="time"><a href="#t2022-03-25T17:35:17" class="time">17:35</a></td></tr>
<tr id="t2022-03-25T17:35:43"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">alejandrohs: what are you trying to achieve with mount exactly?</td><td class="time"><a href="#t2022-03-25T17:35:43" class="time">17:35</a></td></tr>
<tr id="t2022-03-25T17:36:46"><th class="nick" style="background: #b86161">alejandrohs</th><td class="text" style="color: #b86161">vvn: not sure what theyre trying to do tbh, I think they want to mount an image and modify it in some way</td><td class="time"><a href="#t2022-03-25T17:36:46" class="time">17:36</a></td></tr>
<tr id="t2022-03-25T17:37:35"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">alejandrohs: you should ask, because you might actually be able to add the tweak before of after depending on the tool, filesystem type, etc.</td><td class="time"><a href="#t2022-03-25T17:37:35" class="time">17:37</a></td></tr>
<tr id="t2022-03-25T17:37:52"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">Saur[m]: There is basically a race/hang in the parsing code if there is any kind of unclean shutdown (i.e. force=True in the code). The reason is the lock for the event pipe to the event handlers since the parsing processes write directly to the UIs</td><td class="time"><a href="#t2022-03-25T17:37:52" class="time">17:37</a></td></tr>
<tr id="t2022-03-25T17:39:16"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: I see. So basically your AGL image recipes have IMAGE_INSTALL = &quot;packagegroup-core-boot packagegroup-agl-foo packagegroup-agl-bar&quot; I presume</td><td class="time"><a href="#t2022-03-25T17:39:16" class="time">17:39</a></td></tr>
<tr id="t2022-03-25T17:39:17"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">Saur[m]: the issue is the self.wlock in ConnectionWriter. If we call .terminate on a parsing process that happens to be in the log writer, game over, everything hangs</td><td class="time"><a href="#t2022-03-25T17:39:17" class="time">17:39</a></td></tr>
<tr id="t2022-03-25T17:39:42"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">We can remove the terminate codepath but then we can't Ctrl+C out of parsing</td><td class="time"><a href="#t2022-03-25T17:39:42" class="time">17:39</a></td></tr>
<tr id="t2022-03-25T17:39:42-2"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: yep</td><td class="time"><a href="#t2022-03-25T17:39:42-2" class="time">17:39</a></td></tr>
<tr id="t2022-03-25T17:40:41"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">Is there any way to make the lock 'clear' on exit (of the process that holds the lock)?</td><td class="time"><a href="#t2022-03-25T17:40:41" class="time">17:40</a></td></tr>
<tr id="t2022-03-25T17:40:44"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: though there are a couple of image's that are included to act as a base.&nbsp;&nbsp;It's on my todo list to redo some of it to have an e.g. agl-image.bbclass</td><td class="time"><a href="#t2022-03-25T17:40:44" class="time">17:40</a></td></tr>
<tr id="t2022-03-25T17:40:46"><th class="nick" style="background: #b86161">alejandrohs</th><td class="text" style="color: #b86161">RP: does that mean that cntrl+c wont have an immediate effect while parsing? or that cntrl+c would just be ignored?</td><td class="time"><a href="#t2022-03-25T17:40:46" class="time">17:40</a></td></tr>
<tr id="t2022-03-25T17:41:13"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">alejandrohs: at the moment the UI sees it and sends commands to the server to say &quot;stop parsing&quot;</td><td class="time"><a href="#t2022-03-25T17:41:13" class="time">17:41</a></td></tr>
<tr id="t2022-03-25T17:41:14"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">Or is the issue the process trying to exit holds the lock already?</td><td class="time"><a href="#t2022-03-25T17:41:14" class="time">17:41</a></td></tr>
<tr id="t2022-03-25T17:41:46"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">fray: given the locks python is using, even if the processes are totally gone, the lock is locked</td><td class="time"><a href="#t2022-03-25T17:41:46" class="time">17:41</a></td></tr>
<tr id="t2022-03-25T17:42:07"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">and even if we could unlock it, the pipe would have corruption potentially</td><td class="time"><a href="#t2022-03-25T17:42:07" class="time">17:42</a></td></tr>
<tr id="t2022-03-25T17:42:16"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">any way for the terminating process to clear the lock just before exit (if held by itself)?</td><td class="time"><a href="#t2022-03-25T17:42:16" class="time">17:42</a></td></tr>
<tr id="t2022-03-25T17:42:36"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">fray: the worry is if it is in the middle of a write</td><td class="time"><a href="#t2022-03-25T17:42:36" class="time">17:42</a></td></tr>
<tr id="t2022-03-25T17:43:02"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">anyway to declare something a critical section, not permit (ctrl-c) termination during a _short_ window?</td><td class="time"><a href="#t2022-03-25T17:43:02" class="time">17:43</a></td></tr>
<tr id="t2022-03-25T17:44:46"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">something like a signal handler, catch teh sigint, and if a 'critical seciton' bit is selected, return back to the code -- otherwise complete the exit.. then inside the program set/clear the flag (quickly)?</td><td class="time"><a href="#t2022-03-25T17:44:46" class="time">17:44</a></td></tr>
<tr id="t2022-03-25T17:45:52"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">fray: I'm wondering if we can do the opposite. Rewire SIGINT so that breaks out the parse but would be deferred in the locked section</td><td class="time"><a href="#t2022-03-25T17:45:52" class="time">17:45</a></td></tr>
<tr id="t2022-03-25T17:46:11"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">(and then send SIGINT to the child parsers if we need to shutdown)</td><td class="time"><a href="#t2022-03-25T17:46:11" class="time">17:46</a></td></tr>
<tr id="t2022-03-25T17:46:32"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">ok</td><td class="time"><a href="#t2022-03-25T17:46:32" class="time">17:46</a></td></tr>
<tr id="t2022-03-25T17:49:16"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">The trouble is we only want this behaviour in the parsing child processes which makes things ugly code wise</td><td class="time"><a href="#t2022-03-25T17:49:16" class="time">17:49</a></td></tr>
<tr id="t2022-03-25T17:52:13"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">A reproducer: <a href="https://git.yoctoproject.org/poky-contrib/commit/?h=rpurdie/t222&amp;id=105631fc314fe8a236496cebae680e344f13f251" rel="nofollow">https://git.yoctoproject.org/poky-contrib/commit/?h=rpurdie/t222&amp;id=105631fc314fe8a236496cebae680e344f13f251</a> then put something like INCOMPATIBLE_LICENSE += &quot;*&quot; in local.conf</td><td class="time"><a href="#t2022-03-25T17:52:13" class="time">17:52</a></td></tr>
<tr id="t2022-03-25T17:52:37"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">all that does is puts a really slow event at the end of parsing</td><td class="time"><a href="#t2022-03-25T17:52:37" class="time">17:52</a></td></tr>
<tr id="t2022-03-25T17:52:58"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">so the slow events + parsing error == hang</td><td class="time"><a href="#t2022-03-25T17:52:58" class="time">17:52</a></td></tr>
<tr id="t2022-03-25T17:53:36"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">out the box there are a load of zombies but even with that cleaned up, the lock isn't freed and still game over</td><td class="time"><a href="#t2022-03-25T17:53:36" class="time">17:53</a></td></tr>
<tr id="t2022-03-25T17:56:05"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">RP: Is the problem that the ConnectionWriter.close() method closes the pipe under the .send() method? I.e., shouldn't the .close() method take the wlock before doing the close?</td><td class="time"><a href="#t2022-03-25T17:56:05" class="time">17:56</a></td></tr>
<tr id="t2022-03-25T17:57:08"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">(I have absolutely no idea how the multiprocessing class works, so just ignore if it is too stupid a question.)</td><td class="time"><a href="#t2022-03-25T17:57:08" class="time">17:57</a></td></tr>
<tr id="t2022-03-25T17:57:53"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">Saur[m]: closing it should be fine, you shouldn't need a lock for that</td><td class="time"><a href="#t2022-03-25T17:57:53" class="time">17:57</a></td></tr>
<tr id="t2022-03-25T17:58:10"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">Ok.</td><td class="time"><a href="#t2022-03-25T17:58:10" class="time">17:58</a></td></tr>
<tr id="t2022-03-25T17:58:13"><th class="nick" style="background: #c3c366">RP</th><td class="text" style="color: #c3c366">the lock is just stopping writes being interleaved on the pipe</td><td class="time"><a href="#t2022-03-25T17:58:13" class="time">17:58</a></td></tr>
<tr id="t2022-03-25T18:05:06"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: you mean that you have agl-image-base.bb and agl-image-foo.bb which require agl-image-base.bb?</td><td class="time"><a href="#t2022-03-25T18:05:06" class="time">18:05</a></td></tr>
<tr id="t2022-03-25T18:06:26"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: sort of, we have a agl-image-minimal.bb and agl-image-weston.bb that are used as the base of the more featured agl-demo-*bb images</td><td class="time"><a href="#t2022-03-25T18:06:26" class="time">18:06</a></td></tr>
<tr id="t2022-03-25T18:08:20"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: I'm pretty sure an agl.bbclass with IMAGE_CLASSES += &quot;agl&quot; would be more than enough to pull in packagegroups via agl-* image features, like agl-ui.</td><td class="time"><a href="#t2022-03-25T18:08:20" class="time">18:08</a></td></tr>
<tr id="t2022-03-25T18:08:28"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: we had a lot of packagegroups for various profiles and functionality things, but we've started reducing those as they weren't really providing enough value</td><td class="time"><a href="#t2022-03-25T18:08:28" class="time">18:08</a></td></tr>
<tr id="t2022-03-25T18:10:27"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: yeah, we'll likely end up with a bbclass, but it's somewhat of a low priority just atm.&nbsp;&nbsp;Downstream use by AGL members is pretty opaque to us, my current assumption is they all build their own images up, so we can be wasting our time trying to overbuild packagegroups</td><td class="time"><a href="#t2022-03-25T18:10:27" class="time">18:10</a></td></tr>
<tr id="t2022-03-25T18:10:47"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">smurray: true, so far the packagegroup seems nice just to centralize the view of your complete software stack in a simple packagegroup-foo.bb file, and eventually making it easy to pull them in and declare conflicts with image features.</td><td class="time"><a href="#t2022-03-25T18:10:47" class="time">18:10</a></td></tr>
<tr id="t2022-03-25T18:11:42"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">Looking for an idea.&nbsp;&nbsp;I've got a package (lm_sensors) that I want the systemd service enabled by default on _one_ board, but not another.. and I'd rather not make the package machine specific.&nbsp;&nbsp;Is there any standard way (in the machine) to enable a service by default?</td><td class="time"><a href="#t2022-03-25T18:11:42" class="time">18:11</a></td></tr>
<tr id="t2022-03-25T18:12:38"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">vvn: yeah, that seems a reasonable take</td><td class="time"><a href="#t2022-03-25T18:12:38" class="time">18:12</a></td></tr>
<tr id="t2022-03-25T18:14:33"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">fray: ROOTFS_POSTPROCESS_COMMAND?</td><td class="time"><a href="#t2022-03-25T18:14:33" class="time">18:14</a></td></tr>
<tr id="t2022-03-25T18:15:38"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">I wasn't aware of a way to use a rootfs postprocess toc ontrol a service..</td><td class="time"><a href="#t2022-03-25T18:15:38" class="time">18:15</a></td></tr>
<tr id="t2022-03-25T18:15:50"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">rm the preset file?</td><td class="time"><a href="#t2022-03-25T18:15:50" class="time">18:15</a></td></tr>
<tr id="t2022-03-25T18:16:20"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">or change it to say disabled</td><td class="time"><a href="#t2022-03-25T18:16:20" class="time">18:16</a></td></tr>
<tr id="t2022-03-25T18:17:22"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">ya, service file is disabled by default... so all the boards, except one should have it that way..</td><td class="time"><a href="#t2022-03-25T18:17:22" class="time">18:17</a></td></tr>
<tr id="t2022-03-25T18:17:30"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">it might be possible to drop in an override for the systemd presets under /etc/systemd, could do that for the different machine</td><td class="time"><a href="#t2022-03-25T18:17:30" class="time">18:17</a></td></tr>
<tr id="t2022-03-25T18:17:31"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">which is why I'm struggling for the one board where I want it enabled</td><td class="time"><a href="#t2022-03-25T18:17:31" class="time">18:17</a></td></tr>
<tr id="t2022-03-25T18:17:46"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">I haven't tried it myself, but I think it should be possible to run the native systemctl from a postprocess for the board you want.</td><td class="time"><a href="#t2022-03-25T18:17:46" class="time">18:17</a></td></tr>
<tr id="t2022-03-25T18:18:18"><th class="nick" style="background: #c668c6">Saur[m]</th><td class="text" style="color: #c668c6">Or what smurray said.</td><td class="time"><a href="#t2022-03-25T18:18:18" class="time">18:18</a></td></tr>
<tr id="t2022-03-25T18:18:21"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">perhaps easier to just make the symlink in the rootfs postprocess</td><td class="time"><a href="#t2022-03-25T18:18:21" class="time">18:18</a></td></tr>
<tr id="t2022-03-25T18:19:15"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">I'll see if I can do it on the rootfs side.. thanks</td><td class="time"><a href="#t2022-03-25T18:19:15" class="time">18:19</a></td></tr>
<tr id="t2022-03-25T18:21:37"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">fray: another option that comes to mind, though likely a bit messy, would be to enable the service by default, but split the bit(s?) for that out via an extra package</td><td class="time"><a href="#t2022-03-25T18:21:37" class="time">18:21</a></td></tr>
<tr id="t2022-03-25T19:50:14"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">fray: the less hacky is indeed SYSTEMD_AUTO_ENABLE:${PN}:machinefoo = &quot;enable&quot;, or as Saur[m] suggested, maybe make it image specific with a ${IMAGE_ROOTFS}/etc/systemd/system/default.target.wants/lm_sensors.service -&gt; /usr/lib/systemd/system/lm_sensors.service symlink via ROOTFS_POSTPROCESS_COMMAND.</td><td class="time"><a href="#t2022-03-25T19:50:14" class="time">19:50</a></td></tr>
<tr id="t2022-03-25T19:52:03"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">fray: you might as well append the lm_sensors package to add a drop-in file to make the service run conditionally on the presence of a kernel command line or whatever can identity your machine, then enable the service by default</td><td class="time"><a href="#t2022-03-25T19:52:03" class="time">19:52</a></td></tr>
<tr id="t2022-03-25T19:53:35"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">e.g. ConditionKernelCommandLine=foobar in the [Unit] section or ExecCondition=/some/id-script in the [Service] section.</td><td class="time"><a href="#t2022-03-25T19:53:35" class="time">19:53</a></td></tr>
<tr id="t2022-03-25T19:54:37"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">this way you don't make the package machine-specific, but you make the service &quot;smarter&quot; to run under your conditions</td><td class="time"><a href="#t2022-03-25T19:54:37" class="time">19:54</a></td></tr>
<tr id="t2022-03-25T20:16:49"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">I'm losing my mind, where is the systemctl binary that is used to enable things?&nbsp;&nbsp;If I try to use the qemu_wrapper_cmdline in the ROOTFS_POSTPROCESS_COMMAND function, it fails every time</td><td class="time"><a href="#t2022-03-25T20:16:49" class="time">20:16</a></td></tr>
<tr id="t2022-03-25T20:17:02"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">complains that it can't get root for a chroot?!</td><td class="time"><a href="#t2022-03-25T20:17:02" class="time">20:17</a></td></tr>
<tr id="t2022-03-25T20:18:19"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">So my question, how do I run 'systemctl enable fancontrol.service' in a ROOTFS_POSTPROCESS_COMMAND properly?&nbsp;&nbsp;(Premably I need --root=${IMAGE_ROOTFS} as well</td><td class="time"><a href="#t2022-03-25T20:18:19" class="time">20:18</a></td></tr>
<tr id="t2022-03-25T20:18:40"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">I can't figure out how this even works in the package installs</td><td class="time"><a href="#t2022-03-25T20:18:40" class="time">20:18</a></td></tr>
<tr id="t2022-03-25T20:37:00"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">fray: you don't. systemctl is for runtime, for compile time systemd is file based, just do a standard symlink. You might prefer to add a drop-in file in the package to run the service conditionally. Read the documentation for SYSTEMD_AUTO_ENABLE and maybe man systemd.unit as well.</td><td class="time"><a href="#t2022-03-25T20:37:00" class="time">20:37</a></td></tr>
<tr id="t2022-03-25T20:39:48"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">No systemctl _IS_ available, it's used by postinstall scriptlets</td><td class="time"><a href="#t2022-03-25T20:39:48" class="time">20:39</a></td></tr>
<tr id="t2022-03-25T20:41:41"><th class="nick" style="background: #62bb62">fray</th><td class="text" style="color: #62bb62">I think I have ti working now.. I've no idea what I did wrong the first time, but now just calling systemctl --root=${IMAGE_ROOTFS} enable fancontrol.service is working fine</td><td class="time"><a href="#t2022-03-25T20:41:41" class="time">20:41</a></td></tr>
<tr id="t2022-03-25T20:44:55"><th class="nick" style="background: #adad5b">vvn</th><td class="text" style="color: #adad5b">whatever suits you, it's essentially doing the same thing</td><td class="time"><a href="#t2022-03-25T20:44:55" class="time">20:44</a></td></tr>
<tr id="t2022-03-25T20:47:31"><th class="nick" style="background: #6acaca">zeddii</th><td class="text" style="color: #6acaca">It's always better to not poke directly at systemd's symlinks if possible. chaos and madness.</td><td class="time"><a href="#t2022-03-25T20:47:31" class="time">20:47</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2022-03-24.log.html">&#171; Thursday, 2022-03-24</a> <a href="index.html">Index</a> <a href="%23yocto.2022-03-26.log.html">Saturday, 2022-03-26 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
