<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Friday, 2022-01-28</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Friday, 2022-01-28</h1>
<div class="navigation"> <a href="%23yocto.2022-01-27.log.html">&#171; Thursday, 2022-01-27</a> <a href="index.html">Index</a> <a href="%23yocto.2022-01-29.log.html">Saturday, 2022-01-29 &#187;</a> </div>
<table class="irclog">
<tr id="t2022-01-28T07:25:46"><th class="nick" style="background: #407a40">smsm</th><td class="text" style="color: #407a40">Is there a recommended book to read to understand the philosophy and design of Yocto ?</td><td class="time"><a href="#t2022-01-28T07:25:46" class="time">07:25</a></td></tr>
<tr id="t2022-01-28T07:33:54"><td class="nickchange" colspan="2">*** mischief1 is now known as mischief</td><td><a href="#t2022-01-28T07:33:54" class="time">07:33</a></td></tr>
<tr id="t2022-01-28T07:39:49"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2022-01-28T07:39:49" class="time">07:39</a></td></tr>
<tr id="t2022-01-28T07:39:56"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">good morning</td><td class="time"><a href="#t2022-01-28T07:39:56" class="time">07:39</a></td></tr>
<tr id="t2022-01-28T07:40:36"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">smsm: <a href="https://www.yoctoproject.org/learn/" rel="nofollow">https://www.yoctoproject.org/learn/</a></td><td class="time"><a href="#t2022-01-28T07:40:36" class="time">07:40</a></td></tr>
<tr id="t2022-01-28T07:41:25"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">smsm: but my favourite remains &quot;Embedded Linux Systems With the Yocto Project&quot; by&nbsp;&nbsp;Rudolf J. Streif</td><td class="time"><a href="#t2022-01-28T07:41:25" class="time">07:41</a></td></tr>
<tr id="t2022-01-28T07:41:49"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">smsm: I wonder why is no longer listed in the YP page</td><td class="time"><a href="#t2022-01-28T07:41:49" class="time">07:41</a></td></tr>
<tr id="t2022-01-28T07:50:53"><th class="nick" style="background: #407a40">smsm</th><td class="text" style="color: #407a40">@mck</td><td class="time"><a href="#t2022-01-28T07:50:53" class="time">07:50</a></td></tr>
<tr id="t2022-01-28T07:51:08"><th class="nick" style="background: #407a40">smsm</th><td class="text" style="color: #407a40">mckoan thank you:)</td><td class="time"><a href="#t2022-01-28T07:51:08" class="time">07:51</a></td></tr>
<tr id="t2022-01-28T08:40:28"><th class="nick" style="background: #818144">dvorkindmitry</th><td class="text" style="color: #818144">I always see this problem if trying to generate SDK a day after the image started to build from scratch: <a href="https://pastebin.com/aVP7rUcr" rel="nofollow">https://pastebin.com/aVP7rUcr</a> Locale is installed only at first dir: <a href="https://pastebin.com/BLbtXSCw" rel="nofollow">https://pastebin.com/BLbtXSCw</a></td><td class="time"><a href="#t2022-01-28T08:40:28" class="time">08:40</a></td></tr>
<tr id="t2022-01-28T08:48:22"><th class="nick" style="background: #854685">Austriker</th><td class="text" style="color: #854685">Hi, I am having trouble setting up X11 client on my headless device. I had it working before by adding X11 to EXTRA_IMAGE_FEATURES += &quot;x11&quot;. but this had a side effect. The xserver-nodm kept crashing so it was eating up some ressources. I still have X11 in my DISTRO_FEATURES but when I ssh -XY to the device I get `X11 forwarding request failed on</td><td class="time"><a href="#t2022-01-28T08:48:22" class="time">08:48</a></td></tr>
<tr id="t2022-01-28T08:48:23"><th class="nick" style="background: #854685">Austriker</th><td class="text" style="color: #854685">channel 0`. What is the correct way to get X11 forwarding working without xserver-nodm for example. I have a an app that requires a GUI for configuration.</td><td class="time"><a href="#t2022-01-28T08:48:23" class="time">08:48</a></td></tr>
<tr id="t2022-01-28T09:19:58"><th class="nick" style="background: #488888">erbo_</th><td class="text" style="color: #488888">Austriker: Is X11 forwarding enabled in sshd_config, and xauth installed?</td><td class="time"><a href="#t2022-01-28T09:19:58" class="time">09:19</a></td></tr>
<tr id="t2022-01-28T09:20:34"><th class="nick" style="background: #488888">erbo_</th><td class="text" style="color: #488888">There's also an option for xauth location in sshd_config that might be worth setting, XAuthLocation</td><td class="time"><a href="#t2022-01-28T09:20:34" class="time">09:20</a></td></tr>
<tr id="t2022-01-28T09:22:12"><th class="nick" style="background: #854685">Austriker</th><td class="text" style="color: #854685">erbo_ yes X11 forwarding is enabled but xauth is not installed.</td><td class="time"><a href="#t2022-01-28T09:22:12" class="time">09:22</a></td></tr>
<tr id="t2022-01-28T09:23:06"><th class="nick" style="background: #488888">erbo_</th><td class="text" style="color: #488888">Austriker: I'm by no means an X11 forwarding expert, but I think you need xauth on the server side</td><td class="time"><a href="#t2022-01-28T09:23:06" class="time">09:23</a></td></tr>
<tr id="t2022-01-28T09:25:13"><th class="nick" style="background: #8c4a4a">michalkotyla</th><td class="text" style="color: #8c4a4a">Hi everyone. I try to disable serial in debug version of my image recipes. I tried to do this with executing systemctl --root=${IMAGE_ROOTFS} disable serial-getty@.service; but it cause an error: systemctl: error: argument command: invalid choice: 'disable' (choose from 'enable', 'mask', 'preset-all')</td><td class="time"><a href="#t2022-01-28T09:25:13" class="time">09:25</a></td></tr>
<tr id="t2022-01-28T09:25:32"><th class="nick" style="background: #8c4a4a">michalkotyla</th><td class="text" style="color: #8c4a4a">Do you have any ideas how to do it in different way? i do not want to mask service, only disable</td><td class="time"><a href="#t2022-01-28T09:25:32" class="time">09:25</a></td></tr>
<tr id="t2022-01-28T09:26:09"><th class="nick" style="background: #854685">Austriker</th><td class="text" style="color: #854685">erbo_ I am building a new image with xauth and the changes in the settings. I hope this will solve the issue.</td><td class="time"><a href="#t2022-01-28T09:26:09" class="time">09:26</a></td></tr>
<tr id="t2022-01-28T09:38:40"><th class="nick" style="background: #488888">erbo_</th><td class="text" style="color: #488888">michalkotyla: I guess it's systemd-serialgetty that adds entries in /etc/systemd/system/getty.target.wants/ for all entries in SERIAL_CONSOLES</td><td class="time"><a href="#t2022-01-28T09:38:40" class="time">09:38</a></td></tr>
<tr id="t2022-01-28T09:41:52"><th class="nick" style="background: #488888">erbo_</th><td class="text" style="color: #488888">So you could remove those entries manually in a rootfs post process command if you only want it done for a certain image. But maybe a more elegant solution would be bbappend the systemd-serialgetty recipe and split /etc/systemd/system/getty.target.wants/* into a separate package and only install that in images where you want it auto-enabled.</td><td class="time"><a href="#t2022-01-28T09:41:52" class="time">09:41</a></td></tr>
<tr id="t2022-01-28T09:48:21"><th class="nick" style="background: #8c4a4a">michalkotyla</th><td class="text" style="color: #8c4a4a">maybe, i will try with it - thanks</td><td class="time"><a href="#t2022-01-28T09:48:21" class="time">09:48</a></td></tr>
<tr id="t2022-01-28T10:59:18"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">RP: maybe but I do wonder what are those specific products that can be only supported with directfb</td><td class="time"><a href="#t2022-01-28T10:59:18" class="time">10:59</a></td></tr>
<tr id="t2022-01-28T10:59:38"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">(and I mean something that's not too old)</td><td class="time"><a href="#t2022-01-28T10:59:38" class="time">10:59</a></td></tr>
<tr id="t2022-01-28T11:10:54"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">dunfell kernel build failing with ld: scripts/dtc/dtc-parser.tab.o:(.bss+0x10): multiple definition of `yylloc'; scripts/dtc/dtc-lexer.lex.o:(.bss+0x38): first defined here</td><td class="time"><a href="#t2022-01-28T11:10:54" class="time">11:10</a></td></tr>
<tr id="t2022-01-28T11:11:02"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">spider-sense kicking off but i can't remember the fix</td><td class="time"><a href="#t2022-01-28T11:11:02" class="time">11:11</a></td></tr>
<tr id="t2022-01-28T11:14:04"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">rburton: <a href="https://git.theobroma-systems.com/yocto-layers/meta-theobroma-systems-bsp.git/tree/recipes-kernel/linux/files/0001-scripts-dtc-Remove-redundant-YYLOC-global-declaratio.patch" rel="nofollow">https://git.theobroma-systems.com/yocto-layers/meta-theobroma-systems-bsp.git/tree/recipes-kernel/linux/files/0001-scripts-dtc-Remove-redundant-YYLOC-global-declaratio.patch</a></td><td class="time"><a href="#t2022-01-28T11:14:04" class="time">11:14</a></td></tr>
<tr id="t2022-01-28T11:14:09"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">zeddiii: can you backport e33a814e772cdc36436c8c188d8c42d019fda639 to the</td><td class="time"><a href="#t2022-01-28T11:14:09" class="time">11:14</a></td></tr>
<tr id="t2022-01-28T11:14:11"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">yeah just found it</td><td class="time"><a href="#t2022-01-28T11:14:11" class="time">11:14</a></td></tr>
<tr id="t2022-01-28T11:14:27"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">zeddiii: can you backport e33a814e772cdc36436c8c188d8c42d019fda639 to the 5.3 kernel in dunfell</td><td class="time"><a href="#t2022-01-28T11:14:27" class="time">11:14</a></td></tr>
<tr id="t2022-01-28T11:15:49"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">oh hang on that's our recipe</td><td class="time"><a href="#t2022-01-28T11:15:49" class="time">11:15</a></td></tr>
<tr id="t2022-01-28T11:15:55"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">so why did it break overnight</td><td class="time"><a href="#t2022-01-28T11:15:55" class="time">11:15</a></td></tr>
<tr id="t2022-01-28T11:16:23"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">aaah new host</td><td class="time"><a href="#t2022-01-28T11:16:23" class="time">11:16</a></td></tr>
<tr id="t2022-01-28T11:16:32"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">mystery over</td><td class="time"><a href="#t2022-01-28T11:16:32" class="time">11:16</a></td></tr>
<tr id="t2022-01-28T11:17:30"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">zeddiii: stand down, my fault :)</td><td class="time"><a href="#t2022-01-28T11:17:30" class="time">11:17</a></td></tr>
<tr id="t2022-01-28T11:21:33"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">rburton: also.. 5.3 :p ?</td><td class="time"><a href="#t2022-01-28T11:21:33" class="time">11:21</a></td></tr>
<tr id="t2022-01-28T11:22:08"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">yeah, don't ask</td><td class="time"><a href="#t2022-01-28T11:22:08" class="time">11:22</a></td></tr>
<tr id="t2022-01-28T11:22:57"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">i spent a week writing a tool to turn a layer into a report for project managers which has bright red annotations for non-upstreamed patches and old releases :)</td><td class="time"><a href="#t2022-01-28T11:22:57" class="time">11:22</a></td></tr>
<tr id="t2022-01-28T11:23:56"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">rburton: hehe</td><td class="time"><a href="#t2022-01-28T11:23:56" class="time">11:23</a></td></tr>
<tr id="t2022-01-28T11:24:06"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">switching to 5.4 shouldn't be that big of a task though</td><td class="time"><a href="#t2022-01-28T11:24:06" class="time">11:24</a></td></tr>
<tr id="t2022-01-28T11:24:12"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">correct</td><td class="time"><a href="#t2022-01-28T11:24:12" class="time">11:24</a></td></tr>
<tr id="t2022-01-28T11:25:43"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">Is there a way to just generate a toolchain for C? `bitbake -c populate-sdk image` builds everything and I don't need that</td><td class="time"><a href="#t2022-01-28T11:25:43" class="time">11:25</a></td></tr>
<tr id="t2022-01-28T11:26:11"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">Would it maybe just build the toolchain for the kernel if I put `bitbake -c populate-sdk linux-imx`?</td><td class="time"><a href="#t2022-01-28T11:26:11" class="time">11:26</a></td></tr>
<tr id="t2022-01-28T11:26:20"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">bitbake meta-toolchain builds just the compilers and a few tools</td><td class="time"><a href="#t2022-01-28T11:26:20" class="time">11:26</a></td></tr>
<tr id="t2022-01-28T11:29:09"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">rburton: Looks pretty similar to me though</td><td class="time"><a href="#t2022-01-28T11:29:09" class="time">11:29</a></td></tr>
<tr id="t2022-01-28T11:29:35"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: The more I look at this reproducibility issue, the more worried I get :(</td><td class="time"><a href="#t2022-01-28T11:29:35" class="time">11:29</a></td></tr>
<tr id="t2022-01-28T11:35:09"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">coldspark29[m]: copy the meta-toolchain recipe and remove stuff you don't need then</td><td class="time"><a href="#t2022-01-28T11:35:09" class="time">11:35</a></td></tr>
<tr id="t2022-01-28T11:39:42"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">It inherits populate_sdk :D</td><td class="time"><a href="#t2022-01-28T11:39:42" class="time">11:39</a></td></tr>
<tr id="t2022-01-28T11:40:00"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">thats because the sdk code is common</td><td class="time"><a href="#t2022-01-28T11:40:00" class="time">11:40</a></td></tr>
<tr id="t2022-01-28T11:40:24"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">meta-toolchain is the compiler, binutils, and a few tools.</td><td class="time"><a href="#t2022-01-28T11:40:24" class="time">11:40</a></td></tr>
<tr id="t2022-01-28T11:41:02"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">Hmm</td><td class="time"><a href="#t2022-01-28T11:41:02" class="time">11:41</a></td></tr>
<tr id="t2022-01-28T11:41:04"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">I will leave it now</td><td class="time"><a href="#t2022-01-28T11:41:04" class="time">11:41</a></td></tr>
<tr id="t2022-01-28T11:41:17"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">Hoping it finishes building soon</td><td class="time"><a href="#t2022-01-28T11:41:17" class="time">11:41</a></td></tr>
<tr id="t2022-01-28T11:41:33"><th class="nick" style="background: #9b519b">coldspark29[m]</th><td class="text" style="color: #9b519b">Thanks anyway</td><td class="time"><a href="#t2022-01-28T11:41:33" class="time">11:41</a></td></tr>
<tr id="t2022-01-28T11:44:50"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">oops</td><td class="time"><a href="#t2022-01-28T11:44:50" class="time">11:44</a></td></tr>
<tr id="t2022-01-28T11:45:01"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">I just clicked stop on something I shouldn't have</td><td class="time"><a href="#t2022-01-28T11:45:01" class="time">11:45</a></td></tr>
<tr id="t2022-01-28T11:45:03"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">on the AB</td><td class="time"><a href="#t2022-01-28T11:45:03" class="time">11:45</a></td></tr>
<tr id="t2022-01-28T11:45:24"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b">and I promised not to do it :(</td><td class="time"><a href="#t2022-01-28T11:45:24" class="time">11:45</a></td></tr>
<tr id="t2022-01-28T11:46:20"><th class="nick" style="background: #4b904b">kanavin</th><td class="text" style="color: #4b904b"><a href="https://autobuilder.yoctoproject.org/typhoon/#/builders/117/builds/384" rel="nofollow">https://autobuilder.yoctoproject.org/typhoon/#/builders/117/builds/384</a></td><td class="time"><a href="#t2022-01-28T11:46:20" class="time">11:46</a></td></tr>
<tr id="t2022-01-28T12:14:22"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">kanavin: highlighting the issue so we can debug it would be better :/</td><td class="time"><a href="#t2022-01-28T12:14:22" class="time">12:14</a></td></tr>
<tr id="t2022-01-28T12:21:27"><th class="nick" style="background: #a25555">svuorela</th><td class="text" style="color: #a25555">hmm.. looks like my environment setup file for my sdk has gotten -O2 -D_FORTIFY_SOURCE=2 in the CC/CPP/CXX environment variables - given that I during usage of my sdk sometimes want a -O0 build, this is obviously not what I want. What should I look for to find the cause ?</td><td class="time"><a href="#t2022-01-28T12:21:27" class="time">12:21</a></td></tr>
<tr id="t2022-01-28T12:27:23"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">In the problem reproducible build, do_package and do_package_write_deb came from sstate, write_ipk and write_rpm did not. The trouble is the binaries in do_package don't match the binaries in do_package_write_deb :(</td><td class="time"><a href="#t2022-01-28T12:27:23" class="time">12:27</a></td></tr>
<tr id="t2022-01-28T12:38:28"><th class="nick" style="background: #a25555">svuorela</th><td class="text" style="color: #a25555">hmm. even more. a 3rd of my custom recipes contains TARGET_CC_ARCH += &quot;${LDFLAGS}&quot;</td><td class="time"><a href="#t2022-01-28T12:38:28" class="time">12:38</a></td></tr>
<tr id="t2022-01-28T12:38:33"><th class="nick" style="background: #a25555">svuorela</th><td class="text" style="color: #a25555"> - is that right ?</td><td class="time"><a href="#t2022-01-28T12:38:33" class="time">12:38</a></td></tr>
<tr id="t2022-01-28T12:40:39"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">that's basically working around the makefiles or whatever not respecting LDFLAGS</td><td class="time"><a href="#t2022-01-28T12:40:39" class="time">12:40</a></td></tr>
<tr id="t2022-01-28T12:41:45"><th class="nick" style="background: #a25555">svuorela</th><td class="text" style="color: #a25555">ok. I wonder if that leaks stuff into my environment setup file ?</td><td class="time"><a href="#t2022-01-28T12:41:45" class="time">12:41</a></td></tr>
<tr id="t2022-01-28T13:16:15"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: I started digging a small hole yesterday (to remove \n from mirror variables throughout poky, as I discussed with Michael on the lists), and I ended up with something the size of Grand Canyon. I hope you can help me and maybe throw me rope to get me out of here while saving some of the artefacts that I dug up...</td><td class="time"><a href="#t2022-01-28T13:16:15" class="time">13:16</a></td></tr>
<tr id="t2022-01-28T13:20:21"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: I can try and help!</td><td class="time"><a href="#t2022-01-28T13:20:21" class="time">13:20</a></td></tr>
<tr id="t2022-01-28T13:20:49"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">zeddiii: I hate to say this but the reproducibility issues are looking like they're triggered by kernel headers :(</td><td class="time"><a href="#t2022-01-28T13:20:49" class="time">13:20</a></td></tr>
<tr id="t2022-01-28T13:23:25"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">zeddiii: and the commit which &quot;triggers&quot; this is from abelloni :)</td><td class="time"><a href="#t2022-01-28T13:23:25" class="time">13:23</a></td></tr>
<tr id="t2022-01-28T13:23:27"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/include/uapi/linux/rtc.h?id=6a8af1b6568ad9ee08a419fb12c793f7992cf8a4" rel="nofollow">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/include/uapi/linux/rtc.h?id=6a8af1b6568ad9ee08a419fb12c793f7992cf8a4</a></td><td class="time"><a href="#t2022-01-28T13:23:27" class="time">13:23</a></td></tr>
<tr id="t2022-01-28T13:23:39"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">abelloni: stop breaking things for us! :)</td><td class="time"><a href="#t2022-01-28T13:23:39" class="time">13:23</a></td></tr>
<tr id="t2022-01-28T13:24:03"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: Well, the \n changes were trivial enough, no problems there. However, since one of the changed files was fetcher.py, I made the mistake of thinking I should run bitbake-selftest. Turns I apparently haven't done that before (shame on me), which lead to that I first had to fix so that I can run it (we have global Git hooks that interfere with bitbake-selftest setting user.name to a dummy value.</td><td class="time"><a href="#t2022-01-28T13:24:03" class="time">13:24</a></td></tr>
<tr id="t2022-01-28T13:25:12"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">What happens is that the above commit changes the line numbers for the pending and enabled variable declarations in the uapi rtc.h header. rtcwake.c in util linux embeds that info into the debug symbols in rtcwake. For some reason hashequiv isn't tracking this correctly</td><td class="time"><a href="#t2022-01-28T13:25:12" class="time">13:25</a></td></tr>
<tr id="t2022-01-28T13:25:19"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">That too wasn't too hard to fix. Then when I ran it, I first enabled BB_SKIP_NETTESTS since I'm behind a firewall, and realized that's probably something you don't do as it failed the crate tests. Easily fixed.</td><td class="time"><a href="#t2022-01-28T13:25:19" class="time">13:25</a></td></tr>
<tr id="t2022-01-28T13:26:08"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: I likely missed adding the skip network test on the crate tests when I added them. yes</td><td class="time"><a href="#t2022-01-28T13:26:08" class="time">13:26</a></td></tr>
<tr id="t2022-01-28T13:26:08-2"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Then I managed to configure the proxy settings so I could actually run all the tests. All looked great until it failed two npm tests related to premirror and that is when chaos started.</td><td class="time"><a href="#t2022-01-28T13:26:08-2" class="time">13:26</a></td></tr>
<tr id="t2022-01-28T13:26:28"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: the npm tests probably aren't being run anywhere at the moment :(</td><td class="time"><a href="#t2022-01-28T13:26:28" class="time">13:26</a></td></tr>
<tr id="t2022-01-28T13:26:57"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Exactly, I kind of figured that out after having dug into for quite a while.</td><td class="time"><a href="#t2022-01-28T13:26:57" class="time">13:26</a></td></tr>
<tr id="t2022-01-28T13:27:16"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: sorry, they're on my &quot;need to do something about it&quot; list :(</td><td class="time"><a href="#t2022-01-28T13:27:16" class="time">13:27</a></td></tr>
<tr id="t2022-01-28T13:27:28"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">along with many many other things :(</td><td class="time"><a href="#t2022-01-28T13:27:28" class="time">13:27</a></td></tr>
<tr id="t2022-01-28T13:27:51"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">The problem now is that I though I should fix them, but I am not really sure what the correct thing to do is, or what is the expected behaviour from the npm fetcher...</td><td class="time"><a href="#t2022-01-28T13:27:51" class="time">13:27</a></td></tr>
<tr id="t2022-01-28T13:28:05"><th class="nick" style="background: #5959a9">moto_timo[m]</th><td class="text" style="color: #5959a9">That list never seems to get shorter does it</td><td class="time"><a href="#t2022-01-28T13:28:05" class="time">13:28</a></td></tr>
<tr id="t2022-01-28T13:28:15"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: we could never enable them on the autobuilder since they need npm from meta-oe. The plan was to figure out how to add that but somehow they bitrotted along the way</td><td class="time"><a href="#t2022-01-28T13:28:15" class="time">13:28</a></td></tr>
<tr id="t2022-01-28T13:28:33"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">I don't really know the node stuff well enough to know what the right fix is</td><td class="time"><a href="#t2022-01-28T13:28:33" class="time">13:28</a></td></tr>
<tr id="t2022-01-28T13:31:29"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Looking at the npm fetcher it uses the downloadfilename= parameter do specify the name of the npm packages it downloads. If you don't specify it yourself it will put the downloaded files in an &quot;npm2&quot; directory. However, if you actually do specify downloadfilename= to npm://, it will not do this and rather put them exactly as the downloadfilename= parameter specifies. This causes confusion if one takes the download directory and attempts t</td><td class="time"><a href="#t2022-01-28T13:31:29" class="time">13:31</a></td></tr>
<tr id="t2022-01-28T13:31:29-2"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">o use it as a premirror as some npms are in npm2 and others are in the root.</td><td class="time"><a href="#t2022-01-28T13:31:29-2" class="time">13:31</a></td></tr>
<tr id="t2022-01-28T13:32:43"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: the question now is how does a kernel header change defeat the hashequivalence mechanism for package_write_deb on util-linux :/</td><td class="time"><a href="#t2022-01-28T13:32:43" class="time">13:32</a></td></tr>
<tr id="t2022-01-28T13:33:17"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: I'd say it should use npm2 in all cases</td><td class="time"><a href="#t2022-01-28T13:33:17" class="time">13:33</a></td></tr>
<tr id="t2022-01-28T13:33:55"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">To me it makes much more sense to always put all downloaded npms in the npm2 directory, which is a trivial change. However, I do not know if there are any consequences of that which I do not realize...</td><td class="time"><a href="#t2022-01-28T13:33:55" class="time">13:33</a></td></tr>
<tr id="t2022-01-28T13:34:39"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: You'd hope that would just cause a few extra downloads for some users?</td><td class="time"><a href="#t2022-01-28T13:34:39" class="time">13:34</a></td></tr>
<tr id="t2022-01-28T13:35:30"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">More like if people have expectations of where the files end up when doing things such as taking the downloaded files a nd creating mirrors or so...</td><td class="time"><a href="#t2022-01-28T13:35:30" class="time">13:35</a></td></tr>
<tr id="t2022-01-28T13:36:20"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">But maybe there aren't that many users of the npm fetcher that that is a problem...</td><td class="time"><a href="#t2022-01-28T13:36:20" class="time">13:36</a></td></tr>
<tr id="t2022-01-28T13:36:36"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: copying DL_DIR would still work and yes, I doubt there are that many users so I think we should fix it</td><td class="time"><a href="#t2022-01-28T13:36:36" class="time">13:36</a></td></tr>
<tr id="t2022-01-28T13:36:49"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Would be interesting to see if anyone does notice</td><td class="time"><a href="#t2022-01-28T13:36:49" class="time">13:36</a></td></tr>
<tr id="t2022-01-28T13:36:50"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">I guess I'll just propose the change to the list and see if anyone objects.</td><td class="time"><a href="#t2022-01-28T13:36:50" class="time">13:36</a></td></tr>
<tr id="t2022-01-28T13:37:06"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: gets my vote FWIW :)</td><td class="time"><a href="#t2022-01-28T13:37:06" class="time">13:37</a></td></tr>
<tr id="t2022-01-28T13:37:21"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Would be nice to have those tests fixed!</td><td class="time"><a href="#t2022-01-28T13:37:21" class="time">13:37</a></td></tr>
<tr id="t2022-01-28T13:37:56"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">I have a fix for the first test so far.</td><td class="time"><a href="#t2022-01-28T13:37:56" class="time">13:37</a></td></tr>
<tr id="t2022-01-28T13:39:40"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">As for the second test, which I don't really understand what it's trying to test, it gets harder. And that's not really due to the npm part, but the fact that it sets a premirror like https?$://.*/.* file:///tmp/bitbake-fetch-s5wcbmf1/mirror/npm2/savoirfairelinux-node-server-example-1.0.0.tgz</td><td class="time"><a href="#t2022-01-28T13:39:40" class="time">13:39</a></td></tr>
<tr id="t2022-01-28T13:40:54"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">The problem is that after uri_replace() has had its go at it, the resulting URI ends up as /tmp/bitbake-fetch-s5wcbmf1/mirror/npm2/savoirfairelinux-savoirfairelinux-node-server-example-1.0.0.tgz, which it obviously will not find sine the URL should actually be /tmp/bitbake-fetch-s5wcbmf1/mirror/npm2/savoirfairelinux-node-server-example-1.0.0.tgz</td><td class="time"><a href="#t2022-01-28T13:40:54" class="time">13:40</a></td></tr>
<tr id="t2022-01-28T13:42:14"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">I believe this is a result of commit 96c30007dc0b32eee2b15771daec7948bc9bfd97 in the bitbake repository.</td><td class="time"><a href="#t2022-01-28T13:42:14" class="time">13:42</a></td></tr>
<tr id="t2022-01-28T13:42:48"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">More specifically the call to result_decoded[loc] = result_decoded[loc].replace(uri_basename, basename)</td><td class="time"><a href="#t2022-01-28T13:42:48" class="time">13:42</a></td></tr>
<tr id="t2022-01-28T13:43:35"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Where, for the npm case uri_basename is node-server-example-1.0.0.tgz and basename is savoirfairelinux-node-server-example-1.0.0.tgz</td><td class="time"><a href="#t2022-01-28T13:43:35" class="time">13:43</a></td></tr>
<tr id="t2022-01-28T13:44:38"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: which test is this specifically?</td><td class="time"><a href="#t2022-01-28T13:44:38" class="time">13:44</a></td></tr>
<tr id="t2022-01-28T13:44:50"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">test_npm_premirrors_with_specified_filename</td><td class="time"><a href="#t2022-01-28T13:44:50" class="time">13:44</a></td></tr>
<tr id="t2022-01-28T13:45:56"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">I don't really see the point of the test in itself, but it did find this problem, which I believe is real.</td><td class="time"><a href="#t2022-01-28T13:45:56" class="time">13:45</a></td></tr>
<tr id="t2022-01-28T13:47:42"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: I don't really see what that test is meant to be doing either :/</td><td class="time"><a href="#t2022-01-28T13:47:42" class="time">13:47</a></td></tr>
<tr id="t2022-01-28T13:48:40"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: I was wondering if we need to go back to when these were added and see if we can bisect down which fetcher change broke them. Not sure if that is worth it and would tell us anything or not</td><td class="time"><a href="#t2022-01-28T13:48:40" class="time">13:48</a></td></tr>
<tr id="t2022-01-28T13:48:54"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">It is what I was originally thinking of doing to track down the issues</td><td class="time"><a href="#t2022-01-28T13:48:54" class="time">13:48</a></td></tr>
<tr id="t2022-01-28T13:52:26"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">The first change is 8a3ff9f3eaf19d4258eb070c5dc230dface269b2 which tried to solve the problem where downloadfilename= is used together with a premirror. The tests were modified/added in 61db3e96530d650e098436fd086f0182d32998f7 and 5ba191a0407af9e652e3b86302dce3e952d6b587. Then the second try to fix it is in commit 96c30007dc0b32eee2b15771daec7948bc9bfd97, and that is when the tests got broken.</td><td class="time"><a href="#t2022-01-28T13:52:26" class="time">13:52</a></td></tr>
<tr id="t2022-01-28T13:57:23"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">RP: Do you have the depsig files by chance?</td><td class="time"><a href="#t2022-01-28T13:57:23" class="time">13:57</a></td></tr>
<tr id="t2022-01-28T14:00:59"><th class="nick" style="background: #b15db1">zeddiii</th><td class="text" style="color: #b15db1">RP: interesting ... so the fix will have to be in hashequiv ? or did you want me to poke at the headers or are we into another sorting utility ?</td><td class="time"><a href="#t2022-01-28T14:00:59" class="time">14:00</a></td></tr>
<tr id="t2022-01-28T14:52:02"><td class="nickchange" colspan="2">*** Dracos-Carazza_ is now known as Dracos-Carazza</td><td><a href="#t2022-01-28T14:52:02" class="time">14:52</a></td></tr>
<tr id="t2022-01-28T14:58:48"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">zeddiii: its a hashequiv issue, the kernel headers are just a trigger :/</td><td class="time"><a href="#t2022-01-28T14:58:48" class="time">14:58</a></td></tr>
<tr id="t2022-01-28T14:59:00"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: I do not have all of what we need, no :/</td><td class="time"><a href="#t2022-01-28T14:59:00" class="time">14:59</a></td></tr>
<tr id="t2022-01-28T15:04:29"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">RP: Fair enough. So the theory is that the kernel header line numbers are getting encoded in the debug data?</td><td class="time"><a href="#t2022-01-28T15:04:29" class="time">15:04</a></td></tr>
<tr id="t2022-01-28T15:04:58"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">... and somehow that changed between 2 runs of the reproducible build test?</td><td class="time"><a href="#t2022-01-28T15:04:58" class="time">15:04</a></td></tr>
<tr id="t2022-01-28T15:06:05"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">Or, the first build came from sstate, and hashequiv somehow &quot;missed&quot; that the output change and marked them as equivalent?</td><td class="time"><a href="#t2022-01-28T15:06:05" class="time">15:06</a></td></tr>
<tr id="t2022-01-28T15:12:58"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: The build that came from sstate had a do_package_setscene built with the new headers but a do_package_write_deb_setscene that was built with the old ones (or vice versa)</td><td class="time"><a href="#t2022-01-28T15:12:58" class="time">15:12</a></td></tr>
<tr id="t2022-01-28T15:13:27"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">For reasons unknown, ipk/rpm rebuild and didn't come from sstate and packaged the do_package data which then didn't match the deb</td><td class="time"><a href="#t2022-01-28T15:13:27" class="time">15:13</a></td></tr>
<tr id="t2022-01-28T15:17:45"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">rpm and ipk didn't pull from sstate at all?</td><td class="time"><a href="#t2022-01-28T15:17:45" class="time">15:17</a></td></tr>
<tr id="t2022-01-28T15:18:38"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">(presumably, that's why the A build took so long?)</td><td class="time"><a href="#t2022-01-28T15:18:38" class="time">15:18</a></td></tr>
<tr id="t2022-01-28T15:19:02"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: they rebuilt the rpm and ipk step from do_package</td><td class="time"><a href="#t2022-01-28T15:19:02" class="time">15:19</a></td></tr>
<tr id="t2022-01-28T15:19:11"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: I don't know why :/</td><td class="time"><a href="#t2022-01-28T15:19:11" class="time">15:19</a></td></tr>
<tr id="t2022-01-28T15:28:44"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: After reading through <a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=13039" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=13039</a>, I now think I know what the problem with downloadfilename= and premirror is. Scotts expectation is that if you have a SRC_URI that asks for foo.tgz and downloads it as bar.tgz, it should still ask for foo.tgz when searching the premirror. And this is sane if you set the premirror to some external source which carries the same files as the origin server in t</td><td class="time"><a href="#t2022-01-28T15:28:44" class="time">15:28</a></td></tr>
<tr id="t2022-01-28T15:28:44-2"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">he URI. However, if you instead expect to use whatever you have downloaded in one build to serve as your local premirror for another build, then you expect bitbake to look for bar.tgz in the premirror as that is the name it will have when it lands in ${DL_DIR}.</td><td class="time"><a href="#t2022-01-28T15:28:44-2" class="time">15:28</a></td></tr>
<tr id="t2022-01-28T15:30:11"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: ah, yes. We would expect to be able to reuse a download as a premirror :/</td><td class="time"><a href="#t2022-01-28T15:30:11" class="time">15:30</a></td></tr>
<tr id="t2022-01-28T15:30:12"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: Both uses cases seem to valid. So the question then becomes, should bitbake look for both the downloadfilename and the original file when trying to locate a file?</td><td class="time"><a href="#t2022-01-28T15:30:12" class="time">15:30</a></td></tr>
<tr id="t2022-01-28T15:30:35"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: hmm, I can see both cases :/</td><td class="time"><a href="#t2022-01-28T15:30:35" class="time">15:30</a></td></tr>
<tr id="t2022-01-28T15:43:11"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">Can two distro using the same libc can share TMPDIR, or is it better to split them with e.g. TCLIBCAPPEND = &quot;-${DISTRO}&quot;?</td><td class="time"><a href="#t2022-01-28T15:43:11" class="time">15:43</a></td></tr>
<tr id="t2022-01-28T15:47:59"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">khem: meta-oe is still broken with folks depending on mockdbus-native</td><td class="time"><a href="#t2022-01-28T15:47:59" class="time">15:47</a></td></tr>
<tr id="t2022-01-28T15:49:04"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: Is it possible to enable the logger messages that are produced while running bitbake-selftest some way? Currently I am adding print() statements as I go along to get it to output what is happening...</td><td class="time"><a href="#t2022-01-28T15:49:04" class="time">15:49</a></td></tr>
<tr id="t2022-01-28T15:51:17"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: I believe sharing would be fine, though you'd likely need to be copying the deployed artifacts you need out after building each one if there's any overlap</td><td class="time"><a href="#t2022-01-28T15:51:17" class="time">15:51</a></td></tr>
<tr id="t2022-01-28T15:51:25"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: Offhand I don't remember how, I usually end up doing that too :(</td><td class="time"><a href="#t2022-01-28T15:51:25" class="time">15:51</a></td></tr>
<tr id="t2022-01-28T15:51:32"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Ok.</td><td class="time"><a href="#t2022-01-28T15:51:32" class="time">15:51</a></td></tr>
<tr id="t2022-01-28T15:52:36"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: true, because the deploy paths (e.g. DEPLOY_DIR_IMAGE) do not include ${DISTRO} by default</td><td class="time"><a href="#t2022-01-28T15:52:36" class="time">15:52</a></td></tr>
<tr id="t2022-01-28T15:53:16"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: so DEPLOY_DIR:append = &quot;/${BB_CURRENT_MC}&quot; should be just enough in fact, keeping TMPDIR and TCLIBCAPPEND to their defaults</td><td class="time"><a href="#t2022-01-28T15:53:16" class="time">15:53</a></td></tr>
<tr id="t2022-01-28T15:56:09"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: if you're using multiconfig and potentially building both at the same time it's perhaps better to fully split them with e.g. TMPDIR = &quot;${TOPDIR}/tmp-${BB_CURRENT_MC}&quot;</td><td class="time"><a href="#t2022-01-28T15:56:09" class="time">15:56</a></td></tr>
<tr id="t2022-01-28T15:58:36"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: but it kind of depends on what's different in the distro configs.&nbsp;&nbsp;I'm not sure significantly different distro configs that result in a bunch of package differences will play nicely wrt trying to build both rootfs-es at the same time if TMPDIR is shared</td><td class="time"><a href="#t2022-01-28T15:58:36" class="time">15:58</a></td></tr>
<tr id="t2022-01-28T16:00:53"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2022-01-28T16:00:53" class="time">16:00</a></td></tr>
<tr id="t2022-01-28T16:03:16"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: you're right. I just want to stick with a default and safe conf that I forget about. I'm adding a site.conf with DEPLOY_DIR:append = &quot;/${BB_CURRENT_MC}&quot;, TMPDIR:append = &quot;-${BB_CURRENT_MC}&quot;, TCLIBCAPPEND = &quot;&quot;.</td><td class="time"><a href="#t2022-01-28T16:03:16" class="time">16:03</a></td></tr>
<tr id="t2022-01-28T16:06:15"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: if you change TMPDIR you shouldn't need to also tweak DEPLOYDIR unless you've changed it to point outside of TMPDIR with some other tweak</td><td class="time"><a href="#t2022-01-28T16:06:15" class="time">16:06</a></td></tr>
<tr id="t2022-01-28T16:07:12"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: correct, on my server I set DEPLOY_DIR = &quot;/srv/http&quot; for development</td><td class="time"><a href="#t2022-01-28T16:07:12" class="time">16:07</a></td></tr>
<tr id="t2022-01-28T16:07:45"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: also note that for the main bitbake BB_CURRENT_MC = &quot;default&quot;.&nbsp;&nbsp;In my AGL setup I tweak TMPDIR in the multiconfig .conf's to have tmp, tmp-conf1, tmp-conf1.&nbsp;&nbsp;But that's more of a style thing</td><td class="time"><a href="#t2022-01-28T16:07:45" class="time">16:07</a></td></tr>
<tr id="t2022-01-28T16:08:00"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">err, tmp, tmp-conf1, tmp-conf2</td><td class="time"><a href="#t2022-01-28T16:08:00" class="time">16:08</a></td></tr>
<tr id="t2022-01-28T16:08:12"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">need to go make a coffee ;)</td><td class="time"><a href="#t2022-01-28T16:08:12" class="time">16:08</a></td></tr>
<tr id="t2022-01-28T16:08:44"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">vd: it all depends whether your distro configs match or not. If they don't, using the same TMPDIR for them in a multiconfig will not work</td><td class="time"><a href="#t2022-01-28T16:08:44" class="time">16:08</a></td></tr>
<tr id="t2022-01-28T16:10:49"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">RP: even if they do match, the cost of splitting them is just that a few files will be copied over, right? (like removing TMPDIR and starting a build again)</td><td class="time"><a href="#t2022-01-28T16:10:49" class="time">16:10</a></td></tr>
<tr id="t2022-01-28T16:15:20"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">vd: yes</td><td class="time"><a href="#t2022-01-28T16:15:20" class="time">16:15</a></td></tr>
<tr id="t2022-01-28T16:19:12"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">heh, in the one AGL demo build they decided they want Qt configured differently in 2 different multiconfigs, it's slow enough to build that that outweighs everything else ;)</td><td class="time"><a href="#t2022-01-28T16:19:12" class="time">16:19</a></td></tr>
<tr id="t2022-01-28T16:22:56"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">RP: how do you feel about a patch adding something like this to bitbake.conf: MCAPPEND ?= &quot;${@'/' + d.getVar('BB_CURRENT_MC') if d.getVar('BB_CURRENT_MC') != 'default' else ''}&quot; DEPLOY_DIR .= &quot;${MCAPPEND}&quot; TMPDIR .= &quot;${MCAPPEND}&quot;; to provide users a safe environment by default that they can tweak if their multiconfigs match, or do you prefer to keep it as it is today?</td><td class="time"><a href="#t2022-01-28T16:22:56" class="time">16:22</a></td></tr>
<tr id="t2022-01-28T16:27:05"><th class="nick" style="background: #62bb62">LetoThe2nd</th><td class="text" style="color: #62bb62">whom should I poke for wiki access? RP ndec michaelo</td><td class="time"><a href="#t2022-01-28T16:27:05" class="time">16:27</a></td></tr>
<tr id="t2022-01-28T16:27:24"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">halstead: maybe too I think</td><td class="time"><a href="#t2022-01-28T16:27:24" class="time">16:27</a></td></tr>
<tr id="t2022-01-28T16:27:29"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">^</td><td class="time"><a href="#t2022-01-28T16:27:29" class="time">16:27</a></td></tr>
<tr id="t2022-01-28T16:27:51"><th class="nick" style="background: #62bb62">LetoThe2nd</th><td class="text" style="color: #62bb62">qschulz: ya right</td><td class="time"><a href="#t2022-01-28T16:27:51" class="time">16:27</a></td></tr>
<tr id="t2022-01-28T16:28:09"><th class="nick" style="background: #62bb62">LetoThe2nd</th><td class="text" style="color: #62bb62">i tell ya folks, its only a couple of day until i'm finally back to annoy you all!</td><td class="time"><a href="#t2022-01-28T16:28:09" class="time">16:28</a></td></tr>
<tr id="t2022-01-28T16:28:56"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">LetoThe2nd: :muscle:</td><td class="time"><a href="#t2022-01-28T16:28:56" class="time">16:28</a></td></tr>
<tr id="t2022-01-28T16:29:02"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">LetoThe2nd: halstead</td><td class="time"><a href="#t2022-01-28T16:29:02" class="time">16:29</a></td></tr>
<tr id="t2022-01-28T16:29:02-2"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">well, emoji fail</td><td class="time"><a href="#t2022-01-28T16:29:02-2" class="time">16:29</a></td></tr>
<tr id="t2022-01-28T16:29:25"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: I feel the pain, qtwebengine actually convinced me to buy an AMD 5950X / 64Go RAM build machine...</td><td class="time"><a href="#t2022-01-28T16:29:25" class="time">16:29</a></td></tr>
<tr id="t2022-01-28T16:29:37"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">vd: I don't think we want to hardcoded multiconfig layouts like that into oe-core</td><td class="time"><a href="#t2022-01-28T16:29:37" class="time">16:29</a></td></tr>
<tr id="t2022-01-28T16:30:26"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">RP: I see. It's better to let one define this in their local/site/auto/mc configs I understand</td><td class="time"><a href="#t2022-01-28T16:30:26" class="time">16:30</a></td></tr>
<tr id="t2022-01-28T16:30:45"><th class="nick" style="background: #62bb62">LetoThe2nd</th><td class="text" style="color: #62bb62">its really a strange feeling to wrap up 14 respectively 16 years at a company, with a full month of PTO.</td><td class="time"><a href="#t2022-01-28T16:30:45" class="time">16:30</a></td></tr>
<tr id="t2022-01-28T16:31:27"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: I've got a Threadripper so it's somewhat manageable on the CPU front, atm memory is the issue, 64GB actually isn't enough for that config w/o cutting parallelism down a bunch.&nbsp;&nbsp;I've got another 64GB sitting here that arrived from Newegg this week to put in ;)</td><td class="time"><a href="#t2022-01-28T16:31:27" class="time">16:31</a></td></tr>
<tr id="t2022-01-28T16:32:31"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: while compiling qtbase/qtwebengine, htop goes to maximum 50Go RAM usage for me. Am I lucky?</td><td class="time"><a href="#t2022-01-28T16:32:31" class="time">16:32</a></td></tr>
<tr id="t2022-01-28T16:33:32"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: it's building 2 copies of qtbase and qtdeclarative, etc. at the same time (one for each multiconfig) that blows up for me here.&nbsp;&nbsp;64GB + 40GB swap wasn't enough</td><td class="time"><a href="#t2022-01-28T16:33:32" class="time">16:33</a></td></tr>
<tr id="t2022-01-28T16:33:39"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: I think I see how this breaks. gcc-cross depends on linux-libc-headers and then all the target recipes depend on gcc-cross. The output of gcc-cross might not change when linux-libc-headers changes</td><td class="time"><a href="#t2022-01-28T16:33:39" class="time">16:33</a></td></tr>
<tr id="t2022-01-28T16:34:49"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">LetoThe2nd: I know what you mean, I felt odd leaving Intel</td><td class="time"><a href="#t2022-01-28T16:34:49" class="time">16:34</a></td></tr>
<tr id="t2022-01-28T16:35:36"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: ha true you have to qt builds in parallel. At first I saw multiconfig as a nice way to split my build variants (customer branding etc.), but I learnt the hard way to keep as much as possible in a multiconfig and only use different ones for actual architecture variants.</td><td class="time"><a href="#t2022-01-28T16:35:36" class="time">16:35</a></td></tr>
<tr id="t2022-01-28T16:35:55"><th class="nick" style="background: #62bb62">LetoThe2nd</th><td class="text" style="color: #62bb62">RP: yeah. and so many little things involved and surfacing now.</td><td class="time"><a href="#t2022-01-28T16:35:55" class="time">16:35</a></td></tr>
<tr id="t2022-01-28T16:37:19"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: my original setup for this one AGL build had one mc for all the containers, but folks decided they want different configurations for each \_()_/</td><td class="time"><a href="#t2022-01-28T16:37:19" class="time">16:37</a></td></tr>
<tr id="t2022-01-28T16:39:29"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: I'm not in your shoes but I would definitely work hard towards convincing them to go back to a common qt config...</td><td class="time"><a href="#t2022-01-28T16:39:29" class="time">16:39</a></td></tr>
<tr id="t2022-01-28T16:41:11"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: the people involved have said their next step is significantly different distro configs, so I've decided it's somewhat futile to push back</td><td class="time"><a href="#t2022-01-28T16:41:11" class="time">16:41</a></td></tr>
<tr id="t2022-01-28T16:41:42"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: I assume they have better build hardware than I do ;)</td><td class="time"><a href="#t2022-01-28T16:41:42" class="time">16:41</a></td></tr>
<tr id="t2022-01-28T16:43:45"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: if that ends up being two different distro, it actually makes sense yeah. The trap with multiconfigs is wishing to use them to split a common environment, that is definitely bad</td><td class="time"><a href="#t2022-01-28T16:43:45" class="time">16:43</a></td></tr>
<tr id="t2022-01-28T16:46:20"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: it's somewhat debatable in this instance IMO, but I'll not bore you ;)</td><td class="time"><a href="#t2022-01-28T16:46:20" class="time">16:46</a></td></tr>
<tr id="t2022-01-28T16:47:40"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: ha ha no worries, it's friday (whatever that means)</td><td class="time"><a href="#t2022-01-28T16:47:40" class="time">16:47</a></td></tr>
<tr id="t2022-01-28T17:01:24"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: Argh, I knew it wouldn't be as simple as just look for both the original name and the downloadfilename. My idea was to look for downloadfilename first as that is typically what would be in a local mirror, and then for the original name. However, what if someone specifies a URL like <a href="http://downloads.yoctoproject.org/releases/bitbake/bitbake-1.1.tar.gz;downloadfilename=bitbake-1.0.tar.gz" rel="nofollow">http://downloads.yoctoproject.org/releases/bitbake/bitbake-1.1.tar.gz;downloadfilename=bitbake-1.0.tar.gz</a>, i.e., where both files exists. In this case it i</td><td class="time"><a href="#t2022-01-28T17:01:24" class="time">17:01</a></td></tr>
<tr id="t2022-01-28T17:01:24-2"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">s probably more expected that the original file is found first... I just can't win, can I?</td><td class="time"><a href="#t2022-01-28T17:01:24-2" class="time">17:01</a></td></tr>
<tr id="t2022-01-28T17:02:36"><th class="nick" style="background: #6464bf">khem</th><td class="text" style="color: #6464bf">rburton:&nbsp;&nbsp;the needed patch is staged in oe-core master-next</td><td class="time"><a href="#t2022-01-28T17:02:36" class="time">17:02</a></td></tr>
<tr id="t2022-01-28T17:03:01"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">i still maintain that needing dbus-mock-native is a bug in the build</td><td class="time"><a href="#t2022-01-28T17:03:01" class="time">17:03</a></td></tr>
<tr id="t2022-01-28T17:03:13"><th class="nick" style="background: #4d4d93">rburton</th><td class="text" style="color: #4d4d93">the check is wrong, it needs *target* dbus-mock</td><td class="time"><a href="#t2022-01-28T17:03:13" class="time">17:03</a></td></tr>
<tr id="t2022-01-28T17:06:47"><th class="nick" style="background: #6464bf">khem</th><td class="text" style="color: #6464bf">rburton: you need to prove it, I dont claim to be expert</td><td class="time"><a href="#t2022-01-28T17:06:47" class="time">17:06</a></td></tr>
<tr id="t2022-01-28T17:09:36"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">what is the preferred way to add a bootloader as a dependency for a WIC image? EXTRA_IMAGEDEPENDS += &quot;virtual/bootloader&quot;, WKS_FILE_DEPENDS_BOOTLOADERS:${MACHINE} = &quot;virtual/bootloader&quot;, do_image_wic[depends] += &quot;virtual/bootloader:do_deploy&quot;? The latter is quite intrusive</td><td class="time"><a href="#t2022-01-28T17:09:36" class="time">17:09</a></td></tr>
<tr id="t2022-01-28T17:10:03"><th class="nick" style="background: #6464bf">khem</th><td class="text" style="color: #6464bf">jonmason: yt ?</td><td class="time"><a href="#t2022-01-28T17:10:03" class="time">17:10</a></td></tr>
<tr id="t2022-01-28T17:10:17"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">rburton: I thought that but didn't get to investigate</td><td class="time"><a href="#t2022-01-28T17:10:17" class="time">17:10</a></td></tr>
<tr id="t2022-01-28T17:10:48"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: that is rather problematic, yes :(</td><td class="time"><a href="#t2022-01-28T17:10:48" class="time">17:10</a></td></tr>
<tr id="t2022-01-28T17:12:51"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">RP: I actually don't think the problem is solvable without making the two uses cases explicit, by either adding more URI parameters or, e.g., making a distinction between premirrors and mirrors, where premirrors would look for downloadfilename while mirrors would look for the original name. Either way would most likely break someone's use cases...</td><td class="time"><a href="#t2022-01-28T17:12:51" class="time">17:12</a></td></tr>
<tr id="t2022-01-28T17:14:14"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">Saur: we probably need to document this parameter behaving in a particular way I guess</td><td class="time"><a href="#t2022-01-28T17:14:14" class="time">17:14</a></td></tr>
<tr id="t2022-01-28T17:19:52"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW, abelloni: you can see what I mean if you grep <a href="http://autobuilder.yocto.io/pub/repro-fail/oe-reproducible-20220127-ltbwzy_g/packages/diff-html/" rel="nofollow">http://autobuilder.yocto.io/pub/repro-fail/oe-reproducible-20220127-ltbwzy_g/packages/diff-html/</a> for &quot;pending&quot;, it refers to the field in the struct from rtc.h</td><td class="time"><a href="#t2022-01-28T17:19:52" class="time">17:19</a></td></tr>
<tr id="t2022-01-28T17:20:52"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">Ah, do cross recipes need the same thing we did to native&gt;</td><td class="time"><a href="#t2022-01-28T17:20:52" class="time">17:20</a></td></tr>
<tr id="t2022-01-28T17:20:54"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">Ah, do cross recipes need the same thing we did to native?</td><td class="time"><a href="#t2022-01-28T17:20:54" class="time">17:20</a></td></tr>
<tr id="t2022-01-28T17:21:09"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">erg, can't edit lines in IRC :)</td><td class="time"><a href="#t2022-01-28T17:21:09" class="time">17:21</a></td></tr>
<tr id="t2022-01-28T17:21:36"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: probably but in this case we have a target dependency on the libc headers as those are target, not cross</td><td class="time"><a href="#t2022-01-28T17:21:36" class="time">17:21</a></td></tr>
<tr id="t2022-01-28T17:21:45"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">and cross shouldn't hard depend on target</td><td class="time"><a href="#t2022-01-28T17:21:45" class="time">17:21</a></td></tr>
<tr id="t2022-01-28T17:22:32"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: this effectively applies to any indirect dependency in the sysroot :/</td><td class="time"><a href="#t2022-01-28T17:22:32" class="time">17:22</a></td></tr>
<tr id="t2022-01-28T17:23:32"><th class="nick" style="background: #539e9e">RP</th><td class="text" style="color: #539e9e">JPEW: recipe A installs header X, recipe B depends on A but doesn't use X, recipe C depends on recipe B, uses header X. Hash from A never makes it to C</td><td class="time"><a href="#t2022-01-28T17:23:32" class="time">17:23</a></td></tr>
<tr id="t2022-01-28T18:00:30"><td class="nickchange" colspan="2">*** neverpan1c is now known as neverpanic</td><td><a href="#t2022-01-28T18:00:30" class="time">18:00</a></td></tr>
<tr id="t2022-01-28T18:39:50"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">RP: Hmm.... I'm not sure what we can do about that</td><td class="time"><a href="#t2022-01-28T18:39:50" class="time">18:39</a></td></tr>
<tr id="t2022-01-28T18:41:42"><th class="nick" style="background: #adad5b">JPEW</th><td class="text" style="color: #adad5b">RP: Other than C should DEPEND On A</td><td class="time"><a href="#t2022-01-28T18:41:42" class="time">18:41</a></td></tr>
<tr id="t2022-01-28T22:01:02"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">if you want to version your site.conf and auto.conf to share them between co-workers, do you ususally version build/conf/ or do you create a layer to store them?</td><td class="time"><a href="#t2022-01-28T22:01:02" class="time">22:01</a></td></tr>
<tr id="t2022-01-28T22:04:05"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: actually regarding this ^ how do you version/share your multiconfigs if I may ask?</td><td class="time"><a href="#t2022-01-28T22:04:05" class="time">22:04</a></td></tr>
<tr id="t2022-01-28T22:05:36"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: in AGL they're checked into the conf/multiconfig directory in the associated layer</td><td class="time"><a href="#t2022-01-28T22:05:36" class="time">22:05</a></td></tr>
<tr id="t2022-01-28T22:06:52"><td class="nickchange" colspan="2">*** kernelspace is now known as ad__</td><td><a href="#t2022-01-28T22:06:52" class="time">22:06</a></td></tr>
<tr id="t2022-01-28T22:12:13"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: yep ok so the best is to put that in a layer. Public or a custom one, if private. Thank you!</td><td class="time"><a href="#t2022-01-28T22:12:13" class="time">22:12</a></td></tr>
<tr id="t2022-01-28T22:13:48"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">I often thought about one having a &quot;build&quot; layer for each project, it kinda makes sense.</td><td class="time"><a href="#t2022-01-28T22:13:48" class="time">22:13</a></td></tr>
<tr id="t2022-01-28T22:15:53"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: in AGL there are specific images and some recipes associated with the multiconfig setup, so it's all been placed its own layer</td><td class="time"><a href="#t2022-01-28T22:15:53" class="time">22:15</a></td></tr>
<tr id="t2022-01-28T22:16:50"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">it's definitely cleaner for storing customer specifics recipes, multiconfigs, common site configs, etc. for sure</td><td class="time"><a href="#t2022-01-28T22:16:50" class="time">22:16</a></td></tr>
<tr id="t2022-01-28T22:19:00"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: with something like kas, you could potentially rely on the conf's being generated from the yaml config file, and just track changes by checking it in somewhere</td><td class="time"><a href="#t2022-01-28T22:19:00" class="time">22:19</a></td></tr>
<tr id="t2022-01-28T22:20:22"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: yeah I'm using kas, mainly for fetching/patching the repos, but I'm not a fan of tools which abstract too much other tools like bitbake</td><td class="time"><a href="#t2022-01-28T22:20:22" class="time">22:20</a></td></tr>
<tr id="t2022-01-28T22:21:12"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: yeah, it can potentially be fun to debug when things break</td><td class="time"><a href="#t2022-01-28T22:21:12" class="time">22:21</a></td></tr>
<tr id="t2022-01-28T22:21:26"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">kas kinda incites you to store your config in yaml fragments, while you could have a pure bitbake config with multiconfig/site/auto etc., which I prefer</td><td class="time"><a href="#t2022-01-28T22:21:26" class="time">22:21</a></td></tr>
<tr id="t2022-01-28T22:22:43"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">kas or something like the scripting that AGL does to generate bblayers.conf/local.conf kicks in when you have an array of users who want to build with different BSPs or other options</td><td class="time"><a href="#t2022-01-28T22:22:43" class="time">22:22</a></td></tr>
<tr id="t2022-01-28T22:22:56"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: I'm moving towards having only &quot;repos:&quot; stated in the kas yaml config, and use a script to wrap './kas-container shell project.yml -c &quot;bitbake $@&quot;'</td><td class="time"><a href="#t2022-01-28T22:22:56" class="time">22:22</a></td></tr>
<tr id="t2022-01-28T22:23:02"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">it can be hard to juggle making that work in one massive build configuration</td><td class="time"><a href="#t2022-01-28T22:23:02" class="time">22:23</a></td></tr>
<tr id="t2022-01-28T22:24:37"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: totally agree. Especially when you need that patch in meta-openembedded, this patch in oe-core, etc. Kas is wonderful for that. I just wish it was less intrusive and could simply be scoped to only generating the bblayers.conf for the yaml file.</td><td class="time"><a href="#t2022-01-28T22:24:37" class="time">22:24</a></td></tr>
<tr id="t2022-01-28T22:25:53"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">Actually I started the conversation with kergoth to implement layer fetching via bitbake recipes, since it already provides a fetcher, dependency management, preferred version, etc. But it didn't go anywhere</td><td class="time"><a href="#t2022-01-28T22:25:53" class="time">22:25</a></td></tr>
<tr id="t2022-01-28T22:26:52"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">I'm wondering if that can be an option.</td><td class="time"><a href="#t2022-01-28T22:26:52" class="time">22:26</a></td></tr>
<tr id="t2022-01-28T22:26:57"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">it gets discussed now and again. IMO it's sort of a hard problem because different people want different things, scoping &quot;good enough&quot; isn't easy</td><td class="time"><a href="#t2022-01-28T22:26:57" class="time">22:26</a></td></tr>
<tr id="t2022-01-28T22:28:05"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Well, you have a bit of chicken and egg problem if you want to use bitbake to fetch the layers, as you need bitbake and the layer that defines the other layers before you can have it fetch the others...</td><td class="time"><a href="#t2022-01-28T22:28:05" class="time">22:28</a></td></tr>
<tr id="t2022-01-28T22:28:15"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">smurray: via SRC_URI you can fetch a layer from anywhere really, and DEPENDS could be used as well. It's sad to see this mechanism not used for the layer themselves :)</td><td class="time"><a href="#t2022-01-28T22:28:15" class="time">22:28</a></td></tr>
<tr id="t2022-01-28T22:29:30"><th class="nick" style="background: #b86161">smurray</th><td class="text" style="color: #b86161">vd: as Saur says, there's some chicken and egg issues</td><td class="time"><a href="#t2022-01-28T22:29:30" class="time">22:29</a></td></tr>
<tr id="t2022-01-28T22:30:10"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">Saur: true. Maybe the only assumption is that 'bitbake' is in $PATH. All you'd need would be a 'bitbake' Docker image for example, if you don't have bitbake locally.</td><td class="time"><a href="#t2022-01-28T22:30:10" class="time">22:30</a></td></tr>
<tr id="t2022-01-28T22:31:13"><th class="nick" style="background: #57a657">Saur</th><td class="text" style="color: #57a657">Well you also need to be able to tell it what to fetch, which would be a layer in itself because that is what bitbake knows about, which means you need some way to get that layer...</td><td class="time"><a href="#t2022-01-28T22:31:13" class="time">22:31</a></td></tr>
<tr id="t2022-01-28T22:32:41"><th class="nick" style="background: #5fb4b4">vd</th><td class="text" style="color: #5fb4b4">Saur: similarly to how bitbake currently assumes paths for bitbake.conf and bblayers.conf, it can assume a fixed path where to find layer recipes</td><td class="time"><a href="#t2022-01-28T22:32:41" class="time">22:32</a></td></tr>
<tr id="t2022-01-28T22:40:05"><th class="nick" style="background: #c3c366">abelloni</th><td class="text" style="color: #c3c366">RP: what did I break ? :)</td><td class="time"><a href="#t2022-01-28T22:40:05" class="time">22:40</a></td></tr>
<tr id="t2022-01-28T22:40:19"><th class="nick" style="background: #c3c366">abelloni</th><td class="text" style="color: #c3c366">RP: you don't like new ioctls ? ;)</td><td class="time"><a href="#t2022-01-28T22:40:19" class="time">22:40</a></td></tr>
<tr id="t2022-01-28T22:43:24"><th class="nick" style="background: #c3c366">abelloni</th><td class="text" style="color: #c3c366">RP: actually, I'm serious, I don't see how I would have done otherwise</td><td class="time"><a href="#t2022-01-28T22:43:24" class="time">22:43</a></td></tr>
<tr id="t2022-01-28T22:44:23"><th class="nick" style="background: #c3c366">abelloni</th><td class="text" style="color: #c3c366">I would actually expect something like this one to break reproducibility: <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/include/uapi/linux/rtc.h?id=917425f71f36ce6f61841497040e10d0166106d8" rel="nofollow">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/include/uapi/linux/rtc.h?id=917425f71f36ce6f61841497040e10d0166106d8</a></td><td class="time"><a href="#t2022-01-28T22:44:23" class="time">22:44</a></td></tr>
<tr id="t2022-01-28T22:44:27"><th class="nick" style="background: #c3c366">abelloni</th><td class="text" style="color: #c3c366">but not the other one</td><td class="time"><a href="#t2022-01-28T22:44:27" class="time">22:44</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2022-01-27.log.html">&#171; Thursday, 2022-01-27</a> <a href="index.html">Index</a> <a href="%23yocto.2022-01-29.log.html">Saturday, 2022-01-29 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
