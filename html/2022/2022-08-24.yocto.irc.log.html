<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Wednesday, 2022-08-24</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Wednesday, 2022-08-24</h1>
<div class="navigation"> <a href="%23yocto.2022-08-23.log.html">&#171; Tuesday, 2022-08-23</a> <a href="index.html">Index</a> <a href="%23yocto.2022-08-25.log.html">Thursday, 2022-08-25 &#187;</a> </div>
<table class="irclog">
<tr id="t2022-08-24T04:45:46-2"><td class="nickchange" colspan="2">*** Telgareith8 is now known as Telgareith</td><td><a href="#t2022-08-24T04:45:46-2" class="time">04:45</a></td></tr>
<tr id="t2022-08-24T05:51:30"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">yo dudX</td><td class="time"><a href="#t2022-08-24T05:51:30" class="time">05:51</a></td></tr>
<tr id="t2022-08-24T07:29:53"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">Hi.&nbsp;&nbsp;I'm trying to obtain a bare-metal build in yocto, so I can embed the image for an auxiliary MCU in my linux build.&nbsp;&nbsp;I managed to build one library successfully (based on newlib includes), and I thought of setting its prefix as /opt/&lt;libname&gt;, so I can `-I /opt/&lt;libname&gt;/include` from the depending recipes.</td><td class="time"><a href="#t2022-08-24T07:29:53" class="time">07:29</a></td></tr>
<tr id="t2022-08-24T07:30:02"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">Question 1: is this approach correct?</td><td class="time"><a href="#t2022-08-24T07:30:02" class="time">07:30</a></td></tr>
<tr id="t2022-08-24T07:30:34"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">Question 2: can I make a variable available to recipes that depend on mine? E.g. export LIBNAME_PREFIX=/opt/&lt;libname&gt;</td><td class="time"><a href="#t2022-08-24T07:30:34" class="time">07:30</a></td></tr>
<tr id="t2022-08-24T08:01:25"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">RP: I know, back to the slow brainstorming to find a way to deal with all this. I think I'll still push the changes somewhere to explain what I did and what are the shortcomings and why it's a bad idea to go for what I had in mind</td><td class="time"><a href="#t2022-08-24T08:01:25" class="time">08:01</a></td></tr>
<tr id="t2022-08-24T08:03:59"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">RP: didn't see your midnight message before answering. So. The issue is that I'm trying to build the migration manuals from the master branch (git checkout master -- documentation/migration-manuals) but from the branch the autobuilder is currently building</td><td class="time"><a href="#t2022-08-24T08:03:59" class="time">08:03</a></td></tr>
<tr id="t2022-08-24T08:04:11"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: what you want is a multiconfig build. first build the baremetal thing, then have the second build embed the results from the first one.</td><td class="time"><a href="#t2022-08-24T08:04:11" class="time">08:04</a></td></tr>
<tr id="t2022-08-24T08:04:27"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">ptsneves: patches welcome (or at least a bug in bugzilla in the documentation section)</td><td class="time"><a href="#t2022-08-24T08:04:27" class="time">08:04</a></td></tr>
<tr id="t2022-08-24T08:04:55"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: for the correct approach to build bare metal for newlib, instead of hacking up stuff, please look at the included examples.</td><td class="time"><a href="#t2022-08-24T08:04:55" class="time">08:04</a></td></tr>
<tr id="t2022-08-24T08:05:34"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: and i will actually speak about almost this exact thing at the plumbers in dublin: <a href="https://lpc.events/event/16/contributions/1196/" rel="nofollow">https://lpc.events/event/16/contributions/1196/</a></td><td class="time"><a href="#t2022-08-24T08:05:34" class="time">08:05</a></td></tr>
<tr id="t2022-08-24T08:06:05"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">qschulz: yep on it for the patches. :)</td><td class="time"><a href="#t2022-08-24T08:06:05" class="time">08:06</a></td></tr>
<tr id="t2022-08-24T08:07:36"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">RP: the issue is that this means we need to make the migration maunals buildable with different versions of sphinx (since pre-kirkstone is on 3.x.x and now we're on sphinx &gt; 4 (new buildtools has 5.x.x IIRC)</td><td class="time"><a href="#t2022-08-24T08:07:36" class="time">08:07</a></td></tr>
<tr id="t2022-08-24T08:08:02"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">LetoThe2nd: thanks.&nbsp;&nbsp;By { first baremetal, then a second build embeds the results } do you mean to build the baremetal outside yocto, and have a yocto recipe that embeds the result?</td><td class="time"><a href="#t2022-08-24T08:08:02" class="time">08:08</a></td></tr>
<tr id="t2022-08-24T08:08:12"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">RP: this is the one issue I talked about yesterday, there are other issues with the approach I worked on</td><td class="time"><a href="#t2022-08-24T08:08:12" class="time">08:08</a></td></tr>
<tr id="t2022-08-24T08:08:19"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">LetoThe2nd: also, could you point me at the examples you mention?</td><td class="time"><a href="#t2022-08-24T08:08:19" class="time">08:08</a></td></tr>
<tr id="t2022-08-24T08:08:54"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">LetoThe2nd: multiconfig works with baremetal? I thought it worked only with different machines but still linux distros</td><td class="time"><a href="#t2022-08-24T08:08:54" class="time">08:08</a></td></tr>
<tr id="t2022-08-24T08:09:04"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: no, i mean that you use the multiconfig feature of yocto to &quot;chain&quot; two builds. see: <a href="https://git.yoctoproject.org/poky/tree/meta-skeleton/recipes-baremetal/baremetal-examples/baremetal-helloworld_git.bb" rel="nofollow">https://git.yoctoproject.org/poky/tree/meta-skeleton/recipes-baremetal/baremetal-examples/baremetal-helloworld_git.bb</a></td><td class="time"><a href="#t2022-08-24T08:09:04" class="time">08:09</a></td></tr>
<tr id="t2022-08-24T08:09:16"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">ptsneves: it certainly works with baremetal :-)</td><td class="time"><a href="#t2022-08-24T08:09:16" class="time">08:09</a></td></tr>
<tr id="t2022-08-24T08:09:17"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">Thanks.&nbsp;&nbsp;I'll check it out ;)</td><td class="time"><a href="#t2022-08-24T08:09:17" class="time">08:09</a></td></tr>
<tr id="t2022-08-24T08:09:33"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">LetoThe2nd: great news</td><td class="time"><a href="#t2022-08-24T08:09:33" class="time">08:09</a></td></tr>
<tr id="t2022-08-24T08:10:02"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">no giving everything away now though, keep the fun for dublin :-)</td><td class="time"><a href="#t2022-08-24T08:10:02" class="time">08:10</a></td></tr>
<tr id="t2022-08-24T08:12:58"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">yeah was looking at the presentation link you posted and no materials posted yet :D But the baremetal-helloworld.bb seems to have much stuff i was not aware of</td><td class="time"><a href="#t2022-08-24T08:12:58" class="time">08:12</a></td></tr>
<tr id="t2022-08-24T08:13:32"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">;-)</td><td class="time"><a href="#t2022-08-24T08:13:32" class="time">08:13</a></td></tr>
<tr id="t2022-08-24T08:16:17"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">RP: I might not be giving enough context for you to understand though, especially since I worked totally on my own on that..</td><td class="time"><a href="#t2022-08-24T08:16:17" class="time">08:16</a></td></tr>
<tr id="t2022-08-24T08:49:40"><th class="nick" style="background: #488888">RP</th><td class="text" style="color: #488888">qschulz: I don't totally understand but I might be slightly closer :)</td><td class="time"><a href="#t2022-08-24T08:49:40" class="time">08:49</a></td></tr>
<tr id="t2022-08-24T09:08:17"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">LetoThe2nd: quick question about multiconfigs: will they work under dunfell? tl;dr - We are stuck to dunfell for reasons, and upgrade is planned but not for right now.</td><td class="time"><a href="#t2022-08-24T09:08:17" class="time">09:08</a></td></tr>
<tr id="t2022-08-24T09:10:46"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: yes.</td><td class="time"><a href="#t2022-08-24T09:10:46" class="time">09:10</a></td></tr>
<tr id="t2022-08-24T09:14:47"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">I'm asking because bitbake dies badly with 'taskdata[mc].add_provider(localdata[mc], self.recipecaches[mc], k)' triggering a KeyError.</td><td class="time"><a href="#t2022-08-24T09:14:47" class="time">09:14</a></td></tr>
<tr id="t2022-08-24T09:15:13"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">If it is supposed to work, maybe it is then something wrong I'm doing.</td><td class="time"><a href="#t2022-08-24T09:15:13" class="time">09:15</a></td></tr>
<tr id="t2022-08-24T09:16:59"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: my bet is on &quot;something that you're doing&quot; :-)</td><td class="time"><a href="#t2022-08-24T09:16:59" class="time">09:16</a></td></tr>
<tr id="t2022-08-24T09:21:09"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">In general, yes.&nbsp;&nbsp;In this specific case I always have the doubt of { If I'm using a version that is really old, will this be even feasible }.&nbsp;&nbsp;Hence the question</td><td class="time"><a href="#t2022-08-24T09:21:09" class="time">09:21</a></td></tr>
<tr id="t2022-08-24T09:21:27"><th class="nick" style="background: #42427e">dacav</th><td class="text" style="color: #42427e">Good to know it is, now let's embrace the sorrow.</td><td class="time"><a href="#t2022-08-24T09:21:27" class="time">09:21</a></td></tr>
<tr id="t2022-08-24T09:33:33"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">dacav: dunfell is fine, its under active maintenance.</td><td class="time"><a href="#t2022-08-24T09:33:33" class="time">09:33</a></td></tr>
<tr id="t2022-08-24T09:36:54"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">does anybody know how long glibc.GlibcSelfTest should test on average?</td><td class="time"><a href="#t2022-08-24T09:36:54" class="time">09:36</a></td></tr>
<tr id="t2022-08-24T09:41:54"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Is there a simple way in Yocto to make /var a separte partition?</td><td class="time"><a href="#t2022-08-24T09:41:54" class="time">09:41</a></td></tr>
<tr id="t2022-08-24T09:42:36"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">jclsn: is wic an option?</td><td class="time"><a href="#t2022-08-24T09:42:36" class="time">09:42</a></td></tr>
<tr id="t2022-08-24T09:43:22"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">jclsn: its technically beyond the rootfs, so wic would certaily be involved.</td><td class="time"><a href="#t2022-08-24T09:43:22" class="time">09:43</a></td></tr>
<tr id="t2022-08-24T09:43:56"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">plus some tuning of the fstab, probably. i think there is some example concerning volatile logs</td><td class="time"><a href="#t2022-08-24T09:43:56" class="time">09:43</a></td></tr>
<tr id="t2022-08-24T09:44:18"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ptsneves: We are already using .wic image, so what do you mean?</td><td class="time"><a href="#t2022-08-24T09:44:18" class="time">09:44</a></td></tr>
<tr id="t2022-08-24T09:44:38"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">so just add a partition for far in your wks file</td><td class="time"><a href="#t2022-08-24T09:44:38" class="time">09:44</a></td></tr>
<tr id="t2022-08-24T09:44:50"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">that is how i would go for it.</td><td class="time"><a href="#t2022-08-24T09:44:50" class="time">09:44</a></td></tr>
<tr id="t2022-08-24T09:45:10"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">LetoThe2nd: Yeah I was just wondering if there was a Yocto switch. The problem is that since we have made rootfs read-only, some services like systemd-backlight are failing</td><td class="time"><a href="#t2022-08-24T09:45:10" class="time">09:45</a></td></tr>
<tr id="t2022-08-24T09:45:28"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">So we want to make /var a separate partition with read-write permissions</td><td class="time"><a href="#t2022-08-24T09:45:28" class="time">09:45</a></td></tr>
<tr id="t2022-08-24T09:45:55"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">for that scenario you should actually be looking at volatiles not a separate partition</td><td class="time"><a href="#t2022-08-24T09:45:55" class="time">09:45</a></td></tr>
<tr id="t2022-08-24T09:46:05"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Volatiles?</td><td class="time"><a href="#t2022-08-24T09:46:05" class="time">09:46</a></td></tr>
<tr id="t2022-08-24T09:46:17"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">how systemd does it for readonly rootfs</td><td class="time"><a href="#t2022-08-24T09:46:17" class="time">09:46</a></td></tr>
<tr id="t2022-08-24T09:46:39"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">jclsn: you would need to probably coordinate with <a href="https://git.yoctoproject.org/poky/plain/meta/recipes-core/volatile-binds/volatile-binds.bb" rel="nofollow">https://git.yoctoproject.org/poky/plain/meta/recipes-core/volatile-binds/volatile-binds.bb</a></td><td class="time"><a href="#t2022-08-24T09:46:39" class="time">09:46</a></td></tr>
<tr id="t2022-08-24T09:47:59"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">a quick search of the manual shows nothing on the topic unfortunately</td><td class="time"><a href="#t2022-08-24T09:47:59" class="time">09:47</a></td></tr>
<tr id="t2022-08-24T09:48:01"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">LetoThe2nd: Thanks</td><td class="time"><a href="#t2022-08-24T09:48:01" class="time">09:48</a></td></tr>
<tr id="t2022-08-24T09:49:00"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ptsneves: Well, I got this <a href="https://docs.yoctoproject.org/ref-manual/kickstart.html" rel="nofollow">https://docs.yoctoproject.org/ref-manual/kickstart.html</a></td><td class="time"><a href="#t2022-08-24T09:49:00" class="time">09:49</a></td></tr>
<tr id="t2022-08-24T09:49:58"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">jclsn: yes but your &quot;real&quot; issue should not be handled with an extra partition /var. It should be fixed with volatile-binds</td><td class="time"><a href="#t2022-08-24T09:49:58" class="time">09:49</a></td></tr>
<tr id="t2022-08-24T09:52:13"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ptsneves: But if they are volatile, they don't persist till the next boot, do they?</td><td class="time"><a href="#t2022-08-24T09:52:13" class="time">09:52</a></td></tr>
<tr id="t2022-08-24T09:52:21"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I can sure write to that folder</td><td class="time"><a href="#t2022-08-24T09:52:21" class="time">09:52</a></td></tr>
<tr id="t2022-08-24T09:52:27"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">they will persist :)</td><td class="time"><a href="#t2022-08-24T09:52:27" class="time">09:52</a></td></tr>
<tr id="t2022-08-24T09:52:39"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I just tried that by creating an empty file</td><td class="time"><a href="#t2022-08-24T09:52:39" class="time">09:52</a></td></tr>
<tr id="t2022-08-24T09:52:42"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">It was gone after reboot</td><td class="time"><a href="#t2022-08-24T09:52:42" class="time">09:52</a></td></tr>
<tr id="t2022-08-24T09:53:24"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">bind the bind mounts to a real partition</td><td class="time"><a href="#t2022-08-24T09:53:24" class="time">09:53</a></td></tr>
<tr id="t2022-08-24T09:54:00"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Ah I get it</td><td class="time"><a href="#t2022-08-24T09:54:00" class="time">09:54</a></td></tr>
<tr id="t2022-08-24T09:54:13"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">If I set this int he volatile recipe, it will be writable</td><td class="time"><a href="#t2022-08-24T09:54:13" class="time">09:54</a></td></tr>
<tr id="t2022-08-24T09:59:53"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ptsneves: They are not recursive though are they? Because /var/lib is already there and my file in question is in /var/lib/systemd/backlight</td><td class="time"><a href="#t2022-08-24T09:59:53" class="time">09:59</a></td></tr>
<tr id="t2022-08-24T10:00:38"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">hmm should be, but mount is kind of a overlaying thing so i do not know how if the order might be important</td><td class="time"><a href="#t2022-08-24T10:00:38" class="time">10:00</a></td></tr>
<tr id="t2022-08-24T10:01:17"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">i do not know by heart honestly :( only the general path to achieve what you mean</td><td class="time"><a href="#t2022-08-24T10:01:17" class="time">10:01</a></td></tr>
<tr id="t2022-08-24T10:03:16"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Okay thanks I will figure it out</td><td class="time"><a href="#t2022-08-24T10:03:16" class="time">10:03</a></td></tr>
<tr id="t2022-08-24T10:10:22"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">is there a generic way to express a dependency on the rootfs being completed? use case is embedding a checksum in a partition.</td><td class="time"><a href="#t2022-08-24T10:10:22" class="time">10:10</a></td></tr>
<tr id="t2022-08-24T10:11:08"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">mytask[depends] = &quot;myimage:do_rootfs&quot;</td><td class="time"><a href="#t2022-08-24T10:11:08" class="time">10:11</a></td></tr>
<tr id="t2022-08-24T10:11:08-2"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">?</td><td class="time"><a href="#t2022-08-24T10:11:08-2" class="time">10:11</a></td></tr>
<tr id="t2022-08-24T10:12:03"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">thats non-generic as it involves the name of the image.</td><td class="time"><a href="#t2022-08-24T10:12:03" class="time">10:12</a></td></tr>
<tr id="t2022-08-24T10:12:42"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">set the image name as a variable set on your local.conf</td><td class="time"><a href="#t2022-08-24T10:12:42" class="time">10:12</a></td></tr>
<tr id="t2022-08-24T10:13:18"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">hm no, this is not applicable to the workflow in question.</td><td class="time"><a href="#t2022-08-24T10:13:18" class="time">10:13</a></td></tr>
<tr id="t2022-08-24T10:13:53"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">so i am not sure what you mean by generic</td><td class="time"><a href="#t2022-08-24T10:13:53" class="time">10:13</a></td></tr>
<tr id="t2022-08-24T10:15:14"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">like, a way to depend on &quot;virtual/image:do_image&quot;, as starters.</td><td class="time"><a href="#t2022-08-24T10:15:14" class="time">10:15</a></td></tr>
<tr id="t2022-08-24T10:15:51"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">LetoThe2nd: what exactly do you want to do?</td><td class="time"><a href="#t2022-08-24T10:15:51" class="time">10:15</a></td></tr>
<tr id="t2022-08-24T10:16:06"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">that makes little sense...what image? also there is no PROVIDER for images AFAIK</td><td class="time"><a href="#t2022-08-24T10:16:06" class="time">10:16</a></td></tr>
<tr id="t2022-08-24T10:16:17"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">LetoThe2nd: because you have ROOTFS_POSTPROCESS_COMMANDS and the like</td><td class="time"><a href="#t2022-08-24T10:16:17" class="time">10:16</a></td></tr>
<tr id="t2022-08-24T10:16:51"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">qschulz: put the checksum of partition1 on partition2, essentially. with the content of partition2 being created in a class.</td><td class="time"><a href="#t2022-08-24T10:16:51" class="time">10:16</a></td></tr>
<tr id="t2022-08-24T10:18:44"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">the way i have seen this done is with the global variable conf i mentioned. It is how dm verity is setup on meta-security.</td><td class="time"><a href="#t2022-08-24T10:18:44" class="time">10:18</a></td></tr>
<tr id="t2022-08-24T10:20:02"><th class="nick" style="background: #407a40">LetoThe2nd</th><td class="text" style="color: #407a40">hmmm...</td><td class="time"><a href="#t2022-08-24T10:20:02" class="time">10:20</a></td></tr>
<tr id="t2022-08-24T10:41:27"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">hmm unfortunately adding the path to volatile-binds doesn't work. I think this is because systemd-backlight creates that file only when shutting down or booting. It is not there during compile time</td><td class="time"><a href="#t2022-08-24T10:41:27" class="time">10:41</a></td></tr>
<tr id="t2022-08-24T10:49:25"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Maybe you have to add it to volatile-systemd-services somehow</td><td class="time"><a href="#t2022-08-24T10:49:25" class="time">10:49</a></td></tr>
<tr id="t2022-08-24T10:52:29"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Ah no those services are taking care of the mounting</td><td class="time"><a href="#t2022-08-24T10:52:29" class="time">10:52</a></td></tr>
<tr id="t2022-08-24T11:06:33"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">It is weird. The systemd-backlight service fails on boot, but you can manually restart it after</td><td class="time"><a href="#t2022-08-24T11:06:33" class="time">11:06</a></td></tr>
<tr id="t2022-08-24T11:06:44"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Because the volatile-binds are actually working</td><td class="time"><a href="#t2022-08-24T11:06:44" class="time">11:06</a></td></tr>
<tr id="t2022-08-24T11:55:50"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ptsneves: Well, I got the service to work. Actually the volatile-binds are working well. The problem is that those are not persistent after a reboot.</td><td class="time"><a href="#t2022-08-24T11:55:50" class="time">11:55</a></td></tr>
<tr id="t2022-08-24T11:56:24"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">So the backlight can't be restored, because the file containing the value doesn't exist</td><td class="time"><a href="#t2022-08-24T11:56:24" class="time">11:56</a></td></tr>
<tr id="t2022-08-24T11:57:06"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Isn't there something like persistent-binds.bb? :D</td><td class="time"><a href="#t2022-08-24T11:57:06" class="time">11:57</a></td></tr>
<tr id="t2022-08-24T12:07:38"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">ls</td><td class="time"><a href="#t2022-08-24T12:07:38" class="time">12:07</a></td></tr>
<tr id="t2022-08-24T12:18:47"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">we have overlayfs support in kirkstone IIRC</td><td class="time"><a href="#t2022-08-24T12:18:47" class="time">12:18</a></td></tr>
<tr id="t2022-08-24T12:19:22"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: <a href="https://docs.yoctoproject.org/ref-manual/classes.html#overlayfs-bbclass" rel="nofollow">https://docs.yoctoproject.org/ref-manual/classes.html#overlayfs-bbclass</a></td><td class="time"><a href="#t2022-08-24T12:19:22" class="time">12:19</a></td></tr>
<tr id="t2022-08-24T12:19:42"><td class="action" colspan="2">* derRichard looks for a fix for issue <a href="https://www.mail-archive.com/linux-yocto@lists.yoctoproject.org/msg03300.html" rel="nofollow">https://www.mail-archive.com/linux-yocto@lists.yoctoproject.org/msg03300.html</a></td><td><a href="#t2022-08-24T12:19:42" class="time">12:19</a></td></tr>
<tr id="t2022-08-24T12:37:51"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">qschulz: Pity we are on honister then ^^</td><td class="time"><a href="#t2022-08-24T12:37:51" class="time">12:37</a></td></tr>
<tr id="t2022-08-24T12:39:59"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">It is there though</td><td class="time"><a href="#t2022-08-24T12:39:59" class="time">12:39</a></td></tr>
<tr id="t2022-08-24T13:07:54"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">qschulz: I just wonder: If I have /var/lib contained in the volatile-binds and it gets reset after every boot, does this mechanism also delete parts of my /data partition if I mount it there?</td><td class="time"><a href="#t2022-08-24T13:07:54" class="time">13:07</a></td></tr>
<tr id="t2022-08-24T13:08:34"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Because I am trying to mount /data/backlight to /var/lib/systemd/backlight</td><td class="time"><a href="#t2022-08-24T13:08:34" class="time">13:08</a></td></tr>
<tr id="t2022-08-24T13:09:14"><th class="nick" style="background: #488888">RP</th><td class="text" style="color: #488888">derRichard: not sure there is one yet</td><td class="time"><a href="#t2022-08-24T13:09:14" class="time">13:09</a></td></tr>
<tr id="t2022-08-24T13:12:01"><th class="nick" style="background: #4b904b">derRichard</th><td class="text" style="color: #4b904b">RP: yeah, the problem seems to be rather new. /me just ran into it ;-\</td><td class="time"><a href="#t2022-08-24T13:12:01" class="time">13:12</a></td></tr>
<tr id="t2022-08-24T13:15:12"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: no clue, I'm not using overlayfs nor volatile binds</td><td class="time"><a href="#t2022-08-24T13:15:12" class="time">13:15</a></td></tr>
<tr id="t2022-08-24T13:18:48"><th class="nick" style="background: #4d4d93">Alban[m]1</th><td class="text" style="color: #4d4d93">&lt;jclsn&gt; &quot;Because I am trying to mount /...&quot; &lt;- On my systems i'm using a rw /var/lib together with a ro rootfs, it work quite well.</td><td class="time"><a href="#t2022-08-24T13:18:48" class="time">13:18</a></td></tr>
<tr id="t2022-08-24T13:20:02"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Okay</td><td class="time"><a href="#t2022-08-24T13:20:02" class="time">13:20</a></td></tr>
<tr id="t2022-08-24T13:20:23"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">It is maybe a bit less trouble to just use a rw /var partition</td><td class="time"><a href="#t2022-08-24T13:20:23" class="time">13:20</a></td></tr>
<tr id="t2022-08-24T13:21:16"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: that's what the overlayfs allows you to do</td><td class="time"><a href="#t2022-08-24T13:21:16" class="time">13:21</a></td></tr>
<tr id="t2022-08-24T13:21:22"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">everything RO, except the overlayfs</td><td class="time"><a href="#t2022-08-24T13:21:22" class="time">13:21</a></td></tr>
<tr id="t2022-08-24T13:21:30"><th class="nick" style="background: #4d4d93">Alban[m]1</th><td class="text" style="color: #4d4d93">Its up to you how fine grained you want things to be.</td><td class="time"><a href="#t2022-08-24T13:21:30" class="time">13:21</a></td></tr>
<tr id="t2022-08-24T13:22:03"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Or how much of a workload I prefer</td><td class="time"><a href="#t2022-08-24T13:22:03" class="time">13:22</a></td></tr>
<tr id="t2022-08-24T13:23:53"><th class="nick" style="background: #4d4d93">Alban[m]1</th><td class="text" style="color: #4d4d93">Sure, i for example don't want /var/cache or /var/tmp to go to disk</td><td class="time"><a href="#t2022-08-24T13:23:53" class="time">13:23</a></td></tr>
<tr id="t2022-08-24T13:25:13"><th class="nick" style="background: #4d4d93">Alban[m]1</th><td class="text" style="color: #4d4d93">Unless you really want to be able to overwrite parts of your rootfs image i would not go with an overlay</td><td class="time"><a href="#t2022-08-24T13:25:13" class="time">13:25</a></td></tr>
<tr id="t2022-08-24T13:29:49"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">Alban[m]1: overlays are overwriting only if you're writing to files that already exist. Otherwise the original rootfs and the overlay are merged</td><td class="time"><a href="#t2022-08-24T13:29:49" class="time">13:29</a></td></tr>
<tr id="t2022-08-24T13:31:25"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I don't get this overlayfs stuff</td><td class="time"><a href="#t2022-08-24T13:31:25" class="time">13:31</a></td></tr>
<tr id="t2022-08-24T13:31:33"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Pity there isn't a good example</td><td class="time"><a href="#t2022-08-24T13:31:33" class="time">13:31</a></td></tr>
<tr id="t2022-08-24T13:31:35"><th class="nick" style="background: #4d4d93">Alban[m]1</th><td class="text" style="color: #4d4d93">Sure, i should have say modify, something you often don't want when using an ro rootfs</td><td class="time"><a href="#t2022-08-24T13:31:35" class="time">13:31</a></td></tr>
<tr id="t2022-08-24T13:32:05"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">qschulz: We already have a /data partition mounted</td><td class="time"><a href="#t2022-08-24T13:32:05" class="time">13:32</a></td></tr>
<tr id="t2022-08-24T13:32:06"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: <a href="https://www.kernel.org/doc/html/latest/filesystems/overlayfs.html" rel="nofollow">https://www.kernel.org/doc/html/latest/filesystems/overlayfs.html</a></td><td class="time"><a href="#t2022-08-24T13:32:06" class="time">13:32</a></td></tr>
<tr id="t2022-08-24T13:32:18"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I don't see what this does really</td><td class="time"><a href="#t2022-08-24T13:32:18" class="time">13:32</a></td></tr>
<tr id="t2022-08-24T13:33:01"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: specifically the upper and lower part</td><td class="time"><a href="#t2022-08-24T13:33:01" class="time">13:33</a></td></tr>
<tr id="t2022-08-24T13:34:06"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">qschulz: I get that part</td><td class="time"><a href="#t2022-08-24T13:34:06" class="time">13:34</a></td></tr>
<tr id="t2022-08-24T13:34:27"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">But I only want /data/backlight to override /var/lib/systemd/backlight</td><td class="time"><a href="#t2022-08-24T13:34:27" class="time">13:34</a></td></tr>
<tr id="t2022-08-24T13:34:43"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">It expects a .mount unit though</td><td class="time"><a href="#t2022-08-24T13:34:43" class="time">13:34</a></td></tr>
<tr id="t2022-08-24T13:35:01"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I think the documentation is lacking a bit</td><td class="time"><a href="#t2022-08-24T13:35:01" class="time">13:35</a></td></tr>
<tr id="t2022-08-24T13:35:58"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Why per recipes basis for example? Shouldn't I be able to specify all overlays in the image recipe?</td><td class="time"><a href="#t2022-08-24T13:35:58" class="time">13:35</a></td></tr>
<tr id="t2022-08-24T13:36:24"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">jclsn: AFAIU, this allows a recipe to provide a RW file in a location that is otherwise RO</td><td class="time"><a href="#t2022-08-24T13:36:24" class="time">13:36</a></td></tr>
<tr id="t2022-08-24T13:36:30"><th class="nick" style="background: #818144">qschulz</th><td class="text" style="color: #818144">patches welcome :)</td><td class="time"><a href="#t2022-08-24T13:36:30" class="time">13:36</a></td></tr>
<tr id="t2022-08-24T13:40:47"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">I first need to understand it to send a patch</td><td class="time"><a href="#t2022-08-24T13:40:47" class="time">13:40</a></td></tr>
<tr id="t2022-08-24T13:40:52"><th class="nick" style="background: #8c4a4a">jclsn</th><td class="text" style="color: #8c4a4a">Deadlock</td><td class="time"><a href="#t2022-08-24T13:40:52" class="time">13:40</a></td></tr>
<tr id="t2022-08-24T13:58:58"><th class="nick" style="background: #4b904b">derRichard</th><td class="text" style="color: #4b904b">jclsn: FWIW, just setup overlayfs manuall as you wish. i always have a single unit which does all mounts exactly in the way i want them.</td><td class="time"><a href="#t2022-08-24T13:58:58" class="time">13:58</a></td></tr>
<tr id="t2022-08-24T17:28:27"><th class="nick" style="background: #854685">ptsneves</th><td class="text" style="color: #854685">derRichard: that is also the way i do it</td><td class="time"><a href="#t2022-08-24T17:28:27" class="time">17:28</a></td></tr>
<tr id="t2022-08-24T18:32:21"><th class="nick" style="background: #97974f">vvn</th><td class="text" style="color: #97974f">hi there -- is it a best practice to have :mydistro override in bbappended recipes found in my distro layer or is that redundant?</td><td class="time"><a href="#t2022-08-24T18:32:21" class="time">18:32</a></td></tr>
<tr id="t2022-08-24T18:41:09"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">that is a best practice, yes, to ensure the layer isn't changing the build if you don't choose to use that distro. this allows multiple machine and distro layers to be enabled in bblayers but only have the configured ones affect the build</td><td class="time"><a href="#t2022-08-24T18:41:09" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:41:14"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">same for machine in bsp layers</td><td class="time"><a href="#t2022-08-24T18:41:14" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:41:24"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">see also the yocto-check-layers script</td><td class="time"><a href="#t2022-08-24T18:41:24" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:41:40"><th class="nick" style="background: #97974f">vvn</th><td class="text" style="color: #97974f">thank you</td><td class="time"><a href="#t2022-08-24T18:41:40" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:41:42"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">more important for machine than distro, practically, but still best</td><td class="time"><a href="#t2022-08-24T18:41:42" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:41:52"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">ideally no layer would change the build until you opt-in to what it provides in your configuration</td><td class="time"><a href="#t2022-08-24T18:41:52" class="time">18:41</a></td></tr>
<tr id="t2022-08-24T18:42:11"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">no problem</td><td class="time"><a href="#t2022-08-24T18:42:11" class="time">18:42</a></td></tr>
<tr id="t2022-08-24T18:43:02"><th class="nick" style="background: #97974f">vvn</th><td class="text" style="color: #97974f">that makes sense, so that you can build totally different environment from the same bitbake instance without messing with bblayers.conf</td><td class="time"><a href="#t2022-08-24T18:43:02" class="time">18:43</a></td></tr>
<tr id="t2022-08-24T18:43:26"><th class="nick" style="background: #97974f">vvn</th><td class="text" style="color: #97974f">(environment as in multiconfigs)</td><td class="time"><a href="#t2022-08-24T18:43:26" class="time">18:43</a></td></tr>
<tr id="t2022-08-24T18:43:27"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">exactly, it means you can easily switc hit around solely with local.conf, or you can use multiconfig to build all different configs in a single go</td><td class="time"><a href="#t2022-08-24T18:43:27" class="time">18:43</a></td></tr>
<tr id="t2022-08-24T18:43:29"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">yep</td><td class="time"><a href="#t2022-08-24T18:43:29" class="time">18:43</a></td></tr>
<tr id="t2022-08-24T18:43:48"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">a bit of a hassle to add overrides *everywhere*, but it becomes habit eventually</td><td class="time"><a href="#t2022-08-24T18:43:48" class="time">18:43</a></td></tr>
<tr id="t2022-08-24T18:44:52"><th class="nick" style="background: #97974f">vvn</th><td class="text" style="color: #97974f">indeed, hence my question</td><td class="time"><a href="#t2022-08-24T18:44:52" class="time">18:44</a></td></tr>
<tr id="t2022-08-24T18:50:51"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">RP: I kind of feel like every variable assignment should be = except for the specific case of assignments in *config* files parsed after local.conf, or globally inherited classes, to allow direct assignments in local.conf to work as the user would expect, and those should all use ??=. Everything else, everywhere, should use = and move their inherit line if they have to. Then we could further reduce confusion by moving toward making</td><td class="time"><a href="#t2022-08-24T18:50:51" class="time">18:50</a></td></tr>
<tr id="t2022-08-24T18:50:51-2"><th class="nick" style="background: #9b519b">kergoth</th><td class="text" style="color: #9b519b">all variable operations lazy with the explicit operator to clear pending operations that we'd previously discussed.</td><td class="time"><a href="#t2022-08-24T18:50:51-2" class="time">18:50</a></td></tr>
<tr id="t2022-08-24T19:52:41"><th class="nick" style="background: #488888">RP</th><td class="text" style="color: #488888">kergoth: It would be interesting to see if we could move towards that</td><td class="time"><a href="#t2022-08-24T19:52:41" class="time">19:52</a></td></tr>
<tr id="t2022-08-24T20:38:21"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">Hi</td><td class="time"><a href="#t2022-08-24T20:38:21" class="time">20:38</a></td></tr>
<tr id="t2022-08-24T20:38:22"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">I am trying include linux-firmware-i915  into the kernel image, for that i added `RDEPENDS_${PN} += &quot; linux-firmware-i915 &quot;` in kernel recipe</td><td class="time"><a href="#t2022-08-24T20:38:22" class="time">20:38</a></td></tr>
<tr id="t2022-08-24T20:39:05"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">I cannot use DEPENDS as linux-firmware RPROVIDES `linux-firmware-i915`</td><td class="time"><a href="#t2022-08-24T20:39:05" class="time">20:39</a></td></tr>
<tr id="t2022-08-24T20:40:31"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">the firmware blob is built into the kernel image but as a consequence of `RDEPENDS_${PN} += &quot; linux-firmware-i915 &quot;` it is installed in rootfs `lib/firmware` directory</td><td class="time"><a href="#t2022-08-24T20:40:31" class="time">20:40</a></td></tr>
<tr id="t2022-08-24T20:41:17"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">I removed it this leftover from the rootfs by using ROOTFS_POSTPROCESS_COMMAND</td><td class="time"><a href="#t2022-08-24T20:41:17" class="time">20:41</a></td></tr>
<tr id="t2022-08-24T20:41:32"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">is there any other clean way to achieve the same</td><td class="time"><a href="#t2022-08-24T20:41:32" class="time">20:41</a></td></tr>
<tr id="t2022-08-24T20:43:21"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">All i want is linux-firmware-i915 is included into the kernel image without poluting the rootfs</td><td class="time"><a href="#t2022-08-24T20:43:21" class="time">20:43</a></td></tr>
<tr id="t2022-08-24T20:43:38"><th class="nick" style="background: #539e9e">Guest63</th><td class="text" style="color: #539e9e">Please let me know</td><td class="time"><a href="#t2022-08-24T20:43:38" class="time">20:43</a></td></tr>
<tr id="t2022-08-24T21:20:06"><td class="nickchange" colspan="2">*** justache is now known as justDeez</td><td><a href="#t2022-08-24T21:20:06" class="time">21:20</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2022-08-23.log.html">&#171; Tuesday, 2022-08-23</a> <a href="index.html">Index</a> <a href="%23yocto.2022-08-25.log.html">Thursday, 2022-08-25 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
