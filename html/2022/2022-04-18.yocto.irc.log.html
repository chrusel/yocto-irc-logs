<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Monday, 2022-04-18</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Monday, 2022-04-18</h1>
<div class="navigation"> <a href="%23yocto.2022-04-17.log.html">&#171; Sunday, 2022-04-17</a> <a href="index.html">Index</a> <a href="%23yocto.2022-04-19.log.html">Tuesday, 2022-04-19 &#187;</a> </div>
<table class="irclog">
<tr id="t2022-04-18T07:44:39"><td class="part" colspan="2">*** wybpip[m] &lt;wybpip[m]!~wybpipmat@2001:470:69fc:105::1:f452&gt; has left #yocto</td><td><a href="#t2022-04-18T07:44:39" class="time">07:44</a></td></tr>
<tr id="t2022-04-18T14:40:36"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">hey, whats the best way of going about making portions of the rootfs read only</td><td class="time"><a href="#t2022-04-18T14:40:36" class="time">14:40</a></td></tr>
<tr id="t2022-04-18T14:42:28"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">ideally from the point yocto creates the image</td><td class="time"><a href="#t2022-04-18T14:42:28" class="time">14:42</a></td></tr>
<tr id="t2022-04-18T14:44:02"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">as I ask this question, Im begining to remember I have asked it in the past too. will go over my logs quick</td><td class="time"><a href="#t2022-04-18T14:44:02" class="time">14:44</a></td></tr>
<tr id="t2022-04-18T16:02:57"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: that'd be a good start: <a href="https://docs.yoctoproject.org/singleindex.html#creating-a-read-only-root-filesystem" rel="nofollow">https://docs.yoctoproject.org/singleindex.html#creating-a-read-only-root-filesystem</a></td><td class="time"><a href="#t2022-04-18T16:02:57" class="time">16:02</a></td></tr>
<tr id="t2022-04-18T16:16:39"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">vvn: is there a way to just restrict a selected few directories to be readly only?</td><td class="time"><a href="#t2022-04-18T16:16:39" class="time">16:16</a></td></tr>
<tr id="t2022-04-18T16:41:54"><th class="nick" style="background: #818144">smurray</th><td class="text" style="color: #818144">sotaoverride: unless you cut the filesystem into multiple ones, pretty much doing read-only and then overlays on top is what comes to mind, look at the overlayfs and overlayfs-etc classes for the out of the box options</td><td class="time"><a href="#t2022-04-18T16:41:54" class="time">16:41</a></td></tr>
<tr id="t2022-04-18T17:04:41"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: as smurray said. If you're using systemd, you could also use systemd.volatile= (man kernel-command-line)</td><td class="time"><a href="#t2022-04-18T17:04:41" class="time">17:04</a></td></tr>
<tr id="t2022-04-18T17:46:53"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">if you manage multiple machines for your product, I assume it is common to end up with a container layer for your BSPs, e.g. meta-&lt;company&gt;/meta-&lt;product&gt;-bsp holding several machine configuration files, in addition to meta-&lt;company&gt;/meta-&lt;distro&gt;</td><td class="time"><a href="#t2022-04-18T17:46:53" class="time">17:46</a></td></tr>
<tr id="t2022-04-18T17:49:18"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">(as a place to centralize machine-level recipes and customizations)</td><td class="time"><a href="#t2022-04-18T17:49:18" class="time">17:49</a></td></tr>
<tr id="t2022-04-18T17:53:44"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">vvn: so mount points defined with overlayfs.bbclass persist over system updates?</td><td class="time"><a href="#t2022-04-18T17:53:44" class="time">17:53</a></td></tr>
<tr id="t2022-04-18T17:57:00"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: depends on what you mean by system update (this is very product-specific)</td><td class="time"><a href="#t2022-04-18T17:57:00" class="time">17:57</a></td></tr>
<tr id="t2022-04-18T17:57:32"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">I mean when I just write a new rootfs to a partition</td><td class="time"><a href="#t2022-04-18T17:57:32" class="time">17:57</a></td></tr>
<tr id="t2022-04-18T17:59:07"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">and the current and the new rootfs has OVERLAYFS_MOUNT_POINT[data] = &quot;/data&quot;, so data directory would persist?</td><td class="time"><a href="#t2022-04-18T17:59:07" class="time">17:59</a></td></tr>
<tr id="t2022-04-18T18:08:00"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: I am not using the overlayfs classes, so I can't say right away. I would read the class code to understand what it does: <a href="http://cgit.openembedded.org/openembedded-core/tree/meta/classes/overlayfs.bbclass?h=master" rel="nofollow">http://cgit.openembedded.org/openembedded-core/tree/meta/classes/overlayfs.bbclass?h=master</a></td><td class="time"><a href="#t2022-04-18T18:08:00" class="time">18:08</a></td></tr>
<tr id="t2022-04-18T18:19:17"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">so im guessing systemd-machine-units recipe is different from the systemd recipe</td><td class="time"><a href="#t2022-04-18T18:19:17" class="time">18:19</a></td></tr>
<tr id="t2022-04-18T18:23:09"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">what does that mean</td><td class="time"><a href="#t2022-04-18T18:23:09" class="time">18:23</a></td></tr>
<tr id="t2022-04-18T18:25:57"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">overlayfs.bbclass has a comment &quot;# The class assumes you have a data.mount systemd unit defined in your&quot;</td><td class="time"><a href="#t2022-04-18T18:25:57" class="time">18:25</a></td></tr>
<tr id="t2022-04-18T18:26:03"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40"># systemd-machine-units recipe and installed to the image.</td><td class="time"><a href="#t2022-04-18T18:26:03" class="time">18:26</a></td></tr>
<tr id="t2022-04-18T18:26:53"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">trying to figure whats what in he systemd land. this systemd-machine-uints is a recipe on top of the systemd recipe?</td><td class="time"><a href="#t2022-04-18T18:26:53" class="time">18:26</a></td></tr>
<tr id="t2022-04-18T18:27:16"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: this means that the class assumes that you have a systemd-machine-units_%.bbappend file in the distro layer which install a data.mount unit file.</td><td class="time"><a href="#t2022-04-18T18:27:16" class="time">18:27</a></td></tr>
<tr id="t2022-04-18T18:27:23"><th class="nick" style="background: #854685">amahnui[m]</th><td class="text" style="color: #854685">Hello everyone ðŸ‘‹</td><td class="time"><a href="#t2022-04-18T18:27:23" class="time">18:27</a></td></tr>
<tr id="t2022-04-18T18:28:08"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: systemd-machine-units is a package, empty by default, meant to hold machine-specific unit files</td><td class="time"><a href="#t2022-04-18T18:28:08" class="time">18:28</a></td></tr>
<tr id="t2022-04-18T18:29:01"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: so instead of appending the systemd recipe directory, your bsp or distro layer can append this recipe</td><td class="time"><a href="#t2022-04-18T18:29:01" class="time">18:29</a></td></tr>
<tr id="t2022-04-18T18:31:58"><th class="nick" style="background: #407a40">sotaoverride</th><td class="text" style="color: #407a40">vvn: so my system-machine-unit_%.bbappend would have a do_install block, which takes care of data.mount?</td><td class="time"><a href="#t2022-04-18T18:31:58" class="time">18:31</a></td></tr>
<tr id="t2022-04-18T18:36:23"><th class="nick" style="background: #42427e">vvn</th><td class="text" style="color: #42427e">sotaoverride: yes, you would append FILEEXTRAPATHS, SRC_URI, do_install and FILES:${PN} to include your data.mount file as part of the systemd-machine-units package</td><td class="time"><a href="#t2022-04-18T18:36:23" class="time">18:36</a></td></tr>
<tr id="t2022-04-18T22:11:45"><th class="nick" style="background: #488888">hushmoney</th><td class="text" style="color: #488888">so here's a weird one: a layer i'm using has several recipes that support PACKAGECONFIG=&quot;tcp&quot;. rather than setting it for every recipe individually, i thought i'd set PACKAGECONFIG_append?=&quot;tcp&quot; in my distro.conf. now when i try to bake my image, i get &quot;Nothing PROVIDES 'virtual/update-alternatives-native'&quot; error</td><td class="time"><a href="#t2022-04-18T22:11:45" class="time">22:11</a></td></tr>
<tr id="t2022-04-18T22:12:17"><th class="nick" style="background: #488888">hushmoney</th><td class="text" style="color: #488888">now i removed it and set PACKAGECONFIG_append_pn-foo?=&quot;tcp&quot; for each recipe and the error has cleared</td><td class="time"><a href="#t2022-04-18T22:12:17" class="time">22:12</a></td></tr>
<tr id="t2022-04-18T22:16:37"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">hushmoney: you probably want &quot; tcp&quot;</td><td class="time"><a href="#t2022-04-18T22:16:37" class="time">22:16</a></td></tr>
<tr id="t2022-04-18T22:18:18"><th class="nick" style="background: #488888">hushmoney</th><td class="text" style="color: #488888">ah shit i forgot about that thanks. you're right that fixed it</td><td class="time"><a href="#t2022-04-18T22:18:18" class="time">22:18</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2022-04-17.log.html">&#171; Sunday, 2022-04-17</a> <a href="index.html">Index</a> <a href="%23yocto.2022-04-19.log.html">Tuesday, 2022-04-19 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
