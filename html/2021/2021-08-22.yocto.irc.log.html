<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Sunday, 2021-08-22</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Sunday, 2021-08-22</h1>
<div class="navigation"> <a href="%23yocto.2021-08-21.log.html">&#171; Saturday, 2021-08-21</a> <a href="index.html">Index</a> <a href="%23yocto.2021-08-23.log.html">Monday, 2021-08-23 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-08-22T08:25:24"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">What is the GitLab-CI &quot;best practice&quot; to have two similar pipelines one doing incremental build (at each commit) and one doing a full rebuild (nightly), both followed by the same deploy(needs build artifacts) and test stages?</td><td class="time"><a href="#t2021-08-22T08:25:24" class="time">08:25</a></td></tr>
<tr id="t2021-08-22T08:26:46"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">Sorry I keep asking OT here, but on #gitlab there seems to be none knowledgeable willing to help :(</td><td class="time"><a href="#t2021-08-22T08:26:46" class="time">08:26</a></td></tr>
<tr id="t2021-08-22T08:38:35"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">mcon:&nbsp;&nbsp;so you got your artifacts download working? actually not limiting the artifact download by the dependencies key and just filtering (rule/only/workflows) in the build stage should do the trick. So all later stages will get the artifacts not matter what job produces them in the build stage</td><td class="time"><a href="#t2021-08-22T08:38:35" class="time">08:38</a></td></tr>
<tr id="t2021-08-22T08:40:48"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">kranzo[m]: Yes, pipeline is basically working. Thanks.</td><td class="time"><a href="#t2021-08-22T08:40:48" class="time">08:40</a></td></tr>
<tr id="t2021-08-22T08:41:30"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">may i ask what solved the problem? :D</td><td class="time"><a href="#t2021-08-22T08:41:30" class="time">08:41</a></td></tr>
<tr id="t2021-08-22T08:44:55"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">kranzo[m]: I tried asking also on <a href="https://stackoverflow.com/questions/68877379/how-to-define-a-gitlab-ci-job-to-depend-on-either-one-or-one-another-previous-jo" rel="nofollow">https://stackoverflow.com/questions/68877379/how-to-define-a-gitlab-ci-job-to-depend-on-either-one-or-one-another-previous-jo</a> but no takers yet. I find all this GitLab-CI quite difficult to understand; I didn't find docs to bridge from trivial examples to plain list of available tags :(</td><td class="time"><a href="#t2021-08-22T08:44:55" class="time">08:44</a></td></tr>
<tr id="t2021-08-22T08:48:24"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">kranzo[m]: Apparently just using &quot;artifacts:paths&quot; (with trailing slash) on producer and &quot;dependencies&quot; on consumer is enough. If you want I can post the whole pipeline gor your reading pleasure ;)</td><td class="time"><a href="#t2021-08-22T08:48:24" class="time">08:48</a></td></tr>
<tr id="t2021-08-22T08:49:13"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">i allways like a good ci :D</td><td class="time"><a href="#t2021-08-22T08:49:13" class="time">08:49</a></td></tr>
<tr id="t2021-08-22T08:49:57"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">do you realy need the dependencies keyword?</td><td class="time"><a href="#t2021-08-22T08:49:57" class="time">08:49</a></td></tr>
<tr id="t2021-08-22T08:55:01"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">if you can drop the dependecies, the artifacts should be available in the later stages not matter what.</td><td class="time"><a href="#t2021-08-22T08:55:01" class="time">08:55</a></td></tr>
<tr id="t2021-08-22T08:55:01-2"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e"><a href="https://docs.gitlab.com/13.12/ee/ci/jobs/job_control.html" rel="nofollow">https://docs.gitlab.com/13.12/ee/ci/jobs/job_control.html</a></td><td class="time"><a href="#t2021-08-22T08:55:01-2" class="time">08:55</a></td></tr>
<tr id="t2021-08-22T08:55:01-3"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">here you can limit the nightly builds (i.e schedules only) and exclude the incrementals from that&nbsp;&nbsp;runs.</td><td class="time"><a href="#t2021-08-22T08:55:01-3" class="time">08:55</a></td></tr>
<tr id="t2021-08-22T09:01:01"><th class="nick" style="background: #407a40">mcon</th><td class="text" style="color: #407a40">kranzo[m]: my current .yml is at <a href="https://dpaste.org/5pUR" rel="nofollow">https://dpaste.org/5pUR</a> The incremental build seems ok, but it's unclear to me how to tell GitLab deploy and test should be run even when I manually trigger build-nightly</td><td class="time"><a href="#t2021-08-22T09:01:01" class="time">09:01</a></td></tr>
<tr id="t2021-08-22T09:09:06"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">anyone fancy debugging qemuppc's serial interrupt handling?</td><td class="time"><a href="#t2021-08-22T09:09:06" class="time">09:09</a></td></tr>
<tr id="t2021-08-22T09:16:27"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">mcon: <a href="https://gitlab.com/kranzo/ci-test/-/blob/20d9c246ca71b296c61c0ec9f7e457c6014ce423/.gitlab-ci.yml" rel="nofollow">https://gitlab.com/kranzo/ci-test/-/blob/20d9c246ca71b296c61c0ec9f7e457c6014ce423/.gitlab-ci.yml</a></td><td class="time"><a href="#t2021-08-22T09:16:27" class="time">09:16</a></td></tr>
<tr id="t2021-08-22T09:16:27-2"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">this one is limiting to web, but you could limit on other refs:</td><td class="time"><a href="#t2021-08-22T09:16:27-2" class="time">09:16</a></td></tr>
<tr id="t2021-08-22T09:16:27-3"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e"><a href="https://docs.gitlab.com/13.12/ee/ci/yaml/index.html#onlyrefs--exceptrefs" rel="nofollow">https://docs.gitlab.com/13.12/ee/ci/yaml/index.html#onlyrefs--exceptrefs</a></td><td class="time"><a href="#t2021-08-22T09:16:27-3" class="time">09:16</a></td></tr>
<tr id="t2021-08-22T09:19:38"><th class="nick" style="background: #42427e">kranzo[m]</th><td class="text" style="color: #42427e">you can check the build/build-manual jobs the last 2 pipelines</td><td class="time"><a href="#t2021-08-22T09:19:38" class="time">09:19</a></td></tr>
<tr id="t2021-08-22T17:11:08"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">hi all -- my project is compiling fine on my machine even with a fresh TOPDIR (shared SSTATE_DIR though), but CI fails with `ldns_1.7.1.bb:20: unparsed line: 'do_install:append() {'`</td><td class="time"><a href="#t2021-08-22T17:11:08" class="time">17:11</a></td></tr>
<tr id="t2021-08-22T17:11:37"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">It looks like this is the new override syntax that I'm not yet using, I'm still on hardknott</td><td class="time"><a href="#t2021-08-22T17:11:37" class="time">17:11</a></td></tr>
<tr id="t2021-08-22T17:12:56"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">Is it possible that some layers (bitbake itself maybe) merged the new override syntax within 2021-04-hardknott, or OE-Core/meta-openembedded in their hardknott branch?</td><td class="time"><a href="#t2021-08-22T17:12:56" class="time">17:12</a></td></tr>
<tr id="t2021-08-22T17:18:23"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">RP: ^</td><td class="time"><a href="#t2021-08-22T17:18:23" class="time">17:18</a></td></tr>
<tr id="t2021-08-22T17:46:46"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">vd: Are you sure the CI is using the same commits as your local build?</td><td class="time"><a href="#t2021-08-22T17:46:46" class="time">17:46</a></td></tr>
<tr id="t2021-08-22T17:50:26"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">manuel1985 it should, I'm using kas with hardcoded branch names for every layers</td><td class="time"><a href="#t2021-08-22T17:50:26" class="time">17:50</a></td></tr>
<tr id="t2021-08-22T17:51:33"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">vd: kas is tricky, we ran into issues there</td><td class="time"><a href="#t2021-08-22T17:51:33" class="time">17:51</a></td></tr>
<tr id="t2021-08-22T17:52:28"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">vd: Perhaps you need the --update switch <a href="https://kas.readthedocs.io/en/latest/command-line.html#Named%20Arguments_repeat1" rel="nofollow">https://kas.readthedocs.io/en/latest/command-line.html#Named%20Arguments_repeat1</a></td><td class="time"><a href="#t2021-08-22T17:52:28" class="time">17:52</a></td></tr>
<tr id="t2021-08-22T17:53:32"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">I think without the --update it doesn't notice when a branch is moving forward. But that's just a guess.</td><td class="time"><a href="#t2021-08-22T17:53:32" class="time">17:53</a></td></tr>
<tr id="t2021-08-22T17:57:26"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">let me try that</td><td class="time"><a href="#t2021-08-22T17:57:26" class="time">17:57</a></td></tr>
<tr id="t2021-08-22T17:59:12"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">The CI is indeed pull fresh repositories compared to my local setup, so that would make sense actually</td><td class="time"><a href="#t2021-08-22T17:59:12" class="time">17:59</a></td></tr>
<tr id="t2021-08-22T18:00:15"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">manuel1985 thank you! I can reproduce the error locally. now I must find the faulty repo and hardcode a previous refspec...</td><td class="time"><a href="#t2021-08-22T18:00:15" class="time">18:00</a></td></tr>
<tr id="t2021-08-22T18:33:12"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">here's the faulty commit: <a href="https://git.openembedded.org/meta-openembedded/commit/?id=bca3bbbf203086794e5b56a71c04a7bbc59f9bea" rel="nofollow">https://git.openembedded.org/meta-openembedded/commit/?id=bca3bbbf203086794e5b56a71c04a7bbc59f9bea</a></td><td class="time"><a href="#t2021-08-22T18:33:12" class="time">18:33</a></td></tr>
<tr id="t2021-08-22T18:33:14"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">khem ^</td><td class="time"><a href="#t2021-08-22T18:33:14" class="time">18:33</a></td></tr>
<tr id="t2021-08-22T18:37:21"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">which wrongly uses the new syntax in the hardknott branch</td><td class="time"><a href="#t2021-08-22T18:37:21" class="time">18:37</a></td></tr>
<tr id="t2021-08-22T18:51:36"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">Same with the commit above from the same author</td><td class="time"><a href="#t2021-08-22T18:51:36" class="time">18:51</a></td></tr>
<tr id="t2021-08-22T20:00:53"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">Can anyone tell me what this line is doing? FEATURE_INSTALL = &quot;${@' '.join(oe.packagegroup.required_packages(oe.data.typed_value('IMAGE_FEATURES', d), d))}&quot;</td><td class="time"><a href="#t2021-08-22T20:00:53" class="time">20:00</a></td></tr>
<tr id="t2021-08-22T20:01:00"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">From core-image.bbclass</td><td class="time"><a href="#t2021-08-22T20:01:00" class="time">20:01</a></td></tr>
<tr id="t2021-08-22T20:02:03"><th class="nick" style="background: #488888">manuel1985</th><td class="text" style="color: #488888">I just can't comprehend where IMAGE_FEATURES trigger appends to IMAGE_INSTALL</td><td class="time"><a href="#t2021-08-22T20:02:03" class="time">20:02</a></td></tr>
<tr id="t2021-08-22T21:17:29"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">vd: if you use the latest on the bitbake branch you're using it should parse that</td><td class="time"><a href="#t2021-08-22T21:17:29" class="time">21:17</a></td></tr>
<tr id="t2021-08-22T21:28:36"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">RP: that's not the issue here. The problem is that the hardknott branch of meta-openembedded has two commits (linked above) wrongly using the new syntax.</td><td class="time"><a href="#t2021-08-22T21:28:36" class="time">21:28</a></td></tr>
<tr id="t2021-08-22T21:35:45"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">vd: that is bad but if you use the lastest bitbake from that release series, it will work ok</td><td class="time"><a href="#t2021-08-22T21:35:45" class="time">21:35</a></td></tr>
<tr id="t2021-08-22T21:55:06"><th class="nick" style="background: #854685">vd</th><td class="text" style="color: #854685">RP: do you mean there is retrocompatibility with the _override syntax? because I'm still on hardknott</td><td class="time"><a href="#t2021-08-22T21:55:06" class="time">21:55</a></td></tr>
<tr id="t2021-08-22T21:57:32"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">vd: yes, have a look at the top couple of commits to <a href="https://git.openembedded.org/bitbake/log/?h=1.50" rel="nofollow">https://git.openembedded.org/bitbake/log/?h=1.50</a></td><td class="time"><a href="#t2021-08-22T21:57:32" class="time">21:57</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-08-21.log.html">&#171; Saturday, 2021-08-21</a> <a href="index.html">Index</a> <a href="%23yocto.2021-08-23.log.html">Monday, 2021-08-23 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
