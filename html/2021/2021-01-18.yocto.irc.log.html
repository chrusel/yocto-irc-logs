<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Monday, 2021-01-18</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Monday, 2021-01-18</h1>
<div class="navigation"> <a href="%23yocto.2021-01-17.log.html">&#171; Sunday, 2021-01-17</a> <a href="index.html">Index</a> <a href="%23yocto.2021-01-19.log.html">Tuesday, 2021-01-19 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-01-18T00:04:27"><th class="nick" style="background: #407a40">marex</th><td class="text" style="color: #407a40">linums: prevented how ? pastebin the error message</td><td class="time"><a href="#t2021-01-18T00:04:27" class="time">00:04</a></td></tr>
<tr id="t2021-01-18T00:05:10"><th class="nick" style="background: #407a40">marex</th><td class="text" style="color: #407a40">linums: git grep ln..s in oe-core has plenty of examples</td><td class="time"><a href="#t2021-01-18T00:05:10" class="time">00:05</a></td></tr>
<tr id="t2021-01-18T00:07:31"><th class="nick" style="background: #42427e">linums</th><td class="text" style="color: #42427e">marex: maybe it's specific to oath? They use the /usr/lib path, but I created a symlink under /lib to the proper so, so this became the end of it:</td><td class="time"><a href="#t2021-01-18T00:07:31" class="time">00:07</a></td></tr>
<tr id="t2021-01-18T00:07:33"><th class="nick" style="background: #42427e">linums</th><td class="text" style="color: #42427e">ERROR: oath-2.6.2-r0 do_package_qa: QA Issue: non -dev/-dbg/nativesdk- package contains symlink .so: oath path '/work/core2-64-poky-linux/oath/2.6.2-r0/packages-split/oath/lib/security/pam_oath.so' [dev-so]</td><td class="time"><a href="#t2021-01-18T00:07:33" class="time">00:07</a></td></tr>
<tr id="t2021-01-18T03:13:06-2"><td class="nickchange" colspan="2">*** denix0 is now known as denix</td><td><a href="#t2021-01-18T03:13:06-2" class="time">03:13</a></td></tr>
<tr id="t2021-01-18T03:36:14"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2021-01-18T03:36:14" class="time">03:36</a></td></tr>
<tr id="t2021-01-18T05:33:50"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2021-01-18T05:33:50" class="time">05:33</a></td></tr>
<tr id="t2021-01-18T07:44:08"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2021-01-18T07:44:08" class="time">07:44</a></td></tr>
<tr id="t2021-01-18T08:03:53"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2021-01-18T08:03:53" class="time">08:03</a></td></tr>
<tr id="t2021-01-18T08:03:57"><th class="nick" style="background: #818144">mckoan</th><td class="text" style="color: #818144">good morning</td><td class="time"><a href="#t2021-01-18T08:03:57" class="time">08:03</a></td></tr>
<tr id="t2021-01-18T08:04:17"><th class="nick" style="background: #854685">psycorama</th><td class="text" style="color: #854685">greetings</td><td class="time"><a href="#t2021-01-18T08:04:17" class="time">08:04</a></td></tr>
<tr id="t2021-01-18T08:07:01"><th class="nick" style="background: #488888">mihai</th><td class="text" style="color: #488888">morning</td><td class="time"><a href="#t2021-01-18T08:07:01" class="time">08:07</a></td></tr>
<tr id="t2021-01-18T08:08:13"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">yo dudX</td><td class="time"><a href="#t2021-01-18T08:08:13" class="time">08:08</a></td></tr>
<tr id="t2021-01-18T09:58:49"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">manuel1985: Thanks!</td><td class="time"><a href="#t2021-01-18T09:58:49" class="time">09:58</a></td></tr>
<tr id="t2021-01-18T10:09:41"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">RP: We know that creating files under pseudo and then deleting them outside pseudo can cause issues. How about the other way round?</td><td class="time"><a href="#t2021-01-18T10:09:41" class="time">10:09</a></td></tr>
<tr id="t2021-01-18T10:09:59"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">Is it safe to delete files under pseudo which were created outside of a pseudo context?</td><td class="time"><a href="#t2021-01-18T10:09:59" class="time">10:09</a></td></tr>
<tr id="t2021-01-18T10:12:04"><th class="nick" style="background: #4d4d93">manuel1985</th><td class="text" style="color: #4d4d93">paulbarker: Well, thank you ;)</td><td class="time"><a href="#t2021-01-18T10:12:04" class="time">10:12</a></td></tr>
<tr id="t2021-01-18T10:29:11"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: that is safe</td><td class="time"><a href="#t2021-01-18T10:29:11" class="time">10:29</a></td></tr>
<tr id="t2021-01-18T10:29:54"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: the reason that external deletion causes problems is potential inode reuse. That doesn't happen the other way around</td><td class="time"><a href="#t2021-01-18T10:29:54" class="time">10:29</a></td></tr>
<tr id="t2021-01-18T10:30:18"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">RP: Ok, that makes sense. I'm trying to work out how the `tmp-wic` directory ends up in the pseudo db</td><td class="time"><a href="#t2021-01-18T10:30:18" class="time">10:30</a></td></tr>
<tr id="t2021-01-18T10:31:14"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">It's created by bitbake as it's listed in `do_image_wic[cleandirs]`, then deleted by wic (still outside pseudo, I missed that the line which runs wic has `PSEUDO_UNLOAD=1`)</td><td class="time"><a href="#t2021-01-18T10:31:14" class="time">10:31</a></td></tr>
<tr id="t2021-01-18T10:32:01"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: the creation by bitbake is probably under pseudo then?</td><td class="time"><a href="#t2021-01-18T10:32:01" class="time">10:32</a></td></tr>
<tr id="t2021-01-18T10:32:51"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">RP: Doesn't look like it. It's created in `exec_func()` before FAKEROOT is even checked</td><td class="time"><a href="#t2021-01-18T10:32:51" class="time">10:32</a></td></tr>
<tr id="t2021-01-18T10:34:01"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: the entire of bitbake-worker for peseudo tasks runs under pseudo</td><td class="time"><a href="#t2021-01-18T10:34:01" class="time">10:34</a></td></tr>
<tr id="t2021-01-18T10:34:44"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">RP: I missed that fact! Was just looking at `lib/bb/build.py`</td><td class="time"><a href="#t2021-01-18T10:34:44" class="time">10:34</a></td></tr>
<tr id="t2021-01-18T10:35:03"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: right, there is code in bitbake-worker for that</td><td class="time"><a href="#t2021-01-18T10:35:03" class="time">10:35</a></td></tr>
<tr id="t2021-01-18T10:35:11"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">That could explain it. Bitbake creates the dir under pseudo, wic runs with `PSEUDO_UNLOAD=1` and deletes it</td><td class="time"><a href="#t2021-01-18T10:35:11" class="time">10:35</a></td></tr>
<tr id="t2021-01-18T10:35:32"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">that would be bad, yes</td><td class="time"><a href="#t2021-01-18T10:35:32" class="time">10:35</a></td></tr>
<tr id="t2021-01-18T10:35:45"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">I'm not sure we even need that dir in `do_image_wic[cleandirs]` if wic creates and deletes the dir itself</td><td class="time"><a href="#t2021-01-18T10:35:45" class="time">10:35</a></td></tr>
<tr id="t2021-01-18T10:36:06"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">My only concern is if wic dies part way through and leaves a junk dir behind</td><td class="time"><a href="#t2021-01-18T10:36:06" class="time">10:36</a></td></tr>
<tr id="t2021-01-18T10:38:11"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">RP: I'll modify it so that wic handles that directory internally, drop it from `do_image_wic[cleandirs]` and re-submit the patches</td><td class="time"><a href="#t2021-01-18T10:38:11" class="time">10:38</a></td></tr>
<tr id="t2021-01-18T10:38:21"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">That should hopefully do the trick</td><td class="time"><a href="#t2021-01-18T10:38:21" class="time">10:38</a></td></tr>
<tr id="t2021-01-18T10:38:21-2"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">paulbarker: sounds good</td><td class="time"><a href="#t2021-01-18T10:38:21-2" class="time">10:38</a></td></tr>
<tr id="t2021-01-18T10:39:06"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">paulbarker: don't forget about people with a ctrl+c frenziness which stops builds unexpectedly. Making sure the dir is cleaned is not too bad?</td><td class="time"><a href="#t2021-01-18T10:39:06" class="time">10:39</a></td></tr>
<tr id="t2021-01-18T10:39:29"><th class="nick" style="background: #97974f">RP</th><td class="text" style="color: #97974f">qschulz: I believe paulbarker will sort internally to wic</td><td class="time"><a href="#t2021-01-18T10:39:29" class="time">10:39</a></td></tr>
<tr id="t2021-01-18T10:42:16"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">qschulz: I think wic should bail if the workdir already exists. Then in do_image_wic we can check for an old workdir and delete it if present</td><td class="time"><a href="#t2021-01-18T10:42:16" class="time">10:42</a></td></tr>
<tr id="t2021-01-18T10:42:48"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">That avoids the risk of someone shooting themselves in the foot, I don't want wic to unconditionally remove the workdir at startup or `wic -w ~` would become a foot-gun</td><td class="time"><a href="#t2021-01-18T10:42:48" class="time">10:42</a></td></tr>
<tr id="t2021-01-18T10:43:25"><th class="nick" style="background: #4b904b">paulbarker</th><td class="text" style="color: #4b904b">Deleting an old workdir in do_image_wic should be safe as it will have been created outside of a pseudo context</td><td class="time"><a href="#t2021-01-18T10:43:25" class="time">10:43</a></td></tr>
<tr id="t2021-01-18T10:48:10"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">Good day! I would like to run a filesystem check on every boot. On a raspbian I could do that by adding `fsck=force fsck.repair=yes` to `/proc/cmdline`. Is that the right thing to do? do I need to enable kernel modules for that or should that run out of the box?</td><td class="time"><a href="#t2021-01-18T10:48:10" class="time">10:48</a></td></tr>
<tr id="t2021-01-18T10:48:30"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">I mean I would like to do that on my bitbaked image.</td><td class="time"><a href="#t2021-01-18T10:48:30" class="time">10:48</a></td></tr>
<tr id="t2021-01-18T11:03:06"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">emrius: i would rather start thinking about a) why do you expect fs corruption? b) what will you do if the check fails?</td><td class="time"><a href="#t2021-01-18T11:03:06" class="time">11:03</a></td></tr>
<tr id="t2021-01-18T11:06:15"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">emrius: and, this <a href="https://www.freedesktop.org/software/systemd/man/kernel-command-line.html" rel="nofollow">https://www.freedesktop.org/software/systemd/man/kernel-command-line.html</a> suggests that you are using a systemd feature. so if the feature is waht you want and your image is using systemd, then it is probably the (most) right thing to do.</td><td class="time"><a href="#t2021-01-18T11:06:15" class="time">11:06</a></td></tr>
<tr id="t2021-01-18T11:08:26"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2021-01-18T11:08:26" class="time">11:08</a></td></tr>
<tr id="t2021-01-18T11:13:11"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">LetoThe2nd: Thanks! We are currently running our system from an SD card. I thought that enforcing a filesystem repair e.g. after power failure might prevent corrupted root filesystems.</td><td class="time"><a href="#t2021-01-18T11:13:11" class="time">11:13</a></td></tr>
<tr id="t2021-01-18T11:13:54"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">We are using systemd thus, that makes it much easier to apply! awesome</td><td class="time"><a href="#t2021-01-18T11:13:54" class="time">11:13</a></td></tr>
<tr id="t2021-01-18T11:16:45"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">emrius: depending on the rest of your system archicture that might or might not be a good idea.</td><td class="time"><a href="#t2021-01-18T11:16:45" class="time">11:16</a></td></tr>
<tr id="t2021-01-18T11:18:53"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">what would be reasons not to do that?</td><td class="time"><a href="#t2021-01-18T11:18:53" class="time">11:18</a></td></tr>
<tr id="t2021-01-18T11:19:24"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">despite longer booting time of course</td><td class="time"><a href="#t2021-01-18T11:19:24" class="time">11:19</a></td></tr>
<tr id="t2021-01-18T11:20:33"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">primarily the longer boot time. but also means of actually handling the problems.</td><td class="time"><a href="#t2021-01-18T11:20:33" class="time">11:20</a></td></tr>
<tr id="t2021-01-18T11:23:53"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">Boot time is not critical for us. I mean, sure, it's kind of risky to leave it to the system to do that on its own but our devices are running headless very remote. Thus, if anything is fixable I think it might be best to just give it a shot...</td><td class="time"><a href="#t2021-01-18T11:23:53" class="time">11:23</a></td></tr>
<tr id="t2021-01-18T11:23:58"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">Let's see how that turns out</td><td class="time"><a href="#t2021-01-18T11:23:58" class="time">11:23</a></td></tr>
<tr id="t2021-01-18T11:25:52"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">Ok, but coming back to `/proc/cmdline` :/ I actually have to set other parameters as well such as `isolcpu` to stabilize some acquisition thread running on one core. <a href="https://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/re46.html" rel="nofollow">https://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/re46.html</a></td><td class="time"><a href="#t2021-01-18T11:25:52" class="time">11:25</a></td></tr>
<tr id="t2021-01-18T11:27:45"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">I could copy the current `/proc/cmdline` and (I think) override the `CONFIG_CMDLINE` kernel option. Or can I append to that kernel option somehow? Or maybe even the classic way: CONFIG_CMDLINE_append = &quot;isolcpus=1&quot; ?</td><td class="time"><a href="#t2021-01-18T11:27:45" class="time">11:27</a></td></tr>
<tr id="t2021-01-18T11:37:01"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">emrius: are you using u-boot?</td><td class="time"><a href="#t2021-01-18T11:37:01" class="time">11:37</a></td></tr>
<tr id="t2021-01-18T11:37:40"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if yes, just add your stuff to the bootargs env variable, that's where the kernel parameters are defined before being passed to the kernel</td><td class="time"><a href="#t2021-01-18T11:37:40" class="time">11:37</a></td></tr>
<tr id="t2021-01-18T12:42:00"><td class="nickchange" colspan="2">*** __ad is now known as ad__</td><td><a href="#t2021-01-18T12:42:00" class="time">12:42</a></td></tr>
<tr id="t2021-01-18T12:45:19"><th class="nick" style="background: #539e9e">emrius</th><td class="text" style="color: #539e9e">qschulz: sorry for the late reply. Lunch break. Yes, I'm using u-boot. Thanks for the clarification!</td><td class="time"><a href="#t2021-01-18T12:45:19" class="time">12:45</a></td></tr>
<tr id="t2021-01-18T12:49:54"><th class="nick" style="background: #a25555">Sponge5</th><td class="text" style="color: #a25555">I added NetworkManager as a IMAGE_INSTALL_append and apparently it automagically added it to systemd services, can I expect that to happen to openssh too, or should I configure it?</td><td class="time"><a href="#t2021-01-18T12:49:54" class="time">12:49</a></td></tr>
<tr id="t2021-01-18T12:51:32"><th class="nick" style="background: #a25555">Sponge5</th><td class="text" style="color: #a25555">I'll check anyway</td><td class="time"><a href="#t2021-01-18T12:51:32" class="time">12:51</a></td></tr>
<tr id="t2021-01-18T13:00:40"><th class="nick" style="background: #57a657">RobertBerger</th><td class="text" style="color: #57a657">It looks like trace-cmd and perf install the same stuff to ${libdir}/traceevent/plugins</td><td class="time"><a href="#t2021-01-18T13:00:40" class="time">13:00</a></td></tr>
<tr id="t2021-01-18T13:01:01"><th class="nick" style="background: #57a657">RobertBerger</th><td class="text" style="color: #57a657">Did someone else notice this?</td><td class="time"><a href="#t2021-01-18T13:01:01" class="time">13:01</a></td></tr>
<tr id="t2021-01-18T15:21:12"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">hi there</td><td class="time"><a href="#t2021-01-18T15:21:12" class="time">15:21</a></td></tr>
<tr id="t2021-01-18T15:23:26"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: o/</td><td class="time"><a href="#t2021-01-18T15:23:26" class="time">15:23</a></td></tr>
<tr id="t2021-01-18T15:23:35"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">If I'm building an initramfs for preinit things, like mounting squashfs overlays before switching root etc., should I define the image recipe as a depedence for core-image-minimal (or any custom ones) or should I somehow force it in the machine/distro conf?</td><td class="time"><a href="#t2021-01-18T15:23:35" class="time">15:23</a></td></tr>
<tr id="t2021-01-18T15:26:18"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: i would rather go multiconfig to create a build-in-bild</td><td class="time"><a href="#t2021-01-18T15:26:18" class="time">15:26</a></td></tr>
<tr id="t2021-01-18T15:26:24"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">*build-in-build, even</td><td class="time"><a href="#t2021-01-18T15:26:24" class="time">15:26</a></td></tr>
<tr id="t2021-01-18T15:28:09"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: I'm still not sure to understand the use case for multiconfig</td><td class="time"><a href="#t2021-01-18T15:28:09" class="time">15:28</a></td></tr>
<tr id="t2021-01-18T15:28:18"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">LetoThe2nd: does it bring something if the machines are identical?</td><td class="time"><a href="#t2021-01-18T15:28:18" class="time">15:28</a></td></tr>
<tr id="t2021-01-18T15:28:44"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">you want to ship a root filesystem which carries a kernel, which in turn has an initramfs bundled, right?</td><td class="time"><a href="#t2021-01-18T15:28:44" class="time">15:28</a></td></tr>
<tr id="t2021-01-18T15:30:08"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">hum no, I would have used a single kernel, an initramfs for preinit, which mounts stuffs and switch root to a persistent partition</td><td class="time"><a href="#t2021-01-18T15:30:08" class="time">15:30</a></td></tr>
<tr id="t2021-01-18T15:30:32"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">but you have two rootfs involved.</td><td class="time"><a href="#t2021-01-18T15:30:32" class="time">15:30</a></td></tr>
<tr id="t2021-01-18T15:30:39"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">yes</td><td class="time"><a href="#t2021-01-18T15:30:39" class="time">15:30</a></td></tr>
<tr id="t2021-01-18T15:30:49"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">which will probably run different DISTROs</td><td class="time"><a href="#t2021-01-18T15:30:49" class="time">15:30</a></td></tr>
<tr id="t2021-01-18T15:31:22"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">or it can be the same with some root detection logic, but you can imagine having different init systems (sysvinit vs. systemd for example), so yes 2 different rootfs.</td><td class="time"><a href="#t2021-01-18T15:31:22" class="time">15:31</a></td></tr>
<tr id="t2021-01-18T15:32:10"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">so yes, two different DISTROs even</td><td class="time"><a href="#t2021-01-18T15:32:10" class="time">15:32</a></td></tr>
<tr id="t2021-01-18T15:32:12-2"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: yeah that's something I'm still not confortable with. Is this case using two different distros, or two images of the same distro?</td><td class="time"><a href="#t2021-01-18T15:32:12-2" class="time">15:32</a></td></tr>
<tr id="t2021-01-18T15:32:14"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">once different inits are involved you are runnind two DISTROs and therefore are in multiconfig land.</td><td class="time"><a href="#t2021-01-18T15:32:14" class="time">15:32</a></td></tr>
<tr id="t2021-01-18T15:32:28"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">qschulz: cue #1 please.</td><td class="time"><a href="#t2021-01-18T15:32:28" class="time">15:32</a></td></tr>
<tr id="t2021-01-18T15:35:33"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: LetoThe2nd: this is targetting the SD card. If I wanted to build a bootable image for the eMMC, would this be a third distro?</td><td class="time"><a href="#t2021-01-18T15:35:33" class="time">15:35</a></td></tr>
<tr id="t2021-01-18T15:35:59"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: probably more like a second machine.</td><td class="time"><a href="#t2021-01-18T15:35:59" class="time">15:35</a></td></tr>
<tr id="t2021-01-18T15:36:35"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">Hi, I am struggling with bitbake chosing the wrong recipe version. I have a layer from a client providing a recipe for keyutils in version 1.5.10. In the dunfell version of meta-openembedded, there is a newer recipe for keyutils. 'bitbake-layers show-recipes keyutils' correctly lists both of them:</td><td class="time"><a href="#t2021-01-18T15:36:35" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:35-2"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">=== Matching recipes: ===</td><td class="time"><a href="#t2021-01-18T15:36:35-2" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:35-3"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">keyutils:</td><td class="time"><a href="#t2021-01-18T15:36:35-3" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:35-4"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">&nbsp;&nbsp;meta-client&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.5.10</td><td class="time"><a href="#t2021-01-18T15:36:35-4" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:35-5"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">&nbsp;&nbsp;meta-oe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.6.1</td><td class="time"><a href="#t2021-01-18T15:36:35-5" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:35-6"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">When I perform 'bitbake keyutils' it still starts to build version 1.5.10 and I don't know why. I was looking for a 'PREFERRED_VERSION_keyutils..' variable set somewhere but no match.</td><td class="time"><a href="#t2021-01-18T15:36:35-6" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:36:52"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: well aren't emmc and sd card more or less the same thing?</td><td class="time"><a href="#t2021-01-18T15:36:52" class="time">15:36</a></td></tr>
<tr id="t2021-01-18T15:37:02"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">one is removable and not the other but it's pretty much the same thing</td><td class="time"><a href="#t2021-01-18T15:37:02" class="time">15:37</a></td></tr>
<tr id="t2021-01-18T15:37:09"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">so... not sure it matters?</td><td class="time"><a href="#t2021-01-18T15:37:09" class="time">15:37</a></td></tr>
<tr id="t2021-01-18T15:37:33"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">(except if you have some scripts/logics/recipes that are different when you are on sdcard vs emmc and you cannot detect this at runtime)</td><td class="time"><a href="#t2021-01-18T15:37:33" class="time">15:37</a></td></tr>
<tr id="t2021-01-18T15:38:04"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">in which case as LetoThe2nd said, two machines. Or if the differences are minimal, maybe two image recipes but two machines is cleaner</td><td class="time"><a href="#t2021-01-18T15:38:04" class="time">15:38</a></td></tr>
<tr id="t2021-01-18T15:38:33"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">dleppich: look for BBPRIORITY in conf/layer.conf</td><td class="time"><a href="#t2021-01-18T15:38:33" class="time">15:38</a></td></tr>
<tr id="t2021-01-18T15:38:44"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">I see</td><td class="time"><a href="#t2021-01-18T15:38:44" class="time">15:38</a></td></tr>
<tr id="t2021-01-18T15:38:55"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">the higher the number the highest the priority of the recipes it contains</td><td class="time"><a href="#t2021-01-18T15:38:55" class="time">15:38</a></td></tr>
<tr id="t2021-01-18T15:39:43"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">the &quot;flash&quot; machine would have it's own .wic file for the flash layout but the distro image recipe would actually be the same. Maybe even a FitImage or raw squashfs partition on the flash.</td><td class="time"><a href="#t2021-01-18T15:39:43" class="time">15:39</a></td></tr>
<tr id="t2021-01-18T15:40:48"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: sd card and emmc are both flash, they can probably both have support for .wic if I'm not mistaken. Distro image recipe does not really exist so it's a bit confusing what you're saying</td><td class="time"><a href="#t2021-01-18T15:40:48" class="time">15:40</a></td></tr>
<tr id="t2021-01-18T15:40:53"><th class="nick" style="background: #adad5b">dleppich</th><td class="text" style="color: #adad5b">qschulz: meta-client is a priority of 9, meta-oe has 6. So does the bitbake only chose higher versions when the layer priorities are equal?</td><td class="time"><a href="#t2021-01-18T15:40:53" class="time">15:40</a></td></tr>
<tr id="t2021-01-18T15:41:04"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: qschulz: the more I learn about yocto, the more I realize that &quot;distro&quot;, &quot;machine&quot;, and &quot;image&quot; don't have strong meanings, it's more like building blocks to define the granularity of your own use case</td><td class="time"><a href="#t2021-01-18T15:41:04" class="time">15:41</a></td></tr>
<tr id="t2021-01-18T15:41:41"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: au contraire. MACHINE, DISTRO and IMAGE are (almost) orthogonal.</td><td class="time"><a href="#t2021-01-18T15:41:41" class="time">15:41</a></td></tr>
<tr id="t2021-01-18T15:41:59"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">dleppich: yes</td><td class="time"><a href="#t2021-01-18T15:41:59" class="time">15:41</a></td></tr>
<tr id="t2021-01-18T15:42:00"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: you should be able to switch each one in and out at will.</td><td class="time"><a href="#t2021-01-18T15:42:00" class="time">15:42</a></td></tr>
<tr id="t2021-01-18T15:43:49"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">I cna understand the difference between distro and image is hard to grasp, it took me some time too. As LetoThe2nd said, see distro as lego vs mechano and image as boat vs car. The distro defines &quot;how&quot; you build something (init system, opengl support, etc...), the image what you build</td><td class="time"><a href="#t2021-01-18T15:43:49" class="time">15:43</a></td></tr>
<tr id="t2021-01-18T15:44:42"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">( qschulz: about distro images, I mean that image recipes are distro specific and go into a distro layer usually, don't they? )</td><td class="time"><a href="#t2021-01-18T15:44:42" class="time">15:44</a></td></tr>
<tr id="t2021-01-18T15:45:00"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">and there is one important thing to remember, recipes cannot share information between themselves. Yes... image recipes too. So when you want to make two recipes have the same configuration, you need a configuration file (distro or &quot;it depends&quot;)</td><td class="time"><a href="#t2021-01-18T15:45:00" class="time">15:45</a></td></tr>
<tr id="t2021-01-18T15:45:57"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: there is no such thing as distro images. There are distro configuration files which are nothing without any recipe to build (image and package recipes). Therea re image recipes which are nothing without a distro configuration file for configuring them</td><td class="time"><a href="#t2021-01-18T15:45:57" class="time">15:45</a></td></tr>
<tr id="t2021-01-18T15:46:34"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">distro layer only has usually distro specific stuff. meaning the distro configuration file and distro specific bbappends or patches or classes etc.</td><td class="time"><a href="#t2021-01-18T15:46:34" class="time">15:46</a></td></tr>
<tr id="t2021-01-18T15:48:03"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">ok</td><td class="time"><a href="#t2021-01-18T15:48:03" class="time">15:48</a></td></tr>
<tr id="t2021-01-18T15:50:33"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: I talked about &quot;distro images&quot; because in my mind I was imagining that an &quot;ubuntu&quot; distro layer existed, it would provide &quot;ubuntu&quot; and &quot;ubuntu-devel&quot; image recipes for example, while core-image-minimal are the bare image recipes for a functional target</td><td class="time"><a href="#t2021-01-18T15:50:33" class="time">15:50</a></td></tr>
<tr id="t2021-01-18T15:51:26"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">so in my case (standard distro vs. the preinit scripts), you guys would defined two distros (e.g. foo and foo-preinit) and build what, core-image-minimal for both of them?</td><td class="time"><a href="#t2021-01-18T15:51:26" class="time">15:51</a></td></tr>
<tr id="t2021-01-18T15:51:49"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: its not something &quot;we would&quot;. its somethign that doesn't work in another way.</td><td class="time"><a href="#t2021-01-18T15:51:49" class="time">15:51</a></td></tr>
<tr id="t2021-01-18T15:52:12"><td class="action" colspan="2">* v0n is still struggling to figure out where to use image recipes vs. extending {IMAGE,PACKAGE}_INSTALL in the distro definition</td><td><a href="#t2021-01-18T15:52:12" class="time">15:52</a></td></tr>
<tr id="t2021-01-18T15:52:36"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">it's highly unlikely that you won't need to create two image recipes anyway, or make some part of the image recipe distro specific (which I don't recommend)</td><td class="time"><a href="#t2021-01-18T15:52:36" class="time">15:52</a></td></tr>
<tr id="t2021-01-18T15:53:16"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">can your distro absolutely NOT work without a package in the image? if yes, then IMAGE_INSTALL is fine-ish. If it does not care, it's not where you should put it but in an image recipe</td><td class="time"><a href="#t2021-01-18T15:53:16" class="time">15:53</a></td></tr>
<tr id="t2021-01-18T15:53:17"><th class="nick" style="background: #b15db1">cdgarren</th><td class="text" style="color: #b15db1">I'm having an issue with using devtool for a kernel recipe. I have a local file that doesn't get unpacked into my devtool workspace. Anyone have any ideas?</td><td class="time"><a href="#t2021-01-18T15:53:17" class="time">15:53</a></td></tr>
<tr id="t2021-01-18T15:53:30"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">e.g. systemd distro needs systemd</td><td class="time"><a href="#t2021-01-18T15:53:30" class="time">15:53</a></td></tr>
<tr id="t2021-01-18T15:53:52"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">cdgarren: did you add this file after having run devtool modify?</td><td class="time"><a href="#t2021-01-18T15:53:52" class="time">15:53</a></td></tr>
<tr id="t2021-01-18T15:54:13"><th class="nick" style="background: #b15db1">cdgarren</th><td class="text" style="color: #b15db1">qschulz No, it was in the recipe beforehand.</td><td class="time"><a href="#t2021-01-18T15:54:13" class="time">15:54</a></td></tr>
<tr id="t2021-01-18T15:54:54"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">cdgarren: is it not unpacked or not put into the devtool workspace?</td><td class="time"><a href="#t2021-01-18T15:54:54" class="time">15:54</a></td></tr>
<tr id="t2021-01-18T15:55:15"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">(i.e. are we talking about a tarball that is not extracted or a tarball/file that is not available in the workspace)?</td><td class="time"><a href="#t2021-01-18T15:55:15" class="time">15:55</a></td></tr>
<tr id="t2021-01-18T15:55:55"><th class="nick" style="background: #b15db1">cdgarren</th><td class="text" style="color: #b15db1">qschulz it's a plaintext .dts file, and it ends up being extracted into the work-shared/kernel-sources directory</td><td class="time"><a href="#t2021-01-18T15:55:55" class="time">15:55</a></td></tr>
<tr id="t2021-01-18T15:56:19"><th class="nick" style="background: #b15db1">cdgarren</th><td class="text" style="color: #b15db1">My SRC_URI for the file looks something like this: file://project.dts;subdir=${S}/path/to/subdir/</td><td class="time"><a href="#t2021-01-18T15:56:19" class="time">15:56</a></td></tr>
<tr id="t2021-01-18T15:57:24"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">I don't use devtool for kernel so can't really help here :/ Especially since the kernel is such a special recipe (work-shared for example)</td><td class="time"><a href="#t2021-01-18T15:57:24" class="time">15:57</a></td></tr>
<tr id="t2021-01-18T15:57:30"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: qschulz: so in my case you would have &quot;fooboard&quot; and &quot;fooboard-emmc&quot; machines, &quot;foodist&quot; and &quot;foodist-preinit&quot; distros and also &quot;foodist&quot; and &quot;foodist-preinit&quot; image recipes, right?</td><td class="time"><a href="#t2021-01-18T15:57:30" class="time">15:57</a></td></tr>
<tr id="t2021-01-18T15:58:31"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: I would triple check that you can't have the same machine for sd card and emmc</td><td class="time"><a href="#t2021-01-18T15:58:31" class="time">15:58</a></td></tr>
<tr id="t2021-01-18T15:58:52"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">and if it's only a filesystem issue, just build both from the image recipe for sd card and emmc</td><td class="time"><a href="#t2021-01-18T15:58:52" class="time">15:58</a></td></tr>
<tr id="t2021-01-18T15:59:04"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">otherwise, pretty much on point yes</td><td class="time"><a href="#t2021-01-18T15:59:04" class="time">15:59</a></td></tr>
<tr id="t2021-01-18T16:12:02"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: I think we can have the same machine yes, as you said it's both MMC anyway (the size is different for sure) but I would definitely not use the same layout for both storage</td><td class="time"><a href="#t2021-01-18T16:12:02" class="time">16:12</a></td></tr>
<tr id="t2021-01-18T16:13:08"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: you have to check if you can use two different wks out of the box</td><td class="time"><a href="#t2021-01-18T16:13:08" class="time">16:13</a></td></tr>
<tr id="t2021-01-18T16:13:23"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">otherwise, you can probably create a new image type instead</td><td class="time"><a href="#t2021-01-18T16:13:23" class="time">16:13</a></td></tr>
<tr id="t2021-01-18T16:13:26"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">it all depends</td><td class="time"><a href="#t2021-01-18T16:13:26" class="time">16:13</a></td></tr>
<tr id="t2021-01-18T16:13:44"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if there are really no differences apart from those, then two machiens might be overkill though cleaner</td><td class="time"><a href="#t2021-01-18T16:13:44" class="time">16:13</a></td></tr>
<tr id="t2021-01-18T16:14:16"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">Hey folks, how do you handle yocto repository for multiple projects/machine ? Are you able to only use 1 yocto repository for all your machines/projects?</td><td class="time"><a href="#t2021-01-18T16:14:16" class="time">16:14</a></td></tr>
<tr id="t2021-01-18T16:14:53"><th class="nick" style="background: #b86161">rburton</th><td class="text" style="color: #b86161">You might want to expand on what you mean by 'yocto repository'</td><td class="time"><a href="#t2021-01-18T16:14:53" class="time">16:14</a></td></tr>
<tr id="t2021-01-18T16:16:39"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">roussinm: from what I've understood so far it really depends on what you want to provide. You can have one meta-&lt;company&gt; layer with everything, have one meta-&lt;company&gt; containing meta-&lt;machine1&gt;, meta-&lt;machine2&gt;, meta-&lt;distro&gt;, etc. or even split all these layers into separated git repositories. It all end up to what you need to publish or not (private vs. public layers, etc.)</td><td class="time"><a href="#t2021-01-18T16:16:39" class="time">16:16</a></td></tr>
<tr id="t2021-01-18T16:18:38"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: what do you mean by checking if I can use two different wks out of the box? I'd say yes, if let's say for the SD card I want to have a persistent partition for the rootfs while for the eMMC I want to have a raw squashfs partition or even a FitImage containing everthing.</td><td class="time"><a href="#t2021-01-18T16:18:38" class="time">16:18</a></td></tr>
<tr id="t2021-01-18T16:18:49"><th class="nick" style="background: #62bb62">paulg</th><td class="text" style="color: #62bb62">roussinm, maybe the answer is as simple as&nbsp;&nbsp;&quot;.&nbsp;&nbsp;./oe-init-build-env build-A &quot;&nbsp;&nbsp; and in another shell&nbsp;&nbsp;&quot;. ./oe-init-build-env build-B&quot;</td><td class="time"><a href="#t2021-01-18T16:18:49" class="time">16:18</a></td></tr>
<tr id="t2021-01-18T16:19:22"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">v0n: thanks! I was wondering that if we take the meta-&lt;company&gt;/meta-&lt;machine1,2&gt; approach, we will probably have a meta-&lt;company&gt;/common recipes and that if you change those recipes you have to make sur that all machines are still properly built.</td><td class="time"><a href="#t2021-01-18T16:19:22" class="time">16:19</a></td></tr>
<tr id="t2021-01-18T16:20:38"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">paulg: that's what we have been doing so far, just wanted to see what was the workflow somewhere else.</td><td class="time"><a href="#t2021-01-18T16:20:38" class="time">16:20</a></td></tr>
<tr id="t2021-01-18T16:21:14"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">paulg: but both build-a and build-b are different git repositories.</td><td class="time"><a href="#t2021-01-18T16:21:14" class="time">16:21</a></td></tr>
<tr id="t2021-01-18T16:21:57"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">no build-{a,b} are build directories here, not project repositories</td><td class="time"><a href="#t2021-01-18T16:21:57" class="time">16:21</a></td></tr>
<tr id="t2021-01-18T16:23:46"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: you can only specify one file in WKS_FILE, so how do you pick which one to build if you have the same recipe and the same machine?</td><td class="time"><a href="#t2021-01-18T16:23:46" class="time">16:23</a></td></tr>
<tr id="t2021-01-18T16:23:47"><th class="nick" style="background: #6464bf">rnouse</th><td class="text" style="color: #6464bf">JPEW, from our last week's discussion: <a href="https://lists.openembedded.org/g/openembedded-core/message/146830" rel="nofollow">https://lists.openembedded.org/g/openembedded-core/message/146830</a></td><td class="time"><a href="#t2021-01-18T16:23:47" class="time">16:23</a></td></tr>
<tr id="t2021-01-18T16:24:05"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">v0n: oh right, sorry i was refering to the oe-init-build-env source script.</td><td class="time"><a href="#t2021-01-18T16:24:05" class="time">16:24</a></td></tr>
<tr id="t2021-01-18T16:24:23"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: you cannot set WKS_FILE in the image recipe instead of globally in the distro conf?</td><td class="time"><a href="#t2021-01-18T16:24:23" class="time">16:24</a></td></tr>
<tr id="t2021-01-18T16:24:50"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">v0n: you want two different wks file because you have mmc and sd card -ready artifacts to create</td><td class="time"><a href="#t2021-01-18T16:24:50" class="time">16:24</a></td></tr>
<tr id="t2021-01-18T16:24:59"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">and they are different is what you said</td><td class="time"><a href="#t2021-01-18T16:24:59" class="time">16:24</a></td></tr>
<tr id="t2021-01-18T16:26:41"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">qschulz: I thought you can specify the WKS_FILE in the image recipe, so a different file for every image recipes if you'd like. I might have been wrong.</td><td class="time"><a href="#t2021-01-18T16:26:41" class="time">16:26</a></td></tr>
<tr id="t2021-01-18T16:29:37"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">you would then have foodist-emmc foodist-sdcard foodist-preinit-emmc foodist-preinit-sdcard</td><td class="time"><a href="#t2021-01-18T16:29:37" class="time">16:29</a></td></tr>
<tr id="t2021-01-18T16:32:25"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">these are 4 image recipes for a single fooboard and two foodist and foodist-preinit distros, right?</td><td class="time"><a href="#t2021-01-18T16:32:25" class="time">16:32</a></td></tr>
<tr id="t2021-01-18T16:34:53"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">v0n: when using meta-&lt;company&gt;/meta-&lt;machine1,2&gt; I think it makes sens to use COMPATIBLE_MACHINE in the layer.conf ?</td><td class="time"><a href="#t2021-01-18T16:34:53" class="time">16:34</a></td></tr>
<tr id="t2021-01-18T16:37:32"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">roussinm: it might depends if the machine are compatible. For example I have a board based on beaglebone and its dev version, which require conf/machine/beaglebone.conf and does MACHINEOVERRIDES =. &quot;beaglebone:&quot;. The &quot;dev&quot; variant simple require conf/machine/myboard.conf</td><td class="time"><a href="#t2021-01-18T16:37:32" class="time">16:37</a></td></tr>
<tr id="t2021-01-18T16:37:42"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">roussinm: no, layers shouldn't break anything if they are included but not used</td><td class="time"><a href="#t2021-01-18T16:37:42" class="time">16:37</a></td></tr>
<tr id="t2021-01-18T16:38:20"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">qschulz: how could it break anything?</td><td class="time"><a href="#t2021-01-18T16:38:20" class="time">16:38</a></td></tr>
<tr id="t2021-01-18T16:38:33"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">why do you need COMPATIBLE_MACHINE in the first place then?</td><td class="time"><a href="#t2021-01-18T16:38:33" class="time">16:38</a></td></tr>
<tr id="t2021-01-18T16:40:56"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">well if I use the multi-machine directory approach, when I source the environment, I shouldn't be parsing/building recipes that are not compatible for that build environment.</td><td class="time"><a href="#t2021-01-18T16:40:56" class="time">16:40</a></td></tr>
<tr id="t2021-01-18T16:41:27"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if you don't want to parse recipes, don't include the layer</td><td class="time"><a href="#t2021-01-18T16:41:27" class="time">16:41</a></td></tr>
<tr id="t2021-01-18T16:41:39"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if you don't want to build a recipe, don't add it to your image recipe</td><td class="time"><a href="#t2021-01-18T16:41:39" class="time">16:41</a></td></tr>
<tr id="t2021-01-18T16:41:56"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">if some recipes are machine specific, define in those recipes COMPATIBLE_MACHINE</td><td class="time"><a href="#t2021-01-18T16:41:56" class="time">16:41</a></td></tr>
<tr id="t2021-01-18T16:43:13"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">(and make them have PACKAGE_ARCH = &quot;${MACHINE_ARCH}&quot;)</td><td class="time"><a href="#t2021-01-18T16:43:13" class="time">16:43</a></td></tr>
<tr id="t2021-01-18T16:43:16"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">Oh I see, so it's probably easier to use bblayers.conf in the build environment to configure that.</td><td class="time"><a href="#t2021-01-18T16:43:16" class="time">16:43</a></td></tr>
<tr id="t2021-01-18T16:43:58"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">yes, but honestly, except soime cases in which the layers have an enormous number of recipes, i don't think it's worth it to make bblayers.conf dynamic or configurable</td><td class="time"><a href="#t2021-01-18T16:43:58" class="time">16:43</a></td></tr>
<tr id="t2021-01-18T16:44:28"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">also, I'm afraid anything in layer.conf actually applies to everything since it predates all recipe parsing (same for local.conf)</td><td class="time"><a href="#t2021-01-18T16:44:28" class="time">16:44</a></td></tr>
<tr id="t2021-01-18T16:47:33"><th class="nick" style="background: #9b519b">qschulz</th><td class="text" style="color: #9b519b">predates = happens before</td><td class="time"><a href="#t2021-01-18T16:47:33" class="time">16:47</a></td></tr>
<tr id="t2021-01-18T16:47:42"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">it feels redundant to specify COMPATIBLE_MACHINE in each recipes in a layer named : meta-&lt;machine&gt;, no?</td><td class="time"><a href="#t2021-01-18T16:47:42" class="time">16:47</a></td></tr>
<tr id="t2021-01-18T16:48:22"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">roussinm: for what it's worth, this made my life easier in terms of code organization: <a href="https://github.com/siemens/kas" rel="nofollow">https://github.com/siemens/kas</a></td><td class="time"><a href="#t2021-01-18T16:48:22" class="time">16:48</a></td></tr>
<tr id="t2021-01-18T16:49:07"><th class="nick" style="background: #5fb4b4">roussinm</th><td class="text" style="color: #5fb4b4">v0n: thanks, I'll take a look.</td><td class="time"><a href="#t2021-01-18T16:49:07" class="time">16:49</a></td></tr>
<tr id="t2021-01-18T17:12:28"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2021-01-18T17:12:28" class="time">17:12</a></td></tr>
<tr id="t2021-01-18T17:35:21"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: qschulz: last question, with the machine/distro/images distinction we were talking about, how can I organize my layers so that I end up with a boot partition containing my kernel + the preinit initramfs image, and a persistent partition with the &quot;standard&quot; rootfs? in order words, how do I organize my code to have a single .wic image for SD card containing these two rootfs?</td><td class="time"><a href="#t2021-01-18T17:35:21" class="time">17:35</a></td></tr>
<tr id="t2021-01-18T17:45:53"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">i'm having trouble running menuconfig inside the official Poky Docker image. is there a correct way to install libncurses-dev inside the image?</td><td class="time"><a href="#t2021-01-18T17:45:53" class="time">17:45</a></td></tr>
<tr id="t2021-01-18T17:58:01"><th class="nick" style="background: #b86161">rburton</th><td class="text" style="color: #b86161">the crops ones?</td><td class="time"><a href="#t2021-01-18T17:58:01" class="time">17:58</a></td></tr>
<tr id="t2021-01-18T17:58:10"><th class="nick" style="background: #b86161">rburton</th><td class="text" style="color: #b86161">tell rewitt to add ncurses-dev? :)</td><td class="time"><a href="#t2021-01-18T17:58:10" class="time">17:58</a></td></tr>
<tr id="t2021-01-18T18:06:07"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM or add to the Dockerfile: RUN apt-get -y install libncursesw5-dev</td><td class="time"><a href="#t2021-01-18T18:06:07" class="time">18:06</a></td></tr>
<tr id="t2021-01-18T18:16:17"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">rburton: looks like somebody already tried that <a href="https://github.com/crops/poky-container/issues/17" rel="nofollow">https://github.com/crops/poky-container/issues/17</a></td><td class="time"><a href="#t2021-01-18T18:16:17" class="time">18:16</a></td></tr>
<tr id="t2021-01-18T18:17:18"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">RobertBerger1: i'm not really sure what to do with a Dockerfile. i've managed to get things working with `docker exec -u root raspi_dev apt-get install libncurses5-dev libtinfo-dev`, but that does involve downloading the packages again every time i start a container</td><td class="time"><a href="#t2021-01-18T18:17:18" class="time">18:17</a></td></tr>
<tr id="t2021-01-18T18:18:17"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">(also i'm kind of surprised that the image includes package index files; shouldn't i have to run apt update?)</td><td class="time"><a href="#t2021-01-18T18:18:17" class="time">18:18</a></td></tr>
<tr id="t2021-01-18T18:18:25"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM So you don't built the container, I guess.</td><td class="time"><a href="#t2021-01-18T18:18:25" class="time">18:18</a></td></tr>
<tr id="t2021-01-18T18:19:44"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM one option is what you do, but this is not going to stick, once you exit the container it's gone.</td><td class="time"><a href="#t2021-01-18T18:19:44" class="time">18:19</a></td></tr>
<tr id="t2021-01-18T18:19:52"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">indeed</td><td class="time"><a href="#t2021-01-18T18:19:52" class="time">18:19</a></td></tr>
<tr id="t2021-01-18T18:20:26"><th class="nick" style="background: #c3c366">BCMM</th><td class="text" style="color: #c3c366">and yes, i'm pretty much just doing docker run at the moment as suggested, not building the image for myself</td><td class="time"><a href="#t2021-01-18T18:20:26" class="time">18:20</a></td></tr>
<tr id="t2021-01-18T18:21:00"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM another option would be to create your own container, which includes the existing (containers, they are 2 actually)</td><td class="time"><a href="#t2021-01-18T18:21:00" class="time">18:21</a></td></tr>
<tr id="t2021-01-18T18:21:42"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM a third option would be to git clone the crops stuff, extend the Dockerfile as you like and build it yourself</td><td class="time"><a href="#t2021-01-18T18:21:42" class="time">18:21</a></td></tr>
<tr id="t2021-01-18T18:23:38"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM I went for the third option: <a href="https://github.com/RobertBerger/poky-container/blob/2020-07-26-master-local-gcc-9-gui-ub18/Dockerfile#L59" rel="nofollow">https://github.com/RobertBerger/poky-container/blob/2020-07-26-master-local-gcc-9-gui-ub18/Dockerfile#L59</a></td><td class="time"><a href="#t2021-01-18T18:23:38" class="time">18:23</a></td></tr>
<tr id="t2021-01-18T18:25:15"><th class="nick" style="background: #c668c6">RobertBerger1</th><td class="text" style="color: #c668c6">@BCMM for quick test you could try to pull my container: reliableembeddedsystems/poky-container:2020-07-26-master-local-gcc-9-gui-ub18</td><td class="time"><a href="#t2021-01-18T18:25:15" class="time">18:25</a></td></tr>
<tr id="t2021-01-18T18:51:10"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">How can I get a single wic image with two rootfs (initramfs in a boot partition and a different persistent rootfs partition)?</td><td class="time"><a href="#t2021-01-18T18:51:10" class="time">18:51</a></td></tr>
<tr id="t2021-01-18T19:05:15"><th class="nick" style="background: #b86161">rburton</th><td class="text" style="color: #b86161">BCMM: if you have docker, easy enough to build your own image</td><td class="time"><a href="#t2021-01-18T19:05:15" class="time">19:05</a></td></tr>
<tr id="t2021-01-18T19:55:33"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">v0n: its exactly what i described earlier. you have multiconfig,, where the outer build packages the inner (initramfs) into /boot.</td><td class="time"><a href="#t2021-01-18T19:55:33" class="time">19:55</a></td></tr>
<tr id="t2021-01-18T20:32:20"><th class="nick" style="background: #6acaca">bsmerbeck</th><td class="text" style="color: #6acaca">Less of a yocto question, more of a design question. I'm looking to implement mender.io as an means of deploying upgrades, and I'm trying to figure a decent way to construct my image to support the upgrade operation. Specifically, I'm a bit locked up thinking about handling database schema changes. The database used by the system I'm developing</td><td class="time"><a href="#t2021-01-18T20:32:20" class="time">20:32</a></td></tr>
<tr id="t2021-01-18T20:32:20-2"><th class="nick" style="background: #6acaca">bsmerbeck</th><td class="text" style="color: #6acaca">contains user data, so obviously I want to persist. If the schema changes, how should I handle the schema change? Perhaps just including a database migration script in the upgrade, and use a one-time firing service to have it done on startup after the upgrade? Ideas feeling pretty messy</td><td class="time"><a href="#t2021-01-18T20:32:20-2" class="time">20:32</a></td></tr>
<tr id="t2021-01-18T20:52:23"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">LetoThe2nd: OK I'll try to learn more about multiconfig, I'm still not very used to it. As a first step, I guess I should work on a new distro definition for the initramfs image, correct?</td><td class="time"><a href="#t2021-01-18T20:52:23" class="time">20:52</a></td></tr>
<tr id="t2021-01-18T21:50:09"><th class="nick" style="background: #ce6c6c">loblik</th><td class="text" style="color: #ce6c6c">I have this in my initramfs recipe to deploy dm-verity hash: do_image[depends] += &quot;${DM_VERITY_IMAGE}:do_image_${DM_VERITY_IMAGE_TYPE}&quot;  and basically it works</td><td class="time"><a href="#t2021-01-18T21:50:09" class="time">21:50</a></td></tr>
<tr id="t2021-01-18T21:51:21"><th class="nick" style="background: #ce6c6c">loblik</th><td class="text" style="color: #ce6c6c">however I would like to do some char .replace() on the DM_VERITY_IMAGE_TYPE variable, but if I do \@d.getVar the variable seems not to be set. It is defined in machine configuariton file.</td><td class="time"><a href="#t2021-01-18T21:51:21" class="time">21:51</a></td></tr>
<tr id="t2021-01-18T21:53:44"><th class="nick" style="background: #ce6c6c">loblik</th><td class="text" style="color: #ce6c6c">Is there something special about this? I thought the variables should be there during recipe parsing. Some variables like MACHINE are there but not this one.</td><td class="time"><a href="#t2021-01-18T21:53:44" class="time">21:53</a></td></tr>
<tr id="t2021-01-18T21:55:04"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">How do you choose the kernel modules to be built-in?</td><td class="time"><a href="#t2021-01-18T21:55:04" class="time">21:55</a></td></tr>
<tr id="t2021-01-18T22:24:43"><td class="nickchange" colspan="2">*** bluelightning_ is now known as bluelightning</td><td><a href="#t2021-01-18T22:24:43" class="time">22:24</a></td></tr>
<tr id="t2021-01-18T22:26:16"><th class="nick" style="background: #5959a9">v0n</th><td class="text" style="color: #5959a9">there's no occurrences of builtin kernel modules in the doc. Is it expected to simply provide a custom kernel config and remove &quot;kernel-modules&quot; from the packages?</td><td class="time"><a href="#t2021-01-18T22:26:16" class="time">22:26</a></td></tr>
<tr id="t2021-01-18T22:37:05"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2021-01-18T22:37:05" class="time">22:37</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-01-17.log.html">&#171; Sunday, 2021-01-17</a> <a href="index.html">Index</a> <a href="%23yocto.2021-01-19.log.html">Tuesday, 2021-01-19 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
