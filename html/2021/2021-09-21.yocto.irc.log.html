<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Tuesday, 2021-09-21</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Tuesday, 2021-09-21</h1>
<div class="navigation"> <a href="%23yocto.2021-09-20.log.html">&#171; Monday, 2021-09-20</a> <a href="index.html">Index</a> <a href="%23yocto.2021-09-22.log.html">Wednesday, 2021-09-22 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-09-21T05:21:41"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Good morning</td><td class="time"><a href="#t2021-09-21T05:21:41" class="time">05:21</a></td></tr>
<tr id="t2021-09-21T05:41:35"><th class="nick" style="background: #42427e">barath</th><td class="text" style="color: #42427e">morn</td><td class="time"><a href="#t2021-09-21T05:41:35" class="time">05:41</a></td></tr>
<tr id="t2021-09-21T05:54:36"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">question on patch context: when you create a patch and use it in a .bbappend, it normally patches stuff in the tmp/work/.../build folder, right? what about recipes which pull stuff into a work-shared folder? is there some special paths that must be used in the patch file in that case?</td><td class="time"><a href="#t2021-09-21T05:54:36" class="time">05:54</a></td></tr>
<tr id="t2021-09-21T05:54:59"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">s/is there/are there/</td><td class="time"><a href="#t2021-09-21T05:54:59" class="time">05:54</a></td></tr>
<tr id="t2021-09-21T06:14:30"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">yo dudX</td><td class="time"><a href="#t2021-09-21T06:14:30" class="time">06:14</a></td></tr>
<tr id="t2021-09-21T06:17:30"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Is there any reason that following does not work? Copy and rename a functional machine configuration (for example j7-evm.conf to test.conf) and try to build something with MACHINE=test bitbake virtual/kernel</td><td class="time"><a href="#t2021-09-21T06:17:30" class="time">06:17</a></td></tr>
<tr id="t2021-09-21T06:18:02"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">I get the same bitbake error message, when I just use fantasy machine names, which does not exist</td><td class="time"><a href="#t2021-09-21T06:18:02" class="time">06:18</a></td></tr>
<tr id="t2021-09-21T06:20:22"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ThomasD13: if i had to guess, then i'd say that the machine file you copied internally sets the machine name to something specific instead of relying on the filename default</td><td class="time"><a href="#t2021-09-21T06:20:22" class="time">06:20</a></td></tr>
<tr id="t2021-09-21T06:21:12"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">thanks a lot josef, I'll check that.</td><td class="time"><a href="#t2021-09-21T06:21:12" class="time">06:21</a></td></tr>
<tr id="t2021-09-21T06:27:39"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">If I checked correctly ( <a href="https://hastebin.com/ledigasaku.typescript" rel="nofollow">https://hastebin.com/ledigasaku.typescript</a> ) this is not the case? Do you might have a second guess?</td><td class="time"><a href="#t2021-09-21T06:27:39" class="time">06:27</a></td></tr>
<tr id="t2021-09-21T06:51:23"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ThomasD13: just lloked up the machine config myself, that actually looks good. &quot;test&quot; is maybe not exactly a good name, maybe start with &quot;my-j7&quot; or something like that. then then next thing would be to make sure the machine file is located at a path thats properly searched.</td><td class="time"><a href="#t2021-09-21T06:51:23" class="time">06:51</a></td></tr>
<tr id="t2021-09-21T06:55:59"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2021-09-21T06:55:59" class="time">06:55</a></td></tr>
<tr id="t2021-09-21T06:56:17"><th class="nick" style="background: #488888">mckoan</th><td class="text" style="color: #488888">good morning JosefHolzmayr[m], everyone</td><td class="time"><a href="#t2021-09-21T06:56:17" class="time">06:56</a></td></tr>
<tr id="t2021-09-21T06:56:32"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">morning :)</td><td class="time"><a href="#t2021-09-21T06:56:32" class="time">06:56</a></td></tr>
<tr id="t2021-09-21T06:59:39"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">JosefHolzmayr[m], sorry for disturbing again: I think I have the correct path and use another name: <a href="https://hastebin.com/eyovehizic.apache" rel="nofollow">https://hastebin.com/eyovehizic.apache</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; And here on the other console the result after adding j7-fantastic machine config: <a href="https://hastebin.com/nozukohaje.makefile" rel="nofollow">https://hastebin.com/nozukohaje.makefile</a></td><td class="time"><a href="#t2021-09-21T06:59:39" class="time">06:59</a></td></tr>
<tr id="t2021-09-21T07:01:27"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">j7-evm works. I literally copied that, which does not work. When I check the output of bitbake -e virtual/kernel of working j7-evm machine, there is no explicit set of &quot;MACHINE=j7-evm&quot; in the log</td><td class="time"><a href="#t2021-09-21T07:01:27" class="time">07:01</a></td></tr>
<tr id="t2021-09-21T07:01:30"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ThomasD13: this is not the machine file borking, but the external toolchain.</td><td class="time"><a href="#t2021-09-21T07:01:30" class="time">07:01</a></td></tr>
<tr id="t2021-09-21T07:02:29"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ThomasD13: i guess there is magic hidden in there that sets it up/enables/configures for specific machines , but thats beyond the topics that I am willing to look into at the moment, sorry.</td><td class="time"><a href="#t2021-09-21T07:02:29" class="time">07:02</a></td></tr>
<tr id="t2021-09-21T07:03:13"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">my personal advice would be to strip the layer stack, it looks quite bloated - and i doubt that you actually need all that stuff.</td><td class="time"><a href="#t2021-09-21T07:03:13" class="time">07:03</a></td></tr>
<tr id="t2021-09-21T07:04:23"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">JosefHolzmayr[m], thank you I understand that. Just one question: I think their distribution &quot;arago&quot; (meta-arago/meta-arago-distro/conf/distro/arago.conf) setup the correct toolchain. Is it possible that arago.conf is NOT used for j7-fantastic?</td><td class="time"><a href="#t2021-09-21T07:04:23" class="time">07:04</a></td></tr>
<tr id="t2021-09-21T07:05:08"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ThomasD13: anything is possible, its only software. go and find out.</td><td class="time"><a href="#t2021-09-21T07:05:08" class="time">07:05</a></td></tr>
<tr id="t2021-09-21T07:07:13"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">your last paste indicates that the arago distro config is being pulled in for the build. what it actually does or doesn't do, no idea.</td><td class="time"><a href="#t2021-09-21T07:07:13" class="time">07:07</a></td></tr>
<tr id="t2021-09-21T07:14:44"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Yes thats the key here I think. I am able to debug when I have a logfile from bitbake -e. Since I see the history of which config/inc files are picked up in order (And what does overwrite/set a env variable). But all the stuff before this point is still &quot;black hole&quot; for me. I try to figure this out</td><td class="time"><a href="#t2021-09-21T07:14:44" class="time">07:14</a></td></tr>
<tr id="t2021-09-21T07:15:34"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Currently, I try to add some debug-output in bbclasses to find out when is something executed to make my guesses :)</td><td class="time"><a href="#t2021-09-21T07:15:34" class="time">07:15</a></td></tr>
<tr id="t2021-09-21T07:16:54"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">Hi. Is there a way in bitbake/python to differentiate between whether or not the current OE-Core version is past/before a certain other version ?</td><td class="time"><a href="#t2021-09-21T07:16:54" class="time">07:16</a></td></tr>
<tr id="t2021-09-21T07:21:29"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">kroon: can you try to rephrase/elaborate? or explain what you *actually* want to archieve?</td><td class="time"><a href="#t2021-09-21T07:21:29" class="time">07:21</a></td></tr>
<tr id="t2021-09-21T07:41:31"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">I want to make my custom x86 machine conf work for all OE-Core versions. For now I have these two lines:</td><td class="time"><a href="#t2021-09-21T07:41:31" class="time">07:41</a></td></tr>
<tr id="t2021-09-21T07:41:38"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">arch_subdir = &quot;${@['x86', ''][d.getVar('LAYERSERIES_CORENAMES') in ['dunfell', 'hardknott']]}&quot;</td><td class="time"><a href="#t2021-09-21T07:41:38" class="time">07:41</a></td></tr>
<tr id="t2021-09-21T07:41:55"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">require conf/machine/include/${arch_subdir}/tune-i686.inc</td><td class="time"><a href="#t2021-09-21T07:41:55" class="time">07:41</a></td></tr>
<tr id="t2021-09-21T07:42:32"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">Can I instead say &quot;version is greater or equal to 'honister'&quot; ?</td><td class="time"><a href="#t2021-09-21T07:42:32" class="time">07:42</a></td></tr>
<tr id="t2021-09-21T07:43:23"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">not without some python, i would guess. but happy to be corrected.</td><td class="time"><a href="#t2021-09-21T07:43:23" class="time">07:43</a></td></tr>
<tr id="t2021-09-21T07:44:46"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">im already using python</td><td class="time"><a href="#t2021-09-21T07:44:46" class="time">07:44</a></td></tr>
<tr id="t2021-09-21T07:46:22"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ah its the gte thing that you mean. in that case, the release codename is actually just a symptom, but not the core topic - its the bitbake version. and that one should be numeric, so possible to do comparison arithmetic on.</td><td class="time"><a href="#t2021-09-21T07:46:22" class="time">07:46</a></td></tr>
<tr id="t2021-09-21T07:48:15"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">(presuming that the main reason for all of this is the override syntax change)</td><td class="time"><a href="#t2021-09-21T07:48:15" class="time">07:48</a></td></tr>
<tr id="t2021-09-21T07:48:24"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">JosefHolzmayr[m], thanks, youre right, checking bitbake version should make it possible</td><td class="time"><a href="#t2021-09-21T07:48:24" class="time">07:48</a></td></tr>
<tr id="t2021-09-21T07:48:51"><th class="nick" style="background: #8c4a4a">kroon</th><td class="text" style="color: #8c4a4a">JosefHolzmayr[m], actually not the override thing, but they moved core .inc files between releases, which broke my machine .conf</td><td class="time"><a href="#t2021-09-21T07:48:51" class="time">07:48</a></td></tr>
<tr id="t2021-09-21T07:49:08"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ah ok.</td><td class="time"><a href="#t2021-09-21T07:49:08" class="time">07:49</a></td></tr>
<tr id="t2021-09-21T07:49:46"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">anyways, as the releases are tied to specific bitbake versions, it should do the trick.</td><td class="time"><a href="#t2021-09-21T07:49:46" class="time">07:49</a></td></tr>
<tr id="t2021-09-21T08:09:25"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">ThomasD13: probably doing some weird stuff with _j7-evm overrides somewhere</td><td class="time"><a href="#t2021-09-21T08:09:25" class="time">08:09</a></td></tr>
<tr id="t2021-09-21T08:10:25"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">ThomasD13: try to add MACHINEOVERRIDES =. &quot;j7-evm:&quot; at the top of your machine conf file before any include</td><td class="time"><a href="#t2021-09-21T08:10:25" class="time">08:10</a></td></tr>
<tr id="t2021-09-21T08:13:02"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">also make sure that your includes are actually requires so that it's obvious if a file is not included (it'll fail the parsing)</td><td class="time"><a href="#t2021-09-21T08:13:02" class="time">08:13</a></td></tr>
<tr id="t2021-09-21T08:13:25"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">(`include` is &quot;optional&quot;, `require` is not)</td><td class="time"><a href="#t2021-09-21T08:13:25" class="time">08:13</a></td></tr>
<tr id="t2021-09-21T08:14:10"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">qschulz, thank you - I'll check that</td><td class="time"><a href="#t2021-09-21T08:14:10" class="time">08:14</a></td></tr>
<tr id="t2021-09-21T08:24:21"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">qschulz, adding MACHINEOVERRIDES as you suggested didn't change anything. Which requires should I change to includes? Every file which is referenced by machine config?</td><td class="time"><a href="#t2021-09-21T08:24:21" class="time">08:24</a></td></tr>
<tr id="t2021-09-21T08:25:10"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">includes to requires, every file in your machine config file yes</td><td class="time"><a href="#t2021-09-21T08:25:10" class="time">08:25</a></td></tr>
<tr id="t2021-09-21T08:25:44"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">otherwise, they might be using ${MACHINE} directly in some of their logic instead of using overrides and then you're more or less screwed</td><td class="time"><a href="#t2021-09-21T08:25:44" class="time">08:25</a></td></tr>
<tr id="t2021-09-21T08:33:50"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">qschulz, I went up all the referenced files from that j7-fantastic.conf which is a copy of j7-evm.conf. Everything is required. I doubled check the &quot;chain&quot; with the log of the working machine configuration &quot;j7-evm&quot;: <a href="https://hastebin.com/guqavapuja.rb" rel="nofollow">https://hastebin.com/guqavapuja.rb</a></td><td class="time"><a href="#t2021-09-21T08:33:50" class="time">08:33</a></td></tr>
<tr id="t2021-09-21T08:34:44"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">In the last inc file (soc-family.inc) there is something interesting:</td><td class="time"><a href="#t2021-09-21T08:34:44" class="time">08:34</a></td></tr>
<tr id="t2021-09-21T08:34:53"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40"># Add SOC_FAMILY to machine overrides so we get access to e.g. 'omap3' and 'ti335x'</td><td class="time"><a href="#t2021-09-21T08:34:53" class="time">08:34</a></td></tr>
<tr id="t2021-09-21T08:34:53-2"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">SOC_FAMILY ??= &quot;&quot;</td><td class="time"><a href="#t2021-09-21T08:34:53-2" class="time">08:34</a></td></tr>
<tr id="t2021-09-21T08:34:53-3"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">MACHINEOVERRIDES =. &quot;${@['', '${SOC_FAMILY}:']['${SOC_FAMILY}' != '']}&quot;</td><td class="time"><a href="#t2021-09-21T08:34:53-3" class="time">08:34</a></td></tr>
<tr id="t2021-09-21T08:35:34"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">qschulz: in the mentorship session, one question was on external toolchains. my answer was: &quot;its possible, but don't do it. it will cause you pain&quot;.</td><td class="time"><a href="#t2021-09-21T08:35:34" class="time">08:35</a></td></tr>
<tr id="t2021-09-21T08:36:09"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">But this seems just to add more at MACHINEOVERRIDES, so I think its not the issue</td><td class="time"><a href="#t2021-09-21T08:36:09" class="time">08:36</a></td></tr>
<tr id="t2021-09-21T08:37:44"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">ThomasD13: /me shrugs ask TI for support</td><td class="time"><a href="#t2021-09-21T08:37:44" class="time">08:37</a></td></tr>
<tr id="t2021-09-21T08:38:29"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Yes I've already done that - still waiting :)</td><td class="time"><a href="#t2021-09-21T08:38:29" class="time">08:38</a></td></tr>
<tr id="t2021-09-21T08:42:14"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">But I think I've gone one step further: I added some debug prints in &quot;meta-arm-toolchain/conf/distro/include/external-arm-toolchain-versions.inc&quot;, and now I get after the bitbake command a kind of a stacktrace: <a href="https://hastebin.com/ozitixujon.sql" rel="nofollow">https://hastebin.com/ozitixujon.sql</a></td><td class="time"><a href="#t2021-09-21T08:42:14" class="time">08:42</a></td></tr>
<tr id="t2021-09-21T08:43:16"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Better than nothing, So Ill go further to check the license_handler process. Maybe I'm find something :)</td><td class="time"><a href="#t2021-09-21T08:43:16" class="time">08:43</a></td></tr>
<tr id="t2021-09-21T09:07:57"><th class="nick" style="background: #42427e">barath</th><td class="text" style="color: #42427e">I'm testing out building with icecc and it just failed on systemd. do I really need to blacklist that one?</td><td class="time"><a href="#t2021-09-21T09:07:57" class="time">09:07</a></td></tr>
<tr id="t2021-09-21T10:02:11"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Is it possible to debug/print env variables when bitbake parses include files?</td><td class="time"><a href="#t2021-09-21T10:02:11" class="time">10:02</a></td></tr>
<tr id="t2021-09-21T10:26:48"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2021-09-21T10:26:48" class="time">10:26</a></td></tr>
<tr id="t2021-09-21T11:33:03"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">hi, I have a recipe that inherits 'kernel', let's call it my-linux.bb, where FILES_${PN}-dev does not seem to work as it does in any other recipe</td><td class="time"><a href="#t2021-09-21T11:33:03" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:23"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">in .bb I have:</td><td class="time"><a href="#t2021-09-21T11:33:23" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:24"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">FILES_${PN}-dev += &quot;${datadir}/foobar&quot;</td><td class="time"><a href="#t2021-09-21T11:33:24" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:36"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">and in do_install_append():</td><td class="time"><a href="#t2021-09-21T11:33:36" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:41"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">install -d ${D}${datadir}/</td><td class="time"><a href="#t2021-09-21T11:33:41" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:47"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">echo &quot;FUBAR&quot; &gt;${D}${datadir}/foobar</td><td class="time"><a href="#t2021-09-21T11:33:47" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:33:56"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">when building I get:</td><td class="time"><a href="#t2021-09-21T11:33:56" class="time">11:33</a></td></tr>
<tr id="t2021-09-21T11:34:24"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">do_package: QA Issue: linux-aim: Files/directories were installed but not shipped in any package:</td><td class="time"><a href="#t2021-09-21T11:34:24" class="time">11:34</a></td></tr>
<tr id="t2021-09-21T11:34:30"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">&nbsp;&nbsp;/usr</td><td class="time"><a href="#t2021-09-21T11:34:30" class="time">11:34</a></td></tr>
<tr id="t2021-09-21T11:34:34"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">&nbsp;&nbsp;/usr/share</td><td class="time"><a href="#t2021-09-21T11:34:34" class="time">11:34</a></td></tr>
<tr id="t2021-09-21T11:34:35"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">&nbsp;&nbsp;/usr/share/foobar</td><td class="time"><a href="#t2021-09-21T11:34:35" class="time">11:34</a></td></tr>
<tr id="t2021-09-21T11:34:54"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">:-?</td><td class="time"><a href="#t2021-09-21T11:34:54" class="time">11:34</a></td></tr>
<tr id="t2021-09-21T11:35:11"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">do bitbake my-linux -e and see if FILES is set to what you expect</td><td class="time"><a href="#t2021-09-21T11:35:11" class="time">11:35</a></td></tr>
<tr id="t2021-09-21T11:36:08"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">rburton: should be ${KERNEL_PACKAGE_NAME}-dev and not ${PN}-dev I think</td><td class="time"><a href="#t2021-09-21T11:36:08" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:36:21"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: ^</td><td class="time"><a href="#t2021-09-21T11:36:21" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:36:26"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">c.f. <a href="https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/classes/kernel.bbclass#n630" rel="nofollow">https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/classes/kernel.bbclass#n630</a></td><td class="time"><a href="#t2021-09-21T11:36:26" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:36:39"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">yeah</td><td class="time"><a href="#t2021-09-21T11:36:39" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:36:43"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton: looks OK:&nbsp;&nbsp; FILES_my-linux-dev=&quot;/usr/include /lib/lib*.so ... /usr/share/foobar&quot;</td><td class="time"><a href="#t2021-09-21T11:36:43" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:36:54"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">what qschulz said is right</td><td class="time"><a href="#t2021-09-21T11:36:54" class="time">11:36</a></td></tr>
<tr id="t2021-09-21T11:37:00"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">qschulz: I guess you are right...</td><td class="time"><a href="#t2021-09-21T11:37:00" class="time">11:37</a></td></tr>
<tr id="t2021-09-21T11:37:12"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">kernel.bbclass changes PACKAGES, so the names you need to use in FILES are different</td><td class="time"><a href="#t2021-09-21T11:37:12" class="time">11:37</a></td></tr>
<tr id="t2021-09-21T11:37:57"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">OK, you are right. But this does not solve my _real_ problem:</td><td class="time"><a href="#t2021-09-21T11:37:57" class="time">11:37</a></td></tr>
<tr id="t2021-09-21T11:38:44"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">my-linux also inherits a bbclass with common code that other packages use too</td><td class="time"><a href="#t2021-09-21T11:38:44" class="time">11:38</a></td></tr>
<tr id="t2021-09-21T11:39:09"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">and the additional file I'm trying to add to -dev should be common</td><td class="time"><a href="#t2021-09-21T11:39:09" class="time">11:39</a></td></tr>
<tr id="t2021-09-21T11:39:40"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">so the original code giving me this problem was in my.bbclass. Can I still fix my problem?</td><td class="time"><a href="#t2021-09-21T11:39:40" class="time">11:39</a></td></tr>
<tr id="t2021-09-21T11:40:14"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">the kernel recipe will need a custom FILES</td><td class="time"><a href="#t2021-09-21T11:40:14" class="time">11:40</a></td></tr>
<tr id="t2021-09-21T11:40:27"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: you can add the FILES_${KERNEL_PACKAGE_NAME}-dev in the bbclass file in the worst case</td><td class="time"><a href="#t2021-09-21T11:40:27" class="time">11:40</a></td></tr>
<tr id="t2021-09-21T11:40:41"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">as you just saw, if it's not part of the PACKAGES variable, it's a noop</td><td class="time"><a href="#t2021-09-21T11:40:41" class="time">11:40</a></td></tr>
<tr id="t2021-09-21T11:41:01"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">seems to work, I have put two lines in my.bbclass and it does the trick:</td><td class="time"><a href="#t2021-09-21T11:41:01" class="time">11:41</a></td></tr>
<tr id="t2021-09-21T11:41:55"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">FILES_${PN}-dev += &quot;${datadir}//foobar&quot;</td><td class="time"><a href="#t2021-09-21T11:41:55" class="time">11:41</a></td></tr>
<tr id="t2021-09-21T11:41:56"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">FILES_${KERNEL_PACKAGE_NAME}-dev += &quot;${datadir}/foobar&quot;</td><td class="time"><a href="#t2021-09-21T11:41:56" class="time">11:41</a></td></tr>
<tr id="t2021-09-21T11:43:31"><td class="nickchange" colspan="2">*** camus1 is now known as camus</td><td><a href="#t2021-09-21T11:43:31" class="time">11:43</a></td></tr>
<tr id="t2021-09-21T11:49:18"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">qschulz, rburton: it seems like my goal is not yet reached :-\</td><td class="time"><a href="#t2021-09-21T11:49:18" class="time">11:49</a></td></tr>
<tr id="t2021-09-21T11:49:35"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">now my-linux produces the wanted file in the -dev package, which is called kernel-dev</td><td class="time"><a href="#t2021-09-21T11:49:35" class="time">11:49</a></td></tr>
<tr id="t2021-09-21T11:50:56"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">this foobar file contains version info (git describe) produced from some important packages that are build as externalsrc</td><td class="time"><a href="#t2021-09-21T11:50:56" class="time">11:50</a></td></tr>
<tr id="t2021-09-21T11:51:15"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">my final goal is to have all these version info files available in the image recipe, to cat them into a version info file</td><td class="time"><a href="#t2021-09-21T11:51:15" class="time">11:51</a></td></tr>
<tr id="t2021-09-21T11:51:48"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">so why are you putting them in the -dev package?</td><td class="time"><a href="#t2021-09-21T11:51:48" class="time">11:51</a></td></tr>
<tr id="t2021-09-21T11:52:05"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">put that data in a separate package so you don't pull in the entire dev package tree</td><td class="time"><a href="#t2021-09-21T11:52:05" class="time">11:52</a></td></tr>
<tr id="t2021-09-21T11:52:16"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">however in the image recipe if I add DEPEND += &quot;my-linux&quot; then the file does not appear in the image recipe-sysroot</td><td class="time"><a href="#t2021-09-21T11:52:16" class="time">11:52</a></td></tr>
<tr id="t2021-09-21T11:52:31"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">because $datadir doesn't go into the sysroot</td><td class="time"><a href="#t2021-09-21T11:52:31" class="time">11:52</a></td></tr>
<tr id="t2021-09-21T11:52:49"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: deploy files into the DEPLOYDIR for each recipe with their own version, from the image recipe, collect all of those and do something with it. I think all deploy functions are run before the image recipe tasks are started?</td><td class="time"><a href="#t2021-09-21T11:52:49" class="time">11:52</a></td></tr>
<tr id="t2021-09-21T11:53:01"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">why not just embed the versions in the PV, and then just use the existing manifest</td><td class="time"><a href="#t2021-09-21T11:53:01" class="time">11:53</a></td></tr>
<tr id="t2021-09-21T11:53:08"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">or that :p</td><td class="time"><a href="#t2021-09-21T11:53:08" class="time">11:53</a></td></tr>
<tr id="t2021-09-21T11:54:34"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton: not sure the PV idea would work for me; would I get a new build dir for every new PV? we have internal packages that change version (= new commits) very often, up to many times per hour</td><td class="time"><a href="#t2021-09-21T11:54:34" class="time">11:54</a></td></tr>
<tr id="t2021-09-21T11:54:38"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">or what qschulz said is better than putting files into packages and trying to extract them again from the sysroot</td><td class="time"><a href="#t2021-09-21T11:54:38" class="time">11:54</a></td></tr>
<tr id="t2021-09-21T11:54:59"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">if you put the srcrev in the PV, then the version will have the sha in</td><td class="time"><a href="#t2021-09-21T11:54:59" class="time">11:54</a></td></tr>
<tr id="t2021-09-21T11:55:31"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">OK, I initially didn't use the deploy dir as I try to not pollute it with all sort of temp files... it just looks dirty, no strong reason for that.</td><td class="time"><a href="#t2021-09-21T11:55:31" class="time">11:55</a></td></tr>
<tr id="t2021-09-21T11:55:55"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">the sysroot is for build time</td><td class="time"><a href="#t2021-09-21T11:55:55" class="time">11:55</a></td></tr>
<tr id="t2021-09-21T11:56:06"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">if you built an image entirely from sstate, there would be no sysroot to speak of</td><td class="time"><a href="#t2021-09-21T11:56:06" class="time">11:56</a></td></tr>
<tr id="t2021-09-21T11:56:53"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">good point!</td><td class="time"><a href="#t2021-09-21T11:56:53" class="time">11:56</a></td></tr>
<tr id="t2021-09-21T11:58:01"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton: earlier you suggested &quot;put that data in a separate package so you don't pull in the entire dev package tree&quot;: do you mean to add it to, say, FILES_${PN}-versioninfo (and add ${PN}-versioninfo to PACKAGES)?</td><td class="time"><a href="#t2021-09-21T11:58:01" class="time">11:58</a></td></tr>
<tr id="t2021-09-21T11:58:22"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">yes</td><td class="time"><a href="#t2021-09-21T11:58:22" class="time">11:58</a></td></tr>
<tr id="t2021-09-21T11:58:49"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">then you won't be dropping those files over your image</td><td class="time"><a href="#t2021-09-21T11:58:49" class="time">11:58</a></td></tr>
<tr id="t2021-09-21T11:58:56"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">but if its entirely for build time, don't even do that</td><td class="time"><a href="#t2021-09-21T11:58:56" class="time">11:58</a></td></tr>
<tr id="t2021-09-21T11:59:30"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: you can have subdirectories in the deploydir so it's not *that* messy</td><td class="time"><a href="#t2021-09-21T11:59:30" class="time">11:59</a></td></tr>
<tr id="t2021-09-21T11:59:42"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">uhm, OK, seems like the deploy dir idea is the best then</td><td class="time"><a href="#t2021-09-21T11:59:42" class="time">11:59</a></td></tr>
<tr id="t2021-09-21T11:59:56"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">qschulz: yup, I already have a bunch of subdirs... :-P</td><td class="time"><a href="#t2021-09-21T11:59:56" class="time">11:59</a></td></tr>
<tr id="t2021-09-21T12:00:56"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">qschulz, rburton: thanks, I'll give the deploy dir a try!</td><td class="time"><a href="#t2021-09-21T12:00:56" class="time">12:00</a></td></tr>
<tr id="t2021-09-21T12:09:23"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">I've deployed some backtraces in the python functions of toolchain-arm*.inc files and know exactly WHEN the error happens. The error is that DEF_TOOLCHAIN_PATH is not set/defined anymore. But how do I find out what causes this? I cannot use bitbake -e</td><td class="time"><a href="#t2021-09-21T12:09:23" class="time">12:09</a></td></tr>
<tr id="t2021-09-21T12:12:51"><th class="nick" style="background: #9b519b">Sinaasappel</th><td class="text" style="color: #9b519b">Hey all</td><td class="time"><a href="#t2021-09-21T12:12:51" class="time">12:12</a></td></tr>
<tr id="t2021-09-21T12:13:57"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Just to give some context: <a href="https://hastebin.com/lahilisalo.kotlin" rel="nofollow">https://hastebin.com/lahilisalo.kotlin</a>&nbsp;&nbsp;&nbsp;&nbsp; This is the parent function (external_arm_toolchain_license_handler). The error occurs within the function call &quot;eat_get_gcc_version(ld)&quot;. Bitbake executes first line 10, which runs fine, then line 9 which aborts the process</td><td class="time"><a href="#t2021-09-21T12:13:57" class="time">12:13</a></td></tr>
<tr id="t2021-09-21T12:14:36"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">The difference between these two, is that at line 9 DEF_TOOLCHAIN_PATH is not set anymore</td><td class="time"><a href="#t2021-09-21T12:14:36" class="time">12:14</a></td></tr>
<tr id="t2021-09-21T12:17:43"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">Is there any chance to find out, who/what is responsible for resetting an env variable without using bitbake -e option?</td><td class="time"><a href="#t2021-09-21T12:17:43" class="time">12:17</a></td></tr>
<tr id="t2021-09-21T12:22:04"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">question on patch context: when you create a patch and use it in a .bbappend, it normally patches stuff in the tmp/work/.../build folder, right? what about recipes which pull stuff into a work-shared folder? is there some special paths that must be used in the patch file in that case?</td><td class="time"><a href="#t2021-09-21T12:22:04" class="time">12:22</a></td></tr>
<tr id="t2021-09-21T12:24:34"><th class="nick" style="background: #539e9e">agherzan</th><td class="text" style="color: #539e9e">Is there something wrong with the ics calendar @ <a href="https://wiki.yoctoproject.org/wiki/YoctoCalendar?" rel="nofollow">https://wiki.yoctoproject.org/wiki/YoctoCalendar?</a> Trying to subscribe to &quot;Yocto Project Development Schedule (1.2 and beyond)&quot; but I get no events.</td><td class="time"><a href="#t2021-09-21T12:24:34" class="time">12:24</a></td></tr>
<tr id="t2021-09-21T12:26:42"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">Andrei: wrong is not exactly a good word - its just not maintained anymore as far as i know.</td><td class="time"><a href="#t2021-09-21T12:26:42" class="time">12:26</a></td></tr>
<tr id="t2021-09-21T12:27:57"><th class="nick" style="background: #539e9e">agherzan</th><td class="text" style="color: #539e9e">Josef Holzmayr (TheYoctoJester): I see them in the web frame though which is strange.</td><td class="time"><a href="#t2021-09-21T12:27:57" class="time">12:27</a></td></tr>
<tr id="t2021-09-21T12:28:08"><th class="nick" style="background: #539e9e">agherzan</th><td class="text" style="color: #539e9e">Maybe just the link is wrong?</td><td class="time"><a href="#t2021-09-21T12:28:08" class="time">12:28</a></td></tr>
<tr id="t2021-09-21T12:28:30"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">Andrei: I seem them too, but the only things there are the automatic, recurring events.</td><td class="time"><a href="#t2021-09-21T12:28:30" class="time">12:28</a></td></tr>
<tr id="t2021-09-21T12:28:51"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">ahhhhh god... I think its the ***** multiconfig. The first config does work, at second config DEF_TOOLCHAIN_PATH is somehow not defined.</td><td class="time"><a href="#t2021-09-21T12:28:51" class="time">12:28</a></td></tr>
<tr id="t2021-09-21T12:29:11"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">This also explains the line numbers...</td><td class="time"><a href="#t2021-09-21T12:29:11" class="time">12:29</a></td></tr>
<tr id="t2021-09-21T12:29:18"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">Andrei: probably its the yocto events one.</td><td class="time"><a href="#t2021-09-21T12:29:18" class="time">12:29</a></td></tr>
<tr id="t2021-09-21T12:31:09"><th class="nick" style="background: #539e9e">agherzan</th><td class="text" style="color: #539e9e">Found it Josef Holzmayr (TheYoctoJester)</td><td class="time"><a href="#t2021-09-21T12:31:09" class="time">12:31</a></td></tr>
<tr id="t2021-09-21T12:31:15"><th class="nick" style="background: #539e9e">agherzan</th><td class="text" style="color: #539e9e">It is Yocto Project Meetings - <a href="https://calendar.google.com/calendar/ical/theyoctoproject%40gmail.com/public/basic.ics" rel="nofollow">https://calendar.google.com/calendar/ical/theyoctoproject%40gmail.com/public/basic.ics</a></td><td class="time"><a href="#t2021-09-21T12:31:15" class="time">12:31</a></td></tr>
<tr id="t2021-09-21T12:31:42"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">ah interesting.</td><td class="time"><a href="#t2021-09-21T12:31:42" class="time">12:31</a></td></tr>
<tr id="t2021-09-21T12:32:34"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">LOL! I've got it *facepalm</td><td class="time"><a href="#t2021-09-21T12:32:34" class="time">12:32</a></td></tr>
<tr id="t2021-09-21T12:41:25"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton, qschulz: gaah, the deploy dir idea is a no-go as well :-(</td><td class="time"><a href="#t2021-09-21T12:41:25" class="time">12:41</a></td></tr>
<tr id="t2021-09-21T12:42:06"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">[at least] one of the involved packages is my-u-boot.bb, which includes u-boot.inc, which inherits deploy. Now I have two do_deploy()s, and one of them overrides the other...</td><td class="time"><a href="#t2021-09-21T12:42:06" class="time">12:42</a></td></tr>
<tr id="t2021-09-21T12:43:11"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">I think I'm going to the ${PN}-myversioninfo idea + handle the kernel as a special case ;.(...</td><td class="time"><a href="#t2021-09-21T12:43:11" class="time">12:43</a></td></tr>
<tr id="t2021-09-21T12:49:52"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: do_deploy_append()</td><td class="time"><a href="#t2021-09-21T12:49:52" class="time">12:49</a></td></tr>
<tr id="t2021-09-21T12:51:35"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">I don't know if do_task_append() works fine when there's no task to begin with</td><td class="time"><a href="#t2021-09-21T12:51:35" class="time">12:51</a></td></tr>
<tr id="t2021-09-21T12:51:44"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">I know it works with variables but don't know for tasks</td><td class="time"><a href="#t2021-09-21T12:51:44" class="time">12:51</a></td></tr>
<tr id="t2021-09-21T12:52:02"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">I don't think so. Let me try</td><td class="time"><a href="#t2021-09-21T12:52:02" class="time">12:52</a></td></tr>
<tr id="t2021-09-21T12:52:20"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">if it does not, you can always check from a python anonymous function if a deploy task exists and then append to it</td><td class="time"><a href="#t2021-09-21T12:52:20" class="time">12:52</a></td></tr>
<tr id="t2021-09-21T12:58:43"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">qschulz: it doesn't work, I'd need anonymous python</td><td class="time"><a href="#t2021-09-21T12:58:43" class="time">12:58</a></td></tr>
<tr id="t2021-09-21T12:59:07"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">but before going down that way: will the deploydir take into account the dependency for rebuild?</td><td class="time"><a href="#t2021-09-21T12:59:07" class="time">12:59</a></td></tr>
<tr id="t2021-09-21T12:59:20"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">not sure to understand the question</td><td class="time"><a href="#t2021-09-21T12:59:20" class="time">12:59</a></td></tr>
<tr id="t2021-09-21T13:00:08"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">I mean: I do a commit to a package, it gets rebuilt and its version file is regenerated in deploydir. Will the image recipe rebuild to get the new version file, or will it consider itself up-to-date?</td><td class="time"><a href="#t2021-09-21T13:00:08" class="time">13:00</a></td></tr>
<tr id="t2021-09-21T13:00:57"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">(if using a ${PN}-myversion package this would obviously work)</td><td class="time"><a href="#t2021-09-21T13:00:57" class="time">13:00</a></td></tr>
<tr id="t2021-09-21T13:06:35"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">To sum up, this was the issue: I copied and renamed j7-evm.config. Some include file of j7-evm.config enabled multiconfig (BBMULTICONFIG += &quot;k3r5&quot;). The multiconfig file k3r5.conf changes machine name via &quot;MACHINE_append = &quot;-k3r5&quot; &quot;</td><td class="time"><a href="#t2021-09-21T13:06:35" class="time">13:06</a></td></tr>
<tr id="t2021-09-21T13:07:12"><th class="nick" style="background: #407a40">ThomasD13</th><td class="text" style="color: #407a40">And of course I had not a multiconfig file which was named j7-mycopy-k3r5.conf</td><td class="time"><a href="#t2021-09-21T13:07:12" class="time">13:07</a></td></tr>
<tr id="t2021-09-21T13:08:48"><th class="nick" style="background: #a25555">fbre</th><td class="text" style="color: #a25555">Hey guys, do you know what to add by IMAGE_INSTALL_append += &quot;.....&quot; to get the tool &quot;sfdisk&quot;?</td><td class="time"><a href="#t2021-09-21T13:08:48" class="time">13:08</a></td></tr>
<tr id="t2021-09-21T13:09:43"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: your package will be rebuilt because there's a new commit, the deploy task will be called again and since your package changed and it's part of the image already, the image will get the up-to-date version from deploydir</td><td class="time"><a href="#t2021-09-21T13:09:43" class="time">13:09</a></td></tr>
<tr id="t2021-09-21T13:12:23"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">fbre: util-linux recipe should provide it</td><td class="time"><a href="#t2021-09-21T13:12:23" class="time">13:12</a></td></tr>
<tr id="t2021-09-21T13:12:37"><th class="nick" style="background: #a25555">fbre</th><td class="text" style="color: #a25555">(y)&nbsp;&nbsp;thanx</td><td class="time"><a href="#t2021-09-21T13:12:37" class="time">13:12</a></td></tr>
<tr id="t2021-09-21T13:12:38"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">if the package containing sfdisk is util-linux is a different topic</td><td class="time"><a href="#t2021-09-21T13:12:38" class="time">13:12</a></td></tr>
<tr id="t2021-09-21T13:12:55"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">you can check once you've compiled util-linux with oe-pkgdata-util find-path '*sfdisk*'</td><td class="time"><a href="#t2021-09-21T13:12:55" class="time">13:12</a></td></tr>
<tr id="t2021-09-21T13:14:02"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">lucaceresoli: you can do a do_deploy[postfunc] to inject your own function as part of the deploy function</td><td class="time"><a href="#t2021-09-21T13:14:02" class="time">13:14</a></td></tr>
<tr id="t2021-09-21T13:15:07"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">rburton: what happens if there's no do_deploy task to add postfunc to?</td><td class="time"><a href="#t2021-09-21T13:15:07" class="time">13:15</a></td></tr>
<tr id="t2021-09-21T13:15:27"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">do_deploy?= &quot;&quot;?</td><td class="time"><a href="#t2021-09-21T13:15:27" class="time">13:15</a></td></tr>
<tr id="t2021-09-21T13:16:41"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">because tasks aren't much more than special variables?</td><td class="time"><a href="#t2021-09-21T13:16:41" class="time">13:16</a></td></tr>
<tr id="t2021-09-21T13:16:49"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">right</td><td class="time"><a href="#t2021-09-21T13:16:49" class="time">13:16</a></td></tr>
<tr id="t2021-09-21T13:16:58"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton: does this magic really work? without any 'addtask'???</td><td class="time"><a href="#t2021-09-21T13:16:58" class="time">13:16</a></td></tr>
<tr id="t2021-09-21T13:17:04"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">yeah you need the addtask</td><td class="time"><a href="#t2021-09-21T13:17:04" class="time">13:17</a></td></tr>
<tr id="t2021-09-21T13:17:13"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">but iirc that doesn't explode if it already exists</td><td class="time"><a href="#t2021-09-21T13:17:13" class="time">13:17</a></td></tr>
<tr id="t2021-09-21T13:17:15"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: you can addtask multiple times, it shouldn't harm</td><td class="time"><a href="#t2021-09-21T13:17:15" class="time">13:17</a></td></tr>
<tr id="t2021-09-21T13:17:59"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">ooh, and the befores and the afters will be the union of the befores and afters mentioned in the various addtasks?</td><td class="time"><a href="#t2021-09-21T13:17:59" class="time">13:17</a></td></tr>
<tr id="t2021-09-21T13:18:08"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">worst case scenario, if deltask of an inexisting task does not fail the parsing, you could deltask followed by addtask :p</td><td class="time"><a href="#t2021-09-21T13:18:08" class="time">13:18</a></td></tr>
<tr id="t2021-09-21T13:18:49"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">so many shitty ideas to implement :D</td><td class="time"><a href="#t2021-09-21T13:18:49" class="time">13:18</a></td></tr>
<tr id="t2021-09-21T13:20:46"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">or you could make your own task that deploys on its own</td><td class="time"><a href="#t2021-09-21T13:20:46" class="time">13:20</a></td></tr>
<tr id="t2021-09-21T13:21:17"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">indeed, reimplementing most if not all of deploy.bbclass</td><td class="time"><a href="#t2021-09-21T13:21:17" class="time">13:21</a></td></tr>
<tr id="t2021-09-21T13:21:39"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">so that the sstate-cache is correctly configured and used</td><td class="time"><a href="#t2021-09-21T13:21:39" class="time">13:21</a></td></tr>
<tr id="t2021-09-21T13:22:13"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">I don't want to reimplement yocto to copy a one-line file :-)</td><td class="time"><a href="#t2021-09-21T13:22:13" class="time">13:22</a></td></tr>
<tr id="t2021-09-21T13:22:29"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">lucaceresoli: the deploy task is very small :)</td><td class="time"><a href="#t2021-09-21T13:22:29" class="time">13:22</a></td></tr>
<tr id="t2021-09-21T13:22:36"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">s/task/class/</td><td class="time"><a href="#t2021-09-21T13:22:36" class="time">13:22</a></td></tr>
<tr id="t2021-09-21T13:23:46"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">yes, it is small, 12 lines. But I don't understand a good 50% of them :(</td><td class="time"><a href="#t2021-09-21T13:23:46" class="time">13:23</a></td></tr>
<tr id="t2021-09-21T13:24:52"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">ouch, using 'do_deploy ?= &quot;&quot;' + do_deploy_append() + 'addtask do_deploy after do_unpack before do_build' gives 'do_deploy: command not found'</td><td class="time"><a href="#t2021-09-21T13:24:52" class="time">13:24</a></td></tr>
<tr id="t2021-09-21T13:24:57"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">I'm getting crazy</td><td class="time"><a href="#t2021-09-21T13:24:57" class="time">13:24</a></td></tr>
<tr id="t2021-09-21T13:26:38"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">lucaceresoli: use &quot;:&quot; as the ?= as it is trying to execute &quot;&quot;</td><td class="time"><a href="#t2021-09-21T13:26:38" class="time">13:26</a></td></tr>
<tr id="t2021-09-21T13:29:38"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">you should be able to drop that assignment</td><td class="time"><a href="#t2021-09-21T13:29:38" class="time">13:29</a></td></tr>
<tr id="t2021-09-21T13:29:50"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">and i'd use a postfunc not a append, and you can't be sure what language the deploy is written in</td><td class="time"><a href="#t2021-09-21T13:29:50" class="time">13:29</a></td></tr>
<tr id="t2021-09-21T13:30:01"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">(yes, typically sh, but don't make me write one in python just to break your class)</td><td class="time"><a href="#t2021-09-21T13:30:01" class="time">13:30</a></td></tr>
<tr id="t2021-09-21T13:32:07"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">rburton: hum is there anybody taking up maintenance of ukdev too?</td><td class="time"><a href="#t2021-09-21T13:32:07" class="time">13:32</a></td></tr>
<tr id="t2021-09-21T13:32:14"><td class="action" colspan="2">* JosefHolzmayr[m] badum-tsh!</td><td><a href="#t2021-09-21T13:32:14" class="time">13:32</a></td></tr>
<tr id="t2021-09-21T13:32:33"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">resisting ... jokes ...</td><td class="time"><a href="#t2021-09-21T13:32:33" class="time">13:32</a></td></tr>
<tr id="t2021-09-21T13:34:23"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">lame jokes are the best jokes!</td><td class="time"><a href="#t2021-09-21T13:34:23" class="time">13:34</a></td></tr>
<tr id="t2021-09-21T13:36:14"><th class="nick" style="background: #5959a9">opello</th><td class="text" style="color: #5959a9">saw a strange problem where run.do_install was not generatd with all the necessary helpers (qmake5_base_do_install was missing along with the functions it called) and this was fixed by manually removing bb_codeparser.dat, is that a thing that people might expect to get into a &quot;bad&quot; state and need manual correction?</td><td class="time"><a href="#t2021-09-21T13:36:14" class="time">13:36</a></td></tr>
<tr id="t2021-09-21T13:36:46"><th class="nick" style="background: #adad5b">tlwoerner</th><td class="text" style="color: #adad5b">the header files from pkg are in sysroot-native/usr/include/pkg not in sysroot-native/usr/include, with a cmake project how do i add sysroot-native/usr/include/pkg to my build?</td><td class="time"><a href="#t2021-09-21T13:36:46" class="time">13:36</a></td></tr>
<tr id="t2021-09-21T13:38:49"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">tlwoerner: why are you building target code against native headers</td><td class="time"><a href="#t2021-09-21T13:38:49" class="time">13:38</a></td></tr>
<tr id="t2021-09-21T13:39:00"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">oh sorry can't read</td><td class="time"><a href="#t2021-09-21T13:39:00" class="time">13:39</a></td></tr>
<tr id="t2021-09-21T13:39:14"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">change the include to &lt;pkg/foo.h&gt;?</td><td class="time"><a href="#t2021-09-21T13:39:14" class="time">13:39</a></td></tr>
<tr id="t2021-09-21T13:39:23"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">that's evil but would work ;)</td><td class="time"><a href="#t2021-09-21T13:39:23" class="time">13:39</a></td></tr>
<tr id="t2021-09-21T13:40:08"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">i think you want to call include_directories, somehow</td><td class="time"><a href="#t2021-09-21T13:40:08" class="time">13:40</a></td></tr>
<tr id="t2021-09-21T13:40:39"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">or add -I=${RECIPE_SYSROOT_NATIVE}${includedir}/pkg to TARGET_CFLAGS/TARGET_CXXFLAGS I guess?</td><td class="time"><a href="#t2021-09-21T13:40:39" class="time">13:40</a></td></tr>
<tr id="t2021-09-21T13:40:48"><th class="nick" style="background: #4b904b">qschulz</th><td class="text" style="color: #4b904b">(without the = after -I sorry)</td><td class="time"><a href="#t2021-09-21T13:40:48" class="time">13:40</a></td></tr>
<tr id="t2021-09-21T13:42:45"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Houdy</td><td class="time"><a href="#t2021-09-21T13:42:45" class="time">13:42</a></td></tr>
<tr id="t2021-09-21T13:43:12"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Anyone ever done a password based prompt for a recipe?</td><td class="time"><a href="#t2021-09-21T13:43:12" class="time">13:43</a></td></tr>
<tr id="t2021-09-21T13:43:47"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Say I wanna fetch a tarball from a site needn a password</td><td class="time"><a href="#t2021-09-21T13:43:47" class="time">13:43</a></td></tr>
<tr id="t2021-09-21T13:44:34"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Can I pause bitbake execution and prompt for a pass?</td><td class="time"><a href="#t2021-09-21T13:44:34" class="time">13:44</a></td></tr>
<tr id="t2021-09-21T13:45:38"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">no, because bitbake wants to be able to execute without interaction</td><td class="time"><a href="#t2021-09-21T13:45:38" class="time">13:45</a></td></tr>
<tr id="t2021-09-21T13:45:42"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">but wget will read .netrc for you</td><td class="time"><a href="#t2021-09-21T13:45:42" class="time">13:45</a></td></tr>
<tr id="t2021-09-21T13:46:13"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Thanks rburton</td><td class="time"><a href="#t2021-09-21T13:46:13" class="time">13:46</a></td></tr>
<tr id="t2021-09-21T13:47:26"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">I guess my next best thing is to pass the password on bitbake invocation. Somethin like this: <a href="https://stackoverflow.com/a/58344016/1214214" rel="nofollow">https://stackoverflow.com/a/58344016/1214214</a></td><td class="time"><a href="#t2021-09-21T13:47:26" class="time">13:47</a></td></tr>
<tr id="t2021-09-21T13:48:09"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">use .netrc</td><td class="time"><a href="#t2021-09-21T13:48:09" class="time">13:48</a></td></tr>
<tr id="t2021-09-21T13:48:14"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">SandwichCakeExpe: use .netrc</td><td class="time"><a href="#t2021-09-21T13:48:14" class="time">13:48</a></td></tr>
<tr id="t2021-09-21T13:49:04"><th class="nick" style="background: #b15db1">SandwichCakeExpe</th><td class="text" style="color: #b15db1">Thanks guys, gotta check what that is</td><td class="time"><a href="#t2021-09-21T13:49:04" class="time">13:49</a></td></tr>
<tr id="t2021-09-21T13:50:12"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">jonmason: i hereby officially blame you for just having set up a gitlab runner!</td><td class="time"><a href="#t2021-09-21T13:50:12" class="time">13:50</a></td></tr>
<tr id="t2021-09-21T13:50:56"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">hahaha</td><td class="time"><a href="#t2021-09-21T13:50:56" class="time">13:50</a></td></tr>
<tr id="t2021-09-21T13:51:10"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">ah the shame of a broken build mail to the universe</td><td class="time"><a href="#t2021-09-21T13:51:10" class="time">13:51</a></td></tr>
<tr id="t2021-09-21T13:52:29"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">theres actually nice things ahead (hopefully)</td><td class="time"><a href="#t2021-09-21T13:52:29" class="time">13:52</a></td></tr>
<tr id="t2021-09-21T13:53:01"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">rburton: tried 'do_deploy ?= &quot;:&quot;' but for those of my recipes that don't inherit deploy on their own I keep getting '.../run.do_deploy.22093: line 104: do_deploy: command not found'</td><td class="time"><a href="#t2021-09-21T13:53:01" class="time">13:53</a></td></tr>
<tr id="t2021-09-21T13:53:32"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">as if the ?: syntax does not add a function, only a variable (?)</td><td class="time"><a href="#t2021-09-21T13:53:32" class="time">13:53</a></td></tr>
<tr id="t2021-09-21T13:53:46"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">did you try not having that line at all</td><td class="time"><a href="#t2021-09-21T13:53:46" class="time">13:53</a></td></tr>
<tr id="t2021-09-21T13:54:04"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">BTW bitbake mypackage -e | grep -A1 ^do_deploy gives</td><td class="time"><a href="#t2021-09-21T13:54:04" class="time">13:54</a></td></tr>
<tr id="t2021-09-21T13:54:08"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">do_deploy=&quot;:&quot;</td><td class="time"><a href="#t2021-09-21T13:54:08" class="time">13:54</a></td></tr>
<tr id="t2021-09-21T13:54:08-2"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">#</td><td class="time"><a href="#t2021-09-21T13:54:08-2" class="time">13:54</a></td></tr>
<tr id="t2021-09-21T13:54:18"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">(tried &quot;{:}&quot; too)</td><td class="time"><a href="#t2021-09-21T13:54:18" class="time">13:54</a></td></tr>
<tr id="t2021-09-21T13:54:59"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">lucaceresoli: did you look at the run.do_deploy.22093 at what the definition looks like?</td><td class="time"><a href="#t2021-09-21T13:54:59" class="time">13:54</a></td></tr>
<tr id="t2021-09-21T13:55:07"><th class="nick" style="background: #5fb4b4">jonmason</th><td class="text" style="color: #5fb4b4">JosefHolzmayr[m]: what did I do now?</td><td class="time"><a href="#t2021-09-21T13:55:07" class="time">13:55</a></td></tr>
<tr id="t2021-09-21T13:57:32"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">jonmason: <a href="https://youtu.be/3EqYkhAaiN0" rel="nofollow">https://youtu.be/3EqYkhAaiN0</a></td><td class="time"><a href="#t2021-09-21T13:57:32" class="time">13:57</a></td></tr>
<tr id="t2021-09-21T13:58:24"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">sgw: When I look at the build output for <a href="https://autobuilder.yoctoproject.org/typhoon/#/builders/101/builds/2891/steps/13/logs/stdio" rel="nofollow">https://autobuilder.yoctoproject.org/typhoon/#/builders/101/builds/2891/steps/13/logs/stdio</a> I see 55 qmp dumps at 500MB each. This isn't good :/</td><td class="time"><a href="#t2021-09-21T13:58:24" class="time">13:58</a></td></tr>
<tr id="t2021-09-21T13:58:48"><th class="nick" style="background: #5fb4b4">jonmason</th><td class="text" style="color: #5fb4b4">JosefHolzmayr[m]: yes, it works.&nbsp;&nbsp;I have 3 running now: meta-arm, meta-zephyr, and poky</td><td class="time"><a href="#t2021-09-21T13:58:48" class="time">13:58</a></td></tr>
<tr id="t2021-09-21T13:59:42"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">jonmason: i know that it works, just finding my way around things.</td><td class="time"><a href="#t2021-09-21T13:59:42" class="time">13:59</a></td></tr>
<tr id="t2021-09-21T14:00:27"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">RP: there is no 'do_deploy' function at all in .../temp/run.do_deploy. The &quot;do_deploy&quot; string appears only in the line where it is supposed to be called: line 104, the one erroring out.</td><td class="time"><a href="#t2021-09-21T14:00:27" class="time">14:00</a></td></tr>
<tr id="t2021-09-21T14:01:20"><th class="nick" style="background: #5fb4b4">jonmason</th><td class="text" style="color: #5fb4b4">JosefHolzmayr[m]: let me know if you need help, once you get over the initial pain of setup its not bad</td><td class="time"><a href="#t2021-09-21T14:01:20" class="time">14:01</a></td></tr>
<tr id="t2021-09-21T14:01:55"><th class="nick" style="background: #854685">JosefHolzmayr[m]</th><td class="text" style="color: #854685">jonmason: thx</td><td class="time"><a href="#t2021-09-21T14:01:55" class="time">14:01</a></td></tr>
<tr id="t2021-09-21T14:01:56"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">lucaceresoli: try adding do_deploy[func] = &quot;1&quot; too. I think its is a syntax thing</td><td class="time"><a href="#t2021-09-21T14:01:56" class="time">14:01</a></td></tr>
<tr id="t2021-09-21T14:18:30"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">RP: it works!! Thanks</td><td class="time"><a href="#t2021-09-21T14:18:30" class="time">14:18</a></td></tr>
<tr id="t2021-09-21T14:18:59"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">so what is the [func] varflag? A flag telling bitbake that 'do_deploy' is a function as opposed to a variable?</td><td class="time"><a href="#t2021-09-21T14:18:59" class="time">14:18</a></td></tr>
<tr id="t2021-09-21T14:19:06"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">(didn't fund it in the docs)</td><td class="time"><a href="#t2021-09-21T14:19:06" class="time">14:19</a></td></tr>
<tr id="t2021-09-21T14:19:13"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">s/fund/find/</td><td class="time"><a href="#t2021-09-21T14:19:13" class="time">14:19</a></td></tr>
<tr id="t2021-09-21T14:20:58"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">lucaceresoli: its a kind of internal detail. It is what is set when you define a variable as a function rather than a simple string</td><td class="time"><a href="#t2021-09-21T14:20:58" class="time">14:20</a></td></tr>
<tr id="t2021-09-21T14:21:19"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">do_deploy () { \n : \n }</td><td class="time"><a href="#t2021-09-21T14:21:19" class="time">14:21</a></td></tr>
<tr id="t2021-09-21T14:22:13"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">there are no less than 10 recipes under the meta/recipes-devtools/gcc folder: <a href="http://paste.debian.net/1212687/" rel="nofollow">http://paste.debian.net/1212687/</a></td><td class="time"><a href="#t2021-09-21T14:22:13" class="time">14:22</a></td></tr>
<tr id="t2021-09-21T14:22:33"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">is there some document or description somewhere that hangs together what all these are afor?</td><td class="time"><a href="#t2021-09-21T14:22:33" class="time">14:22</a></td></tr>
<tr id="t2021-09-21T14:22:42"><td class="action" colspan="2">* RP wonders what would cause systemd to get update and pull over the network in an image during testing</td><td><a href="#t2021-09-21T14:22:42" class="time">14:22</a></td></tr>
<tr id="t2021-09-21T14:23:15"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">i am trying to implement a patch and am finding myself in ambiguous-recipe hell</td><td class="time"><a href="#t2021-09-21T14:23:15" class="time">14:23</a></td></tr>
<tr id="t2021-09-21T14:23:22"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">systemd-logind.service: Unexpected error repsonse from GetNameOwner(): Connection terminated</td><td class="time"><a href="#t2021-09-21T14:23:22" class="time">14:23</a></td></tr>
<tr id="t2021-09-21T14:23:47"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">khem: do you have any input on this?</td><td class="time"><a href="#t2021-09-21T14:23:47" class="time">14:23</a></td></tr>
<tr id="t2021-09-21T14:23:50"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">systemd-hostnamed.service: Deactivated successfully</td><td class="time"><a href="#t2021-09-21T14:23:50" class="time">14:23</a></td></tr>
<tr id="t2021-09-21T14:26:27"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">i have tracked my problem to a build problem in build/tmp/work/csky-poky-linux/libgcc/10.3.0-r0/gcc-10.3.0/build.csky-poky-linux.csky-poky-linux/libgcc/Makefile</td><td class="time"><a href="#t2021-09-21T14:26:27" class="time">14:26</a></td></tr>
<tr id="t2021-09-21T14:26:45"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">which recipe do i bbappend to patch that Makefile?</td><td class="time"><a href="#t2021-09-21T14:26:45" class="time">14:26</a></td></tr>
<tr id="t2021-09-21T14:26:56"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">(which is a Makefile.in in the preconfigure)</td><td class="time"><a href="#t2021-09-21T14:26:56" class="time">14:26</a></td></tr>
<tr id="t2021-09-21T14:28:15"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">i have tried creating libgcc and gcc .bbappends - none work</td><td class="time"><a href="#t2021-09-21T14:28:15" class="time">14:28</a></td></tr>
<tr id="t2021-09-21T14:28:40"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">(and, i think gcc-cross)</td><td class="time"><a href="#t2021-09-21T14:28:40" class="time">14:28</a></td></tr>
<tr id="t2021-09-21T14:28:49"><td class="nickchange" colspan="2">*** rfuentess__ is now known as rfuentess</td><td><a href="#t2021-09-21T14:28:49" class="time">14:28</a></td></tr>
<tr id="t2021-09-21T14:30:22"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">at this point i'm just guessing, and i'm tired of guessing. i need to undertand the structure of this mess so i can intelligently create the bbappend</td><td class="time"><a href="#t2021-09-21T14:30:22" class="time">14:30</a></td></tr>
<tr id="t2021-09-21T14:33:11"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">yates: gcc-source is where the source comes from</td><td class="time"><a href="#t2021-09-21T14:33:11" class="time">14:33</a></td></tr>
<tr id="t2021-09-21T14:34:29"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">rburton: is gcc-source the recipe that puts the stuff in tmp/work-shared?</td><td class="time"><a href="#t2021-09-21T14:34:29" class="time">14:34</a></td></tr>
<tr id="t2021-09-21T14:34:35"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">ah, libgcc has its own source.&nbsp;&nbsp;its definitely the libgcc recipe</td><td class="time"><a href="#t2021-09-21T14:34:35" class="time">14:34</a></td></tr>
<tr id="t2021-09-21T14:34:54"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">well libgcc.bb includes gcc-version.inc which sets SRC_URI</td><td class="time"><a href="#t2021-09-21T14:34:54" class="time">14:34</a></td></tr>
<tr id="t2021-09-21T14:38:10"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">rburton: i've nailed the compile line in the Makefile above to be compiling build/tmp/work-shared/gcc-10.3.0-r0/gcc-10.3.0/libgcc/config/csky/crti.S, so is libgcc_10.3.bb responsible for putting the source there in work-shared, or is it somethign else?</td><td class="time"><a href="#t2021-09-21T14:38:10" class="time">14:38</a></td></tr>
<tr id="t2021-09-21T14:38:16"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">yates: ultimately those gcc bits come from gcc-course</td><td class="time"><a href="#t2021-09-21T14:38:16" class="time">14:38</a></td></tr>
<tr id="t2021-09-21T14:38:19"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">gcc source</td><td class="time"><a href="#t2021-09-21T14:38:19" class="time">14:38</a></td></tr>
<tr id="t2021-09-21T14:38:51"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">wait, no i 'm confused</td><td class="time"><a href="#t2021-09-21T14:38:51" class="time">14:38</a></td></tr>
<tr id="t2021-09-21T14:40:14"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">so is the gcc stuff fetched ONCE into build/tmp/work-shared/gcc-10.3.0-r0, and then other related recipes copy out of there?</td><td class="time"><a href="#t2021-09-21T14:40:14" class="time">14:40</a></td></tr>
<tr id="t2021-09-21T14:40:45"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">RP: so does gcc-source get the fiels into build/tmp/work-shared/gcc-10.3.0-r0?</td><td class="time"><a href="#t2021-09-21T14:40:45" class="time">14:40</a></td></tr>
<tr id="t2021-09-21T14:41:02"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">s/get/fetch</td><td class="time"><a href="#t2021-09-21T14:41:02" class="time">14:41</a></td></tr>
<tr id="t2021-09-21T14:41:04"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">yates: yes</td><td class="time"><a href="#t2021-09-21T14:41:04" class="time">14:41</a></td></tr>
<tr id="t2021-09-21T14:41:09"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">cool</td><td class="time"><a href="#t2021-09-21T14:41:09" class="time">14:41</a></td></tr>
<tr id="t2021-09-21T14:41:28"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">thank you</td><td class="time"><a href="#t2021-09-21T14:41:28" class="time">14:41</a></td></tr>
<tr id="t2021-09-21T14:47:33"><th class="nick" style="background: #adad5b">tlwoerner</th><td class="text" style="color: #adad5b">rburton: qschulz: thanks!</td><td class="time"><a href="#t2021-09-21T14:47:33" class="time">14:47</a></td></tr>
<tr id="t2021-09-21T15:55:46"><th class="nick" style="background: #adad5b">tlwoerner</th><td class="text" style="color: #adad5b">zeddii: can you recommend a MACHINE to follow as an example for a BSP layer's kernel config?</td><td class="time"><a href="#t2021-09-21T15:55:46" class="time">15:55</a></td></tr>
<tr id="t2021-09-21T15:55:57"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">I meant to ask on the call - do we have any systemd experts who can make sense of why: <a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=14556" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=14556</a> might break</td><td class="time"><a href="#t2021-09-21T15:55:57" class="time">15:55</a></td></tr>
<tr id="t2021-09-21T15:56:16"><th class="nick" style="background: #4d4d93">lucaceresoli</th><td class="text" style="color: #4d4d93">RP, rburton, qschulz: thanks for your time today!</td><td class="time"><a href="#t2021-09-21T15:56:16" class="time">15:56</a></td></tr>
<tr id="t2021-09-21T15:56:36"><th class="nick" style="background: #adad5b">tlwoerner</th><td class="text" style="color: #adad5b">zeddii: i'm thinking of putting BSP-specific things in my BSP layer, then starting each MACHINE out with an empty config which gets built up from nothing</td><td class="time"><a href="#t2021-09-21T15:56:36" class="time">15:56</a></td></tr>
<tr id="t2021-09-21T15:56:58"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">RP: that worked.</td><td class="time"><a href="#t2021-09-21T15:56:58" class="time">15:56</a></td></tr>
<tr id="t2021-09-21T15:57:06"><th class="nick" style="background: #818144">yates</th><td class="text" style="color: #818144">+1</td><td class="time"><a href="#t2021-09-21T15:57:06" class="time">15:57</a></td></tr>
<tr id="t2021-09-21T15:57:09"><th class="nick" style="background: #adad5b">tlwoerner</th><td class="text" style="color: #adad5b">(instead of starting with a random defconfig and tweaking from there)</td><td class="time"><a href="#t2021-09-21T15:57:09" class="time">15:57</a></td></tr>
<tr id="t2021-09-21T16:19:09"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">Is it OK to use the deploy class to copy files outside of DEPLOYDIR (and thus DEPLOY_DIR_IMAGE)?</td><td class="time"><a href="#t2021-09-21T16:19:09" class="time">16:19</a></td></tr>
<tr id="t2021-09-21T16:19:41"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">it wouldn't be conventional</td><td class="time"><a href="#t2021-09-21T16:19:41" class="time">16:19</a></td></tr>
<tr id="t2021-09-21T16:19:53"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">It'd like to write a class to copy final files (not all deployed files) to a locally mounted file server share</td><td class="time"><a href="#t2021-09-21T16:19:53" class="time">16:19</a></td></tr>
<tr id="t2021-09-21T16:21:06"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">write a new class</td><td class="time"><a href="#t2021-09-21T16:21:06" class="time">16:21</a></td></tr>
<tr id="t2021-09-21T16:21:59"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">(with a new task)</td><td class="time"><a href="#t2021-09-21T16:21:59" class="time">16:21</a></td></tr>
<tr id="t2021-09-21T16:22:32"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">rburton you answered my question before I asked it :))</td><td class="time"><a href="#t2021-09-21T16:22:32" class="time">16:22</a></td></tr>
<tr id="t2021-09-21T16:24:06"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">rburton is the do_build task mantatory for a recipe or can I deltask it?</td><td class="time"><a href="#t2021-09-21T16:24:06" class="time">16:24</a></td></tr>
<tr id="t2021-09-21T16:25:02"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">its not mandatory, but without it you can't 'bitbake recipe' without specifiying the task name</td><td class="time"><a href="#t2021-09-21T16:25:02" class="time">16:25</a></td></tr>
<tr id="t2021-09-21T16:25:09"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">as the default task is 'build'</td><td class="time"><a href="#t2021-09-21T16:25:09" class="time">16:25</a></td></tr>
<tr id="t2021-09-21T16:25:16"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">ok</td><td class="time"><a href="#t2021-09-21T16:25:16" class="time">16:25</a></td></tr>
<tr id="t2021-09-21T16:25:45"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">&quot;build&quot; is commonly the final task I assume. Where should my task go? anywhere &quot;before do_build&quot; I suppose?</td><td class="time"><a href="#t2021-09-21T16:25:45" class="time">16:25</a></td></tr>
<tr id="t2021-09-21T16:25:50"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">yes</td><td class="time"><a href="#t2021-09-21T16:25:50" class="time">16:25</a></td></tr>
<tr id="t2021-09-21T16:26:01"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">addtask shipit after deploy before build</td><td class="time"><a href="#t2021-09-21T16:26:01" class="time">16:26</a></td></tr>
<tr id="t2021-09-21T16:26:40"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">obviously not *anywhere* before do build as otherwise it can run before you've actually deployed anything</td><td class="time"><a href="#t2021-09-21T16:26:40" class="time">16:26</a></td></tr>
<tr id="t2021-09-21T16:27:31"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">rburton it this case I would do do_shipit[depends] = &quot;my interesting recipes&quot;, so it'd be fine</td><td class="time"><a href="#t2021-09-21T16:27:31" class="time">16:27</a></td></tr>
<tr id="t2021-09-21T16:28:37"><th class="nick" style="background: #97974f">rburton</th><td class="text" style="color: #97974f">a more idiomatic approach would be to inherit shipit in the recipes which are interesting</td><td class="time"><a href="#t2021-09-21T16:28:37" class="time">16:28</a></td></tr>
<tr id="t2021-09-21T16:31:53"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">rburton currently I was using a dumb recipe to bundle together all recipes I want instead of specifying all of them, for all multiconfig variants. But the class might be smarter</td><td class="time"><a href="#t2021-09-21T16:31:53" class="time">16:31</a></td></tr>
<tr id="t2021-09-21T17:11:46"><td class="nickchange" colspan="2">*** mario-go` is now known as mario-goulart</td><td><a href="#t2021-09-21T17:11:46" class="time">17:11</a></td></tr>
<tr id="t2021-09-21T17:34:45"><th class="nick" style="background: #62bb62">jessequinn</th><td class="text" style="color: #62bb62">Hi, quick question, how do I go about enabling iptables physdev on poky?</td><td class="time"><a href="#t2021-09-21T17:34:45" class="time">17:34</a></td></tr>
<tr id="t2021-09-21T18:19:42"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">RP: I suspect that removing that is pulling something out of the systemd initialization graph, making it stop the services</td><td class="time"><a href="#t2021-09-21T18:19:42" class="time">18:19</a></td></tr>
<tr id="t2021-09-21T18:20:53"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">RP: Running `systemd-analyze dot &gt; graph.dot` before disabling the service might show why it thinks that</td><td class="time"><a href="#t2021-09-21T18:20:53" class="time">18:20</a></td></tr>
<tr id="t2021-09-21T18:40:37"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">looks like git.qemu.org is down, which is breaking some of my buids.. Ugh</td><td class="time"><a href="#t2021-09-21T18:40:37" class="time">18:40</a></td></tr>
<tr id="t2021-09-21T18:41:56"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Is there a generic way (MIRRORS/PREMIRRORS) to redirect git://git.qemu.org/git/... to git://gitlab.com/qemu-project/...</td><td class="time"><a href="#t2021-09-21T18:41:56" class="time">18:41</a></td></tr>
<tr id="t2021-09-21T18:42:09"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">if I specify the '...' part it seems to work, but I thought we could wild card some of it</td><td class="time"><a href="#t2021-09-21T18:42:09" class="time">18:42</a></td></tr>
<tr id="t2021-09-21T18:56:29"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">git://git.qemu.org/git/.* git://gitlab.com/qemu-project/BASENAME \n \</td><td class="time"><a href="#t2021-09-21T18:56:29" class="time">18:56</a></td></tr>
<tr id="t2021-09-21T18:56:46"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">gitsm://gitqemu.org/git/.* gitsm://gitlab.com/qemu-project/BASENAME \n \</td><td class="time"><a href="#t2021-09-21T18:56:46" class="time">18:56</a></td></tr>
<tr id="t2021-09-21T18:56:53"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">as a premirror fixes the problem for me..</td><td class="time"><a href="#t2021-09-21T18:56:53" class="time">18:56</a></td></tr>
<tr id="t2021-09-21T19:33:12"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">JPEW: why would it be intermittent though?</td><td class="time"><a href="#t2021-09-21T19:33:12" class="time">19:33</a></td></tr>
<tr id="t2021-09-21T19:33:30"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">RP: Ah, that makes no sense (unless it some race)</td><td class="time"><a href="#t2021-09-21T19:33:30" class="time">19:33</a></td></tr>
<tr id="t2021-09-21T19:48:05"><th class="nick" style="background: #c668c6">whuang0389</th><td class="text" style="color: #c668c6">ah noob linux question. does indentation matter in /etc/network/interfaces file?</td><td class="time"><a href="#t2021-09-21T19:48:05" class="time">19:48</a></td></tr>
<tr id="t2021-09-21T20:34:45"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">JPEW: right, it seems to be some kind of race :/</td><td class="time"><a href="#t2021-09-21T20:34:45" class="time">20:34</a></td></tr>
<tr id="t2021-09-21T20:35:43"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">Is it quick enough it could be racing with systemd tearing everything down?</td><td class="time"><a href="#t2021-09-21T20:35:43" class="time">20:35</a></td></tr>
<tr id="t2021-09-21T20:35:48"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">(seconds perhaps)</td><td class="time"><a href="#t2021-09-21T20:35:48" class="time">20:35</a></td></tr>
<tr id="t2021-09-21T20:37:09"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">JPEW: the tests take some time but I guess something could happen occasionally</td><td class="time"><a href="#t2021-09-21T20:37:09" class="time">20:37</a></td></tr>
<tr id="t2021-09-21T21:02:27"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">I'm adding: addtask mytask after do_deploy before do_build, but it isn't run unless I call it explicitly. Idea?</td><td class="time"><a href="#t2021-09-21T21:02:27" class="time">21:02</a></td></tr>
<tr id="t2021-09-21T21:03:27"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: that doesn't seem like a sensible ordering to me? I'd expect do_deploy to be after do_build</td><td class="time"><a href="#t2021-09-21T21:03:27" class="time">21:03</a></td></tr>
<tr id="t2021-09-21T21:10:57"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">smurray: but the doc says this about do_deploy: &quot;You do not need to add before do_build to the addtask command (though it is harmless), because the base class contains the following: do_build[recrdeptask] += &quot;do_deploy&quot;&quot;</td><td class="time"><a href="#t2021-09-21T21:10:57" class="time">21:10</a></td></tr>
<tr id="t2021-09-21T21:11:00"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: though looking in the metadata, I guess I'm mistaken</td><td class="time"><a href="#t2021-09-21T21:11:00" class="time">21:11</a></td></tr>
<tr id="t2021-09-21T21:11:14"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: yeah, I see that in base.bbclass</td><td class="time"><a href="#t2021-09-21T21:11:14" class="time">21:11</a></td></tr>
<tr id="t2021-09-21T21:21:41"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">smurray what am I missing?</td><td class="time"><a href="#t2021-09-21T21:21:41" class="time">21:21</a></td></tr>
<tr id="t2021-09-21T21:22:22"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: I'm not sure.&nbsp;&nbsp;Is this a new recipe, or a bbappend to e.g. a kernel recipe?</td><td class="time"><a href="#t2021-09-21T21:22:22" class="time">21:22</a></td></tr>
<tr id="t2021-09-21T21:23:39"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: if it's the former, perhaps look at deploy.bbclass, it gets inherited by other things that seem to use do_deploy</td><td class="time"><a href="#t2021-09-21T21:23:39" class="time">21:23</a></td></tr>
<tr id="t2021-09-21T21:24:11"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">smurray: it's a core-image recipe</td><td class="time"><a href="#t2021-09-21T21:24:11" class="time">21:24</a></td></tr>
<tr id="t2021-09-21T21:24:48"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">core-image inherits deploy, right?</td><td class="time"><a href="#t2021-09-21T21:24:48" class="time">21:24</a></td></tr>
<tr id="t2021-09-21T21:27:35"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">or does it.. &quot;Task do_deploy does not exist for target &lt;image&gt;&quot; :-S</td><td class="time"><a href="#t2021-09-21T21:27:35" class="time">21:27</a></td></tr>
<tr id="t2021-09-21T21:27:50"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">but an image copies stuff in DEPLOY_DIR_IMAGE, I don't get it :/</td><td class="time"><a href="#t2021-09-21T21:27:50" class="time">21:27</a></td></tr>
<tr id="t2021-09-21T21:36:29"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">well I'm confused, the image class doesn't inherit deploy... Is there a reason why?</td><td class="time"><a href="#t2021-09-21T21:36:29" class="time">21:36</a></td></tr>
<tr id="t2021-09-21T21:40:30"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: that's a question for someone like RP or rburton with a bit more knowledge in that area</td><td class="time"><a href="#t2021-09-21T21:40:30" class="time">21:40</a></td></tr>
<tr id="t2021-09-21T21:47:06"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: for images do_image_complete does the copying to tmp/deploy/images/..., the deploy task isn't used</td><td class="time"><a href="#t2021-09-21T21:47:06" class="time">21:47</a></td></tr>
<tr id="t2021-09-21T21:48:12"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">vd: so you could try using that to order your task</td><td class="time"><a href="#t2021-09-21T21:48:12" class="time">21:48</a></td></tr>
<tr id="t2021-09-21T21:49:21"><th class="nick" style="background: #6464bf">JPEW</th><td class="text" style="color: #6464bf">kanavin_: The combination of autotools and rust is... odd :)</td><td class="time"><a href="#t2021-09-21T21:49:21" class="time">21:49</a></td></tr>
<tr id="t2021-09-21T21:49:43"><th class="nick" style="background: #ce6c6c">kanavin_</th><td class="text" style="color: #ce6c6c">JPEW, the combination of autotools and rust is a grey hair generator</td><td class="time"><a href="#t2021-09-21T21:49:43" class="time">21:49</a></td></tr>
<tr id="t2021-09-21T21:50:04"><th class="nick" style="background: #ce6c6c">kanavin_</th><td class="text" style="color: #ce6c6c">I hope we won't see more of those</td><td class="time"><a href="#t2021-09-21T21:50:04" class="time">21:50</a></td></tr>
<tr id="t2021-09-21T21:59:24"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: the core-image class does not use the deploy code, it has it's own logic</td><td class="time"><a href="#t2021-09-21T21:59:24" class="time">21:59</a></td></tr>
<tr id="t2021-09-21T22:00:43"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: why though?</td><td class="time"><a href="#t2021-09-21T22:00:43" class="time">22:00</a></td></tr>
<tr id="t2021-09-21T22:01:40"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: because the way images deploy is quite different and complex compared to the usual do_deploy tasks and justifies it's own custom code</td><td class="time"><a href="#t2021-09-21T22:01:40" class="time">22:01</a></td></tr>
<tr id="t2021-09-21T22:01:53"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: both happen to write to the &quot;deploy&quot; directory but that is about all the have in common</td><td class="time"><a href="#t2021-09-21T22:01:53" class="time">22:01</a></td></tr>
<tr id="t2021-09-21T22:02:09"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: for example images aren't written into sstate, do_deploy tasks are</td><td class="time"><a href="#t2021-09-21T22:02:09" class="time">22:02</a></td></tr>
<tr id="t2021-09-21T22:08:19"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">ok I see</td><td class="time"><a href="#t2021-09-21T22:08:19" class="time">22:08</a></td></tr>
<tr id="t2021-09-21T22:09:02"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: we agree that copying files outside of DEPLOY_DIR_IMAGE (for archiving) requires its own class and cannot use the deploy class, right?</td><td class="time"><a href="#t2021-09-21T22:09:02" class="time">22:09</a></td></tr>
<tr id="t2021-09-21T22:09:53"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: you mean copying files that are in DEPLOY_DIR_IMAGE to somewhere else?</td><td class="time"><a href="#t2021-09-21T22:09:53" class="time">22:09</a></td></tr>
<tr id="t2021-09-21T22:10:02"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: yes</td><td class="time"><a href="#t2021-09-21T22:10:02" class="time">22:10</a></td></tr>
<tr id="t2021-09-21T22:10:15"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: I would do that as a follow on task to do_deploy, yes</td><td class="time"><a href="#t2021-09-21T22:10:15" class="time">22:10</a></td></tr>
<tr id="t2021-09-21T22:10:21"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">or to do_image_complete</td><td class="time"><a href="#t2021-09-21T22:10:21" class="time">22:10</a></td></tr>
<tr id="t2021-09-21T22:11:34"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">ok thank you. Is there a way to make a class generic enough to inherit it in recipes using the deploy class or image recipes?</td><td class="time"><a href="#t2021-09-21T22:11:34" class="time">22:11</a></td></tr>
<tr id="t2021-09-21T22:12:32"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: a generic class with added a postfunc to do_image_complete, do_deploy and do_deploy_setscene might work</td><td class="time"><a href="#t2021-09-21T22:12:32" class="time">22:12</a></td></tr>
<tr id="t2021-09-21T22:13:09"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: or just addtask after them. I think the postfunc might cause sig changes</td><td class="time"><a href="#t2021-09-21T22:13:09" class="time">22:13</a></td></tr>
<tr id="t2021-09-21T22:13:10"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">should I write class code that does something like: if (has task &quot;do_deploy&quot;) { addtask do_myarchive after do_deploy } else { addtask do_myarchive after do_image_complete } ?</td><td class="time"><a href="#t2021-09-21T22:13:10" class="time">22:13</a></td></tr>
<tr id="t2021-09-21T22:13:46"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: it depends how you want to trigger this and if the checksums matter</td><td class="time"><a href="#t2021-09-21T22:13:46" class="time">22:13</a></td></tr>
<tr id="t2021-09-21T22:16:43"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: I'm not sure about that. I just need to copy some final artifacts in a shared directory. Do checksums matter in this scenario/</td><td class="time"><a href="#t2021-09-21T22:16:43" class="time">22:16</a></td></tr>
<tr id="t2021-09-21T22:16:45"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">?*</td><td class="time"><a href="#t2021-09-21T22:16:45" class="time">22:16</a></td></tr>
<tr id="t2021-09-21T22:17:25"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: if you were sharing public sstate and wanted it to work without the class, yes</td><td class="time"><a href="#t2021-09-21T22:17:25" class="time">22:17</a></td></tr>
<tr id="t2021-09-21T22:17:34"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">if not, that does make it easier</td><td class="time"><a href="#t2021-09-21T22:17:34" class="time">22:17</a></td></tr>
<tr id="t2021-09-21T22:20:26"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">I'm sharing SSTATE_CACHE between builds, but the output directory for final artifacts is fresh every builds</td><td class="time"><a href="#t2021-09-21T22:20:26" class="time">22:20</a></td></tr>
<tr id="t2021-09-21T22:20:46"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: using sstate just for these builds is fine</td><td class="time"><a href="#t2021-09-21T22:20:46" class="time">22:20</a></td></tr>
<tr id="t2021-09-21T22:23:05"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: so a generic class which does: addtask do_myarchive after do_deploy; addtask do_myarchive after do_image_complete; without condition?</td><td class="time"><a href="#t2021-09-21T22:23:05" class="time">22:23</a></td></tr>
<tr id="t2021-09-21T22:23:37"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: those tasks won't trigger, it isn't this simple :(</td><td class="time"><a href="#t2021-09-21T22:23:37" class="time">22:23</a></td></tr>
<tr id="t2021-09-21T22:23:45"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: which is where I come back to postfuncs</td><td class="time"><a href="#t2021-09-21T22:23:45" class="time">22:23</a></td></tr>
<tr id="t2021-09-21T22:24:31"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: buildhistory is an example of a class that hooks in but tries to stop the hashes changing FWIW if that is important to you (and I suspect it isn't)</td><td class="time"><a href="#t2021-09-21T22:24:31" class="time">22:24</a></td></tr>
<tr id="t2021-09-21T22:27:33"><td class="action" colspan="2">* vd is confused \o/</td><td><a href="#t2021-09-21T22:27:33" class="time">22:27</a></td></tr>
<tr id="t2021-09-21T22:43:10"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">The thing is, it has to come from the recipes themself because only them know IMAGE_NAME and I don't want to guess them. So how can I share this code? postfuncs or a bbclass?</td><td class="time"><a href="#t2021-09-21T22:43:10" class="time">22:43</a></td></tr>
<tr id="t2021-09-21T22:44:08"><th class="nick" style="background: #b86161">vd</th><td class="text" style="color: #b86161">RP: sorry if I misunderstood your suggestions, it's still a bit unclear to me</td><td class="time"><a href="#t2021-09-21T22:44:08" class="time">22:44</a></td></tr>
<tr id="t2021-09-21T22:48:41"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: well, stepping back and thinking about this a different way, you could look through tmp/sstate-control/* and look for the do_deploy and do_image_complete manifests, then just copy the referenced files?</td><td class="time"><a href="#t2021-09-21T22:48:41" class="time">22:48</a></td></tr>
<tr id="t2021-09-21T22:49:04"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: that could be at the end of the build in an event handler or something</td><td class="time"><a href="#t2021-09-21T22:49:04" class="time">22:49</a></td></tr>
<tr id="t2021-09-21T22:50:04"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">vd: or just copy the deploy dir entirely?</td><td class="time"><a href="#t2021-09-21T22:50:04" class="time">22:50</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-09-20.log.html">&#171; Monday, 2021-09-20</a> <a href="index.html">Index</a> <a href="%23yocto.2021-09-22.log.html">Wednesday, 2021-09-22 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
