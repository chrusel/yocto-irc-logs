<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Saturday, 2021-07-31</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Saturday, 2021-07-31</h1>
<div class="navigation"> <a href="%23yocto.2021-07-30.log.html">&#171; Friday, 2021-07-30</a> <a href="index.html">Index</a> <a href="%23yocto.2021-08-01.log.html">Sunday, 2021-08-01 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-07-31T19:09:50"><td class="nickchange" colspan="2">*** mihai- is now known as mihai</td><td><a href="#t2021-07-31T19:09:50" class="time">19:09</a></td></tr>
<tr id="t2021-07-31T21:20:58"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">khem: any idea how we look with meta-oe and the overrides transition?</td><td class="time"><a href="#t2021-07-31T21:20:58" class="time">21:20</a></td></tr>
<tr id="t2021-07-31T21:30:52"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Hey all, in what context does it make sense to use the `VARIABLE_pn-recipename` versus the `VARIABLE_recipename`?</td><td class="time"><a href="#t2021-07-31T21:30:52" class="time">21:30</a></td></tr>
<tr id="t2021-07-31T21:34:11"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">For example. I've seen `PREFERRED_VERSION_pn-&lt;recipe_name&gt;` as well as `PREFERRED_VERSION_&lt;recipe_name&gt;`</td><td class="time"><a href="#t2021-07-31T21:34:11" class="time">21:34</a></td></tr>
<tr id="t2021-07-31T21:35:43"><th class="nick" style="background: #407a40">RP</th><td class="text" style="color: #407a40">UmbrellaMan: PREFERRED_VERSION is special, it would be _pn- in most other cases</td><td class="time"><a href="#t2021-07-31T21:35:43" class="time">21:35</a></td></tr>
<tr id="t2021-07-31T21:37:00"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Thanks,</td><td class="time"><a href="#t2021-07-31T21:37:00" class="time">21:37</a></td></tr>
<tr id="t2021-07-31T21:38:02"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">RP What about `RDEPENDS_${PN}`? It's also having the recipe name directly used as the override?</td><td class="time"><a href="#t2021-07-31T21:38:02" class="time">21:38</a></td></tr>
<tr id="t2021-07-31T22:18:27"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">UmbrellaMan in that case ${PN} is the same of a package listed in PACKAGES, the fact that it's a recipe name is incidental</td><td class="time"><a href="#t2021-07-31T22:18:27" class="time">22:18</a></td></tr>
<tr id="t2021-07-31T22:31:00"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">kergoth (diverging from original question...) Why does it need the _${PN} in the first place? According to the Yocto Chant #1 recipe data is local, so why isn't `RDPENDS` enough?</td><td class="time"><a href="#t2021-07-31T22:31:00" class="time">22:31</a></td></tr>
<tr id="t2021-07-31T22:34:01"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">UmbrellaMan because one recipe will create many packages.</td><td class="time"><a href="#t2021-07-31T22:34:01" class="time">22:34</a></td></tr>
<tr id="t2021-07-31T22:34:31"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">we use granular packaging to ease constructing filesystems with just what we want. documentation, development files, etc is all split out into separate binary packages</td><td class="time"><a href="#t2021-07-31T22:34:31" class="time">22:34</a></td></tr>
<tr id="t2021-07-31T22:34:41"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">RDEPENDS_${PN} only applies to the ${PN} package</td><td class="time"><a href="#t2021-07-31T22:34:41" class="time">22:34</a></td></tr>
<tr id="t2021-07-31T22:34:47"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">see PACKAGES = in meta/conf/bitbake.conf</td><td class="time"><a href="#t2021-07-31T22:34:47" class="time">22:34</a></td></tr>
<tr id="t2021-07-31T22:42:47"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Thanks, seems those are totally different mechanisms. It's more clear now</td><td class="time"><a href="#t2021-07-31T22:42:47" class="time">22:42</a></td></tr>
<tr id="t2021-07-31T22:53:25"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">I'm trying to understand the mechanism on hoe OVERRIDES is used. From what&nbsp;&nbsp;can see, the value of OVERRIDES will change for every recipe and it will contain at least the name of that recipe.</td><td class="time"><a href="#t2021-07-31T22:53:25" class="time">22:53</a></td></tr>
<tr id="t2021-07-31T22:56:20"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">Only during do_package &amp; friends will the package name be added to OVERRIDES, not generally</td><td class="time"><a href="#t2021-07-31T22:56:20" class="time">22:56</a></td></tr>
<tr id="t2021-07-31T22:58:01"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Yeah, just confirmed it doesn't contain the recipe name always for different recipes... I guess I'm missing the point then.</td><td class="time"><a href="#t2021-07-31T22:58:01" class="time">22:58</a></td></tr>
<tr id="t2021-07-31T22:58:51"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">The example here shows the override mechanism from a purely bitbake perspective. <a href="https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#conditional-metadata" rel="nofollow">https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#conditional-metadata</a></td><td class="time"><a href="#t2021-07-31T22:58:51" class="time">22:58</a></td></tr>
<tr id="t2021-07-31T23:00:06"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">I'm reading it as: &quot;If the string in VARIABLE_&lt;string&gt; also exists in the OVERRIDES variable, the VARIABLE will take that value.&quot;</td><td class="time"><a href="#t2021-07-31T23:00:06" class="time">23:00</a></td></tr>
<tr id="t2021-07-31T23:01:50"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Now trying to translate that into open embedded concepts I though it was saying that the overridden variables for a local recipe scope get filtered out from the global scope by the fact that the recipe name is in the OVERRIDES</td><td class="time"><a href="#t2021-07-31T23:01:50" class="time">23:01</a></td></tr>
<tr id="t2021-07-31T23:06:18"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">recipe name is not in overrides specifically, and never globally. only during packaging are the *package name* added to it, and only while processing that package while it iterates over the contents of the PACKAGES variable</td><td class="time"><a href="#t2021-07-31T23:06:18" class="time">23:06</a></td></tr>
<tr id="t2021-07-31T23:07:16"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144"><a href="https://github.com/openembedded/openembedded-core/blob/master/meta/conf/bitbake.conf#L292" rel="nofollow">https://github.com/openembedded/openembedded-core/blob/master/meta/conf/bitbake.conf#L292</a></td><td class="time"><a href="#t2021-07-31T23:07:16" class="time">23:07</a></td></tr>
<tr id="t2021-07-31T23:12:11"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Thanks, I'm trying to merge what you are saying together with what's in the docs. <a href="https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#var-OVERRIDES" rel="nofollow">https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#var-OVERRIDES</a></td><td class="time"><a href="#t2021-07-31T23:12:11" class="time">23:12</a></td></tr>
<tr id="t2021-07-31T23:14:02"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">And it does specify a &quot;state&quot; which implies that the current recipe is some kind of an override state.</td><td class="time"><a href="#t2021-07-31T23:14:02" class="time">23:14</a></td></tr>
<tr id="t2021-07-31T23:14:37"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">pn-${PN} is always in overrides, but ${PN} is only in overrides during packaging.</td><td class="time"><a href="#t2021-07-31T23:14:37" class="time">23:14</a></td></tr>
<tr id="t2021-07-31T23:17:41"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">A ok, that makes thing fit into place better. So the `pn-` is kind of like a hacky namespace to prevent recipe names conflicting with other override names?</td><td class="time"><a href="#t2021-07-31T23:17:41" class="time">23:17</a></td></tr>
<tr id="t2021-07-31T23:21:03"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">kergoth Cool. Thanks for clarifying things :)</td><td class="time"><a href="#t2021-07-31T23:21:03" class="time">23:21</a></td></tr>
<tr id="t2021-07-31T23:22:12"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">So, what I was hoping to achieve before realizing I don't understang the overrides mechanism was to add a the chosen recipe version to an image name.</td><td class="time"><a href="#t2021-07-31T23:22:12" class="time">23:22</a></td></tr>
<tr id="t2021-07-31T23:27:38"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Let me try to thing out loud and see where it get's me. Problem definition: There is a local variable in the image recipe called `IMAGE_LINK_NAME` and I want to expand it with a version of a particular recipe....</td><td class="time"><a href="#t2021-07-31T23:27:38" class="time">23:27</a></td></tr>
<tr id="t2021-07-31T23:29:06"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Let's say I want to have the version of `nano` in my image name because I want to build 20 different images all with different nano versions</td><td class="time"><a href="#t2021-07-31T23:29:06" class="time">23:29</a></td></tr>
<tr id="t2021-07-31T23:29:50"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">So to not get lost, having the version in the build image would help me a lot</td><td class="time"><a href="#t2021-07-31T23:29:50" class="time">23:29</a></td></tr>
<tr id="t2021-07-31T23:30:57"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">So how can the local namespace of the image recipe get the local PV of the `nano` recipe. Obviously, it can't.</td><td class="time"><a href="#t2021-07-31T23:30:57" class="time">23:30</a></td></tr>
<tr id="t2021-07-31T23:32:28"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">But perhaps there is a global alternative. Maybe I can access the override value directly. Something like `IMAGE_LINK_NAME_append=&quot;${PV_pn-nano)&quot;`</td><td class="time"><a href="#t2021-07-31T23:32:28" class="time">23:32</a></td></tr>
<tr id="t2021-07-31T23:33:45"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">In my current mental model, there isn't a reason for that to work (at least in theory)</td><td class="time"><a href="#t2021-07-31T23:33:45" class="time">23:33</a></td></tr>
<tr id="t2021-07-31T23:41:39"><th class="nick" style="background: #42427e">UmbrellaMan</th><td class="text" style="color: #42427e">Nope, that doesn't seem to be the case. It isn't resolving `${PV_pn-nano)` to a number, but is treating it as a literal</td><td class="time"><a href="#t2021-07-31T23:41:39" class="time">23:41</a></td></tr>
<tr id="t2021-07-31T23:47:20"><th class="nick" style="background: #818144">kergoth</th><td class="text" style="color: #818144">correct, recipes cannot access the metadata of other recipes by design</td><td class="time"><a href="#t2021-07-31T23:47:20" class="time">23:47</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-07-30.log.html">&#171; Friday, 2021-07-30</a> <a href="index.html">Index</a> <a href="%23yocto.2021-08-01.log.html">Sunday, 2021-08-01 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
