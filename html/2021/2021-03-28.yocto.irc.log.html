<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Sunday, 2021-03-28</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Sunday, 2021-03-28</h1>
<div class="navigation"> <a href="%23yocto.2021-03-27.log.html">&#171; Saturday, 2021-03-27</a> <a href="index.html">Index</a> <a href="%23yocto.2021-03-29.log.html">Monday, 2021-03-29 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-03-28T00:42:57"><th class="nick" style="background: #407a40">rfried</th><td class="text" style="color: #407a40">alex88: Yes.</td><td class="time"><a href="#t2021-03-28T00:42:57" class="time">00:42</a></td></tr>
<tr id="t2021-03-28T00:43:38"><th class="nick" style="background: #407a40">rfried</th><td class="text" style="color: #407a40">alex88: u-boot-fw-utils</td><td class="time"><a href="#t2021-03-28T00:43:38" class="time">00:43</a></td></tr>
<tr id="t2021-03-28T01:50:15"><th class="nick" style="background: #42427e">marex</th><td class="text" style="color: #42427e">rfried: better yet, libubootenv</td><td class="time"><a href="#t2021-03-28T01:50:15" class="time">01:50</a></td></tr>
<tr id="t2021-03-28T02:13:36"><th class="nick" style="background: #818144">alex88</th><td class="text" style="color: #818144">thank you! I'll look into that</td><td class="time"><a href="#t2021-03-28T02:13:36" class="time">02:13</a></td></tr>
<tr id="t2021-03-28T03:21:38"><th class="nick" style="background: #854685">kergoth</th><td class="text" style="color: #854685">frosteyes: <a href="https://github.com/MentorEmbedded/meta-mentor/blob/master/meta-mel-support/classes/image-sanity-incompatible.bbclass" rel="nofollow">https://github.com/MentorEmbedded/meta-mentor/blob/master/meta-mel-support/classes/image-sanity-incompatible.bbclass</a> may be of use to you, if you set INCOMPATIBLE_LICENSE globally to a value that allows gplv3 to be built, but set it differently in the image, and use this class, it'll error out if someone tried to install a gplv3 package into the image, but would allow it to build as usual</td><td class="time"><a href="#t2021-03-28T03:21:38" class="time">03:21</a></td></tr>
<tr id="t2021-03-28T03:22:09"><th class="nick" style="background: #854685">kergoth</th><td class="text" style="color: #854685">frosteyes: we had a case where we whitelisted something to let it build, but never wanted it to be installed in a production image, only a development one, and this made sure that was the case for us</td><td class="time"><a href="#t2021-03-28T03:22:09" class="time">03:22</a></td></tr>
<tr id="t2021-03-28T03:22:40"><td class="nickchange" colspan="2">*** wmat is now known as Guest96333</td><td><a href="#t2021-03-28T03:22:40" class="time">03:22</a></td></tr>
<tr id="t2021-03-28T07:13:19"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Thanks kergoth it looks very much what I need</td><td class="time"><a href="#t2021-03-28T07:13:19" class="time">07:13</a></td></tr>
<tr id="t2021-03-28T07:35:49"><td class="nickchange" colspan="2">*** gurmble is now known as grumble</td><td><a href="#t2021-03-28T07:35:49" class="time">07:35</a></td></tr>
<tr id="t2021-03-28T07:36:42"><th class="nick" style="background: #8c4a4a">chrysh</th><td class="text" style="color: #8c4a4a">alex88: to create ipk's, there is the command bitbake -c do_package_write_ipk &lt;image&gt;, but that's all hacky. I recommend the life coding sessions with LetoThe2nd to get an idea of the yocto workflow :) : <a href="https://www.youtube.com/watch?v=ThTl4FItfMI&amp;list=PLD4M5FoHz-TxMfBFrDKfIS_GLY25Qsfyj" rel="nofollow">https://www.youtube.com/watch?v=ThTl4FItfMI&amp;list=PLD4M5FoHz-TxMfBFrDKfIS_GLY25Qsfyj</a></td><td class="time"><a href="#t2021-03-28T07:36:42" class="time">07:36</a></td></tr>
<tr id="t2021-03-28T08:23:24"><td class="nickchange" colspan="2">*** itseris2 is now known as itseris</td><td><a href="#t2021-03-28T08:23:24" class="time">08:23</a></td></tr>
<tr id="t2021-03-28T13:47:30"><td class="nickchange" colspan="2">*** davisr_ is now known as davisr</td><td><a href="#t2021-03-28T13:47:30" class="time">13:47</a></td></tr>
<tr id="t2021-03-28T15:43:44"><th class="nick" style="background: #4b904b">vitali</th><td class="text" style="color: #4b904b">Hi, I'm looking to install ext sdk generated by yocto under WSL2 but getting a :/mnt/c/Program: bad variable name from post-relocate-setup.sh, not so critical for regular sdk since it doesnt prevent actual sdk from functioning, but for sdk_ext it blocks it completely</td><td class="time"><a href="#t2021-03-28T15:43:44" class="time">15:43</a></td></tr>
<tr id="t2021-03-28T15:43:44-2"><th class="nick" style="background: #4b904b">vitali</th><td class="text" style="color: #4b904b">Is anybody aware of a workaround? I understand that it's a clash of windows/linux folder naming and WSL2 is not supported, but maybe somebody already encountered this issue?</td><td class="time"><a href="#t2021-03-28T15:43:44-2" class="time">15:43</a></td></tr>
<tr id="t2021-03-28T16:45:23"><td class="nickchange" colspan="2">*** rperier_ is now known as rperier</td><td><a href="#t2021-03-28T16:45:23" class="time">16:45</a></td></tr>
<tr id="t2021-03-28T18:25:33"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Hi folks. Has anyone worked with squashfs, and had issue with performance?</td><td class="time"><a href="#t2021-03-28T18:25:33" class="time">18:25</a></td></tr>
<tr id="t2021-03-28T18:27:08"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">I have some qspi nor flash (in theory it would be able to do 150 MB/s) and if I use dd directly on the /dev/mtd device it perform around 114 MB/s. So pretty good</td><td class="time"><a href="#t2021-03-28T18:27:08" class="time">18:27</a></td></tr>
<tr id="t2021-03-28T18:28:03"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">I have then created a mtd partition of 110 MB and created a squashfs using xz with block size of 1M. written it to flash and mounted it..</td><td class="time"><a href="#t2021-03-28T18:28:03" class="time">18:28</a></td></tr>
<tr id="t2021-03-28T18:28:27"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">(it only contains a single file currently). When I try to read this file with dd, it only gives around 6.2 MB/s.</td><td class="time"><a href="#t2021-03-28T18:28:27" class="time">18:28</a></td></tr>
<tr id="t2021-03-28T18:28:53"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Knows that the decompression takes some overhead, but 6.2 MB/s is much slower than I would expect.</td><td class="time"><a href="#t2021-03-28T18:28:53" class="time">18:28</a></td></tr>
<tr id="t2021-03-28T18:29:11"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">So any input is welcome :D</td><td class="time"><a href="#t2021-03-28T18:29:11" class="time">18:29</a></td></tr>
<tr id="t2021-03-28T19:18:27"><th class="nick" style="background: #4d4d93">goliath</th><td class="text" style="color: #4d4d93">Does a bigger dd blocksize help? Maybe trying another SquashFS compressor?</td><td class="time"><a href="#t2021-03-28T19:18:27" class="time">19:18</a></td></tr>
<tr id="t2021-03-28T19:30:26"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">I have added kprobe tracing with echo 'p squashfs_read_data super_block=%x0 index=%x1 length=%x2' &gt; kprobe_events</td><td class="time"><a href="#t2021-03-28T19:30:26" class="time">19:30</a></td></tr>
<tr id="t2021-03-28T19:31:49"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">It gives the following result.</td><td class="time"><a href="#t2021-03-28T19:31:49" class="time">19:31</a></td></tr>
<tr id="t2021-03-28T19:31:54"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd-2141&nbsp;&nbsp;[001] d...&nbsp;&nbsp;9134.666453: p_squashfs_read_data_0: (squashfs_read_data+0x0/0x5c8 [squashfs]) super_block=0xffffffc9737eb000 index=0x60 length=0x48c74</td><td class="time"><a href="#t2021-03-28T19:31:54" class="time">19:31</a></td></tr>
<tr id="t2021-03-28T19:31:56"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd-2141&nbsp;&nbsp;[002] d...&nbsp;&nbsp;9134.821142: p_squashfs_read_data_0: (squashfs_read_data+0x0/0x5c8 [squashfs]) super_block=0xffffffc9737eb000 index=0x48cd4 length=0x4b830</td><td class="time"><a href="#t2021-03-28T19:31:56" class="time">19:31</a></td></tr>
<tr id="t2021-03-28T19:31:58"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd-2141&nbsp;&nbsp;[001] d...&nbsp;&nbsp;9134.988574: p_squashfs_read_data_0: (squashfs_read_data+0x0/0x5c8 [squashfs]) super_block=0xffffffc9737eb000 index=0x94504 length=0x4ae4c</td><td class="time"><a href="#t2021-03-28T19:31:58" class="time">19:31</a></td></tr>
<tr id="t2021-03-28T19:33:49"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">So length fluctuate and does not seems to fit with block - on this level..</td><td class="time"><a href="#t2021-03-28T19:33:49" class="time">19:33</a></td></tr>
<tr id="t2021-03-28T19:34:24"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Will just see if I can find the place where the data from the mtd is requested.. So I can see what size is requested..</td><td class="time"><a href="#t2021-03-28T19:34:24" class="time">19:34</a></td></tr>
<tr id="t2021-03-28T20:13:23"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Using kprobe I noticed that all mtd_read was 0x200 bytes (512)</td><td class="time"><a href="#t2021-03-28T20:13:23" class="time">20:13</a></td></tr>
<tr id="t2021-03-28T20:13:51"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">This is the mtdblock device, where I can see that .blksize is set to 512 in mtdblock.c</td><td class="time"><a href="#t2021-03-28T20:13:51" class="time">20:13</a></td></tr>
<tr id="t2021-03-28T20:30:02"><th class="nick" style="background: #4d4d93">goliath</th><td class="text" style="color: #4d4d93">Makes sense so far. 1M block size means mksquashfs chops the input up into 1M blocks that it then compresses to variable sized output blocks. And of course you need a block device wrapper underneath, because SquashFS cannot talk to UBI or MTD.</td><td class="time"><a href="#t2021-03-28T20:30:02" class="time">20:30</a></td></tr>
<tr id="t2021-03-28T21:47:14"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">goliath: I was not prepared on the slow mtdblock, and I can't change blocksize..</td><td class="time"><a href="#t2021-03-28T21:47:14" class="time">21:47</a></td></tr>
<tr id="t2021-03-28T21:47:54"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">~ # dd if=/dev/mtd3 of=/dev/null bs=128k count=10</td><td class="time"><a href="#t2021-03-28T21:47:54" class="time">21:47</a></td></tr>
<tr id="t2021-03-28T21:47:55"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">1310720 bytes (1.3MB) copied, 0.011095 seconds, 112.7MB/s</td><td class="time"><a href="#t2021-03-28T21:47:55" class="time">21:47</a></td></tr>
<tr id="t2021-03-28T21:47:57"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">~ # dd if=/dev/mtdblock3 of=/dev/null bs=128k count=10</td><td class="time"><a href="#t2021-03-28T21:47:57" class="time">21:47</a></td></tr>
<tr id="t2021-03-28T21:47:59"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">1310720 bytes (1.3MB) copied, 0.362195 seconds, 3.5MB/s</td><td class="time"><a href="#t2021-03-28T21:47:59" class="time">21:47</a></td></tr>
<tr id="t2021-03-28T21:48:33"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">So will need another way in using the mtdblock.</td><td class="time"><a href="#t2021-03-28T21:48:33" class="time">21:48</a></td></tr>
<tr id="t2021-03-28T21:49:50"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">Will use the kernel mailing list, but just a quick question. Do you know if UBI is able to work with locked flash, or does UBI require to be able to write to the flash.</td><td class="time"><a href="#t2021-03-28T21:49:50" class="time">21:49</a></td></tr>
<tr id="t2021-03-28T21:50:48"><th class="nick" style="background: #488888">frosteyes</th><td class="text" style="color: #488888">The reason I ask, is for this part, it is production data so is readonly, and I will prefer to be able to lock the flash in production after the data is written. Notice it is nor flash.</td><td class="time"><a href="#t2021-03-28T21:50:48" class="time">21:50</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-03-27.log.html">&#171; Saturday, 2021-03-27</a> <a href="index.html">Index</a> <a href="%23yocto.2021-03-29.log.html">Monday, 2021-03-29 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
