<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Friday, 2021-07-30</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Friday, 2021-07-30</h1>
<div class="navigation"> <a href="%23yocto.2021-07-29.log.html">&#171; Thursday, 2021-07-29</a> <a href="index.html">Index</a> <a href="%23yocto.2021-07-31.log.html">Saturday, 2021-07-31 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-07-30T02:04:19"><td class="nickchange" colspan="2">*** camus1 is now known as camus</td><td><a href="#t2021-07-30T02:04:19" class="time">02:04</a></td></tr>
<tr id="t2021-07-30T02:54:10-2"><td class="nickchange" colspan="2">*** camus1 is now known as camus</td><td><a href="#t2021-07-30T02:54:10-2" class="time">02:54</a></td></tr>
<tr id="t2021-07-30T04:24:54"><th class="nick" style="background: #407a40">alicef</th><td class="text" style="color: #407a40">any way to add commands to yocto git command ? something like BB_GIT_CMD = &quot;depth=1&quot;</td><td class="time"><a href="#t2021-07-30T04:24:54" class="time">04:24</a></td></tr>
<tr id="t2021-07-30T05:42:42"><th class="nick" style="background: #42427e">mihai</th><td class="text" style="color: #42427e">yo</td><td class="time"><a href="#t2021-07-30T05:42:42" class="time">05:42</a></td></tr>
<tr id="t2021-07-30T05:55:17"><td class="part" colspan="2">*** mihai &lt;mihai!~mihai@user/mihai&gt; has left #yocto</td><td><a href="#t2021-07-30T05:55:17" class="time">05:55</a></td></tr>
<tr id="t2021-07-30T05:59:27"><th class="nick" style="background: #818144">michaelo[m]</th><td class="text" style="color: #818144">I'm on Matrix and receiving some of these messages in bursts.</td><td class="time"><a href="#t2021-07-30T05:59:27" class="time">05:59</a></td></tr>
<tr id="t2021-07-30T05:59:27-2"><th class="nick" style="background: #818144">michaelo[m]</th><td class="text" style="color: #818144">The synchronization with libera.chat looks broken</td><td class="time"><a href="#t2021-07-30T05:59:27-2" class="time">05:59</a></td></tr>
<tr id="t2021-07-30T06:38:56"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2021-07-30T06:38:56" class="time">06:38</a></td></tr>
<tr id="t2021-07-30T06:42:02"><th class="nick" style="background: #854685">mckoan</th><td class="text" style="color: #854685">alicef: see BB_GIT_SHALLOW_DEPTH in bitbake/lib/bb/fetch2/git.py</td><td class="time"><a href="#t2021-07-30T06:42:02" class="time">06:42</a></td></tr>
<tr id="t2021-07-30T07:57:54-2"><td class="nickchange" colspan="2">*** camus1 is now known as camus</td><td><a href="#t2021-07-30T07:57:54-2" class="time">07:57</a></td></tr>
<tr id="t2021-07-30T08:07:04"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">override: don't reinvent the wheel and take upgrade mechanisms that already exist (mender, rauc, swupdate, you namne it)</td><td class="time"><a href="#t2021-07-30T08:07:04" class="time">08:07</a></td></tr>
<tr id="t2021-07-30T08:07:12"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">most of them support A/B mechanism I think</td><td class="time"><a href="#t2021-07-30T08:07:12" class="time">08:07</a></td></tr>
<tr id="t2021-07-30T08:07:46"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">which have their own specific way of booting rootfs A or B (kernel A and B too I guess)</td><td class="time"><a href="#t2021-07-30T08:07:46" class="time">08:07</a></td></tr>
<tr id="t2021-07-30T08:08:16"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">you'll need to implement the U-Boot logic I guess but I sure hope it's appropriately documented :)</td><td class="time"><a href="#t2021-07-30T08:08:16" class="time">08:08</a></td></tr>
<tr id="t2021-07-30T08:10:26"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">michaelo[m]: It's very hard for me to restrain myself from trolling on matrix :)</td><td class="time"><a href="#t2021-07-30T08:10:26" class="time">08:10</a></td></tr>
<tr id="t2021-07-30T08:12:03"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: funny, then IRC moderates you :)</td><td class="time"><a href="#t2021-07-30T08:12:03" class="time">08:12</a></td></tr>
<tr id="t2021-07-30T08:14:56"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">michaelo: It was more about trolling on Matrix piece of SW :)</td><td class="time"><a href="#t2021-07-30T08:14:56" class="time">08:14</a></td></tr>
<tr id="t2021-07-30T08:15:33"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">I didn't have a good experience with it but people keep telling me everything works perfectly fine :)</td><td class="time"><a href="#t2021-07-30T08:15:33" class="time">08:15</a></td></tr>
<tr id="t2021-07-30T08:18:41"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">yo dudX</td><td class="time"><a href="#t2021-07-30T08:18:41" class="time">08:18</a></td></tr>
<tr id="t2021-07-30T08:20:30"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">hi guys, I'm trying of flashing an ubifs image in NAND and apparently the flshing process looks good but then kernel doesn't load <a href="https://bpa.st/BHOA" rel="nofollow">https://bpa.st/BHOA</a> this is my environment <a href="https://bpa.st/SMYA" rel="nofollow">https://bpa.st/SMYA</a>, as you can see I had to create a new bootzcmd_ubi variable because the existent one uses bootm instead bootz</td><td class="time"><a href="#t2021-07-30T08:20:30" class="time">08:20</a></td></tr>
<tr id="t2021-07-30T08:21:04"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I'd say all is correct, but it doesn't boot 😞</td><td class="time"><a href="#t2021-07-30T08:21:04" class="time">08:21</a></td></tr>
<tr id="t2021-07-30T08:23:07"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: why are you TFTP loading the ubifs file?</td><td class="time"><a href="#t2021-07-30T08:23:07" class="time">08:23</a></td></tr>
<tr id="t2021-07-30T08:24:14"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, well, according the documentation <a href="https://www.engicam.com/get_attachment.html/rem/custom/files/114421/ct10000_id101223_t100003/GEAM6ULSW_manual_Yocto_2.0.5.pdf" rel="nofollow">https://www.engicam.com/get_attachment.html/rem/custom/files/114421/ct10000_id101223_t100003/GEAM6ULSW_manual_Yocto_2.0.5.pdf</a> page 10 ... the rootfs can be flashed from the tftp</td><td class="time"><a href="#t2021-07-30T08:24:14" class="time">08:24</a></td></tr>
<tr id="t2021-07-30T08:24:57"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">in fact, I've taken the script that does this from the manufacturer repo <a href="https://github.com/engicam-stable/meta-engicam-nxp/blob/dunfell-community-bsp/script/u-boot-script/ker_dtb_fs.txt" rel="nofollow">https://github.com/engicam-stable/meta-engicam-nxp/blob/dunfell-community-bsp/script/u-boot-script/ker_dtb_fs.txt</a></td><td class="time"><a href="#t2021-07-30T08:24:57" class="time">08:24</a></td></tr>
<tr id="t2021-07-30T08:26:36"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: ubi0: empty MTD device detected</td><td class="time"><a href="#t2021-07-30T08:26:36" class="time">08:26</a></td></tr>
<tr id="t2021-07-30T08:27:24"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, so the process is not finishing successfully?</td><td class="time"><a href="#t2021-07-30T08:27:24" class="time">08:27</a></td></tr>
<tr id="t2021-07-30T08:27:28"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">and you didn't give us the bootlog so can't help</td><td class="time"><a href="#t2021-07-30T08:27:28" class="time">08:27</a></td></tr>
<tr id="t2021-07-30T08:27:42"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">where can I find the bootlog?</td><td class="time"><a href="#t2021-07-30T08:27:42" class="time">08:27</a></td></tr>
<tr id="t2021-07-30T08:28:17"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">oh, you mean this part? <a href="https://bpa.st/OX7Q" rel="nofollow">https://bpa.st/OX7Q</a></td><td class="time"><a href="#t2021-07-30T08:28:17" class="time">08:28</a></td></tr>
<tr id="t2021-07-30T08:28:29"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">as I've said ... it's stuck in there</td><td class="time"><a href="#t2021-07-30T08:28:29" class="time">08:28</a></td></tr>
<tr id="t2021-07-30T08:31:06"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">and what's the content of this bootzcmd_ubi? this is VERY likely an issue with either the device tree being corrupted or not correctly loaded, or incorrect (or missing) bootargs variable</td><td class="time"><a href="#t2021-07-30T08:31:06" class="time">08:31</a></td></tr>
<tr id="t2021-07-30T08:31:15"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">nothing to do with ubi (yet)</td><td class="time"><a href="#t2021-07-30T08:31:15" class="time">08:31</a></td></tr>
<tr id="t2021-07-30T08:34:17"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, you can see the contents in the link I pasted with the environment <a href="https://bpa.st/SMYA" rel="nofollow">https://bpa.st/SMYA</a></td><td class="time"><a href="#t2021-07-30T08:34:17" class="time">08:34</a></td></tr>
<tr id="t2021-07-30T08:34:54"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I've basically copied the bootcmd_ubi which is using bootm but replacing this with bootz</td><td class="time"><a href="#t2021-07-30T08:34:54" class="time">08:34</a></td></tr>
<tr id="t2021-07-30T08:35:03"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">because the built image is a zImage</td><td class="time"><a href="#t2021-07-30T08:35:03" class="time">08:35</a></td></tr>
<tr id="t2021-07-30T08:38:54"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">check that you have enough space for the zImage in the area reserved for it in your NAND, same for dtb. Make sure when loading into RAM with nand read that one is not overwritting the other.</td><td class="time"><a href="#t2021-07-30T08:38:54" class="time">08:38</a></td></tr>
<tr id="t2021-07-30T08:39:02"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">But that's probably more a question for #u-boot</td><td class="time"><a href="#t2021-07-30T08:39:02" class="time">08:39</a></td></tr>
<tr id="t2021-07-30T08:40:57"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I see, thank you anyway ...</td><td class="time"><a href="#t2021-07-30T08:40:57" class="time">08:40</a></td></tr>
<tr id="t2021-07-30T08:46:22"><th class="nick" style="background: #97974f">jsandman</th><td class="text" style="color: #97974f">Hi there, I'm trying to generate an extensible sdk for my image with Yocto 3.1.1. I get this weird error that I don't know how to solve &quot; sqlite3_3.31.1.bb:do_fetch) failed with exit code 'setscene whitelist' &quot; Does this sound faimiliar to someone here?</td><td class="time"><a href="#t2021-07-30T08:46:22" class="time">08:46</a></td></tr>
<tr id="t2021-07-30T08:54:00"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">jsandman: does this happen with a raw dunfell poky?</td><td class="time"><a href="#t2021-07-30T08:54:00" class="time">08:54</a></td></tr>
<tr id="t2021-07-30T08:56:35"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: wow, your nand read for the DTB is pessimistic, 1 MB for the DTB, while 100 KB (or even 64 KB) are probably enough!</td><td class="time"><a href="#t2021-07-30T08:56:35" class="time">08:56</a></td></tr>
<tr id="t2021-07-30T08:56:36"><th class="nick" style="background: #97974f">jsandman</th><td class="text" style="color: #97974f">I have not tried to generate an sdk for that. I shall try that yeah</td><td class="time"><a href="#t2021-07-30T08:56:36" class="time">08:56</a></td></tr>
<tr id="t2021-07-30T08:57:42"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: did you try to boot your kernel and DTB by loading them to the same addresses through tftp? This could rule out an issue in the way you flashed.</td><td class="time"><a href="#t2021-07-30T08:57:42" class="time">08:57</a></td></tr>
<tr id="t2021-07-30T08:58:51"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: I also agree with the advice from qschulz</td><td class="time"><a href="#t2021-07-30T08:58:51" class="time">08:58</a></td></tr>
<tr id="t2021-07-30T08:58:59"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">michaelo, I've used the script that manufacturer provides in their repository (layer) <a href="https://github.com/engicam-stable/meta-engicam-nxp/blob/dunfell-community-bsp/script/u-boot-script/ker_dtb_fs.txt" rel="nofollow">https://github.com/engicam-stable/meta-engicam-nxp/blob/dunfell-community-bsp/script/u-boot-script/ker_dtb_fs.txt</a></td><td class="time"><a href="#t2021-07-30T08:58:59" class="time">08:58</a></td></tr>
<tr id="t2021-07-30T08:59:43"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">jsandman: please do so, yes. to trim down the possible sources.</td><td class="time"><a href="#t2021-07-30T08:59:43" class="time">08:59</a></td></tr>
<tr id="t2021-07-30T09:04:39"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: Thanks for the details, but I'm proposing to figure out whether the kernel works or not... Try &quot;tftp 0x82000000 zImage; tftp 0x83000000 imx6ull-microgea-microdev.dtb; bootz 0x82000000 - 0x83000000&quot;</td><td class="time"><a href="#t2021-07-30T09:04:39" class="time">09:04</a></td></tr>
<tr id="t2021-07-30T09:05:16"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">michaelo: you probably want the load addresses swapped though</td><td class="time"><a href="#t2021-07-30T09:05:16" class="time">09:05</a></td></tr>
<tr id="t2021-07-30T09:05:24"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">michaelo, thank you very much 😁</td><td class="time"><a href="#t2021-07-30T09:05:24" class="time">09:05</a></td></tr>
<tr id="t2021-07-30T09:05:37"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">DTB is usually very small, so unlikely to overwrite the kernel</td><td class="time"><a href="#t2021-07-30T09:05:37" class="time">09:05</a></td></tr>
<tr id="t2021-07-30T09:05:56"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">while the opposite can be true (especially if you have an initrd in the kernel)</td><td class="time"><a href="#t2021-07-30T09:05:56" class="time">09:05</a></td></tr>
<tr id="t2021-07-30T09:06:17"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">s/can be true/is more likely/</td><td class="time"><a href="#t2021-07-30T09:06:17" class="time">09:06</a></td></tr>
<tr id="t2021-07-30T09:09:48"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: from what I understand, the kernel will be decompressed at 0x80008000, so there should be enough space for the uncompressed kernel below 0x82000000. But you're right, swapping the two addresses is generally a good idea, and I should do that more often. In this case, there is enough space as the compressed kernel is 7 MB.</td><td class="time"><a href="#t2021-07-30T09:09:48" class="time">09:09</a></td></tr>
<tr id="t2021-07-30T09:14:05"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">if zImage overlaps on 0x83000000, the dtb will replace some code from the zImage even before the zImage is uncompressed, that's what I meant :)</td><td class="time"><a href="#t2021-07-30T09:14:05" class="time">09:14</a></td></tr>
<tr id="t2021-07-30T09:19:00"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: right, I eventually understood :) Thanks for the clarification anyway.</td><td class="time"><a href="#t2021-07-30T09:19:00" class="time">09:19</a></td></tr>
<tr id="t2021-07-30T09:19:46"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">So I agree that's a good idea to copy the DTB below the zImage.</td><td class="time"><a href="#t2021-07-30T09:19:46" class="time">09:19</a></td></tr>
<tr id="t2021-07-30T09:29:18"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">michaelo, qschulz so do you recommend me still to try that michaelo suggested?</td><td class="time"><a href="#t2021-07-30T09:29:18" class="time">09:29</a></td></tr>
<tr id="t2021-07-30T09:32:17"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: given the zImage size, my command would work. But what qschulz proposes is: &quot;tftp 0x83000000 zImage; tftp 0x82000000 imx6ull-microgea-microdev.dtb; bootz 0x83000000 - 0x82000000&quot;</td><td class="time"><a href="#t2021-07-30T09:32:17" class="time">09:32</a></td></tr>
<tr id="t2021-07-30T09:32:17-2"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: that, or you can compare the content of the RAM after loading the kernel from NAND with nand read followed by md to what is to be expected (tftp followed by md for example)</td><td class="time"><a href="#t2021-07-30T09:32:17-2" class="time">09:32</a></td></tr>
<tr id="t2021-07-30T09:32:40"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">Good idea</td><td class="time"><a href="#t2021-07-30T09:32:40" class="time">09:32</a></td></tr>
<tr id="t2021-07-30T09:33:16"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, how can I see the content of the RAM?</td><td class="time"><a href="#t2021-07-30T09:33:16" class="time">09:33</a></td></tr>
<tr id="t2021-07-30T09:33:44"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">md 0x83000000 after tftp or nand read to the same address</td><td class="time"><a href="#t2021-07-30T09:33:44" class="time">09:33</a></td></tr>
<tr id="t2021-07-30T09:35:44"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">michaelo, qschulz <a href="https://bpa.st/QUOA" rel="nofollow">https://bpa.st/QUOA</a></td><td class="time"><a href="#t2021-07-30T09:35:44" class="time">09:35</a></td></tr>
<tr id="t2021-07-30T09:38:15"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: 0x83 in tftp log for the kernel?</td><td class="time"><a href="#t2021-07-30T09:38:15" class="time">09:38</a></td></tr>
<tr id="t2021-07-30T09:38:24"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">otherwise, looks like your zImage is corrupted</td><td class="time"><a href="#t2021-07-30T09:38:24" class="time">09:38</a></td></tr>
<tr id="t2021-07-30T09:40:51"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">well, I don't know why is doing this</td><td class="time"><a href="#t2021-07-30T09:40:51" class="time">09:40</a></td></tr>
<tr id="t2021-07-30T09:41:05"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">because I'm giving the command what you wrote</td><td class="time"><a href="#t2021-07-30T09:41:05" class="time">09:41</a></td></tr>
<tr id="t2021-07-30T09:42:14"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">retype the whole line, there might be some invisible character that messes up the address, U-Boot command line is extremely finicky</td><td class="time"><a href="#t2021-07-30T09:42:14" class="time">09:42</a></td></tr>
<tr id="t2021-07-30T09:42:16"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">lol, now &quot;it worked&quot;</td><td class="time"><a href="#t2021-07-30T09:42:16" class="time">09:42</a></td></tr>
<tr id="t2021-07-30T09:42:27"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I don't know why it was not handling properly the address</td><td class="time"><a href="#t2021-07-30T09:42:27" class="time">09:42</a></td></tr>
<tr id="t2021-07-30T09:42:34"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">but now did something <a href="https://bpa.st/JRVQ" rel="nofollow">https://bpa.st/JRVQ</a></td><td class="time"><a href="#t2021-07-30T09:42:34" class="time">09:42</a></td></tr>
<tr id="t2021-07-30T09:42:59"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, sure it was because that</td><td class="time"><a href="#t2021-07-30T09:42:59" class="time">09:42</a></td></tr>
<tr id="t2021-07-30T09:43:59"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre, qschulz: that's the first time I see this. Not the invisible characters in U-Boot in general, but the invisible characters in the addresses. I guess I was just lucky so far.</td><td class="time"><a href="#t2021-07-30T09:43:59" class="time">09:43</a></td></tr>
<tr id="t2021-07-30T09:44:39"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">so now it's apparently failing because there is no rootfs, right?</td><td class="time"><a href="#t2021-07-30T09:44:39" class="time">09:44</a></td></tr>
<tr id="t2021-07-30T09:45:01"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">because I can see at 708 line VFS: Cannot open root device &quot;ubi0:rootfs&quot; or unknown-block(0,0): error -19</td><td class="time"><a href="#t2021-07-30T09:45:01" class="time">09:45</a></td></tr>
<tr id="t2021-07-30T09:45:48"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">michaelo: it happens so often to me when using Ctrl+W to (try) to remove the last word. Using Delete and not backspace also messes up the command line.</td><td class="time"><a href="#t2021-07-30T09:45:48" class="time">09:45</a></td></tr>
<tr id="t2021-07-30T09:46:11"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: looks like it</td><td class="time"><a href="#t2021-07-30T09:46:11" class="time">09:46</a></td></tr>
<tr id="t2021-07-30T09:46:22"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">check that your zImage has support for booting ubifs rootfs</td><td class="time"><a href="#t2021-07-30T09:46:22" class="time">09:46</a></td></tr>
<tr id="t2021-07-30T09:46:42"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, how can I check that?</td><td class="time"><a href="#t2021-07-30T09:46:42" class="time">09:46</a></td></tr>
<tr id="t2021-07-30T09:47:02"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">also I'm not sure the rootfs was properly flashed in nand 🤔</td><td class="time"><a href="#t2021-07-30T09:47:02" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:47:04"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">menuconfig</td><td class="time"><a href="#t2021-07-30T09:47:04" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:47:21"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, in u-boot?</td><td class="time"><a href="#t2021-07-30T09:47:21" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:47:22"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: yeah that's unlikely since ubifsls returned something correct in your earlier logs</td><td class="time"><a href="#t2021-07-30T09:47:22" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:47:36"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">michaelo: The invisible character thing can be a pain. I pasted an expression out of a web page into a commandline and caught one. I couldn't understand why grep was not finding things!</td><td class="time"><a href="#t2021-07-30T09:47:36" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:47:36-2"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">no, you want to check if the *kernel* supports it, so kernel menuconfig</td><td class="time"><a href="#t2021-07-30T09:47:36-2" class="time">09:47</a></td></tr>
<tr id="t2021-07-30T09:48:13"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, but in the docker instance where I'm building the image, you mean?</td><td class="time"><a href="#t2021-07-30T09:48:13" class="time">09:48</a></td></tr>
<tr id="t2021-07-30T09:49:02"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">michaelo: thanks for working on that docs change :)</td><td class="time"><a href="#t2021-07-30T09:49:02" class="time">09:49</a></td></tr>
<tr id="t2021-07-30T09:50:56"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: and thanks for the review, I spent quite a while trying to avoid mistakes and you found a load :)</td><td class="time"><a href="#t2021-07-30T09:50:56" class="time">09:50</a></td></tr>
<tr id="t2021-07-30T09:51:21"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I'm not sure what are you talking about, I mean ... apparently menuconfig is a tool? what I should use to check the zImage? at any host? should I boot the zImage in some particular way? ...</td><td class="time"><a href="#t2021-07-30T09:51:21" class="time">09:51</a></td></tr>
<tr id="t2021-07-30T09:52:29"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">RP: your text was already pretty good. Such &quot;raw&quot; text is perfect for me!</td><td class="time"><a href="#t2021-07-30T09:52:29" class="time">09:52</a></td></tr>
<tr id="t2021-07-30T09:54:06"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">also ... the problem was in the addresses in the ker_dtb_fs.scr script?</td><td class="time"><a href="#t2021-07-30T09:54:06" class="time">09:54</a></td></tr>
<tr id="t2021-07-30T09:54:15"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">should I replace them with these you gave me?</td><td class="time"><a href="#t2021-07-30T09:54:15" class="time">09:54</a></td></tr>
<tr id="t2021-07-30T09:55:07"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I guess the point aren't those addresses themselves but the ${loadaddr} and ${fdt_addr} variables, right?</td><td class="time"><a href="#t2021-07-30T09:55:07" class="time">09:55</a></td></tr>
<tr id="t2021-07-30T10:10:18"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: actually reading Bootlin's embedded Linux training materials should be profitable for several of your questions: <a href="https://bootlin.com/doc/training/embedded-linux/embedded-linux-slides.pdf" rel="nofollow">https://bootlin.com/doc/training/embedded-linux/embedded-linux-slides.pdf</a></td><td class="time"><a href="#t2021-07-30T10:10:18" class="time">10:10</a></td></tr>
<tr id="t2021-07-30T10:11:52"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">oh, thank you very much, michaelo 😁</td><td class="time"><a href="#t2021-07-30T10:11:52" class="time">10:11</a></td></tr>
<tr id="t2021-07-30T10:22:46"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: it's sometimes useful to be able to catch typos/mistakes easily but it's often a curse, I seem to always see them and be bothered by them 😭 For documentation, that's nice though :)</td><td class="time"><a href="#t2021-07-30T10:22:46" class="time">10:22</a></td></tr>
<tr id="t2021-07-30T10:36:02"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: indeed, you have a gift, not a curse!</td><td class="time"><a href="#t2021-07-30T10:36:02" class="time">10:36</a></td></tr>
<tr id="t2021-07-30T10:36:27"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: however, do you catch *your own typos* that easily too?</td><td class="time"><a href="#t2021-07-30T10:36:27" class="time">10:36</a></td></tr>
<tr id="t2021-07-30T10:37:31"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: I have to laugh as the end of your last email had a small bit of grammar that made me wince :)</td><td class="time"><a href="#t2021-07-30T10:37:31" class="time">10:37</a></td></tr>
<tr id="t2021-07-30T10:38:38"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">qschulz: I agree though that it can be a curse indeed, especially when you're reading a text or source code, and are too distracted by the spelling or style mistakes that it's hard to focus on the meaning instead.</td><td class="time"><a href="#t2021-07-30T10:38:38" class="time">10:38</a></td></tr>
<tr id="t2021-07-30T10:40:03"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">michaelo: I just feel bad if I don't catch my own typos, so I proof read my texts too many times and rephrase often. Since English is not my native language, I end up making mistakes anyway :D</td><td class="time"><a href="#t2021-07-30T10:40:03" class="time">10:40</a></td></tr>
<tr id="t2021-07-30T10:41:27"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: and now I'm curious :) please enlighten me :)</td><td class="time"><a href="#t2021-07-30T10:41:27" class="time">10:41</a></td></tr>
<tr id="t2021-07-30T10:42:44"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: &quot;the script done by&quot; would usually be written/merged/created/added but not done by</td><td class="time"><a href="#t2021-07-30T10:42:44" class="time">10:42</a></td></tr>
<tr id="t2021-07-30T10:43:32"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: made by was probably what I wanted to go for</td><td class="time"><a href="#t2021-07-30T10:43:32" class="time">10:43</a></td></tr>
<tr id="t2021-07-30T10:43:33"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: Just made me smile in the context of this discussion, there are plenty of native speakers who'd say that. It just isn't technically correct :)</td><td class="time"><a href="#t2021-07-30T10:43:33" class="time">10:43</a></td></tr>
<tr id="t2021-07-30T10:43:43"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">are dtb and zImage generated always I build my image? 🤔</td><td class="time"><a href="#t2021-07-30T10:43:43" class="time">10:43</a></td></tr>
<tr id="t2021-07-30T10:43:53"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: do and make are the same wnch :)</td><td class="time"><a href="#t2021-07-30T10:43:53" class="time">10:43</a></td></tr>
<tr id="t2021-07-30T10:43:59"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">the same word in French*</td><td class="time"><a href="#t2021-07-30T10:43:59" class="time">10:43</a></td></tr>
<tr id="t2021-07-30T10:44:17"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">how can I force the zImage and dtb regeneration?</td><td class="time"><a href="#t2021-07-30T10:44:17" class="time">10:44</a></td></tr>
<tr id="t2021-07-30T10:44:19"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">it's a mistake very often ~done~ made by French speaker :/</td><td class="time"><a href="#t2021-07-30T10:44:19" class="time">10:44</a></td></tr>
<tr id="t2021-07-30T10:44:44"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">~~done~~? what's the strikethrough magic characters on IRC :p</td><td class="time"><a href="#t2021-07-30T10:44:44" class="time">10:44</a></td></tr>
<tr id="t2021-07-30T10:44:49"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: and your other languages will be way better than mine :)</td><td class="time"><a href="#t2021-07-30T10:44:49" class="time">10:44</a></td></tr>
<tr id="t2021-07-30T10:45:16"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">qschulz: a lot of non-native speakers have specific common errors they make</td><td class="time"><a href="#t2021-07-30T10:45:16" class="time">10:45</a></td></tr>
<tr id="t2021-07-30T10:46:31"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: I'm always wondering how bad it is for native speakers to have to converse in their own language with people''s second/third/4+ language with so many mistakes, syntactical/grammar issues</td><td class="time"><a href="#t2021-07-30T10:46:31" class="time">10:46</a></td></tr>
<tr id="t2021-07-30T10:47:36"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">I tried to bother my former Irish colleague to at least tell me when something was horrendously wrong but he never did... smh how am I going to learn from my mistakes if I don't see them :)</td><td class="time"><a href="#t2021-07-30T10:47:36" class="time">10:47</a></td></tr>
<tr id="t2021-07-30T10:48:06"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">LetoThe2nd: the usual &quot;juste&quot; typo for french people :D</td><td class="time"><a href="#t2021-07-30T10:48:06" class="time">10:48</a></td></tr>
<tr id="t2021-07-30T10:48:14"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: With English it gets interesting as there are many strong dialects/accents. I live in an area with a particularly strong dialect (geordie)</td><td class="time"><a href="#t2021-07-30T10:48:14" class="time">10:48</a></td></tr>
<tr id="t2021-07-30T10:48:24"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">or I am agree, this one hurts a lot :p</td><td class="time"><a href="#t2021-07-30T10:48:24" class="time">10:48</a></td></tr>
<tr id="t2021-07-30T10:48:28"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">qschulz: for Germans, its &quot;get&quot; vs. &quot;become&quot;</td><td class="time"><a href="#t2021-07-30T10:48:28" class="time">10:48</a></td></tr>
<tr id="t2021-07-30T10:48:42"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">will?</td><td class="time"><a href="#t2021-07-30T10:48:42" class="time">10:48</a></td></tr>
<tr id="t2021-07-30T10:49:01"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">qschulz: for slavik language, i have the impression that they often leave out &quot;the&quot; or &quot;a&quot;</td><td class="time"><a href="#t2021-07-30T10:49:01" class="time">10:49</a></td></tr>
<tr id="t2021-07-30T10:49:10"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">qschulz: nope, german &quot;werden&quot;</td><td class="time"><a href="#t2021-07-30T10:49:10" class="time">10:49</a></td></tr>
<tr id="t2021-07-30T10:49:33"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">LetoThe2nd: yup, I had a Ukrainian colleague who did that a lot</td><td class="time"><a href="#t2021-07-30T10:49:33" class="time">10:49</a></td></tr>
<tr id="t2021-07-30T10:49:33-2"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: that does mean I'm fairly tolerant. There are words I wouldn't use in conversations with non-locals</td><td class="time"><a href="#t2021-07-30T10:49:33-2" class="time">10:49</a></td></tr>
<tr id="t2021-07-30T10:54:24"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: BTW, please correct me if you read something that could fuel your nightmares :)</td><td class="time"><a href="#t2021-07-30T10:54:24" class="time">10:54</a></td></tr>
<tr id="t2021-07-30T10:55:35"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: I will, in general I don't see things to be honest. As I said, that one just made me smile given the discussion at the time</td><td class="time"><a href="#t2021-07-30T10:55:35" class="time">10:55</a></td></tr>
<tr id="t2021-07-30T11:00:44"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: I think that's a rule. If you correct someone's grammar, you'll make a mistake yourself while arguing/correcting/explaining :)</td><td class="time"><a href="#t2021-07-30T11:00:44" class="time">11:00</a></td></tr>
<tr id="t2021-07-30T11:07:14"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">&quot;German has more dialects then C&quot; - should explain it all ;) - Oida</td><td class="time"><a href="#t2021-07-30T11:07:14" class="time">11:07</a></td></tr>
<tr id="t2021-07-30T11:08:41"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">Genau</td><td class="time"><a href="#t2021-07-30T11:08:41" class="time">11:08</a></td></tr>
<tr id="t2021-07-30T11:08:44"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">OIDA</td><td class="time"><a href="#t2021-07-30T11:08:44" class="time">11:08</a></td></tr>
<tr id="t2021-07-30T11:09:56"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: it depends. But usually if you don't pass arguments to `make`, yes. Otherwise, you can pass `zImage dtbs` and that'll compile what you need</td><td class="time"><a href="#t2021-07-30T11:09:56" class="time">11:09</a></td></tr>
<tr id="t2021-07-30T11:10:49"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, but when I use bitbake to build the image I just use `bitbake &lt;image-recipe&gt;` ...</td><td class="time"><a href="#t2021-07-30T11:10:49" class="time">11:10</a></td></tr>
<tr id="t2021-07-30T11:10:55"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">I mean, I'm not using make 🤔</td><td class="time"><a href="#t2021-07-30T11:10:55" class="time">11:10</a></td></tr>
<tr id="t2021-07-30T11:12:46"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">wyre: bitbake does. But it's safe to assume that your zImage and dtbs are compiled when needed</td><td class="time"><a href="#t2021-07-30T11:12:46" class="time">11:12</a></td></tr>
<tr id="t2021-07-30T11:14:53"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">qschulz, I've removed manually tmp/deploy/images/&lt;machine&gt; folder and run again `bitbake &lt;image&gt;`, but it does not produce again the zImage and the dtb 😞</td><td class="time"><a href="#t2021-07-30T11:14:53" class="time">11:14</a></td></tr>
<tr id="t2021-07-30T11:17:09"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">because you're not supposed to do that IIRC</td><td class="time"><a href="#t2021-07-30T11:17:09" class="time">11:17</a></td></tr>
<tr id="t2021-07-30T11:17:17"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">remove the whole tmpdir or change nothing in it</td><td class="time"><a href="#t2021-07-30T11:17:17" class="time">11:17</a></td></tr>
<tr id="t2021-07-30T11:17:33"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">(make sure you have sstate-cache and downloads directories somewhere safe :)</td><td class="time"><a href="#t2021-07-30T11:17:33" class="time">11:17</a></td></tr>
<tr id="t2021-07-30T11:17:59"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">so I should remove the whole tmp dir? 🤔</td><td class="time"><a href="#t2021-07-30T11:17:59" class="time">11:17</a></td></tr>
<tr id="t2021-07-30T11:22:26"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">wyre: bitbake &lt;image&gt; -c clean</td><td class="time"><a href="#t2021-07-30T11:22:26" class="time">11:22</a></td></tr>
<tr id="t2021-07-30T11:22:48"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">and maybe virtual/kernel too since you messed with that :)</td><td class="time"><a href="#t2021-07-30T11:22:48" class="time">11:22</a></td></tr>
<tr id="t2021-07-30T11:24:11"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">I always forget about clean, I always go for the nuke :p</td><td class="time"><a href="#t2021-07-30T11:24:11" class="time">11:24</a></td></tr>
<tr id="t2021-07-30T11:33:31"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">nuke++</td><td class="time"><a href="#t2021-07-30T11:33:31" class="time">11:33</a></td></tr>
<tr id="t2021-07-30T11:45:04"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">hi all -- I can have a recipe in recipes-core/images/foo.bb and multiple append in recipes-*/images/foo.bbappend, and all will be considered, correct?</td><td class="time"><a href="#t2021-07-30T11:45:04" class="time">11:45</a></td></tr>
<tr id="t2021-07-30T11:45:42"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">vd: correct.</td><td class="time"><a href="#t2021-07-30T11:45:42" class="time">11:45</a></td></tr>
<tr id="t2021-07-30T11:46:25"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">I have many _bar overrides in my recipe so I wanted to isolate them, I moved them in recipes-bar/images/foo.bbappend. Just wanted to make sure this is supposed to work.</td><td class="time"><a href="#t2021-07-30T11:46:25" class="time">11:46</a></td></tr>
<tr id="t2021-07-30T11:46:30"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">RP, I'd say -c clean doesn't even remove the tmp/deploy/images dirs</td><td class="time"><a href="#t2021-07-30T11:46:30" class="time">11:46</a></td></tr>
<tr id="t2021-07-30T11:50:17"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: bitbake-layers show-appends can tell you if it works ;)</td><td class="time"><a href="#t2021-07-30T11:50:17" class="time">11:50</a></td></tr>
<tr id="t2021-07-30T11:51:07"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">qschulz great thanks!</td><td class="time"><a href="#t2021-07-30T11:51:07" class="time">11:51</a></td></tr>
<tr id="t2021-07-30T11:51:13"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">last question, if foo.bb has do_rootfs[depends] += &quot;bar:do_build&quot;, do I need to change this line if I'm now building the image from a multiconfig with mc:foo:foo?</td><td class="time"><a href="#t2021-07-30T11:51:13" class="time">11:51</a></td></tr>
<tr id="t2021-07-30T11:53:05"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">in other words, does &quot;depends&quot; target the current multiconfig (if any) or does it target the default local config (as in mc::foo)?</td><td class="time"><a href="#t2021-07-30T11:53:05" class="time">11:53</a></td></tr>
<tr id="t2021-07-30T11:54:00"><th class="nick" style="background: #4d4d93">wyre</th><td class="text" style="color: #4d4d93">michaelo, and you were right, zImage is 7.5MB large and dtb is just 30KB large 🤔</td><td class="time"><a href="#t2021-07-30T11:54:00" class="time">11:54</a></td></tr>
<tr id="t2021-07-30T11:54:40"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: I don't know but I think you need mc: only when doing cross-references. So if the recipe in which do_rootfs is and bar recipe are for the same machine, no need I'd say for mc:</td><td class="time"><a href="#t2021-07-30T11:54:40" class="time">11:54</a></td></tr>
<tr id="t2021-07-30T11:57:11"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">qschulz ok indeed I'd expect it to work as if BB_CURRENT_MC was specified. But I see a bench of image recipes with mc: prefix being built, so I'm kinda worried</td><td class="time"><a href="#t2021-07-30T11:57:11" class="time">11:57</a></td></tr>
<tr id="t2021-07-30T12:09:52"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">for example both mc:foo:linux-ti-staging and linux-ti-staging are being built. Same for an image recipe. Should I specify do_rootfs[mcdepends] += &quot;${BB_CURRENT_MC}:${BB_CURRENT_MC}:bar:do_build&quot; from now on?</td><td class="time"><a href="#t2021-07-30T12:09:52" class="time">12:09</a></td></tr>
<tr id="t2021-07-30T12:10:54"><th class="nick" style="background: #a25555">vd</th><td class="text" style="color: #a25555">(unless something like do_rootfs[depends]_foo works with an override fashion)</td><td class="time"><a href="#t2021-07-30T12:10:54" class="time">12:10</a></td></tr>
<tr id="t2021-07-30T12:31:34"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">wyre: it will remove specific contents, not the dir itself</td><td class="time"><a href="#t2021-07-30T12:31:34" class="time">12:31</a></td></tr>
<tr id="t2021-07-30T12:55:15"><th class="nick" style="background: #8c4a4a">michaelo</th><td class="text" style="color: #8c4a4a">wyre: this sounds normal to me</td><td class="time"><a href="#t2021-07-30T12:55:15" class="time">12:55</a></td></tr>
<tr id="t2021-07-30T13:12:00"><th class="nick" style="background: #57a657">vd91</th><td class="text" style="color: #57a657">every time I rm -rf build/ and rebuild, it looks like linux-ti-staging recompiles from scratch (taking several minutes in do_compile). Is it because it's -git version? Like any other package it should be already built and retrieved from my (external) sstate-cache</td><td class="time"><a href="#t2021-07-30T13:12:00" class="time">13:12</a></td></tr>
<tr id="t2021-07-30T13:12:36"><td class="nickchange" colspan="2">*** vd91 is now known as vd</td><td><a href="#t2021-07-30T13:12:36" class="time">13:12</a></td></tr>
<tr id="t2021-07-30T13:14:56"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: maybe bitbake-diffsig will be able to tell you why</td><td class="time"><a href="#t2021-07-30T13:14:56" class="time">13:14</a></td></tr>
<tr id="t2021-07-30T13:19:22"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">getting closer but still haven't cracked building an out-of-tree kernel module yet - here's a censored version of my recipe and the error i'm getting <a href="https://gist.github.com/jordemort/f62a65e64513fa9fd1386d1a776aa149" rel="nofollow">https://gist.github.com/jordemort/f62a65e64513fa9fd1386d1a776aa149</a></td><td class="time"><a href="#t2021-07-30T13:19:22" class="time">13:19</a></td></tr>
<tr id="t2021-07-30T13:19:46"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">it builds, but then when i try and build my image i get `nothing provides kernel-5.4.24+gd61efa3e9b18 needed by kernel-module-modname-5.4.24+gd61efa3e9b18-5.9.0.8+37203.20200904+COEX20200103+1717-r0.sercomm_na503s`</td><td class="time"><a href="#t2021-07-30T13:19:46" class="time">13:19</a></td></tr>
<tr id="t2021-07-30T13:20:44"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">it looks like `kernel-abiversion` is changing out from under me? in a previous iteration of this i had all my modules installed under /lib/modules/5.4.24+(some hex string) and this module installed under /lib/modules/5.4.24+(some entirely different hex string)</td><td class="time"><a href="#t2021-07-30T13:20:44" class="time">13:20</a></td></tr>
<tr id="t2021-07-30T13:21:06"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">so i've made progress from there in the sense that the package manager now recognizes there's a problem, at least</td><td class="time"><a href="#t2021-07-30T13:21:06" class="time">13:21</a></td></tr>
<tr id="t2021-07-30T13:34:01"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">jordemort: <a href="https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-skeleton/recipes-kernel/hello-mod" rel="nofollow">https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-skeleton/recipes-kernel/hello-mod</a> should help you get the basics I think</td><td class="time"><a href="#t2021-07-30T13:34:01" class="time">13:34</a></td></tr>
<tr id="t2021-07-30T13:34:18"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">Look also into the makefile and patch your OoT kernel driver's makefile if need be</td><td class="time"><a href="#t2021-07-30T13:34:18" class="time">13:34</a></td></tr>
<tr id="t2021-07-30T13:35:37"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">qschulz thanks, will try.</td><td class="time"><a href="#t2021-07-30T13:35:37" class="time">13:35</a></td></tr>
<tr id="t2021-07-30T13:35:46"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">qschulz: i'm pretty sure i've got everything from hello-mod covered</td><td class="time"><a href="#t2021-07-30T13:35:46" class="time">13:35</a></td></tr>
<tr id="t2021-07-30T13:35:58"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">can do_rootfs[depends] += be written somehow with a _foo override?</td><td class="time"><a href="#t2021-07-30T13:35:58" class="time">13:35</a></td></tr>
<tr id="t2021-07-30T13:36:01"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">it builds the module and builds packages for it, the kernel-abiversion is just mismatched</td><td class="time"><a href="#t2021-07-30T13:36:01" class="time">13:36</a></td></tr>
<tr id="t2021-07-30T13:36:36"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">and i'm not sure why or how that's changing under me</td><td class="time"><a href="#t2021-07-30T13:36:36" class="time">13:36</a></td></tr>
<tr id="t2021-07-30T13:37:20"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">if i completely blow away sstate, then it will all build consistently</td><td class="time"><a href="#t2021-07-30T13:37:20" class="time">13:37</a></td></tr>
<tr id="t2021-07-30T13:38:15"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">RP: perfect, thanks, lets see how many I've missed :)</td><td class="time"><a href="#t2021-07-30T13:38:15" class="time">13:38</a></td></tr>
<tr id="t2021-07-30T13:40:48"><td class="action" colspan="2">* RP sets a data for merging all this to core of Monday</td><td><a href="#t2021-07-30T13:40:48" class="time">13:40</a></td></tr>
<tr id="t2021-07-30T13:42:43"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">can we test and merge the bitbake compatibility change to older bitbake branches before that?</td><td class="time"><a href="#t2021-07-30T13:42:43" class="time">13:42</a></td></tr>
<tr id="t2021-07-30T13:44:56"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: it just merged</td><td class="time"><a href="#t2021-07-30T13:44:56" class="time">13:44</a></td></tr>
<tr id="t2021-07-30T13:45:30"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: admittedly it does need more testing but hopefully I got it right</td><td class="time"><a href="#t2021-07-30T13:45:30" class="time">13:45</a></td></tr>
<tr id="t2021-07-30T13:46:05"><th class="nick" style="background: #b15db1">override</th><td class="text" style="color: #b15db1">is there a class or something I can inherit to work with yarn in recipes ?</td><td class="time"><a href="#t2021-07-30T13:46:05" class="time">13:46</a></td></tr>
<tr id="t2021-07-30T13:46:26"><th class="nick" style="background: #b15db1">override</th><td class="text" style="color: #b15db1">kinda like how setuptools etc work with python modules</td><td class="time"><a href="#t2021-07-30T13:46:26" class="time">13:46</a></td></tr>
<tr id="t2021-07-30T13:50:14"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">override: nope, not that i know of. also check the layerindex, but i'm pretty sure there is none.</td><td class="time"><a href="#t2021-07-30T13:50:14" class="time">13:50</a></td></tr>
<tr id="t2021-07-30T14:00:18"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">armpit: feel free to use your version of the convertsion, my WIP wasn't very well tested anyway as we use only smack recipe from main security-layer and BBMASK everything else</td><td class="time"><a href="#t2021-07-30T14:00:18" class="time">14:00</a></td></tr>
<tr id="t2021-07-30T14:03:15"><th class="nick" style="background: #5fb4b4">tlwoerner</th><td class="text" style="color: #5fb4b4">zeddii: could you recommend a MACHINE/BSP to study as a reference that provides a good example of using the kmeta and friends?</td><td class="time"><a href="#t2021-07-30T14:03:15" class="time">14:03</a></td></tr>
<tr id="t2021-07-30T14:05:41"><td class="action" colspan="2">* RP tweaks the conversion script so you can pass mbox/diffs through it</td><td><a href="#t2021-07-30T14:05:41" class="time">14:05</a></td></tr>
<tr id="t2021-07-30T14:05:50"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">this is such a bad idea but...</td><td class="time"><a href="#t2021-07-30T14:05:50" class="time">14:05</a></td></tr>
<tr id="t2021-07-30T14:13:57"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">we love bad ideas.</td><td class="time"><a href="#t2021-07-30T14:13:57" class="time">14:13</a></td></tr>
<tr id="t2021-07-30T14:15:18"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: I had thought that VAR_var would mean _var is necessarily an override?</td><td class="time"><a href="#t2021-07-30T14:15:18" class="time">14:15</a></td></tr>
<tr id="t2021-07-30T14:15:48"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: you can have a variable called VAR_var</td><td class="time"><a href="#t2021-07-30T14:15:48" class="time">14:15</a></td></tr>
<tr id="t2021-07-30T14:16:08"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">If you want to ship tweaks for images, how do you choose between writing a class to inherit from or writing image features?</td><td class="time"><a href="#t2021-07-30T14:16:08" class="time">14:16</a></td></tr>
<tr id="t2021-07-30T14:16:10"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">I'm not saying it is a good idea, just that it is allowed</td><td class="time"><a href="#t2021-07-30T14:16:10" class="time">14:16</a></td></tr>
<tr id="t2021-07-30T14:16:28"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: yeah, makes it so much harder to understand what is an override and what is not... which will be clarified with the new syntax :)</td><td class="time"><a href="#t2021-07-30T14:16:28" class="time">14:16</a></td></tr>
<tr id="t2021-07-30T14:16:48"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: exactly</td><td class="time"><a href="#t2021-07-30T14:16:48" class="time">14:16</a></td></tr>
<tr id="t2021-07-30T14:17:04"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: I did have to go and look at what that test was doing</td><td class="time"><a href="#t2021-07-30T14:17:04" class="time">14:17</a></td></tr>
<tr id="t2021-07-30T14:17:28"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">I'll probably need to do something similar for the modifications I suggested for the other tests</td><td class="time"><a href="#t2021-07-30T14:17:28" class="time">14:17</a></td></tr>
<tr id="t2021-07-30T14:17:49"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">almost got caught by :some_val: override until I remember x86_64 is a valid override too</td><td class="time"><a href="#t2021-07-30T14:17:49" class="time">14:17</a></td></tr>
<tr id="t2021-07-30T14:17:53"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">what a nightmare</td><td class="time"><a href="#t2021-07-30T14:17:53" class="time">14:17</a></td></tr>
<tr id="t2021-07-30T14:18:12"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: I replied about that, before you go too deep have a look at my other patch. I left the automated fixes and the manual ones as two patches</td><td class="time"><a href="#t2021-07-30T14:18:12" class="time">14:18</a></td></tr>
<tr id="t2021-07-30T14:18:36"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: it is a total nightmare, hence the desire to add this syntax :)</td><td class="time"><a href="#t2021-07-30T14:18:36" class="time">14:18</a></td></tr>
<tr id="t2021-07-30T14:19:16"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: FWIW bitbake-selftest does pass after the changes submitted</td><td class="time"><a href="#t2021-07-30T14:19:16" class="time">14:19</a></td></tr>
<tr id="t2021-07-30T14:19:38"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">Yeah but if the tests are false positives... :p</td><td class="time"><a href="#t2021-07-30T14:19:38" class="time">14:19</a></td></tr>
<tr id="t2021-07-30T14:20:02"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: happy to have a second opinion on that</td><td class="time"><a href="#t2021-07-30T14:20:02" class="time">14:20</a></td></tr>
<tr id="t2021-07-30T14:20:18"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: and all that was needed to trigger this change was to present a talk at YP summit :p</td><td class="time"><a href="#t2021-07-30T14:20:18" class="time">14:20</a></td></tr>
<tr id="t2021-07-30T14:20:31"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">(let me believe please)</td><td class="time"><a href="#t2021-07-30T14:20:31" class="time">14:20</a></td></tr>
<tr id="t2021-07-30T14:20:40"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: definitely :)</td><td class="time"><a href="#t2021-07-30T14:20:40" class="time">14:20</a></td></tr>
<tr id="t2021-07-30T14:21:09"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: at least I've an opportunity to do a v2 :p</td><td class="time"><a href="#t2021-07-30T14:21:09" class="time">14:21</a></td></tr>
<tr id="t2021-07-30T14:21:23"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">not that much is supposed to change</td><td class="time"><a href="#t2021-07-30T14:21:23" class="time">14:21</a></td></tr>
<tr id="t2021-07-30T14:21:42"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">though I'm keeping an eye on this new operator if it's still on the table</td><td class="time"><a href="#t2021-07-30T14:21:42" class="time">14:21</a></td></tr>
<tr id="t2021-07-30T14:22:01"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">(admittedly missed a few mails :) )</td><td class="time"><a href="#t2021-07-30T14:22:01" class="time">14:22</a></td></tr>
<tr id="t2021-07-30T14:22:18"><th class="nick" style="background: #b86161">armpit</th><td class="text" style="color: #b86161">JaMa: k</td><td class="time"><a href="#t2021-07-30T14:22:18" class="time">14:22</a></td></tr>
<tr id="t2021-07-30T14:24:34"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: new operator is uncertain at the moment. One step at a time</td><td class="time"><a href="#t2021-07-30T14:24:34" class="time">14:24</a></td></tr>
<tr id="t2021-07-30T14:24:40"><td class="action" colspan="2">* RP is struggling with this change alone</td><td><a href="#t2021-07-30T14:24:40" class="time">14:24</a></td></tr>
<tr id="t2021-07-30T14:35:16"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">what is the proper syntax to override a variable with flag? SOMEVAR[flag]_foo ?</td><td class="time"><a href="#t2021-07-30T14:35:16" class="time">14:35</a></td></tr>
<tr id="t2021-07-30T14:36:24"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">RP: the check is already finding more and more places missed by the script (I've shared some in reply to ML, but after fixing them it finds more and more :))</td><td class="time"><a href="#t2021-07-30T14:36:24" class="time">14:36</a></td></tr>
<tr id="t2021-07-30T14:37:11"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">e.g. RDEPENDS_${PN}-apply_append_class-target = &quot; ${VIRTUAL-RUNTIME_bash}&quot;</td><td class="time"><a href="#t2021-07-30T14:37:11" class="time">14:37</a></td></tr>
<tr id="t2021-07-30T14:37:19"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: It did find one issue in my OE-core patch too</td><td class="time"><a href="#t2021-07-30T14:37:19" class="time">14:37</a></td></tr>
<tr id="t2021-07-30T14:37:43"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: we might want to remove some of the exclusions in the core script for other layers</td><td class="time"><a href="#t2021-07-30T14:37:43" class="time">14:37</a></td></tr>
<tr id="t2021-07-30T14:37:58"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: I think its too specific to core</td><td class="time"><a href="#t2021-07-30T14:37:58" class="time">14:37</a></td></tr>
<tr id="t2021-07-30T14:38:33"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: a list of the issues you're finding might be helpful so we know which exclusions to consider dropping</td><td class="time"><a href="#t2021-07-30T14:38:33" class="time">14:38</a></td></tr>
<tr id="t2021-07-30T14:38:51"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">my reasoning is core is basically done and it would be better to be more widely useful</td><td class="time"><a href="#t2021-07-30T14:38:51" class="time">14:38</a></td></tr>
<tr id="t2021-07-30T14:40:50"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">e.g. do_generate_toolchain_file_append_class-native&nbsp;&nbsp;was skipped due to &quot;file_append&quot; in the exceptions</td><td class="time"><a href="#t2021-07-30T14:40:50" class="time">14:40</a></td></tr>
<tr id="t2021-07-30T14:41:11"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">but hard to imagine what were the cases where you needed &quot;file_append&quot; in the exceptions</td><td class="time"><a href="#t2021-07-30T14:41:11" class="time">14:41</a></td></tr>
<tr id="t2021-07-30T14:41:38"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: there are test cases with that name in core but this is why I'm thinking we should drop it</td><td class="time"><a href="#t2021-07-30T14:41:38" class="time">14:41</a></td></tr>
<tr id="t2021-07-30T14:42:25"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">but the same would happen in oe-core if here is do_generate_toolchain_file_append somewhere, right?</td><td class="time"><a href="#t2021-07-30T14:42:25" class="time">14:42</a></td></tr>
<tr id="t2021-07-30T14:43:12"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: yes</td><td class="time"><a href="#t2021-07-30T14:43:12" class="time">14:43</a></td></tr>
<tr id="t2021-07-30T14:51:34"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">does SOMEVAR[flag]_machine += works?</td><td class="time"><a href="#t2021-07-30T14:51:34" class="time">14:51</a></td></tr>
<tr id="t2021-07-30T15:03:50"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">RP: does this need a change? <a href="https://lists.openembedded.org/g/openembedded-core/topic/84439903?p=Created,,,20,1,0,0::recentpostdate%2Fsticky,,,20,2,0,84439903" rel="nofollow">https://lists.openembedded.org/g/openembedded-core/topic/84439903?p=Created,,,20,1,0,0::recentpostdate%2Fsticky,,,20,2,0,84439903</a></td><td class="time"><a href="#t2021-07-30T15:03:50" class="time">15:03</a></td></tr>
<tr id="t2021-07-30T15:05:10"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: for the new syntax?</td><td class="time"><a href="#t2021-07-30T15:05:10" class="time">15:05</a></td></tr>
<tr id="t2021-07-30T15:12:02"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">ooh i think i figured it out</td><td class="time"><a href="#t2021-07-30T15:12:02" class="time">15:12</a></td></tr>
<tr id="t2021-07-30T15:12:22"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">i'm using meta-freescale and the linux-imx kernel recipe and there's an fsl-kernel-localversion that seems to be fooling w/ things</td><td class="time"><a href="#t2021-07-30T15:12:22" class="time">15:12</a></td></tr>
<tr id="t2021-07-30T15:13:04"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">qschulz no for the current syntax</td><td class="time"><a href="#t2021-07-30T15:13:04" class="time">15:13</a></td></tr>
<tr id="t2021-07-30T15:15:26"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">qschulz is there a new syntax supporting this already?</td><td class="time"><a href="#t2021-07-30T15:15:26" class="time">15:15</a></td></tr>
<tr id="t2021-07-30T15:16:16"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: just been posted to the bitbake-devel ML, that's what we were briefly discussing earlier</td><td class="time"><a href="#t2021-07-30T15:16:16" class="time">15:16</a></td></tr>
<tr id="t2021-07-30T15:16:24"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">hence my question :)</td><td class="time"><a href="#t2021-07-30T15:16:24" class="time">15:16</a></td></tr>
<tr id="t2021-07-30T15:16:26"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">vd: that one isn't really used as an override so no</td><td class="time"><a href="#t2021-07-30T15:16:26" class="time">15:16</a></td></tr>
<tr id="t2021-07-30T15:17:02"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: I think it was just meant as a ping and unrelated to new override syntax? let's see :)</td><td class="time"><a href="#t2021-07-30T15:17:02" class="time">15:17</a></td></tr>
<tr id="t2021-07-30T15:19:22"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: oh</td><td class="time"><a href="#t2021-07-30T15:19:22" class="time">15:19</a></td></tr>
<tr id="t2021-07-30T15:19:44"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">but it already merged: <a href="http://git.yoctoproject.org/cgit.cgi/poky/commit/?id=a58b9a291dc251005a3f2e44766938c3c57bf2ff" rel="nofollow">http://git.yoctoproject.org/cgit.cgi/poky/commit/?id=a58b9a291dc251005a3f2e44766938c3c57bf2ff</a> ?</td><td class="time"><a href="#t2021-07-30T15:19:44" class="time">15:19</a></td></tr>
<tr id="t2021-07-30T15:22:25"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">qschulz my bad. So I guess the current syntax doesn't support override for do_rootfs[depends] += neither, does it?</td><td class="time"><a href="#t2021-07-30T15:22:25" class="time">15:22</a></td></tr>
<tr id="t2021-07-30T15:23:08"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">RP: my bad, I'm still not used to patches getting applied without a reply ^^</td><td class="time"><a href="#t2021-07-30T15:23:08" class="time">15:23</a></td></tr>
<tr id="t2021-07-30T15:24:05"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">vd: try do_rootfs_override[depends] I guess?</td><td class="time"><a href="#t2021-07-30T15:24:05" class="time">15:24</a></td></tr>
<tr id="t2021-07-30T15:24:09"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">vd: it isn't ideal but replying to them all just isn't feasible and we don't have the right automation in place to do it :(</td><td class="time"><a href="#t2021-07-30T15:24:09" class="time">15:24</a></td></tr>
<tr id="t2021-07-30T15:24:27"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">or do_rootfs_override_append_override[depends] and check with bitbake -e but oof, not sure it's ideal :)</td><td class="time"><a href="#t2021-07-30T15:24:27" class="time">15:24</a></td></tr>
<tr id="t2021-07-30T15:25:36"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: I don't know if patchwork can do this for you?</td><td class="time"><a href="#t2021-07-30T15:25:36" class="time">15:25</a></td></tr>
<tr id="t2021-07-30T15:26:02"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">qschulz: kind of but even that isn't working</td><td class="time"><a href="#t2021-07-30T15:26:02" class="time">15:26</a></td></tr>
<tr id="t2021-07-30T15:26:34"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">flags aren't propogated when overrides are applied. the flags will stay on the original variable name</td><td class="time"><a href="#t2021-07-30T15:26:34" class="time">15:26</a></td></tr>
<tr id="t2021-07-30T15:26:39"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">also bitbake -e doesn't show flag values</td><td class="time"><a href="#t2021-07-30T15:26:39" class="time">15:26</a></td></tr>
<tr id="t2021-07-30T15:27:03"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">kergoth: something to be added maybe then :)</td><td class="time"><a href="#t2021-07-30T15:27:03" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:07"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">RP: do you mean that you didn't write a script for your email client to pipe the message in git-am and reply &quot;Applied, thanks.&quot; automatically? ;-D</td><td class="time"><a href="#t2021-07-30T15:27:07" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:17"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">qschulz: the semantics aren't clear.</td><td class="time"><a href="#t2021-07-30T15:27:17" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:21"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">we are not adding overrides to flags</td><td class="time"><a href="#t2021-07-30T15:27:21" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:31"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">RP: pffff you don't know how to have fun</td><td class="time"><a href="#t2021-07-30T15:27:31" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:32"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">the behavior would be unintuitive no matter how we implement it</td><td class="time"><a href="#t2021-07-30T15:27:32" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:43"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">when does a flag value replace vs alter an existing value?</td><td class="time"><a href="#t2021-07-30T15:27:43" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:47"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">it's a mess, no</td><td class="time"><a href="#t2021-07-30T15:27:47" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:27:55"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">I was talking about adding the flag value to bitbake -e :)</td><td class="time"><a href="#t2021-07-30T15:27:55" class="time">15:27</a></td></tr>
<tr id="t2021-07-30T15:28:14"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">vd: if only it were that simple ;-)</td><td class="time"><a href="#t2021-07-30T15:28:14" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:28:16"><th class="nick" style="background: #488888">qschulz</th><td class="text" style="color: #488888">Two topics at once, not easy :p</td><td class="time"><a href="#t2021-07-30T15:28:16" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:28:32"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">adding flags to bitbake-getvar would be the right question</td><td class="time"><a href="#t2021-07-30T15:28:32" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:28:34"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">bitbake -e's output is actually coming from a function that's used in a bunch of places</td><td class="time"><a href="#t2021-07-30T15:28:34" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:28:39"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">yeah, thats what i was going to suggest too :)</td><td class="time"><a href="#t2021-07-30T15:28:39" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:28:57"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">could just make it accept flag syntax. bitbake-getvar 'do_rootfs[depends]'</td><td class="time"><a href="#t2021-07-30T15:28:57" class="time">15:28</a></td></tr>
<tr id="t2021-07-30T15:29:00"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">what is the proper way to add a dependency to task for an override then?</td><td class="time"><a href="#t2021-07-30T15:29:00" class="time">15:29</a></td></tr>
<tr id="t2021-07-30T15:29:12"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">vd: like i suggested earlier, use an intermediate variable if you need to</td><td class="time"><a href="#t2021-07-30T15:29:12" class="time">15:29</a></td></tr>
<tr id="t2021-07-30T15:29:30"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">FOO = &quot;something&quot;; FOO_override = &quot;something else&quot;; do_foo[bar] += &quot;${FOO}&quot;</td><td class="time"><a href="#t2021-07-30T15:29:30" class="time">15:29</a></td></tr>
<tr id="t2021-07-30T15:29:38"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">or whatever</td><td class="time"><a href="#t2021-07-30T15:29:38" class="time">15:29</a></td></tr>
<tr id="t2021-07-30T15:30:19"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">kergoth sorry I missed your reply</td><td class="time"><a href="#t2021-07-30T15:30:19" class="time">15:30</a></td></tr>
<tr id="t2021-07-30T15:30:33"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">np</td><td class="time"><a href="#t2021-07-30T15:30:33" class="time">15:30</a></td></tr>
<tr id="t2021-07-30T15:30:46"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">kergoth ho ok that's nice, ${FOO} can safely be empty I presume?</td><td class="time"><a href="#t2021-07-30T15:30:46" class="time">15:30</a></td></tr>
<tr id="t2021-07-30T15:30:52"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">exactly, yes</td><td class="time"><a href="#t2021-07-30T15:30:52" class="time">15:30</a></td></tr>
<tr id="t2021-07-30T15:38:02"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">kergoth: if foo.bb has FOO = &quot;&quot;; do_foo[bar] += &quot;${FOO}&quot; and foo.bbappend has FOO_override = &quot;something else</td><td class="time"><a href="#t2021-07-30T15:38:02" class="time">15:38</a></td></tr>
<tr id="t2021-07-30T15:38:22"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">&quot;, will do_foo[bar] contain &quot;something else&quot;?</td><td class="time"><a href="#t2021-07-30T15:38:22" class="time">15:38</a></td></tr>
<tr id="t2021-07-30T15:38:41"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">if override is in OVERRIDES, yeah. doesn't matter if its in a bbappend or not, bbappending is basically concatenation</td><td class="time"><a href="#t2021-07-30T15:38:41" class="time">15:38</a></td></tr>
<tr id="t2021-07-30T15:42:27"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">kergoth perfect then. Yes I'm setting OVERRIDES .= &quot;:${BB_CURRENT_MC}&quot; to customize recipes and packages based on the multiconfig they are built for. To isolate changes, I put the overriden variables in .bbappend files.</td><td class="time"><a href="#t2021-07-30T15:42:27" class="time">15:42</a></td></tr>
<tr id="t2021-07-30T15:44:17"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">vd: Small tip is to do something like OVERRIDES .= &quot;:mc-${BB_CURRENT_MC}&quot; since mc-XXX is much more unique than variable mc names</td><td class="time"><a href="#t2021-07-30T15:44:17" class="time">15:44</a></td></tr>
<tr id="t2021-07-30T15:44:55"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">good point. i wish we'd namespaced our existing overrides to avoid conflicts :)</td><td class="time"><a href="#t2021-07-30T15:44:55" class="time">15:44</a></td></tr>
<tr id="t2021-07-30T15:45:44"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">kergoth: we have tried to learn from that since!</td><td class="time"><a href="#t2021-07-30T15:45:44" class="time">15:45</a></td></tr>
<tr id="t2021-07-30T15:46:21"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">(task-, pn-, tune- but not img-, bad RP)</td><td class="time"><a href="#t2021-07-30T15:46:21" class="time">15:46</a></td></tr>
<tr id="t2021-07-30T15:47:10"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">RP: thank you!</td><td class="time"><a href="#t2021-07-30T15:47:10" class="time">15:47</a></td></tr>
<tr id="t2021-07-30T15:47:56"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2021-07-30T15:47:56" class="time">15:47</a></td></tr>
<tr id="t2021-07-30T15:48:29"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">The variable system of OpenEmbedded is very powerful, but I wish the scopes were somehow explicit and obvious (local &gt; auto &gt; multiconfig &gt; machine &gt; distro &gt; image &gt; package &gt; ...)</td><td class="time"><a href="#t2021-07-30T15:48:29" class="time">15:48</a></td></tr>
<tr id="t2021-07-30T15:49:08"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">that layering is essentially encoded both in variables via overrides and in the configuration data in the order of the inclusion of the config files</td><td class="time"><a href="#t2021-07-30T15:49:08" class="time">15:49</a></td></tr>
<tr id="t2021-07-30T15:49:17"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">not 100% since local.conf *has* to be before machine/distro, but..</td><td class="time"><a href="#t2021-07-30T15:49:17" class="time">15:49</a></td></tr>
<tr id="t2021-07-30T15:50:53"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">yeah the tricky part in the OE learning curve is knowing if a given config file can override a variable or not</td><td class="time"><a href="#t2021-07-30T15:50:53" class="time">15:50</a></td></tr>
<tr id="t2021-07-30T15:51:22"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">But I have absolutely no idea how you could make the scope of a variable obvious...</td><td class="time"><a href="#t2021-07-30T15:51:22" class="time">15:51</a></td></tr>
<tr id="t2021-07-30T16:04:23"><th class="nick" style="background: #5959a9">jordemort</th><td class="text" style="color: #5959a9">is there a way to &quot;disinherit&quot; a class from a .bbappend?</td><td class="time"><a href="#t2021-07-30T16:04:23" class="time">16:04</a></td></tr>
<tr id="t2021-07-30T16:04:37"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">nope</td><td class="time"><a href="#t2021-07-30T16:04:37" class="time">16:04</a></td></tr>
<tr id="t2021-07-30T16:05:27"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">vd: its easier than it used to be now that bitbake -e shows variable history. being able to see exactly what lines in what files set the variable is very helpful</td><td class="time"><a href="#t2021-07-30T16:05:27" class="time">16:05</a></td></tr>
<tr id="t2021-07-30T16:05:47"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">course thats not new anymore, just still seems that way to me :)</td><td class="time"><a href="#t2021-07-30T16:05:47" class="time">16:05</a></td></tr>
<tr id="t2021-07-30T16:06:57"><th class="nick" style="background: #b15db1">override</th><td class="text" style="color: #b15db1">trying to understand what a sysroot is</td><td class="time"><a href="#t2021-07-30T16:06:57" class="time">16:06</a></td></tr>
<tr id="t2021-07-30T18:10:08"><td class="nickchange" colspan="2">*** yocti` is now known as yocti</td><td><a href="#t2021-07-30T18:10:08" class="time">18:10</a></td></tr>
<tr id="t2021-07-30T18:42:03"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">funny, _append_override or _override_append works the same, it's a bit confusing</td><td class="time"><a href="#t2021-07-30T18:42:03" class="time">18:42</a></td></tr>
<tr id="t2021-07-30T19:17:43"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">is one syntax preferred over the other?</td><td class="time"><a href="#t2021-07-30T19:17:43" class="time">19:17</a></td></tr>
<tr id="t2021-07-30T19:20:27"><th class="nick" style="background: #6464bf">smurray</th><td class="text" style="color: #6464bf">RP: that hang does seem very much like something changed in Python 3.8 or 3.9, I'm having no luck reproducing it when I try on Debian 10 with 3.7.&nbsp;&nbsp;Which is maybe useful information, need to dig through their release notes (and rig up a test with 3.8.x)</td><td class="time"><a href="#t2021-07-30T19:20:27" class="time">19:20</a></td></tr>
<tr id="t2021-07-30T19:31:44"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">how do you choose between writing an image feature vs. writing a class to inherit from?</td><td class="time"><a href="#t2021-07-30T19:31:44" class="time">19:31</a></td></tr>
<tr id="t2021-07-30T19:40:26"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, why do you think&nbsp;&nbsp;_append_override or _override_append works the same?</td><td class="time"><a href="#t2021-07-30T19:40:26" class="time">19:40</a></td></tr>
<tr id="t2021-07-30T19:44:53"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, check here: <a href="https://docs.yoctoproject.org/bitbake/bitbake-user-manual/bitbake-user-manual-metadata.html#examples" rel="nofollow">https://docs.yoctoproject.org/bitbake/bitbake-user-manual/bitbake-user-manual-metadata.html#examples</a></td><td class="time"><a href="#t2021-07-30T19:44:53" class="time">19:44</a></td></tr>
<tr id="t2021-07-30T20:05:10"><th class="nick" style="background: #adad5b">JaMa</th><td class="text" style="color: #adad5b">RP: another case missed by conversion script (not sure how common this one is, there are 4 cases in meta-webos-ports which luckily broke do_install task: install -m 0644 ${S}/files/systemd/${SYSTEMD_SERVICE_${PN}} ${D}${systemd_unitdir}/system/</td><td class="time"><a href="#t2021-07-30T20:05:10" class="time">20:05</a></td></tr>
<tr id="t2021-07-30T20:20:55"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res you're right, they aren't the same. I'm even more confused now</td><td class="time"><a href="#t2021-07-30T20:20:55" class="time">20:20</a></td></tr>
<tr id="t2021-07-30T20:32:24"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res ok I get it, thank you.</td><td class="time"><a href="#t2021-07-30T20:32:24" class="time">20:32</a></td></tr>
<tr id="t2021-07-30T20:45:02"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">Can you force a package version from a configuration file?</td><td class="time"><a href="#t2021-07-30T20:45:02" class="time">20:45</a></td></tr>
<tr id="t2021-07-30T21:02:49"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, if you are confused with BitBake you are on the right track ;) shameless self promotion: <a href="https://www.youtube.com/watch?v=kzY8-ZVqXk8" rel="nofollow">https://www.youtube.com/watch?v=kzY8-ZVqXk8</a></td><td class="time"><a href="#t2021-07-30T21:02:49" class="time">21:02</a></td></tr>
<tr id="t2021-07-30T21:04:06"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, version: look e.g. here: <a href="http://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-poky/conf/distro/poky-bleeding.conf" rel="nofollow">http://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-poky/conf/distro/poky-bleeding.conf</a></td><td class="time"><a href="#t2021-07-30T21:04:06" class="time">21:04</a></td></tr>
<tr id="t2021-07-30T21:04:25"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, this inlcudes: <a href="http://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-poky/conf/distro/include/poky-floating-revisions.inc" rel="nofollow">http://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta-poky/conf/distro/include/poky-floating-revisions.inc</a></td><td class="time"><a href="#t2021-07-30T21:04:25" class="time">21:04</a></td></tr>
<tr id="t2021-07-30T21:04:42"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, which sets many things to AUTOREV -&gt; latest and greatest</td><td class="time"><a href="#t2021-07-30T21:04:42" class="time">21:04</a></td></tr>
<tr id="t2021-07-30T21:05:29"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, e.g. PREFERRED_VERSION would work</td><td class="time"><a href="#t2021-07-30T21:05:29" class="time">21:05</a></td></tr>
<tr id="t2021-07-30T21:05:35"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res: perfect!</td><td class="time"><a href="#t2021-07-30T21:05:35" class="time">21:05</a></td></tr>
<tr id="t2021-07-30T21:06:16"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, you had also a question about FEATURE vs. class</td><td class="time"><a href="#t2021-07-30T21:06:16" class="time">21:06</a></td></tr>
<tr id="t2021-07-30T21:06:26"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, in my mind those are different things ;)</td><td class="time"><a href="#t2021-07-30T21:06:26" class="time">21:06</a></td></tr>
<tr id="t2021-07-30T21:06:53"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, there are IMAGE, MACHINE, DISTRO features</td><td class="time"><a href="#t2021-07-30T21:06:53" class="time">21:06</a></td></tr>
<tr id="t2021-07-30T21:07:41"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res: unfortunately, I have different builds to do with various combinations of firmware versions. I guess I can simply with a multiconfig file per variant which sets the PREFFERED_VERSION for the firmware packages.</td><td class="time"><a href="#t2021-07-30T21:07:41" class="time">21:07</a></td></tr>
<tr id="t2021-07-30T21:08:11"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">s/simply with/simply write/</td><td class="time"><a href="#t2021-07-30T21:08:11" class="time">21:08</a></td></tr>
<tr id="t2021-07-30T21:09:01"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, so you build the same image with different versions of components?</td><td class="time"><a href="#t2021-07-30T21:09:01" class="time">21:09</a></td></tr>
<tr id="t2021-07-30T21:09:46"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I guess PREFERRED_VERSION would work then.</td><td class="time"><a href="#t2021-07-30T21:09:46" class="time">21:09</a></td></tr>
<tr id="t2021-07-30T21:10:31"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, if you also want to build things differently you could introduce a FEATURE, check in your recipes for this FEATURE and build things accordingly</td><td class="time"><a href="#t2021-07-30T21:10:31" class="time">21:10</a></td></tr>
<tr id="t2021-07-30T21:10:40"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res: exactly. unfortunately different customer use different firmware versions, so I must support them all.</td><td class="time"><a href="#t2021-07-30T21:10:40" class="time">21:10</a></td></tr>
<tr id="t2021-07-30T21:11:10"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, hehe yes I have many customers who need stuff like that ;)</td><td class="time"><a href="#t2021-07-30T21:11:10" class="time">21:11</a></td></tr>
<tr id="t2021-07-30T21:11:27"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">can PREFERRED_VERSION be set at the image recipe level?</td><td class="time"><a href="#t2021-07-30T21:11:27" class="time">21:11</a></td></tr>
<tr id="t2021-07-30T21:12:10"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, Yocto chant number 1 (I think): config data is global, recipe data is local</td><td class="time"><a href="#t2021-07-30T21:12:10" class="time">21:12</a></td></tr>
<tr id="t2021-07-30T21:12:42"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I guess you want it in a config file and not in your image recipe</td><td class="time"><a href="#t2021-07-30T21:12:42" class="time">21:12</a></td></tr>
<tr id="t2021-07-30T21:12:58"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">yep, hence the multiconfig per combination is preferred</td><td class="time"><a href="#t2021-07-30T21:12:58" class="time">21:12</a></td></tr>
<tr id="t2021-07-30T21:13:31"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res: for feature vs. class, I have a few do_rootfs[depends], a few ROOTFS_POSTPROCESS_COMMAND and other kernel command line tweaks per image, and if I want to factorize that, I'm not just if I must write a bbclass, or image features.</td><td class="time"><a href="#t2021-07-30T21:13:31" class="time">21:13</a></td></tr>
<tr id="t2021-07-30T21:14:10"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">s/just/sure/</td><td class="time"><a href="#t2021-07-30T21:14:10" class="time">21:14</a></td></tr>
<tr id="t2021-07-30T21:14:28"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I see as class as something which you define once and it's used multiple times, like cmake.bbclass</td><td class="time"><a href="#t2021-07-30T21:14:28" class="time">21:14</a></td></tr>
<tr id="t2021-07-30T21:15:00"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, if you inherit this in your recipe, the recipe knows about cmake and does it's steps accordingly</td><td class="time"><a href="#t2021-07-30T21:15:00" class="time">21:15</a></td></tr>
<tr id="t2021-07-30T21:16:24"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">hum, and since I'm customize rootfs overlays and stuffs like that, I guess these are local image FEATURES, not a sharable functionality across images.</td><td class="time"><a href="#t2021-07-30T21:16:24" class="time">21:16</a></td></tr>
<tr id="t2021-07-30T21:16:27"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, kernel command line tweaks: I would just create a .bbappend e.g. to the boot loader environment</td><td class="time"><a href="#t2021-07-30T21:16:27" class="time">21:16</a></td></tr>
<tr id="t2021-07-30T21:17:02"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, IMAGE_FEATURES can be across all images</td><td class="time"><a href="#t2021-07-30T21:17:02" class="time">21:17</a></td></tr>
<tr id="t2021-07-30T21:18:03"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, <a href="http://docs.yoctoproject.org/singleindex.html#ref-features-image" rel="nofollow">http://docs.yoctoproject.org/singleindex.html#ref-features-image</a></td><td class="time"><a href="#t2021-07-30T21:18:03" class="time">21:18</a></td></tr>
<tr id="t2021-07-30T21:19:47"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">well depends how you see it. in fact I might define an overlay.bbclass, which embeds overlay images, and inject an initramfs which mounts them and switch-root to it.</td><td class="time"><a href="#t2021-07-30T21:19:47" class="time">21:19</a></td></tr>
<tr id="t2021-07-30T21:20:46"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, something like this? <a href="https://github.com/cmhe/meta-readonly-rootfs-overlay" rel="nofollow">https://github.com/cmhe/meta-readonly-rootfs-overlay</a></td><td class="time"><a href="#t2021-07-30T21:20:46" class="time">21:20</a></td></tr>
<tr id="t2021-07-30T21:23:17"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res something similar yes</td><td class="time"><a href="#t2021-07-30T21:23:17" class="time">21:23</a></td></tr>
<tr id="t2021-07-30T21:26:49"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I just grepped for do_rootfs[depends] in all the layers I have lying around here and it's only used in .bbclass files. It looks like mainly to bring in -native tools and some keys</td><td class="time"><a href="#t2021-07-30T21:26:49" class="time">21:26</a></td></tr>
<tr id="t2021-07-30T21:27:51"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, seems to be similar with ROOTFS_POSTPROCESS_COMMAND ;)</td><td class="time"><a href="#t2021-07-30T21:27:51" class="time">21:27</a></td></tr>
<tr id="t2021-07-30T21:28:57"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res I see. I use both to embed the initrd and overlays inside the rootfs.</td><td class="time"><a href="#t2021-07-30T21:28:57" class="time">21:28</a></td></tr>
<tr id="t2021-07-30T21:29:23"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, check here: <a href="https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/classes/rootfs-postcommands.bbclass" rel="nofollow">https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/classes/rootfs-postcommands.bbclass</a></td><td class="time"><a href="#t2021-07-30T21:29:23" class="time">21:29</a></td></tr>
<tr id="t2021-07-30T21:29:55"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, there you see e.g. if IMAGE_FEATURES contains debug-tweaks then do this, otherwise that</td><td class="time"><a href="#t2021-07-30T21:29:55" class="time">21:29</a></td></tr>
<tr id="t2021-07-30T21:33:21"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res the naming is confusing, is this class implementing ROOTFS_POSTPROCESS_COMMAND or only relying on it?</td><td class="time"><a href="#t2021-07-30T21:33:21" class="time">21:33</a></td></tr>
<tr id="t2021-07-30T21:33:48"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">I feel like it's the latter, hence image-features.bbclass would've been more appropriate</td><td class="time"><a href="#t2021-07-30T21:33:48" class="time">21:33</a></td></tr>
<tr id="t2021-07-30T21:34:24"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, it just does ROOTFS_PROCESS_COMMANDS based on image features</td><td class="time"><a href="#t2021-07-30T21:34:24" class="time">21:34</a></td></tr>
<tr id="t2021-07-30T21:34:36"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">In other words, this class is where you implement new upstream image features?</td><td class="time"><a href="#t2021-07-30T21:34:36" class="time">21:34</a></td></tr>
<tr id="t2021-07-30T21:34:40"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">smurray: that would match the cases we've see as it is usually buildtools which is 3.9</td><td class="time"><a href="#t2021-07-30T21:34:40" class="time">21:34</a></td></tr>
<tr id="t2021-07-30T21:34:49"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">you don't need to declare them somewhere else</td><td class="time"><a href="#t2021-07-30T21:34:49" class="time">21:34</a></td></tr>
<tr id="t2021-07-30T21:34:59"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, nope</td><td class="time"><a href="#t2021-07-30T21:34:59" class="time">21:34</a></td></tr>
<tr id="t2021-07-30T21:35:01"><th class="nick" style="background: #6464bf">smurray</th><td class="text" style="color: #6464bf">RP: yeah</td><td class="time"><a href="#t2021-07-30T21:35:01" class="time">21:35</a></td></tr>
<tr id="t2021-07-30T21:35:06"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JaMa: I think we only had one case of that in core and the same variable. We could add special handling for it</td><td class="time"><a href="#t2021-07-30T21:35:06" class="time">21:35</a></td></tr>
<tr id="t2021-07-30T21:35:38"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, you define an image feature e.g. in a config and now based on if it's set or not you can do different things in classes and recipes</td><td class="time"><a href="#t2021-07-30T21:35:38" class="time">21:35</a></td></tr>
<tr id="t2021-07-30T21:36:17"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res I see so my custom &quot;features&quot; would be a similar bbclass adding support for new custom values of IMAGE_FEATURES (or another variable), via ROOTFS_POSTPROCESS_COMMAND</td><td class="time"><a href="#t2021-07-30T21:36:17" class="time">21:36</a></td></tr>
<tr id="t2021-07-30T21:37:17"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, your custom features could trigger things in your custom classes or recipes</td><td class="time"><a href="#t2021-07-30T21:37:17" class="time">21:37</a></td></tr>
<tr id="t2021-07-30T21:37:45"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">in fact this code could simply go into the image recipe, if I only use one recipe for now (which is appended here and there via overrides)</td><td class="time"><a href="#t2021-07-30T21:37:45" class="time">21:37</a></td></tr>
<tr id="t2021-07-30T21:39:33"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, here different kernel config fragments are pulled in based in FEATURES: <a href="https://gitlab.com/meta-layers/meta-multi-v7-ml-bsp/-/blob/master/classes/custom-kernel-features.bbclass" rel="nofollow">https://gitlab.com/meta-layers/meta-multi-v7-ml-bsp/-/blob/master/classes/custom-kernel-features.bbclass</a></td><td class="time"><a href="#t2021-07-30T21:39:33" class="time">21:39</a></td></tr>
<tr id="t2021-07-30T21:40:15"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, your features are not a class</td><td class="time"><a href="#t2021-07-30T21:40:15" class="time">21:40</a></td></tr>
<tr id="t2021-07-30T21:41:04"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, let's say you want to add a custom DISTRO_FEATURE. Then in a config file you can add DISTRO_FEATURES_append = &quot; lumpi&quot;</td><td class="time"><a href="#t2021-07-30T21:41:04" class="time">21:41</a></td></tr>
<tr id="t2021-07-30T21:41:41"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, and now in your recipe or class you could see if someone set lumpi in DISTRO_FEATURES and react on it</td><td class="time"><a href="#t2021-07-30T21:41:41" class="time">21:41</a></td></tr>
<tr id="t2021-07-30T21:43:10"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, this line <a href="https://gitlab.com/meta-layers/meta-multi-v7-ml-bsp/-/blob/master/classes/custom-kernel-features.bbclass#L17" rel="nofollow">https://gitlab.com/meta-layers/meta-multi-v7-ml-bsp/-/blob/master/classes/custom-kernel-features.bbclass#L17</a> says, that if someone added soft-watchdog to DISTRO_FEATURES to add some kernel config (the soft watchdog)</td><td class="time"><a href="#t2021-07-30T21:43:10" class="time">21:43</a></td></tr>
<tr id="t2021-07-30T21:43:10-2"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">I see in fact features and class are really orthogonal, features are just a list of keywords that some code (an image recipe or class) can react on</td><td class="time"><a href="#t2021-07-30T21:43:10-2" class="time">21:43</a></td></tr>
<tr id="t2021-07-30T21:43:21"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, yep</td><td class="time"><a href="#t2021-07-30T21:43:21" class="time">21:43</a></td></tr>
<tr id="t2021-07-30T21:43:40"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, and with BACKFILL you can remove features from a list ;)</td><td class="time"><a href="#t2021-07-30T21:43:40" class="time">21:43</a></td></tr>
<tr id="t2021-07-30T21:44:21"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">ho, I was using DISTRO_FEATURES_remove = &quot;nfs&quot;, is it bad? :D</td><td class="time"><a href="#t2021-07-30T21:44:21" class="time">21:44</a></td></tr>
<tr id="t2021-07-30T21:44:25"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, you could have FEATURES which all your customers want except for one, or which don't work on a special hardware</td><td class="time"><a href="#t2021-07-30T21:44:25" class="time">21:44</a></td></tr>
<tr id="t2021-07-30T21:44:51"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, RP will tell you what is the punishment for this ;)</td><td class="time"><a href="#t2021-07-30T21:44:51" class="time">21:44</a></td></tr>
<tr id="t2021-07-30T21:45:06"><td class="action" colspan="2">* vd is scared now</td><td><a href="#t2021-07-30T21:45:06" class="time">21:45</a></td></tr>
<tr id="t2021-07-30T21:45:35"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, <a href="http://docs.yoctoproject.org/singleindex.html#feature-backfilling" rel="nofollow">http://docs.yoctoproject.org/singleindex.html#feature-backfilling</a></td><td class="time"><a href="#t2021-07-30T21:45:35" class="time">21:45</a></td></tr>
<tr id="t2021-07-30T21:45:46"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">rber|res: I'm mainly against using remove in oe-core</td><td class="time"><a href="#t2021-07-30T21:45:46" class="time">21:45</a></td></tr>
<tr id="t2021-07-30T21:46:12"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res ho damn, I think you just opened a door in my mind, I might now sleep tonight :D</td><td class="time"><a href="#t2021-07-30T21:46:12" class="time">21:46</a></td></tr>
<tr id="t2021-07-30T21:46:52"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, good - normally this only happends after lots of alc with my brain ;)</td><td class="time"><a href="#t2021-07-30T21:46:52" class="time">21:46</a></td></tr>
<tr id="t2021-07-30T21:48:29"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res: so let say my product is highly customizable, same base hardware, but some have solar panel, some have a gps, some have a 3g modem, etc. I should define (distro, machine or image?) features for e.g. &quot;product-solarpanel&quot;, &quot;product-gps&quot;, &quot;product-3g&quot; and include or exclude packages and config accordingly</td><td class="time"><a href="#t2021-07-30T21:48:29" class="time">21:48</a></td></tr>
<tr id="t2021-07-30T21:49:55"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, idealle you clould see MACHINE as something hardware near</td><td class="time"><a href="#t2021-07-30T21:49:55" class="time">21:49</a></td></tr>
<tr id="t2021-07-30T21:50:03"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, ideally</td><td class="time"><a href="#t2021-07-30T21:50:03" class="time">21:50</a></td></tr>
<tr id="t2021-07-30T21:50:29"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, hardware supports bluetooth is in my mind a MACHINE feature</td><td class="time"><a href="#t2021-07-30T21:50:29" class="time">21:50</a></td></tr>
<tr id="t2021-07-30T21:50:49"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, but in order to use bluetooth you also need a few user space apps and daemons</td><td class="time"><a href="#t2021-07-30T21:50:49" class="time">21:50</a></td></tr>
<tr id="t2021-07-30T21:51:16"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, so this would be a DISTRO feature</td><td class="time"><a href="#t2021-07-30T21:51:16" class="time">21:51</a></td></tr>
<tr id="t2021-07-30T21:51:47"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, normally both need to exist e.g. to turn on things on kernel level and to install/configure apps</td><td class="time"><a href="#t2021-07-30T21:51:47" class="time">21:51</a></td></tr>
<tr id="t2021-07-30T21:52:03"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd. but you might now want to use a non standard bluetooth stack and so on</td><td class="time"><a href="#t2021-07-30T21:52:03" class="time">21:52</a></td></tr>
<tr id="t2021-07-30T21:52:13"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, it's pretty flexible</td><td class="time"><a href="#t2021-07-30T21:52:13" class="time">21:52</a></td></tr>
<tr id="t2021-07-30T21:53:02"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">so I would define a bbclass which looks for &quot;bluetooth&quot; in DISTRO/IMAGE_FEATURES and configure my preferred bluetooth stack?</td><td class="time"><a href="#t2021-07-30T21:53:02" class="time">21:53</a></td></tr>
<tr id="t2021-07-30T21:53:31"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, you can actually grep for this, since this should exist ;)</td><td class="time"><a href="#t2021-07-30T21:53:31" class="time">21:53</a></td></tr>
<tr id="t2021-07-30T21:53:33"><th class="nick" style="background: #c3c366">ant__</th><td class="text" style="color: #c3c366">there is indeed a relation between kernel config and machine features but afaik there is not yet a binding</td><td class="time"><a href="#t2021-07-30T21:53:33" class="time">21:53</a></td></tr>
<tr id="t2021-07-30T21:53:35"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">well an image could only decide which package to install, not set the preferred provider I presume</td><td class="time"><a href="#t2021-07-30T21:53:35" class="time">21:53</a></td></tr>
<tr id="t2021-07-30T21:54:07"><th class="nick" style="background: #c3c366">ant__</th><td class="text" style="color: #c3c366">zeddii, maybe you did explore that thing</td><td class="time"><a href="#t2021-07-30T21:54:07" class="time">21:54</a></td></tr>
<tr id="t2021-07-30T21:54:26"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, you could define MACHINE features in your machine config</td><td class="time"><a href="#t2021-07-30T21:54:26" class="time">21:54</a></td></tr>
<tr id="t2021-07-30T21:54:56"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, qemu.inc:MACHINE_FEATURES = &quot;alsa bluetooth usbgadget screen vfat&quot;</td><td class="time"><a href="#t2021-07-30T21:54:56" class="time">21:54</a></td></tr>
<tr id="t2021-07-30T21:55:45"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, default-distrovars.inc:DISTRO_FEATURES_DEFAULT ?= &quot;acl alsa argp bluetooth</td><td class="time"><a href="#t2021-07-30T21:55:45" class="time">21:55</a></td></tr>
<tr id="t2021-07-30T21:56:08"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">is it best to integrate existing features in your layer (e.g. &quot;screen&quot;) or is it better to define your own features?</td><td class="time"><a href="#t2021-07-30T21:56:08" class="time">21:56</a></td></tr>
<tr id="t2021-07-30T21:56:40"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">(e.g. &quot;myproduct-screen&quot;)</td><td class="time"><a href="#t2021-07-30T21:56:40" class="time">21:56</a></td></tr>
<tr id="t2021-07-30T21:58:48"><th class="nick" style="background: #c3c366">ant__</th><td class="text" style="color: #c3c366">I'd say use features and split these between sibling machines</td><td class="time"><a href="#t2021-07-30T21:58:48" class="time">21:58</a></td></tr>
<tr id="t2021-07-30T21:59:01"><th class="nick" style="background: #c3c366">ant__</th><td class="text" style="color: #c3c366">i.e {@bb.utils.contains('MACHINE_FEATURES', 'v3d-nxpl', 'file://egl/EGLNativeTypeV3D-nxpl.patch', '', d)} \.</td><td class="time"><a href="#t2021-07-30T21:59:01" class="time">21:59</a></td></tr>
<tr id="t2021-07-30T21:59:24"><th class="nick" style="background: #c3c366">ant__</th><td class="text" style="color: #c3c366">patches can also be related</td><td class="time"><a href="#t2021-07-30T21:59:24" class="time">21:59</a></td></tr>
<tr id="t2021-07-30T22:00:36"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">Seems like a very powerful mess :D</td><td class="time"><a href="#t2021-07-30T22:00:36" class="time">22:00</a></td></tr>
<tr id="t2021-07-30T22:08:33"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">hum, with OVERRIDES = &quot;override&quot;; FOO = &quot;A&quot;; FOO_override += &quot;B&quot;, FOO with be &quot;B&quot;, not &quot;A B&quot;, right?</td><td class="time"><a href="#t2021-07-30T22:08:33" class="time">22:08</a></td></tr>
<tr id="t2021-07-30T22:09:16"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">I must use FOO_append_override if I want to preserve the initial value of FOO if I'm not mistaken</td><td class="time"><a href="#t2021-07-30T22:09:16" class="time">22:09</a></td></tr>
<tr id="t2021-07-30T22:10:23"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">vd: correct</td><td class="time"><a href="#t2021-07-30T22:10:23" class="time">22:10</a></td></tr>
<tr id="t2021-07-30T22:14:07"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">in order to create a minimal overlay image, how can I make sure that an image with IMAGE_INSTALL = &quot;foo&quot; (or PACKAGE_INSTALL = &quot;foo&quot;?) contains *ONLY* FILES_foo? (and same for foo dependencies)</td><td class="time"><a href="#t2021-07-30T22:14:07" class="time">22:14</a></td></tr>
<tr id="t2021-07-30T22:16:50"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I am a bit confused now. You will have an image recipe which defines what it contains.</td><td class="time"><a href="#t2021-07-30T22:16:50" class="time">22:16</a></td></tr>
<tr id="t2021-07-30T22:17:40"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res I tried both IMAGE_INSTALL = &quot;foo&quot; or PACKAGE_INSTALL = &quot;foo&quot;, but there are always non-foo files in the image</td><td class="time"><a href="#t2021-07-30T22:17:40" class="time">22:17</a></td></tr>
<tr id="t2021-07-30T22:18:05"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, maybe dependencies?</td><td class="time"><a href="#t2021-07-30T22:18:05" class="time">22:18</a></td></tr>
<tr id="t2021-07-30T22:18:56"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I typically use a core-image-minimal and add stuff to it.</td><td class="time"><a href="#t2021-07-30T22:18:56" class="time">22:18</a></td></tr>
<tr id="t2021-07-30T22:20:11"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, if you want something really minimal, like what's in a container this can be done as well.</td><td class="time"><a href="#t2021-07-30T22:20:11" class="time">22:20</a></td></tr>
<tr id="t2021-07-30T22:20:44"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res it'll come with packagegroup-core-boot stuffs and other files (package database files I guess). What I'm trying to have is a squashfs image of a few packages (let's say &quot;foo&quot; and its dependency &quot;bar&quot;)</td><td class="time"><a href="#t2021-07-30T22:20:44" class="time">22:20</a></td></tr>
<tr id="t2021-07-30T22:21:50"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">maybe using a image recipe is wrong because it's not really a rootfs image, but it's the approach I took since it's the way to select packages and the output squashfs format</td><td class="time"><a href="#t2021-07-30T22:21:50" class="time">22:21</a></td></tr>
<tr id="t2021-07-30T22:24:54"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">RP: thank you btw, it now explains why my image didn't boot anymore, IMAGE_BOOT_IMAGES_override += &quot;somefile&quot; wasn't what I initally thought ;)</td><td class="time"><a href="#t2021-07-30T22:24:54" class="time">22:24</a></td></tr>
<tr id="t2021-07-30T22:26:10"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, so don't use packagegroup-core-boot ;)</td><td class="time"><a href="#t2021-07-30T22:26:10" class="time">22:26</a></td></tr>
<tr id="t2021-07-30T22:26:21"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, for container stuff I use something like this: <a href="https://gitlab.com/meta-layers/meta-container-ex-compact/-/blob/master/recipes-core/images/app-container-image.bb" rel="nofollow">https://gitlab.com/meta-layers/meta-container-ex-compact/-/blob/master/recipes-core/images/app-container-image.bb</a></td><td class="time"><a href="#t2021-07-30T22:26:21" class="time">22:26</a></td></tr>
<tr id="t2021-07-30T22:28:15"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res I had to use VOLATILE_LOG_DIR = &quot;no&quot; in my distro to workaround the systemd-nspawn calls ;-)</td><td class="time"><a href="#t2021-07-30T22:28:15" class="time">22:28</a></td></tr>
<tr id="t2021-07-30T22:29:26"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">Can we please punish upstream repo maintainers who remove the master branch and rename it to main ;) a right to compensation for personal suffering, etc.</td><td class="time"><a href="#t2021-07-30T22:29:26" class="time">22:29</a></td></tr>
<tr id="t2021-07-30T22:30:12"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd if you have systemd-nspawn you already have your overlays ;)</td><td class="time"><a href="#t2021-07-30T22:30:12" class="time">22:30</a></td></tr>
<tr id="t2021-07-30T22:30:14"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res thanks for the input. Although I'm trying to create an overlay image, not a minimal rootfs image. For example it could contains a proprietary application (hence only its /usr/bin/foo and /usr/lib/libfoo.so files)</td><td class="time"><a href="#t2021-07-30T22:30:14" class="time">22:30</a></td></tr>
<tr id="t2021-07-30T22:30:54"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, and you are sure you want to do this yourself manually?</td><td class="time"><a href="#t2021-07-30T22:30:54" class="time">22:30</a></td></tr>
<tr id="t2021-07-30T22:32:06"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res say no more, this master -&gt; main renaming makes absolutely no sense, because here &quot;master&quot; isn't use in a master-slave context. &quot;master&quot; is still a valid word. What's next, &quot;Karate Mains&quot;?</td><td class="time"><a href="#t2021-07-30T22:32:06" class="time">22:32</a></td></tr>
<tr id="t2021-07-30T22:33:01"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, and BitBake uses by default &quot;master&quot; - I was searching a few hours now why a recipe did not build and was getting frustrated.</td><td class="time"><a href="#t2021-07-30T22:33:01" class="time">22:33</a></td></tr>
<tr id="t2021-07-30T22:33:48"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I REALLY did not think that someone renamed the master branch to something else and removed it.</td><td class="time"><a href="#t2021-07-30T22:33:48" class="time">22:33</a></td></tr>
<tr id="t2021-07-30T22:34:22"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, we will have much fun with our recipes if this happens all over the place ;)</td><td class="time"><a href="#t2021-07-30T22:34:22" class="time">22:34</a></td></tr>
<tr id="t2021-07-30T22:35:05"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">makes no sense. I truly understand the master-slave problem and I'm all for the renaming. With have this vocabulary in kernel networking and it's inappropriate. But in a non master-slave context, renaming master makes no sense...</td><td class="time"><a href="#t2021-07-30T22:35:05" class="time">22:35</a></td></tr>
<tr id="t2021-07-30T22:35:27"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res anyway, on boot I'm mounting this proprietary overlay containing only the said application over the base rootfs. Isn't an image recipe suitable for this overlay?</td><td class="time"><a href="#t2021-07-30T22:35:27" class="time">22:35</a></td></tr>
<tr id="t2021-07-30T22:35:43"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, one more hint, which might help. I added a container to a package. So this might help in your case as well. Just write a ?image recipe which adds only what you want and install this package. This might do what you want.</td><td class="time"><a href="#t2021-07-30T22:35:43" class="time">22:35</a></td></tr>
<tr id="t2021-07-30T22:36:50"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, multiconfig - one config (in my case) which builds the container, another config which picks this up, makes a pkg out of it and installs it to the rootfs</td><td class="time"><a href="#t2021-07-30T22:36:50" class="time">22:36</a></td></tr>
<tr id="t2021-07-30T22:37:25"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I guess a pkg which contains only foo and bar is what you might want.</td><td class="time"><a href="#t2021-07-30T22:37:25" class="time">22:37</a></td></tr>
<tr id="t2021-07-30T22:38:10"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res I'm already packaging a container with do_rootfs[depends] += &quot;container:do_build&quot; and installing it in /var/lib/machines with ROOTFS_POSTPROCESS_COMMAND.</td><td class="time"><a href="#t2021-07-30T22:38:10" class="time">22:38</a></td></tr>
<tr id="t2021-07-30T22:38:57"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">But for the overlay image, yes I only want foo and bar inside of it, as if you created the squashfs manually (e.g. only two files /usr/bin/foo and /usr/lib/bar in it)</td><td class="time"><a href="#t2021-07-30T22:38:57" class="time">22:38</a></td></tr>
<tr id="t2021-07-30T22:39:56"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, so you don't bundle it as a package, but just copy it over?</td><td class="time"><a href="#t2021-07-30T22:39:56" class="time">22:39</a></td></tr>
<tr id="t2021-07-30T22:44:02"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, I'm doing something along these lines: <a href="https://gitlab.com/meta-layers/meta-tig/-/blob/master/dynamic-layers/virtualization-layer/recipes-core/images/app-container-image-telegraf-prebuilt-oci-arm-v7-mc.bb" rel="nofollow">https://gitlab.com/meta-layers/meta-tig/-/blob/master/dynamic-layers/virtualization-layer/recipes-core/images/app-container-image-telegraf-prebuilt-oci-arm-v7-mc.bb</a></td><td class="time"><a href="#t2021-07-30T22:44:02" class="time">22:44</a></td></tr>
<tr id="t2021-07-30T22:44:27"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, do_fetch[mcdepends] = &quot;mc:${NATIVE_MACHINE}:${CONTAINER_MACHINE}-${CONTAINER_DISTRO}:${CONTAINER_IMAGE}:do_image_complete&quot;</td><td class="time"><a href="#t2021-07-30T22:44:27" class="time">22:44</a></td></tr>
<tr id="t2021-07-30T22:45:43"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">Here it's getting 1:45 in the morning ;) So I guess I'll give up for tonight. CU</td><td class="time"><a href="#t2021-07-30T22:45:43" class="time">22:45</a></td></tr>
<tr id="t2021-07-30T22:46:03"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">rber|res currently I have this overlay.bb image doing IMAGE_FSTYPES = &quot;squashfs&quot;; IMAGE_INSTALL = &quot;foo&quot;, and for rootfs.bb I'm doing the do_rootfs[depends]/ROOTFS_POSTPROCESS_COMMAND trick to install it. But I could also define a package to handle the install part.</td><td class="time"><a href="#t2021-07-30T22:46:03" class="time">22:46</a></td></tr>
<tr id="t2021-07-30T22:46:31"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, Yep understood</td><td class="time"><a href="#t2021-07-30T22:46:31" class="time">22:46</a></td></tr>
<tr id="t2021-07-30T22:46:38"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">my worries is the overlay.squashfs containing *only* the files from the foo package</td><td class="time"><a href="#t2021-07-30T22:46:38" class="time">22:46</a></td></tr>
<tr id="t2021-07-30T22:46:47"><td class="action" colspan="2">* vd will read rber|res's code ;)</td><td><a href="#t2021-07-30T22:46:47" class="time">22:46</a></td></tr>
<tr id="t2021-07-30T22:47:14"><th class="nick" style="background: #539e9e">rber|res</th><td class="text" style="color: #539e9e">vd, the package manager will pull in runtime dependencies as well ;)</td><td class="time"><a href="#t2021-07-30T22:47:14" class="time">22:47</a></td></tr>
<tr id="t2021-07-30T22:48:05"><th class="nick" style="background: #57a657">vd</th><td class="text" style="color: #57a657">yes this I don't want in the overlay squashfs :/</td><td class="time"><a href="#t2021-07-30T22:48:05" class="time">22:48</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-07-29.log.html">&#171; Thursday, 2021-07-29</a> <a href="index.html">Index</a> <a href="%23yocto.2021-07-31.log.html">Saturday, 2021-07-31 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
