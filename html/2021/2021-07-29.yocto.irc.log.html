<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Thursday, 2021-07-29</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Thursday, 2021-07-29</h1>
<div class="navigation"> <a href="%23yocto.2021-07-28.log.html">&#171; Wednesday, 2021-07-28</a> <a href="index.html">Index</a> <a href="%23yocto.2021-07-30.log.html">Friday, 2021-07-30 &#187;</a> </div>
<table class="irclog">
<tr id="t2021-07-29T04:44:21"><th class="nick" style="background: #407a40">User523876</th><td class="text" style="color: #407a40">Anyone here know how I would go about changing a rootfs config file for a package in yocto?</td><td class="time"><a href="#t2021-07-29T04:44:21" class="time">04:44</a></td></tr>
<tr id="t2021-07-29T05:14:26"><th class="nick" style="background: #42427e">User523876-2</th><td class="text" style="color: #42427e">nobody?</td><td class="time"><a href="#t2021-07-29T05:14:26" class="time">05:14</a></td></tr>
<tr id="t2021-07-29T05:28:28"><th class="nick" style="background: #42427e">User523876-2</th><td class="text" style="color: #42427e">welcome to #deadchat</td><td class="time"><a href="#t2021-07-29T05:28:28" class="time">05:28</a></td></tr>
<tr id="t2021-07-29T05:46:02"><th class="nick" style="background: #42427e">User523876-2</th><td class="text" style="color: #42427e">ok&nbsp;&nbsp;bye</td><td class="time"><a href="#t2021-07-29T05:46:02" class="time">05:46</a></td></tr>
<tr id="t2021-07-29T06:42:46"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2021-07-29T06:42:46" class="time">06:42</a></td></tr>
<tr id="t2021-07-29T08:14:30"><th class="nick" style="background: #818144">wyre</th><td class="text" style="color: #818144">why when I build an specific image bitbake is building all recipes in all layers? ðŸ¤”</td><td class="time"><a href="#t2021-07-29T08:14:30" class="time">08:14</a></td></tr>
<tr id="t2021-07-29T08:15:14"><th class="nick" style="background: #818144">wyre</th><td class="text" style="color: #818144">couldn't I restrict the build process to just the recipes that the image installs and their dependencies?</td><td class="time"><a href="#t2021-07-29T08:15:14" class="time">08:15</a></td></tr>
<tr id="t2021-07-29T08:26:04"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">wyre: this is what's done</td><td class="time"><a href="#t2021-07-29T08:26:04" class="time">08:26</a></td></tr>
<tr id="t2021-07-29T08:26:50"><th class="nick" style="background: #818144">wyre</th><td class="text" style="color: #818144">qschulz, then why bitbake is building things that I don't need (for now they aren't included in my image recipe) like sudo?</td><td class="time"><a href="#t2021-07-29T08:26:50" class="time">08:26</a></td></tr>
<tr id="t2021-07-29T08:27:56"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">wyre: there are some build time dependencies that you have not explicitly listed in your image recipe</td><td class="time"><a href="#t2021-07-29T08:27:56" class="time">08:27</a></td></tr>
<tr id="t2021-07-29T08:28:05"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">it's building only what's requested</td><td class="time"><a href="#t2021-07-29T08:28:05" class="time">08:28</a></td></tr>
<tr id="t2021-07-29T08:28:08"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">nothing more</td><td class="time"><a href="#t2021-07-29T08:28:08" class="time">08:28</a></td></tr>
<tr id="t2021-07-29T08:28:35"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">so if it's building something you think you don't want/need, you'll need to debug it, because it is very likely an issue on your side</td><td class="time"><a href="#t2021-07-29T08:28:35" class="time">08:28</a></td></tr>
<tr id="t2021-07-29T08:29:13"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">bitbake -g &lt;image recipe&gt; and reading the .dot files with your favorite text editor should help you a bit</td><td class="time"><a href="#t2021-07-29T08:29:13" class="time">08:29</a></td></tr>
<tr id="t2021-07-29T08:29:28"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">also, it's not because something is built that it makes it to the target</td><td class="time"><a href="#t2021-07-29T08:29:28" class="time">08:29</a></td></tr>
<tr id="t2021-07-29T08:52:22"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">yo dudX</td><td class="time"><a href="#t2021-07-29T08:52:22" class="time">08:52</a></td></tr>
<tr id="t2021-07-29T08:52:41"><td class="action" colspan="2">* qschulz waves</td><td><a href="#t2021-07-29T08:52:41" class="time">08:52</a></td></tr>
<tr id="t2021-07-29T08:57:36"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">hey</td><td class="time"><a href="#t2021-07-29T08:57:36" class="time">08:57</a></td></tr>
<tr id="t2021-07-29T08:58:18"><th class="nick" style="background: #4b904b">alicef</th><td class="text" style="color: #4b904b">hello, I'm trying to enable BB_GIT_SHALLOW but dosen't metter how I set it up the linux-libc-header git package get downloaded without --depth</td><td class="time"><a href="#t2021-07-29T08:58:18" class="time">08:58</a></td></tr>
<tr id="t2021-07-29T08:58:33"><th class="nick" style="background: #4b904b">alicef</th><td class="text" style="color: #4b904b">mckoan: o/</td><td class="time"><a href="#t2021-07-29T08:58:33" class="time">08:58</a></td></tr>
<tr id="t2021-07-29T08:59:13"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">alicef: konnichiwa :-)</td><td class="time"><a href="#t2021-07-29T08:59:13" class="time">08:59</a></td></tr>
<tr id="t2021-07-29T09:08:32"><th class="nick" style="background: #4b904b">alicef</th><td class="text" style="color: #4b904b">mckoan: do you know something about BB_GIT_SHALLOW ?</td><td class="time"><a href="#t2021-07-29T09:08:32" class="time">09:08</a></td></tr>
<tr id="t2021-07-29T09:13:15"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">michaelo[m]: I'm thinking about how to handle documenting the overrides change. Are you looking at that or should I try and write something about it to get started?</td><td class="time"><a href="#t2021-07-29T09:13:15" class="time">09:13</a></td></tr>
<tr id="t2021-07-29T09:33:15"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">alicef: probably Paul Barker</td><td class="time"><a href="#t2021-07-29T09:33:15" class="time">09:33</a></td></tr>
<tr id="t2021-07-29T09:34:55"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">alicef: or definitely RP</td><td class="time"><a href="#t2021-07-29T09:34:55" class="time">09:34</a></td></tr>
<tr id="t2021-07-29T09:35:16"><td class="action" colspan="2">* paulbarker ears perk up</td><td><a href="#t2021-07-29T09:35:16" class="time">09:35</a></td></tr>
<tr id="t2021-07-29T09:35:43"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">paulbarker: I didn't rememer your nickname :-)</td><td class="time"><a href="#t2021-07-29T09:35:43" class="time">09:35</a></td></tr>
<tr id="t2021-07-29T09:35:54"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a">*remember</td><td class="time"><a href="#t2021-07-29T09:35:54" class="time">09:35</a></td></tr>
<tr id="t2021-07-29T09:37:27"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">`BB_GIT_SHALLOW` probably does need documenting, I understand some of what it does. I only ever use it in combination with `BB_GENERATE_MIRROR_TARBALLS` &amp; `BB_GENERATE_SHALLOW_TARBALLS`</td><td class="time"><a href="#t2021-07-29T09:37:27" class="time">09:37</a></td></tr>
<tr id="t2021-07-29T09:38:10"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">In that combination it creates tarballs consisting of just the commit referenced in `SRCREV` instead of the full history</td><td class="time"><a href="#t2021-07-29T09:38:10" class="time">09:38</a></td></tr>
<tr id="t2021-07-29T09:38:31"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">The same settings allow those tarballs to be pulled from a mirror</td><td class="time"><a href="#t2021-07-29T09:38:31" class="time">09:38</a></td></tr>
<tr id="t2021-07-29T09:38:59"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">Not sure on the behaviour of `BB_GIT_SHALLOW` on its own without re-reading the relevant bitbake sources</td><td class="time"><a href="#t2021-07-29T09:38:59" class="time">09:38</a></td></tr>
<tr id="t2021-07-29T09:39:35"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">alicef: The initial download will always be non-shallow</td><td class="time"><a href="#t2021-07-29T09:39:35" class="time">09:39</a></td></tr>
<tr id="t2021-07-29T09:39:53"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">That's a limitation of git not of bitbake</td><td class="time"><a href="#t2021-07-29T09:39:53" class="time">09:39</a></td></tr>
<tr id="t2021-07-29T09:40:17"><th class="nick" style="background: #8c4a4a">mckoan</th><td class="text" style="color: #8c4a4a"><a href="https://www.openembedded.org/pipermail/bitbake-devel/2017-May/008640.html" rel="nofollow">https://www.openembedded.org/pipermail/bitbake-devel/2017-May/008640.html</a></td><td class="time"><a href="#t2021-07-29T09:40:17" class="time">09:40</a></td></tr>
<tr id="t2021-07-29T09:41:07"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">mckoan: Good link. The second paragraph of that commit message explains it perfectly</td><td class="time"><a href="#t2021-07-29T09:41:07" class="time">09:41</a></td></tr>
<tr id="t2021-07-29T09:43:07"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">Is that in the manual? If not, it should be...</td><td class="time"><a href="#t2021-07-29T09:43:07" class="time">09:43</a></td></tr>
<tr id="t2021-07-29T09:43:30"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">RP: <a href="https://docs.yoctoproject.org/search.html?q=BB_GIT_SHALLOW&amp;check_keywords=yes&amp;area=default" rel="nofollow">https://docs.yoctoproject.org/search.html?q=BB_GIT_SHALLOW&amp;check_keywords=yes&amp;area=default</a></td><td class="time"><a href="#t2021-07-29T09:43:30" class="time">09:43</a></td></tr>
<tr id="t2021-07-29T09:45:56"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">I guess I'll write a bug for it</td><td class="time"><a href="#t2021-07-29T09:45:56" class="time">09:45</a></td></tr>
<tr id="t2021-07-29T09:47:48"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93"><a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=14493" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=14493</a></td><td class="time"><a href="#t2021-07-29T09:47:48" class="time">09:47</a></td></tr>
<tr id="t2021-07-29T09:49:33"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">RP: I'll take that one as I have the context here</td><td class="time"><a href="#t2021-07-29T09:49:33" class="time">09:49</a></td></tr>
<tr id="t2021-07-29T09:50:01"><th class="nick" style="background: #97974f">paulbarker</th><td class="text" style="color: #97974f">Should be a quick job to add it to the docs</td><td class="time"><a href="#t2021-07-29T09:50:01" class="time">09:50</a></td></tr>
<tr id="t2021-07-29T09:50:16"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">paulbarker: ok, thanks!</td><td class="time"><a href="#t2021-07-29T09:50:16" class="time">09:50</a></td></tr>
<tr id="t2021-07-29T10:48:15-2"><td class="nickchange" colspan="2">*** jmiehe1 is now known as jmiehe</td><td><a href="#t2021-07-29T10:48:15-2" class="time">10:48</a></td></tr>
<tr id="t2021-07-29T13:31:31"><td class="part" colspan="2">*** buffo &lt;buffo!~madeleine@p509928d0.dip0.t-ipconnect.de&gt; has left #yocto</td><td><a href="#t2021-07-29T13:31:31" class="time">13:31</a></td></tr>
<tr id="t2021-07-29T14:08:52"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW in the context of multiple hardware and multiple customers, how do you map this with whisk products and modes?</td><td class="time"><a href="#t2021-07-29T14:08:52" class="time">14:08</a></td></tr>
<tr id="t2021-07-29T14:12:50"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">RP: looks like icecc_dep_prepend in icecc.bbclass will need similar exception in the scripts/contrib/convert-overrides.py as you already did for base_dep_prepend and autotools_dep_prepend. Or can we use different function names to not look as an override?</td><td class="time"><a href="#t2021-07-29T14:12:50" class="time">14:12</a></td></tr>
<tr id="t2021-07-29T14:15:28"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: I would make one product per machine-customer pair</td><td class="time"><a href="#t2021-07-29T14:15:28" class="time">14:15</a></td></tr>
<tr id="t2021-07-29T14:16:22"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I see</td><td class="time"><a href="#t2021-07-29T14:16:22" class="time">14:16</a></td></tr>
<tr id="t2021-07-29T14:17:45"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: But, you can share a large amount of the configuration through various means :)</td><td class="time"><a href="#t2021-07-29T14:17:45" class="time">14:17</a></td></tr>
<tr id="t2021-07-29T14:18:08"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: I did think about renaming those. prepend in a function name like that wasn't ever really supported</td><td class="time"><a href="#t2021-07-29T14:18:08" class="time">14:18</a></td></tr>
<tr id="t2021-07-29T14:18:34"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: I'll fix that one way or another, thanks</td><td class="time"><a href="#t2021-07-29T14:18:34" class="time">14:18</a></td></tr>
<tr id="t2021-07-29T14:22:06"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">RP: thanks, another interesting case might be:</td><td class="time"><a href="#t2021-07-29T14:22:06" class="time">14:22</a></td></tr>
<tr id="t2021-07-29T14:22:09"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">-def webos_configure_manifest_comment_remover(text):</td><td class="time"><a href="#t2021-07-29T14:22:09" class="time">14:22</a></td></tr>
<tr id="t2021-07-29T14:22:10"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">+def webos_configure_manifest_comment:remover(text):</td><td class="time"><a href="#t2021-07-29T14:22:10" class="time">14:22</a></td></tr>
<tr id="t2021-07-29T14:22:37"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: these are going to be the painful part, it is most of the exclusion list in the script :/</td><td class="time"><a href="#t2021-07-29T14:22:37" class="time">14:22</a></td></tr>
<tr id="t2021-07-29T14:22:42"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">but I understand that there is a limit of what this script can handle</td><td class="time"><a href="#t2021-07-29T14:22:42" class="time">14:22</a></td></tr>
<tr id="t2021-07-29T14:24:05"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW one cool thing with kas was that using their docker container, I can simply have a wrapper script in the root of the project which calls docker run. No need to prefetch the tool, quite convenient.</td><td class="time"><a href="#t2021-07-29T14:24:05" class="time">14:24</a></td></tr>
<tr id="t2021-07-29T14:24:16"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: I guess the next step would be to separate out the append/remove/prepend handling and try to exclude anti-patterns from the exclusion</td><td class="time"><a href="#t2021-07-29T14:24:16" class="time">14:24</a></td></tr>
<tr id="t2021-07-29T14:24:51"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: Ya, the bootstrap in whisk could be better</td><td class="time"><a href="#t2021-07-29T14:24:51" class="time">14:24</a></td></tr>
<tr id="t2021-07-29T14:24:52"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">good that in this case it causes parsing issue which cannot be overlooked (instead of silenly using &quot;remover&quot; as an override on completely unused variable</td><td class="time"><a href="#t2021-07-29T14:24:52" class="time">14:24</a></td></tr>
<tr id="t2021-07-29T14:26:20"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW other than publishing a container image along with whisk release, I don't see how you could simplify the bootstrap unfortunately. But I understood Pyrex doesn't work quite like a classic container.</td><td class="time"><a href="#t2021-07-29T14:26:20" class="time">14:26</a></td></tr>
<tr id="t2021-07-29T14:26:30"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: right, it does tend to at least break things visibly :)</td><td class="time"><a href="#t2021-07-29T14:26:30" class="time">14:26</a></td></tr>
<tr id="t2021-07-29T14:26:48"><th class="nick" style="background: #4b904b">alicef</th><td class="text" style="color: #4b904b">paulbarker: why not just use --depth 1 ?</td><td class="time"><a href="#t2021-07-29T14:26:48" class="time">14:26</a></td></tr>
<tr id="t2021-07-29T14:26:59"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: whisk doesn't run in Pyrex FWIW, and you can have whisk fetch Pyrex with --fetch</td><td class="time"><a href="#t2021-07-29T14:26:59" class="time">14:26</a></td></tr>
<tr id="t2021-07-29T14:27:28"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: I suspect that the easiest would be to publish whisk as a python module so it can be used with `pip install`</td><td class="time"><a href="#t2021-07-29T14:27:28" class="time">14:27</a></td></tr>
<tr id="t2021-07-29T14:27:35"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">and any idea why I would see bitbake-server hanging after these parsing issues? I wasn't seeing any hangs recently, but today couple times already with:</td><td class="time"><a href="#t2021-07-29T14:27:35" class="time">14:27</a></td></tr>
<tr id="t2021-07-29T14:27:38"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">martin&nbsp;&nbsp; 2981210&nbsp;&nbsp;0.0&nbsp;&nbsp;0.0&nbsp;&nbsp;87416 40876 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;&nbsp;&nbsp;&nbsp;15:38&nbsp;&nbsp; 0:01 bitbake-server /OE/bitbake/bin/bitbake-server decafbad 3 5 /OE/build/oe-core/bitbake-cookerdaemon.log /OE/build/oe-core/bitbake.lock /OE/build/oe-core/bitbake.sock 0 None 0</td><td class="time"><a href="#t2021-07-29T14:27:38" class="time">14:27</a></td></tr>
<tr id="t2021-07-29T14:29:31"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW indeed, that's what kas does. It's a python package, and they have a docker container per release containing the yocto build tools and the said package</td><td class="time"><a href="#t2021-07-29T14:29:31" class="time">14:29</a></td></tr>
<tr id="t2021-07-29T14:31:52"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: Ya, it would be difficulty to publish whisk itself in a container, but it can bootstrap pyrex to run actual builds.... would you mind raising an issue in GitHub to publish whisk as a python package?</td><td class="time"><a href="#t2021-07-29T14:31:52" class="time">14:31</a></td></tr>
<tr id="t2021-07-29T14:32:42"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW sure</td><td class="time"><a href="#t2021-07-29T14:32:42" class="time">14:32</a></td></tr>
<tr id="t2021-07-29T14:37:41"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">RP: also please add print(&quot;processing file '%s'&quot; % fn) at the top of processfile() or something similar as on bigger layer this script takes couple minutes without showing any progress</td><td class="time"><a href="#t2021-07-29T14:37:41" class="time">14:37</a></td></tr>
<tr id="t2021-07-29T14:39:41"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW in fact maybe the simpler would be to strongly recommend the usage of submodules with whisk. Like docker containers, they can be the simplest way to fetch the necessary module in an agnostic way (python tools for non pythonistas can really be a PITA)</td><td class="time"><a href="#t2021-07-29T14:39:41" class="time">14:39</a></td></tr>
<tr id="t2021-07-29T14:40:15"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">(again, there would be submodules handled by whisk and other managed by the developer itself, might be confusing)</td><td class="time"><a href="#t2021-07-29T14:40:15" class="time">14:40</a></td></tr>
<tr id="t2021-07-29T14:41:24"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: The way we use it gives us the best of both worlds: developers do `git submodule update --init` and they get everything, but CI does `git submodule update whisk &amp;&amp; . init-build-env --fetch` and it only gets the submodules actually required for the build</td><td class="time"><a href="#t2021-07-29T14:41:24" class="time">14:41</a></td></tr>
<tr id="t2021-07-29T14:43:23"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I see</td><td class="time"><a href="#t2021-07-29T14:43:23" class="time">14:43</a></td></tr>
<tr id="t2021-07-29T14:45:56"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW for info, my repository is a private layer itself, with a kas yaml file in its root along with this wrapper: <a href="https://github.com/siemens/kas/issues/22#issuecomment-881065487" rel="nofollow">https://github.com/siemens/kas/issues/22#issuecomment-881065487</a></td><td class="time"><a href="#t2021-07-29T14:45:56" class="time">14:45</a></td></tr>
<tr id="t2021-07-29T14:47:06"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">The kas config isn't as convenient as whisk (no good abstraction of a product), but the only requirement for the host is docker.</td><td class="time"><a href="#t2021-07-29T14:47:06" class="time">14:47</a></td></tr>
<tr id="t2021-07-29T14:48:52"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: Ya, I guess with whisk you need git, docker, &amp; python</td><td class="time"><a href="#t2021-07-29T14:48:52" class="time">14:48</a></td></tr>
<tr id="t2021-07-29T14:50:23"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Maybe the project root can be a whisk fork itself :)</td><td class="time"><a href="#t2021-07-29T14:50:23" class="time">14:50</a></td></tr>
<tr id="t2021-07-29T14:51:11"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: You could do that; you would still need git, docker &amp; python though ;). It would make the bootstrap easier, though</td><td class="time"><a href="#t2021-07-29T14:51:11" class="time">14:51</a></td></tr>
<tr id="t2021-07-29T14:51:46"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: subtree merge whisk into your project would probably be the best option if you want to avoid the submodule, IMHO</td><td class="time"><a href="#t2021-07-29T14:51:46" class="time">14:51</a></td></tr>
<tr id="t2021-07-29T14:52:39"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">yes these are standard tools for a developer, no big deal</td><td class="time"><a href="#t2021-07-29T14:52:39" class="time">14:52</a></td></tr>
<tr id="t2021-07-29T14:52:40"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: <a href="https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt" rel="nofollow">https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt</a></td><td class="time"><a href="#t2021-07-29T14:52:40" class="time">14:52</a></td></tr>
<tr id="t2021-07-29T14:53:27"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Thanks, I'll continue my quest for the simpler customer/hardware combination builds ;-)</td><td class="time"><a href="#t2021-07-29T14:53:27" class="time">14:53</a></td></tr>
<tr id="t2021-07-29T14:54:35"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Unrelated question: would IMAGE_VERSION_SUFFIX be appropriate to use the build number from the CI environment?</td><td class="time"><a href="#t2021-07-29T14:54:35" class="time">14:54</a></td></tr>
<tr id="t2021-07-29T14:56:03"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: We set `BUILDNAME`</td><td class="time"><a href="#t2021-07-29T14:56:03" class="time">14:56</a></td></tr>
<tr id="t2021-07-29T14:56:15"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">in other words, can IMAGE_VERSION_SUFFIX be set to SOME_JENKINS_ENV_VAR or fallback to a default value?</td><td class="time"><a href="#t2021-07-29T14:56:15" class="time">14:56</a></td></tr>
<tr id="t2021-07-29T14:56:37"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW is BUILDNAME whisk-specific?</td><td class="time"><a href="#t2021-07-29T14:56:37" class="time">14:56</a></td></tr>
<tr id="t2021-07-29T14:56:42"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: No</td><td class="time"><a href="#t2021-07-29T14:56:42" class="time">14:56</a></td></tr>
<tr id="t2021-07-29T14:57:38"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: On Jenkins, we do `echo &quot;BUILDNAME = \&quot;${BUILD_TAG}\&quot;&quot; &gt;&gt; local.conf`</td><td class="time"><a href="#t2021-07-29T14:57:38" class="time">14:57</a></td></tr>
<tr id="t2021-07-29T14:58:26"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">oh ok</td><td class="time"><a href="#t2021-07-29T14:58:26" class="time">14:58</a></td></tr>
<tr id="t2021-07-29T14:58:38"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW you might want to use auto.conf for that</td><td class="time"><a href="#t2021-07-29T14:58:38" class="time">14:58</a></td></tr>
<tr id="t2021-07-29T14:58:47"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: Sure</td><td class="time"><a href="#t2021-07-29T14:58:47" class="time">14:58</a></td></tr>
<tr id="t2021-07-29T14:58:57"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">but I get the idea</td><td class="time"><a href="#t2021-07-29T14:58:57" class="time">14:58</a></td></tr>
<tr id="t2021-07-29T15:00:17"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">vd: we do something similar in webOS builds, that's why I've added those variables to oe-core, but it's still not complete (for how we use it)</td><td class="time"><a href="#t2021-07-29T15:00:17" class="time">15:00</a></td></tr>
<tr id="t2021-07-29T15:17:24"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: FWIW I was able to reproduce that stap failure with genericx86-64 under qemu</td><td class="time"><a href="#t2021-07-29T15:17:24" class="time">15:17</a></td></tr>
<tr id="t2021-07-29T15:17:33"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">zeddii: you will need to re-run the conversion script in master-next or fix newly added overrides in recipes-extended/images/xen-image-minimal.bb</td><td class="time"><a href="#t2021-07-29T15:17:33" class="time">15:17</a></td></tr>
<tr id="t2021-07-29T15:18:53"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: I did fix that PKG_INFO in the conversion script btw</td><td class="time"><a href="#t2021-07-29T15:18:53" class="time">15:18</a></td></tr>
<tr id="t2021-07-29T15:19:29"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">zeddii: <a href="https://github.com/shr-project/meta-virtualization/commit/ffd9d1c6a9ff35e4d2215054ec9e38dbc7a2fe03" rel="nofollow">https://github.com/shr-project/meta-virtualization/commit/ffd9d1c6a9ff35e4d2215054ec9e38dbc7a2fe03</a></td><td class="time"><a href="#t2021-07-29T15:19:29" class="time">15:19</a></td></tr>
<tr id="t2021-07-29T15:36:55"><th class="nick" style="background: #57a657">michaelo[m]</th><td class="text" style="color: #57a657">Anything wrong with the Matrix interface?</td><td class="time"><a href="#t2021-07-29T15:36:55" class="time">15:36</a></td></tr>
<tr id="t2021-07-29T15:36:56"><th class="nick" style="background: #57a657">michaelo[m]</th><td class="text" style="color: #57a657">Hey</td><td class="time"><a href="#t2021-07-29T15:36:56" class="time">15:36</a></td></tr>
<tr id="t2021-07-29T15:36:56-2"><th class="nick" style="background: #57a657">michaelo[m]</th><td class="text" style="color: #57a657">According to <a href="https://www.yoctoproject.org/community/mailing-lists/" rel="nofollow">https://www.yoctoproject.org/community/mailing-lists/</a>, this Matrix channel is supposed to mirror the discussions on #yocto on irc.libera.chat. Obviously, it's not the case as <a href="https://libera.irclog.whitequark.org/yocto/2021-07-29" rel="nofollow">https://libera.irclog.whitequark.org/yocto/2021-07-29</a> has many more messages.</td><td class="time"><a href="#t2021-07-29T15:36:56-2" class="time">15:36</a></td></tr>
<tr id="t2021-07-29T15:41:17"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Is there a variable referring to the multiconfig being used? i.e. foo in mc:foo:core-image-minimal?</td><td class="time"><a href="#t2021-07-29T15:41:17" class="time">15:41</a></td></tr>
<tr id="t2021-07-29T15:43:52"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">BB_CURRENT_MC?</td><td class="time"><a href="#t2021-07-29T15:43:52" class="time">15:43</a></td></tr>
<tr id="t2021-07-29T15:45:08"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JaMa is it documented somewhere?</td><td class="time"><a href="#t2021-07-29T15:45:08" class="time">15:45</a></td></tr>
<tr id="t2021-07-29T15:45:27"><th class="nick" style="background: #854685">qschulz</th><td class="text" style="color: #854685">michaelo[m]: I assume halstead is taking care of that and is the person to contact but I may be wrong :)</td><td class="time"><a href="#t2021-07-29T15:45:27" class="time">15:45</a></td></tr>
<tr id="t2021-07-29T15:46:02"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">vd: you can watch JPEW's talk from last summit I think he mentioned it there as well</td><td class="time"><a href="#t2021-07-29T15:46:02" class="time">15:46</a></td></tr>
<tr id="t2021-07-29T15:47:01"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">JaMa: BB_CURRENT_MC.... *except* that it's not correct for the &quot;base&quot; multiconfig (e.g. where no multiconfig is active)</td><td class="time"><a href="#t2021-07-29T15:47:01" class="time">15:47</a></td></tr>
<tr id="t2021-07-29T15:47:38"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">JaMa: There is has the value &quot;default&quot;, but you can't plug that into an `mcdepends` for example</td><td class="time"><a href="#t2021-07-29T15:47:38" class="time">15:47</a></td></tr>
<tr id="t2021-07-29T15:47:41"><td class="action" colspan="2">* JaMa is lucky enough not to use MC at all :)</td><td><a href="#t2021-07-29T15:47:41" class="time">15:47</a></td></tr>
<tr id="t2021-07-29T15:48:04"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">JaMa: It's actually really nice, I like it a lot :)</td><td class="time"><a href="#t2021-07-29T15:48:04" class="time">15:48</a></td></tr>
<tr id="t2021-07-29T15:48:15"><th class="nick" style="background: #5959a9">fleg</th><td class="text" style="color: #5959a9">michaelo[m], I think this mirroring is done on the Matrix side, so it would be a question to the matrix.org staff</td><td class="time"><a href="#t2021-07-29T15:48:15" class="time">15:48</a></td></tr>
<tr id="t2021-07-29T15:48:33"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">lucky not to need it :)</td><td class="time"><a href="#t2021-07-29T15:48:33" class="time">15:48</a></td></tr>
<tr id="t2021-07-29T15:50:55"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">JaMa: Fair, it does get more complicated :)</td><td class="time"><a href="#t2021-07-29T15:50:55" class="time">15:50</a></td></tr>
<tr id="t2021-07-29T15:51:13"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JPEW any specific reason why whisk moves DEPLOY_DIR out of TMPDIR?</td><td class="time"><a href="#t2021-07-29T15:51:13" class="time">15:51</a></td></tr>
<tr id="t2021-07-29T15:51:21"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">hah. I had just done pass #2 and pushed a separate commit to master-next on the conversion. :D</td><td class="time"><a href="#t2021-07-29T15:51:21" class="time">15:51</a></td></tr>
<tr id="t2021-07-29T15:51:56"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: aha. that's good. I'm not going to have much for cycles for fixing much until Aug 12th. I'll be reading my opensource email, but am on vacation from now until then,</td><td class="time"><a href="#t2021-07-29T15:51:56" class="time">15:51</a></td></tr>
<tr id="t2021-07-29T15:52:19"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: No, just our preferred layout. PR to make it configurable (if it's not already) welcome :)</td><td class="time"><a href="#t2021-07-29T15:52:19" class="time">15:52</a></td></tr>
<tr id="t2021-07-29T15:52:41"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: the stap SRCREV bump was trivial when I did it here, but there wasn't much that looked like it would address the error.</td><td class="time"><a href="#t2021-07-29T15:52:41" class="time">15:52</a></td></tr>
<tr id="t2021-07-29T15:55:05"><th class="nick" style="background: #b15db1">halstead</th><td class="text" style="color: #b15db1">qschulz: michaelo[m]:&nbsp;&nbsp;I'm not running the matrix bridge. I can't recall who is at the moment. Maybe khem knows?</td><td class="time"><a href="#t2021-07-29T15:55:05" class="time">15:55</a></td></tr>
<tr id="t2021-07-29T15:57:38"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: it looks to be the difference between the kernel asm/pthread.h and the userspace asm/pthread.h</td><td class="time"><a href="#t2021-07-29T15:57:38" class="time">15:57</a></td></tr>
<tr id="t2021-07-29T15:58:17"><th class="nick" style="background: #539e9e">JaMa</th><td class="text" style="color: #539e9e">RP: FYI: the script doesn't replace RDEPENDS_${PN}-ptest_remove_class-target (which I have quite a few of these)</td><td class="time"><a href="#t2021-07-29T15:58:17" class="time">15:58</a></td></tr>
<tr id="t2021-07-29T15:58:56"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: yah, this is what always happened with perf as well. We had to capture copes of headers, etc.</td><td class="time"><a href="#t2021-07-29T15:58:56" class="time">15:58</a></td></tr>
<tr id="t2021-07-29T15:59:11"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: remind me, what is the mix, this is current stap on master with the 5.13 libc-headers ?</td><td class="time"><a href="#t2021-07-29T15:59:11" class="time">15:59</a></td></tr>
<tr id="t2021-07-29T15:59:32"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: yes. Enjoy the vacation, I'll poke at it a bit more</td><td class="time"><a href="#t2021-07-29T15:59:32" class="time">15:59</a></td></tr>
<tr id="t2021-07-29T16:00:03"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">and so it only happens on 5.10 and 5.4 ? I could delete those kernels ;) (kidding).</td><td class="time"><a href="#t2021-07-29T16:00:03" class="time">16:00</a></td></tr>
<tr id="t2021-07-29T16:00:20"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: I think so, not sure yet</td><td class="time"><a href="#t2021-07-29T16:00:20" class="time">16:00</a></td></tr>
<tr id="t2021-07-29T16:03:08"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: I am around for the next few hours (then packing), but I fired up some builds of genericx86-64, 5.10 kernel preference and systemtap. I'll see if I can make it go boom on the booted target as well.</td><td class="time"><a href="#t2021-07-29T16:03:08" class="time">16:03</a></td></tr>
<tr id="t2021-07-29T16:05:19"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2021-07-29T16:05:19" class="time">16:05</a></td></tr>
<tr id="t2021-07-29T16:06:29"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: cd /usr/src/kernel; make scripts prepare; stap --disable-cache -DSTP_NO_VERREL_CHECK /tmp/hello.stp seems to make it happen in short order</td><td class="time"><a href="#t2021-07-29T16:06:29" class="time">16:06</a></td></tr>
<tr id="t2021-07-29T16:06:52"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">pulling hello.stp from the meta/lib/oeqa/runtime/files</td><td class="time"><a href="#t2021-07-29T16:06:52" class="time">16:06</a></td></tr>
<tr id="t2021-07-29T16:07:44"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">yah. that's how I always test stap. I just scp on the bits I need from the tests. so that's good.</td><td class="time"><a href="#t2021-07-29T16:07:44" class="time">16:07</a></td></tr>
<tr id="t2021-07-29T16:07:57"><td class="action" colspan="2">* paulg tries to think of large patch series to fill zeddii vaca inbox with</td><td><a href="#t2021-07-29T16:07:57" class="time">16:07</a></td></tr>
<tr id="t2021-07-29T16:08:58"><td class="action" colspan="2">* zeddii shakes his fist</td><td><a href="#t2021-07-29T16:08:58" class="time">16:08</a></td></tr>
<tr id="t2021-07-29T16:09:11"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">TMPDIR *must* be different for every variant of hardware, libc, etc., but is it same to share a common DEPLOY_DIR_IMAGE?</td><td class="time"><a href="#t2021-07-29T16:09:11" class="time">16:09</a></td></tr>
<tr id="t2021-07-29T16:09:38"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: That would be tricky</td><td class="time"><a href="#t2021-07-29T16:09:38" class="time">16:09</a></td></tr>
<tr id="t2021-07-29T16:10:00"><th class="nick" style="background: #5fb4b4">paulg</th><td class="text" style="color: #5fb4b4">RP, I saw today that linux-stable picked up our cgroup/LTP fix for v5.10 and v5.4 and v5.13 ; not that we really care ; zeddii put it where needed already IIRC.</td><td class="time"><a href="#t2021-07-29T16:10:00" class="time">16:10</a></td></tr>
<tr id="t2021-07-29T16:13:59"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">is it safe*</td><td class="time"><a href="#t2021-07-29T16:13:59" class="time">16:13</a></td></tr>
<tr id="t2021-07-29T16:14:37"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: Maybe... it would depend on having no multiconfigs that overwrite the same files</td><td class="time"><a href="#t2021-07-29T16:14:37" class="time">16:14</a></td></tr>
<tr id="t2021-07-29T16:18:01"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">indeed. I *just* need to make sure that filenames are unique for every multiconfig (including the default)</td><td class="time"><a href="#t2021-07-29T16:18:01" class="time">16:18</a></td></tr>
<tr id="t2021-07-29T16:18:37"><th class="nick" style="background: #a25555">JPEW</th><td class="text" style="color: #a25555">vd: I think so... one way to make sure they are all unique is to put each in it's own directory ;)</td><td class="time"><a href="#t2021-07-29T16:18:37" class="time">16:18</a></td></tr>
<tr id="t2021-07-29T16:20:43"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">indeed.</td><td class="time"><a href="#t2021-07-29T16:20:43" class="time">16:20</a></td></tr>
<tr id="t2021-07-29T16:21:14"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">But isn't there a feature of the deploy class or anything to ensure that you're not overriding a file from another recipe?</td><td class="time"><a href="#t2021-07-29T16:21:14" class="time">16:21</a></td></tr>
<tr id="t2021-07-29T16:21:21"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">that'd be just perfect.</td><td class="time"><a href="#t2021-07-29T16:21:21" class="time">16:21</a></td></tr>
<tr id="t2021-07-29T16:35:10"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">The thing is I never really understand why DEPLOY_DIR_IMAGE contains ${MACHINE}, if TMPDIR is expected to be different for any machine/libc/distro combinations. Isn't it redundant and useless?</td><td class="time"><a href="#t2021-07-29T16:35:10" class="time">16:35</a></td></tr>
<tr id="t2021-07-29T16:35:37"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">tmpdir is distro specific, you can build multiple machines in a distro</td><td class="time"><a href="#t2021-07-29T16:35:37" class="time">16:35</a></td></tr>
<tr id="t2021-07-29T16:38:29"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">fray but you shouldn't share the same TMPDIR for different machines, right?</td><td class="time"><a href="#t2021-07-29T16:38:29" class="time">16:38</a></td></tr>
<tr id="t2021-07-29T16:39:02"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I build multiple machines with the same TMPDIR all the time..&nbsp;&nbsp;it's the distro configurations (and sdkmachine) that need specific TMPDIR</td><td class="time"><a href="#t2021-07-29T16:39:02" class="time">16:39</a></td></tr>
<tr id="t2021-07-29T16:39:25"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">ho</td><td class="time"><a href="#t2021-07-29T16:39:25" class="time">16:39</a></td></tr>
<tr id="t2021-07-29T16:40:28"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">fray so you're saying you can safely build a distro for x86 and arm in the same TMPDIR, as long as the distro conf is the same?</td><td class="time"><a href="#t2021-07-29T16:40:28" class="time">16:40</a></td></tr>
<tr id="t2021-07-29T16:43:12"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">vd: yes</td><td class="time"><a href="#t2021-07-29T16:43:12" class="time">16:43</a></td></tr>
<tr id="t2021-07-29T16:43:28"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">fray this doc says the opposite: you can basically share the TMPDIR for two distros built for the same hardware: <a href="https://docs.yoctoproject.org/singleindex.html#setting-up-and-running-a-multiple-configuration-build" rel="nofollow">https://docs.yoctoproject.org/singleindex.html#setting-up-and-running-a-multiple-configuration-build</a></td><td class="time"><a href="#t2021-07-29T16:43:28" class="time">16:43</a></td></tr>
<tr id="t2021-07-29T16:43:36"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I might be confused</td><td class="time"><a href="#t2021-07-29T16:43:36" class="time">16:43</a></td></tr>
<tr id="t2021-07-29T16:44:32"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">&quot;multiconfig&quot; is different.&nbsp;&nbsp;These need their own TMPDIR because they may be writing tmp files, even for multiple machines..</td><td class="time"><a href="#t2021-07-29T16:44:32" class="time">16:44</a></td></tr>
<tr id="t2021-07-29T16:44:48"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">the TMPDIR sharing between multiple _machines_ is from single (non-multiconfig) builds</td><td class="time"><a href="#t2021-07-29T16:44:48" class="time">16:44</a></td></tr>
<tr id="t2021-07-29T16:45:05"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">ho ok</td><td class="time"><a href="#t2021-07-29T16:45:05" class="time">16:45</a></td></tr>
<tr id="t2021-07-29T16:47:14"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I'm having hard time figuring out how to properly separate the config for &quot;a customer build&quot;, which is a given hardware (or multiple), a given distro (always the same) and tweaks to the default image recipes.</td><td class="time"><a href="#t2021-07-29T16:47:14" class="time">16:47</a></td></tr>
<tr id="t2021-07-29T16:48:07"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I thought maybe distro conf + auto.conf was enough but I guess multiconfig really is what's needed here</td><td class="time"><a href="#t2021-07-29T16:48:07" class="time">16:48</a></td></tr>
<tr id="t2021-07-29T16:48:31"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">multiconfig is just a way to kick off multiple builds with differing configuration in a single bitbake command</td><td class="time"><a href="#t2021-07-29T16:48:31" class="time">16:48</a></td></tr>
<tr id="t2021-07-29T16:48:49"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">well, mostly. you can still build those without it, is the point, just via changing local/auto</td><td class="time"><a href="#t2021-07-29T16:48:49" class="time">16:48</a></td></tr>
<tr id="t2021-07-29T16:48:54"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">JaMa: btw is there a way to override &quot;default&quot; in BB_CURRENT_MC? (e.g. if I want &quot;vanilla&quot; instead).</td><td class="time"><a href="#t2021-07-29T16:48:54" class="time">16:48</a></td></tr>
<tr id="t2021-07-29T16:49:36"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">you dont need to override anything, just where you *use* that variable you'd use inline python if 'default' isn't the value you need</td><td class="time"><a href="#t2021-07-29T16:49:36" class="time">16:49</a></td></tr>
<tr id="t2021-07-29T16:50:47"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">kergoth: ok so I must see a multiconfig as a clean way to store a known config, instead of hacking on local/auto</td><td class="time"><a href="#t2021-07-29T16:50:47" class="time">16:50</a></td></tr>
<tr id="t2021-07-29T16:51:24"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">yeah, it's a way of encoding that knowledge as well as being able to build them all in one go, without having to encode that knowledge in your CI jobs or something...</td><td class="time"><a href="#t2021-07-29T16:51:24" class="time">16:51</a></td></tr>
<tr id="t2021-07-29T16:51:42"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">( kergoth: it's just that &quot;vanilla&quot; is more obvious than &quot;default&quot; in our company vocabulary, so BB_DEFAULT_MC ?= &quot;vanilla&quot; would be convenient, but inline python is fine ;-)&nbsp;&nbsp;)</td><td class="time"><a href="#t2021-07-29T16:51:42" class="time">16:51</a></td></tr>
<tr id="t2021-07-29T16:51:45"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">still, i'd recommend minimizing local config. if you're changing the default images, you probably just want your own images, for example</td><td class="time"><a href="#t2021-07-29T16:51:45" class="time">16:51</a></td></tr>
<tr id="t2021-07-29T16:55:53"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">kergoth I figure appending the default images would be cleaner since I have a distro, a few machines, default (vanilla) images, then for each customer there small tweaks to do, like overriding the default root password via EXTRA_USER_PARAMS, embedding custom images via ROOTFS_POSTPROCESS_COMMAND, etc.</td><td class="time"><a href="#t2021-07-29T16:55:53" class="time">16:55</a></td></tr>
<tr id="t2021-07-29T16:56:21"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">A multiconfig for each customer combination seemed more appropriate than defining their own image recipes. Would you recommend a different approach?</td><td class="time"><a href="#t2021-07-29T16:56:21" class="time">16:56</a></td></tr>
<tr id="t2021-07-29T16:56:36"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">paulg: I saw, nice it made it through. What about the RCU stall thing? :)</td><td class="time"><a href="#t2021-07-29T16:56:36" class="time">16:56</a></td></tr>
<tr id="t2021-07-29T16:56:43"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">ah, yeah, if there were image hcanges common to all customers itd make sense to create your own images for your distro, but if not what you're doing makes sense</td><td class="time"><a href="#t2021-07-29T16:56:43" class="time">16:56</a></td></tr>
<tr id="t2021-07-29T16:56:49"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">paulg: as you say, &quot;we're&quot; kind of sorted now</td><td class="time"><a href="#t2021-07-29T16:56:49" class="time">16:56</a></td></tr>
<tr id="t2021-07-29T17:01:38"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">kergoth: so I would have a generic distro-image-base recipe, and something like IMAGE_INSTALL_pn-distro-image-base_append = &quot; customer-conf&quot; in a multiconfig.</td><td class="time"><a href="#t2021-07-29T17:01:38" class="time">17:01</a></td></tr>
<tr id="t2021-07-29T17:02:13"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">But even though it's not technically correct, a different machine configuration for every customer would be way simpler?</td><td class="time"><a href="#t2021-07-29T17:02:13" class="time">17:02</a></td></tr>
<tr id="t2021-07-29T17:07:03"><th class="nick" style="background: #5fb4b4">paulg</th><td class="text" style="color: #5fb4b4">RP, the 406a2f008f2e RCU stall still languishes in -next and not mainline, as paulmck effectively does a two release soak cycle for any given change.</td><td class="time"><a href="#t2021-07-29T17:07:03" class="time">17:07</a></td></tr>
<tr id="t2021-07-29T17:08:09"><th class="nick" style="background: #5fb4b4">paulg</th><td class="text" style="color: #5fb4b4">(and linux-stable won't normally touch anything that isn't in mainline yet)</td><td class="time"><a href="#t2021-07-29T17:08:09" class="time">17:08</a></td></tr>
<tr id="t2021-07-29T17:11:51"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: Adding -DSTAPCONF_X86_UNIREGS to the stap command makes it work</td><td class="time"><a href="#t2021-07-29T17:11:51" class="time">17:11</a></td></tr>
<tr id="t2021-07-29T17:12:16"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">paulg: for what is a pretty horrible machine crash, that is a bit sad :(</td><td class="time"><a href="#t2021-07-29T17:12:16" class="time">17:12</a></td></tr>
<tr id="t2021-07-29T17:13:14"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">Does anyone know anything about how systemtap sorts these defines?</td><td class="time"><a href="#t2021-07-29T17:13:14" class="time">17:13</a></td></tr>
<tr id="t2021-07-29T17:16:53"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: <a href="https://sourceware.org/git/?p=systemtap.git;a=commitdiff;h=ef5a8b9eda402e4e96c4e3ce01e7ff95d3e10470" rel="nofollow">https://sourceware.org/git/?p=systemtap.git;a=commitdiff;h=ef5a8b9eda402e4e96c4e3ce01e7ff95d3e10470</a> is the fix</td><td class="time"><a href="#t2021-07-29T17:16:53" class="time">17:16</a></td></tr>
<tr id="t2021-07-29T17:21:55"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">moto-timo: ^^^ - looks like we have the problem identified</td><td class="time"><a href="#t2021-07-29T17:21:55" class="time">17:21</a></td></tr>
<tr id="t2021-07-29T17:22:36"><th class="nick" style="background: #6464bf">michaelo</th><td class="text" style="color: #6464bf">Back on a normal IRC client (instead of Matrix)</td><td class="time"><a href="#t2021-07-29T17:22:36" class="time">17:22</a></td></tr>
<tr id="t2021-07-29T17:23:42"><th class="nick" style="background: #c3c366">moto-timo</th><td class="text" style="color: #c3c366">RP: excellent. I was looking at commits but didnâ€™t get to that one yet</td><td class="time"><a href="#t2021-07-29T17:23:42" class="time">17:23</a></td></tr>
<tr id="t2021-07-29T17:35:54"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">michaelo: wasn't working out with the notifications?</td><td class="time"><a href="#t2021-07-29T17:35:54" class="time">17:35</a></td></tr>
<tr id="t2021-07-29T17:37:51"><th class="nick" style="background: #6464bf">michaelo</th><td class="text" style="color: #6464bf">RP: if you're talking about the Matrix interface, indeed, I just get a fraction of the messages. Didn't you say you're using Matrix too?</td><td class="time"><a href="#t2021-07-29T17:37:51" class="time">17:37</a></td></tr>
<tr id="t2021-07-29T17:40:19"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">michaelo: I'm not, I just noticed you were</td><td class="time"><a href="#t2021-07-29T17:40:19" class="time">17:40</a></td></tr>
<tr id="t2021-07-29T18:06:43"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">RP: well that's nicely simple.</td><td class="time"><a href="#t2021-07-29T18:06:43" class="time">18:06</a></td></tr>
<tr id="t2021-07-29T18:07:01"><th class="nick" style="background: #adad5b">zeddii</th><td class="text" style="color: #adad5b">I'll kill my build</td><td class="time"><a href="#t2021-07-29T18:07:01" class="time">18:07</a></td></tr>
<tr id="t2021-07-29T18:07:22"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">kergoth: JPEW: I think I will start by defining one machine per customer instead of multiconfigs, even though it isn't techically correct (it's the same hardware after all), it will allow me to customize the default images from there while keeping the build simple.</td><td class="time"><a href="#t2021-07-29T18:07:22" class="time">18:07</a></td></tr>
<tr id="t2021-07-29T18:18:19"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">then I'll need multiconfig to build them, forget what I've said...</td><td class="time"><a href="#t2021-07-29T18:18:19" class="time">18:18</a></td></tr>
<tr id="t2021-07-29T18:29:58"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">vd: Are you trying to use machine so that you can use the override syntax?&nbsp;&nbsp;SOME_VAR_machine = &quot;...&quot;</td><td class="time"><a href="#t2021-07-29T18:29:58" class="time">18:29</a></td></tr>
<tr id="t2021-07-29T18:36:29"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">zeddii: thankfully nothing horrible, thanks for ramping up ready :)</td><td class="time"><a href="#t2021-07-29T18:36:29" class="time">18:36</a></td></tr>
<tr id="t2021-07-29T19:04:08"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">RP: during local testing with just the prservice selftests I managed to reproduce what looks like the same failure as you saw on the AB yesterday, even with rebasing onto JPEW's rework to move the asyncio loop creation</td><td class="time"><a href="#t2021-07-29T19:04:08" class="time">19:04</a></td></tr>
<tr id="t2021-07-29T19:04:50"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">RP: I think there's maybe a race in the PR export now, I'll need to try to decipher the backtraces</td><td class="time"><a href="#t2021-07-29T19:04:50" class="time">19:04</a></td></tr>
<tr id="t2021-07-29T19:10:23"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">smurray: glad you could reproduce! :)</td><td class="time"><a href="#t2021-07-29T19:10:23" class="time">19:10</a></td></tr>
<tr id="t2021-07-29T19:11:12"><th class="nick" style="background: #6acaca">smurray</th><td class="text" style="color: #6acaca">RP: tbh I think it was just luck, I've run it about 20 times in the last 2 days</td><td class="time"><a href="#t2021-07-29T19:11:12" class="time">19:11</a></td></tr>
<tr id="t2021-07-29T20:02:17"><th class="nick" style="background: #ce6c6c">override</th><td class="text" style="color: #ce6c6c">so im writing some user space code that would set what rootfs partition to use for next boot cycle. Im using libubootenv for it. does anyone have any other recommendations / stuff theyd want to link me to?</td><td class="time"><a href="#t2021-07-29T20:02:17" class="time">20:02</a></td></tr>
<tr id="t2021-07-29T20:05:27"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">a steady hand and a magnetic needle.</td><td class="time"><a href="#t2021-07-29T20:05:27" class="time">20:05</a></td></tr>
<tr id="t2021-07-29T20:05:30"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">or if you</td><td class="time"><a href="#t2021-07-29T20:05:30" class="time">20:05</a></td></tr>
<tr id="t2021-07-29T20:05:42"><th class="nick" style="background: #488888">LetoThe2nd</th><td class="text" style="color: #488888">if you're really brave, then a handful of butterflies.</td><td class="time"><a href="#t2021-07-29T20:05:42" class="time">20:05</a></td></tr>
<tr id="t2021-07-29T20:06:58"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder: I was considering one machine configuration per customer profile yes</td><td class="time"><a href="#t2021-07-29T20:06:58" class="time">20:06</a></td></tr>
<tr id="t2021-07-29T20:08:10"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">At the moment I'm trying multiconfig with IMAGE_BASENAME = &quot;${BB_CURRENT_MC}-${PN}&quot; and TMPDIR = &quot;${TOPDIR}/tmp/${BB_CURRENT_MC}&quot; and see how it does.</td><td class="time"><a href="#t2021-07-29T20:08:10" class="time">20:08</a></td></tr>
<tr id="t2021-07-29T20:08:13"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">goes*.</td><td class="time"><a href="#t2021-07-29T20:08:13" class="time">20:08</a></td></tr>
<tr id="t2021-07-29T20:09:04"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">vd: If you just want the VARIABLE_customerabc = &quot;some-override&quot; then you can add &quot;customerabc&quot; to OVERRIDES in your multiconfig.&nbsp;&nbsp;<a href="https://www.yoctoproject.org/docs/1.6/bitbake-user-manual/bitbake-user-manual.html#conditional-syntax-overrides" rel="nofollow">https://www.yoctoproject.org/docs/1.6/bitbake-user-manual/bitbake-user-manual.html#conditional-syntax-overrides</a></td><td class="time"><a href="#t2021-07-29T20:09:04" class="time">20:09</a></td></tr>
<tr id="t2021-07-29T20:09:48"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">Then you'd do IMAGE_BASENAME_customerabc = &quot;whatever&quot;</td><td class="time"><a href="#t2021-07-29T20:09:48" class="time">20:09</a></td></tr>
<tr id="t2021-07-29T20:10:09"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">which has no affect in all of your other multiconfigs where &quot;customerabc&quot; isn't in OVERRIDES.</td><td class="time"><a href="#t2021-07-29T20:10:09" class="time">20:10</a></td></tr>
<tr id="t2021-07-29T20:13:30"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder I thought you we talking about MACHINEOVERRIDES and defining one machine configuration file per customer profile</td><td class="time"><a href="#t2021-07-29T20:13:30" class="time">20:13</a></td></tr>
<tr id="t2021-07-29T20:16:02"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">MACHINEOVERRIDES are just included in OVERRIDES.</td><td class="time"><a href="#t2021-07-29T20:16:02" class="time">20:16</a></td></tr>
<tr id="t2021-07-29T20:23:30"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder is it what you're using?</td><td class="time"><a href="#t2021-07-29T20:23:30" class="time">20:23</a></td></tr>
<tr id="t2021-07-29T20:23:50"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">For something similar yes.</td><td class="time"><a href="#t2021-07-29T20:23:50" class="time">20:23</a></td></tr>
<tr id="t2021-07-29T20:25:38"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">I have a number of images I need to build that are &gt;99% the same.&nbsp;&nbsp;For each there's only a few customizations that I put in my recipes/appends themselves.</td><td class="time"><a href="#t2021-07-29T20:25:38" class="time">20:25</a></td></tr>
<tr id="t2021-07-29T20:26:30"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">This includes setting IMAGE_BASENAME sometimes or adding a patch in SRC_URI.</td><td class="time"><a href="#t2021-07-29T20:26:30" class="time">20:26</a></td></tr>
<tr id="t2021-07-29T20:28:09"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder kind of the same for me actually. I have vanilla images, each customer has a different password, a few default images pre-embedded inside of them, etc.</td><td class="time"><a href="#t2021-07-29T20:28:09" class="time">20:28</a></td></tr>
<tr id="t2021-07-29T20:29:17"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I thought about adding the customization inside a multiconfig, but if I understand correctly, you set an OVERRIDES and you add the changes inside the recipe itself. Is that correct?</td><td class="time"><a href="#t2021-07-29T20:29:17" class="time">20:29</a></td></tr>
<tr id="t2021-07-29T20:31:22"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">Yes, I like the locality of the customization in the recipe its modifying.&nbsp;&nbsp;If I need a list of all of them it's easy enough to `git grep _customerabc`</td><td class="time"><a href="#t2021-07-29T20:31:22" class="time">20:31</a></td></tr>
<tr id="t2021-07-29T20:37:26"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I think I would prefer to centralize all customization for a customer inside a single file, but your way is actually simple</td><td class="time"><a href="#t2021-07-29T20:37:26" class="time">20:37</a></td></tr>
<tr id="t2021-07-29T21:02:06"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder so the OVERRIDES mechanism is not only for machines, it can be anything? Hence your approach for customizing recipes</td><td class="time"><a href="#t2021-07-29T21:02:06" class="time">21:02</a></td></tr>
<tr id="t2021-07-29T21:03:51"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">Correct.&nbsp;&nbsp;`bitbake -e my-image | grep -B20 '^OVERRIDES='`</td><td class="time"><a href="#t2021-07-29T21:03:51" class="time">21:03</a></td></tr>
<tr id="t2021-07-29T21:07:28"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder you could actually lighten up your multiconfig files by setting OVERRIDES .= &quot;:${BB_CURRENT_MC}&quot; in your distro conf for example. It will hold the multiconfig name, or &quot;default&quot; otherwise.</td><td class="time"><a href="#t2021-07-29T21:07:28" class="time">21:07</a></td></tr>
<tr id="t2021-07-29T21:08:27"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">huh, good point ;)</td><td class="time"><a href="#t2021-07-29T21:08:27" class="time">21:08</a></td></tr>
<tr id="t2021-07-29T21:10:32"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder how would you deal with 2 machines for the same customer? 2 multiconfig customer-mach1 and customer-mach2 ?</td><td class="time"><a href="#t2021-07-29T21:10:32" class="time">21:10</a></td></tr>
<tr id="t2021-07-29T21:14:05"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">maybe something like OVERRIDES =. &quot;customer:customer-mach1&quot; so you can still do generic stuff for that specific customer.</td><td class="time"><a href="#t2021-07-29T21:14:05" class="time">21:14</a></td></tr>
<tr id="t2021-07-29T21:15:25"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">very true. This way I can tweak config packages (with _customer) or machine package like kernel or bootloader (with _customer-mach1)</td><td class="time"><a href="#t2021-07-29T21:15:25" class="time">21:15</a></td></tr>
<tr id="t2021-07-29T21:22:12"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder do you customize everything in your image recipe, things such as SUMMARY_foo = &quot;My recipe for foo&quot;?</td><td class="time"><a href="#t2021-07-29T21:22:12" class="time">21:22</a></td></tr>
<tr id="t2021-07-29T21:24:43"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder did you consider doing bbappend for your image in order to split the image customization in another file?</td><td class="time"><a href="#t2021-07-29T21:24:43" class="time">21:24</a></td></tr>
<tr id="t2021-07-29T21:25:31"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">I don't actually have different customers, my use-case is just somewhat similar to what you were describing.</td><td class="time"><a href="#t2021-07-29T21:25:31" class="time">21:25</a></td></tr>
<tr id="t2021-07-29T21:26:43"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">for instance, I have an x86 image that gets deployed to $very_expensive_hardware_every_dev_cannot_have.</td><td class="time"><a href="#t2021-07-29T21:26:43" class="time">21:26</a></td></tr>
<tr id="t2021-07-29T21:27:03"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">So we leverage container images that are also built using the same layers and mostly the same configuration.</td><td class="time"><a href="#t2021-07-29T21:27:03" class="time">21:27</a></td></tr>
<tr id="t2021-07-29T21:29:39"><th class="nick" style="background: #c668c6">jsbronder</th><td class="text" style="color: #c668c6">We also deploy some stuff to our manufacturers in containers.</td><td class="time"><a href="#t2021-07-29T21:29:39" class="time">21:29</a></td></tr>
<tr id="t2021-07-29T21:36:43"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: for your ptest_remove issue, I wonder if adding that to the 'if &quot;ptest_append&quot; in line:' in the script would help</td><td class="time"><a href="#t2021-07-29T21:36:43" class="time">21:36</a></td></tr>
<tr id="t2021-07-29T21:40:17"><th class="nick" style="background: #4d4d93">RP</th><td class="text" style="color: #4d4d93">JaMa: I think that should be ok so I'll fix the script with that</td><td class="time"><a href="#t2021-07-29T21:40:17" class="time">21:40</a></td></tr>
<tr id="t2021-07-29T21:48:28"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">jsbronder I see, thanks. I might add .bbappend file for my generic recipes in some recipes-customer or even a meta-customer layer, but the idea is the same as yours with OVERRIDES. I'm hacking on it rn!</td><td class="time"><a href="#t2021-07-29T21:48:28" class="time">21:48</a></td></tr>
<tr id="t2021-07-29T22:03:52"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Can you conditionally enable a recipe bbappend? By the mean of overrides for example?</td><td class="time"><a href="#t2021-07-29T22:03:52" class="time">22:03</a></td></tr>
<tr id="t2021-07-29T22:04:39"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">forcing the _override inside of the bbappend recipe seems unnecessarily complex, but it's not a big deal if there's no other choice</td><td class="time"><a href="#t2021-07-29T22:04:39" class="time">22:04</a></td></tr>
<tr id="t2021-07-29T22:06:53"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">Other question, does ${IMAGE_NAME_pn-some-image-recipe} works? I'd like to have a robust way to get an image name from another recipe.</td><td class="time"><a href="#t2021-07-29T22:06:53" class="time">22:06</a></td></tr>
<tr id="t2021-07-29T22:07:00"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">s/robust/reliable/</td><td class="time"><a href="#t2021-07-29T22:07:00" class="time">22:07</a></td></tr>
<tr id="t2021-07-29T22:28:24"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">vd: only if the variable is defined as that in the global configuration metadata. one recipe can't access variables of another directly by design, only its own and what flows down from the configuration metadata</td><td class="time"><a href="#t2021-07-29T22:28:24" class="time">22:28</a></td></tr>
<tr id="t2021-07-29T22:30:39"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">I see, so it's a bad idea. It is still better (with the current code) to rely on the formula used for IMAGE_NAME. e.g. ${BB_CURRENT_MC}-${IMAGE_BASENAME}.</td><td class="time"><a href="#t2021-07-29T22:30:39" class="time">22:30</a></td></tr>
<tr id="t2021-07-29T22:31:05"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">The downside is that it's specific to your configuration and not very generic, but well that's for a private layer after all.</td><td class="time"><a href="#t2021-07-29T22:31:05" class="time">22:31</a></td></tr>
<tr id="t2021-07-29T22:44:47"><th class="nick" style="background: #9b519b">vd</th><td class="text" style="color: #9b519b">how can you conditionally do do_rootfs[depends] += , but dor a given OVERRIDES?</td><td class="time"><a href="#t2021-07-29T22:44:47" class="time">22:44</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2021-07-28.log.html">&#171; Wednesday, 2021-07-28</a> <a href="index.html">Index</a> <a href="%23yocto.2021-07-30.log.html">Friday, 2021-07-30 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
