<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Monday, 2020-11-16</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Monday, 2020-11-16</h1>
<div class="navigation"> <a href="%23yocto.2020-11-15.log.html">&#171; Sunday, 2020-11-15</a> <a href="index.html">Index</a> <a href="%23yocto.2020-11-17.log.html">Tuesday, 2020-11-17 &#187;</a> </div>
<table class="irclog">
<tr id="t2020-11-16T01:08:40"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">RP: Weird. I'll try again.</td><td class="time"><a href="#t2020-11-16T01:08:40" class="time">01:08</a></td></tr>
<tr id="t2020-11-16T07:35:15"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2020-11-16T07:35:15" class="time">07:35</a></td></tr>
<tr id="t2020-11-16T07:35:20"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">good morning</td><td class="time"><a href="#t2020-11-16T07:35:20" class="time">07:35</a></td></tr>
<tr id="t2020-11-16T08:14:19"><th class="nick" style="background: #818144">micka</th><td class="text" style="color: #818144">yo</td><td class="time"><a href="#t2020-11-16T08:14:19" class="time">08:14</a></td></tr>
<tr id="t2020-11-16T08:20:56"><th class="nick" style="background: #854685">ThomasD13</th><td class="text" style="color: #854685">morning</td><td class="time"><a href="#t2020-11-16T08:20:56" class="time">08:20</a></td></tr>
<tr id="t2020-11-16T08:39:27"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888">hello, yocto does not allow me to set INITRAMFS_IMAGE = &quot;core-image-minimal-initramfs&quot; for my armv7 kernel recipe</td><td class="time"><a href="#t2020-11-16T08:39:27" class="time">08:39</a></td></tr>
<tr id="t2020-11-16T08:39:36"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888"><a href="https://pastebin.com/iqHc4J1W" rel="nofollow">https://pastebin.com/iqHc4J1W</a></td><td class="time"><a href="#t2020-11-16T08:39:36" class="time">08:39</a></td></tr>
<tr id="t2020-11-16T08:48:53"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888">is there no standard image recipe in poky that is usable for initramfs that can be run on an ARM platform?</td><td class="time"><a href="#t2020-11-16T08:48:53" class="time">08:48</a></td></tr>
<tr id="t2020-11-16T09:28:42"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">I have IMAGE_INSTALL += &quot;myrecipe&quot;. What if I have no &quot;myrecipe&quot; in my layer? How can I make it &quot;recommended&quot; to be able to build image without it without commenting out the line in my image file?</td><td class="time"><a href="#t2020-11-16T09:28:42" class="time">09:28</a></td></tr>
<tr id="t2020-11-16T09:29:32"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: where do you even have that? there are recommends for distro and machine, but not for images</td><td class="time"><a href="#t2020-11-16T09:29:32" class="time">09:29</a></td></tr>
<tr id="t2020-11-16T09:29:55"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">completely unrelated, shameless plug: <a href="https://twitter.com/TheYoctoJester/status/1328268563900215298" rel="nofollow">https://twitter.com/TheYoctoJester/status/1328268563900215298</a></td><td class="time"><a href="#t2020-11-16T09:29:55" class="time">09:29</a></td></tr>
<tr id="t2020-11-16T09:30:41"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">LetoThe2nd, I have it in my image .bb file... need to make it optional if recipe file is not exist</td><td class="time"><a href="#t2020-11-16T09:30:41" class="time">09:30</a></td></tr>
<tr id="t2020-11-16T09:32:44"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: sounds fishy. either your image needs it, or it doesn't. this would introduce different behaviours if a laer exists or not. I guess you can do with some black python magic, but i would strongly discourage it. plus, it tries to break the restriction of one recipe (even though just through pure exitence) affects another (the image)</td><td class="time"><a href="#t2020-11-16T09:32:44" class="time">09:32</a></td></tr>
<tr id="t2020-11-16T09:33:05"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: so my gut feeling (very strong!!!) is that your line of thinking is flawed somewhere.</td><td class="time"><a href="#t2020-11-16T09:33:05" class="time">09:33</a></td></tr>
<tr id="t2020-11-16T09:34:28"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: if at all, then this could go into the RRECOMMENDS for the distro your image builds for.</td><td class="time"><a href="#t2020-11-16T09:34:28" class="time">09:34</a></td></tr>
<tr id="t2020-11-16T09:38:17"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">LetoThe2nd, yes. the layer with this recipe may not exist. why yocto doesn't have this simple feature?</td><td class="time"><a href="#t2020-11-16T09:38:17" class="time">09:38</a></td></tr>
<tr id="t2020-11-16T09:39:21"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: if you think that it needs this feature, then why don't you send a simple patch for the simple feature?</td><td class="time"><a href="#t2020-11-16T09:39:21" class="time">09:39</a></td></tr>
<tr id="t2020-11-16T09:39:46"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: seriously, i have outlined some problems with your approach, as given pointers how to address them.</td><td class="time"><a href="#t2020-11-16T09:39:46" class="time">09:39</a></td></tr>
<tr id="t2020-11-16T09:40:21"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: you could also try a cross-layer include in your image into the maybe-existing layer which adds it, and silently does nothing if its not there.</td><td class="time"><a href="#t2020-11-16T09:40:21" class="time">09:40</a></td></tr>
<tr id="t2020-11-16T09:40:37"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: but still i am convinced that the approach is just plain wrong.</td><td class="time"><a href="#t2020-11-16T09:40:37" class="time">09:40</a></td></tr>
<tr id="t2020-11-16T09:41:11"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">LetoThe2nd, how whould you do this if you don't like to create one more imtermediate layer?</td><td class="time"><a href="#t2020-11-16T09:41:11" class="time">09:41</a></td></tr>
<tr id="t2020-11-16T09:41:31"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">and without python black magic?</td><td class="time"><a href="#t2020-11-16T09:41:31" class="time">09:41</a></td></tr>
<tr id="t2020-11-16T09:42:00"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888">boot halts for initramfs with &quot;Warning: unable to open an initial console&quot; even though I have devtmpfs enabled in kernel</td><td class="time"><a href="#t2020-11-16T09:42:00" class="time">09:42</a></td></tr>
<tr id="t2020-11-16T09:42:12"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: *sigh* i would not do that at all. if i bulid a speicifc image, then i expect it to have all the things that i set in IMAGE_INSTALL, and totally fail if it can't find them.</td><td class="time"><a href="#t2020-11-16T09:42:12" class="time">09:42</a></td></tr>
<tr id="t2020-11-16T09:43:07"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888">initramfs is built based on configs similar to poky-tiny</td><td class="time"><a href="#t2020-11-16T09:43:07" class="time">09:43</a></td></tr>
<tr id="t2020-11-16T09:43:17"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">LetoThe2nd, thanks</td><td class="time"><a href="#t2020-11-16T09:43:17" class="time">09:43</a></td></tr>
<tr id="t2020-11-16T09:43:24"><th class="nick" style="background: #488888">eduardas</th><td class="text" style="color: #488888">not sure what I'm doing wrong</td><td class="time"><a href="#t2020-11-16T09:43:24" class="time">09:43</a></td></tr>
<tr id="t2020-11-16T09:44:30"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: you're trying to abuse a feature that is not there. like i said, some RRECEOMMENDS trickery might do what you want - feel free to read up and meditate on <a href="https://www.yoctoproject.org/docs/current/ref-manual/ref-manual.html#var-RRECOMMENDS" rel="nofollow">https://www.yoctoproject.org/docs/current/ref-manual/ref-manual.html#var-RRECOMMENDS</a></td><td class="time"><a href="#t2020-11-16T09:44:30" class="time">09:44</a></td></tr>
<tr id="t2020-11-16T09:45:03"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">dv: but it comes at the total drawback of anybody who gets to use this will be confused.</td><td class="time"><a href="#t2020-11-16T09:45:03" class="time">09:45</a></td></tr>
<tr id="t2020-11-16T09:49:57"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">if you want to do trickery you might as well create a dummy recipe which delivers the package but fails to install in the IMAGE_INSTALL if it is used</td><td class="time"><a href="#t2020-11-16T09:49:57" class="time">09:49</a></td></tr>
<tr id="t2020-11-16T09:50:26"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">this way you can keep the IMAGE_INSTALL and you create a broken image if it is used...I might add this is really not a good idea though.</td><td class="time"><a href="#t2020-11-16T09:50:26" class="time">09:50</a></td></tr>
<tr id="t2020-11-16T09:50:46"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">ptsneves, thank you!</td><td class="time"><a href="#t2020-11-16T09:50:46" class="time">09:50</a></td></tr>
<tr id="t2020-11-16T09:51:01"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">you have an image recipe depending on a package you know will not be there it is normal that it fails. Working around that is not healthy</td><td class="time"><a href="#t2020-11-16T09:51:01" class="time">09:51</a></td></tr>
<tr id="t2020-11-16T09:51:26"><th class="nick" style="background: #8c4a4a">dv</th><td class="text" style="color: #8c4a4a">Seems, I just have to write the manual for the users to comment-out one line in the image recipe if they are building without private layer</td><td class="time"><a href="#t2020-11-16T09:51:26" class="time">09:51</a></td></tr>
<tr id="t2020-11-16T09:52:09"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">oh and the dummy recipe can even have a bbfatal&nbsp;&nbsp;in the install tasks if it is used.</td><td class="time"><a href="#t2020-11-16T09:52:09" class="time">09:52</a></td></tr>
<tr id="t2020-11-16T09:52:48"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">there you could write out there is supposed to be a private layer providing a propper version of the recipe or a bbappen overwriting the task</td><td class="time"><a href="#t2020-11-16T09:52:48" class="time">09:52</a></td></tr>
<tr id="t2020-11-16T09:54:39"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2020-11-16T09:54:39" class="time">09:54</a></td></tr>
<tr id="t2020-11-16T10:07:16"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">RP: I'd like to talk about proper design of a yarn fetcher, git suggests you'd be the right person, is that correct ?</td><td class="time"><a href="#t2020-11-16T10:07:16" class="time">10:07</a></td></tr>
<tr id="t2020-11-16T10:07:35"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">well, fetcher for bitbake, that is</td><td class="time"><a href="#t2020-11-16T10:07:35" class="time">10:07</a></td></tr>
<tr id="t2020-11-16T10:12:55"><td class="action" colspan="2">* LetoThe2nd just misread this as &quot;a yann fetcher&quot;... which is kind of funny.</td><td><a href="#t2020-11-16T10:12:55" class="time">10:12</a></td></tr>
<tr id="t2020-11-16T10:13:51"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">hey, getting people to fetch me is a nice idea to escape lockdown rules :)</td><td class="time"><a href="#t2020-11-16T10:13:51" class="time">10:13</a></td></tr>
<tr id="t2020-11-16T10:33:26"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: that is probably right, yes :)</td><td class="time"><a href="#t2020-11-16T10:33:26" class="time">10:33</a></td></tr>
<tr id="t2020-11-16T10:39:03"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">RP: the problem is they store the dependencies in a package.json which can include other files, and pinned versions of those in a separate yarn.lock file.&nbsp;&nbsp;This has lead me to a nasty do_fetch stage that unpacks the source in tmpdir to run yarn there to get it to fetch the deps in its own cache (new dir under DL_DIR), and then do_unpack makes yarn use that cache.&nbsp;&nbsp;This is a first thing that would want an improvement, and for which I lack further ideas, but</td><td class="time"><a href="#t2020-11-16T10:39:03" class="time">10:39</a></td></tr>
<tr id="t2020-11-16T10:39:03-2"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">that's not the worst.</td><td class="time"><a href="#t2020-11-16T10:39:03-2" class="time">10:39</a></td></tr>
<tr id="t2020-11-16T10:40:49"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: this has generally been the challenge with node, crates and so many of the modern approaches don't like to &quot;declare&quot; what they're doing :/</td><td class="time"><a href="#t2020-11-16T10:40:49" class="time">10:40</a></td></tr>
<tr id="t2020-11-16T10:43:23"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">The problem I have is cleany separating the (git) fetch of the main package from the one of the deps.&nbsp;&nbsp;Today our yarn fetcher derives from GitSM (which is arguably a ad-hoc design), and only rely on the donestamp from git, which causes issues (I guess I can overload those to add by-yarn.lock-cksum donestamps ), but that won't help separate from GitSM</td><td class="time"><a href="#t2020-11-16T10:43:23" class="time">10:43</a></td></tr>
<tr id="t2020-11-16T10:45:22"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">It would be better to let the recipe specify its normal source URI in the usual way, and then add a yarnlock:// URI, but the fact that file is usually shipped in main package, and requires all those package.json files, seems to bring to a deadend</td><td class="time"><a href="#t2020-11-16T10:45:22" class="time">10:45</a></td></tr>
<tr id="t2020-11-16T10:48:46"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: certainly gitsm can be used for inspiration but it did solve particular challenges submodules had so it may not be the way to solve for yarn</td><td class="time"><a href="#t2020-11-16T10:48:46" class="time">10:48</a></td></tr>
<tr id="t2020-11-16T10:49:35"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: has anyone ever mentioned this upstream to the developers? Did they give any hints about how it could work? Did debian or other distros find a way to work around this?</td><td class="time"><a href="#t2020-11-16T10:49:35" class="time">10:49</a></td></tr>
<tr id="t2020-11-16T10:49:43"><td class="action" colspan="2">* RP is just throwing out ideas...</td><td><a href="#t2020-11-16T10:49:43" class="time">10:49</a></td></tr>
<tr id="t2020-11-16T10:54:03"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">well, on Debian side we have the dh-make packaging helper which can extract dependency information from some of those metadata, but distro policy is &quot;only one version of each package&quot;, which translates here in &quot;all deps must be packaged first&quot;, and there is no &quot;recursive dh-make&quot; I know of which would do that</td><td class="time"><a href="#t2020-11-16T10:54:03" class="time">10:54</a></td></tr>
<tr id="t2020-11-16T10:54:42"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">anyway, those tools are only helpers and they occasionally guess wrong and their output needs manual tuning</td><td class="time"><a href="#t2020-11-16T10:54:42" class="time">10:54</a></td></tr>
<tr id="t2020-11-16T10:56:17"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">the end result is that many complicated packages (eg. electron) just don't make in any distro - anyway they wouldn't be used by the devs in the target ecosystem</td><td class="time"><a href="#t2020-11-16T10:56:17" class="time">10:56</a></td></tr>
<tr id="t2020-11-16T10:59:10"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">I have no clue in the case of yarn if anyone approached them, but I'm not sure anything could be done anyway - this &quot;independent package manager&quot; thing seems quite trendy (did you notice Qt6 is going to have one too?)</td><td class="time"><a href="#t2020-11-16T10:59:10" class="time">10:59</a></td></tr>
<tr id="t2020-11-16T11:00:34"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: sounds like debian has the same problems bitbake has then :/</td><td class="time"><a href="#t2020-11-16T11:00:34" class="time">11:00</a></td></tr>
<tr id="t2020-11-16T11:00:50"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">yeah, everyone has them, noone packages electron :)</td><td class="time"><a href="#t2020-11-16T11:00:50" class="time">11:00</a></td></tr>
<tr id="t2020-11-16T11:01:28"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: we might get to try and break new ground then...</td><td class="time"><a href="#t2020-11-16T11:01:28" class="time">11:01</a></td></tr>
<tr id="t2020-11-16T11:08:53"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">Getting packages &quot;properly packaged&quot; one at a time to avoid duplication maybe does not make sense for yocto anyway. Apps use things like yarn.lock or npmsw to make sure the users get the same versions of their deps as they do to make sure it will work.&nbsp;&nbsp;This is narrow-minded and notably disregards security management, and the end product is sort-of statically linked, which allows them to optimize the output somehow.</td><td class="time"><a href="#t2020-11-16T11:08:53" class="time">11:08</a></td></tr>
<tr id="t2020-11-16T11:11:00"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">I'm not sure of any major nodejs app packaged in Debian, for which we could check if there is any noticeable perf/ram-consumption downsides when compared to the statically-&quot;linked&quot; version</td><td class="time"><a href="#t2020-11-16T11:11:00" class="time">11:11</a></td></tr>
<tr id="t2020-11-16T11:11:08"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: I thought we'd moved to a model where we tried just to ensure it was a &quot;snapshot&quot; of the source. The key thing wasn't deduplication but ensuring that a build in three years time would show the same thing, i.e. reproducibility</td><td class="time"><a href="#t2020-11-16T11:11:08" class="time">11:11</a></td></tr>
<tr id="t2020-11-16T11:11:25"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: Have you looked at what rust is doing btw? That fetcher is out of tree but likely to merge in 3.3</td><td class="time"><a href="#t2020-11-16T11:11:25" class="time">11:11</a></td></tr>
<tr id="t2020-11-16T11:11:43"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">did not look, will have a look</td><td class="time"><a href="#t2020-11-16T11:11:43" class="time">11:11</a></td></tr>
<tr id="t2020-11-16T11:12:19"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: paulbarker reviewed it and said it seemed to be doing the right things to be mirrorable and so on</td><td class="time"><a href="#t2020-11-16T11:12:19" class="time">11:12</a></td></tr>
<tr id="t2020-11-16T11:12:20"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">the reproducibilty aspect is apparently well-handled by things like yarn.lock and npmsw</td><td class="time"><a href="#t2020-11-16T11:12:20" class="time">11:12</a></td></tr>
<tr id="t2020-11-16T11:13:15"><td class="action" colspan="2">* paulbarker reads...</td><td><a href="#t2020-11-16T11:13:15" class="time">11:13</a></td></tr>
<tr id="t2020-11-16T11:14:23"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">For Rust there is the `cargo bitbake` tool which parses the Cargo.toml file containing metadata, dependencies, etc and then creates a recipe from that</td><td class="time"><a href="#t2020-11-16T11:14:23" class="time">11:14</a></td></tr>
<tr id="t2020-11-16T11:14:43"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">So that parse step to find dependencies, etc happens in advance</td><td class="time"><a href="#t2020-11-16T11:14:43" class="time">11:14</a></td></tr>
<tr id="t2020-11-16T11:14:53"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">And the recipe encodes that data so the fetcher can be simple</td><td class="time"><a href="#t2020-11-16T11:14:53" class="time">11:14</a></td></tr>
<tr id="t2020-11-16T11:15:20"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">`cargo-bitbake` is written in Rust so I won't point at it but I will link a couple of recipes and the fetcher</td><td class="time"><a href="#t2020-11-16T11:15:20" class="time">11:15</a></td></tr>
<tr id="t2020-11-16T11:15:57"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">Recipe for a Rust app with dependencies: <a href="https://gitlab.com/pbarker.dev/rust/meta-rust-demo/-/blob/dunfell/recipes-demo/rust/print-rand_0.1.0.bb" rel="nofollow">https://gitlab.com/pbarker.dev/rust/meta-rust-demo/-/blob/dunfell/recipes-demo/rust/print-rand_0.1.0.bb</a></td><td class="time"><a href="#t2020-11-16T11:15:57" class="time">11:15</a></td></tr>
<tr id="t2020-11-16T11:16:12"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">Fetcher: <a href="https://github.com/meta-rust/meta-rust/blob/master/lib/crate.py" rel="nofollow">https://github.com/meta-rust/meta-rust/blob/master/lib/crate.py</a></td><td class="time"><a href="#t2020-11-16T11:16:12" class="time">11:16</a></td></tr>
<tr id="t2020-11-16T11:17:07"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">yann: ^^^</td><td class="time"><a href="#t2020-11-16T11:17:07" class="time">11:17</a></td></tr>
<tr id="t2020-11-16T11:19:14"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">thx paulbarker</td><td class="time"><a href="#t2020-11-16T11:19:14" class="time">11:19</a></td></tr>
<tr id="t2020-11-16T11:48:39"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">paulbarker: thanks! It does sound like its doing a reasonable job at handling things</td><td class="time"><a href="#t2020-11-16T11:48:39" class="time">11:48</a></td></tr>
<tr id="t2020-11-16T11:49:49"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">RP: I think it's pretty good. Proposing it to bitbake itself near the top of my todo list, I'll need to write a couple of test cases for it first</td><td class="time"><a href="#t2020-11-16T11:49:49" class="time">11:49</a></td></tr>
<tr id="t2020-11-16T11:50:35"><th class="nick" style="background: #539e9e">paulbarker</th><td class="text" style="color: #539e9e">RP: The fact that monkey patching it in via a bbclass works did shock me: <a href="https://github.com/meta-rust/meta-rust/blob/master/classes/crate-fetch.bbclass" rel="nofollow">https://github.com/meta-rust/meta-rust/blob/master/classes/crate-fetch.bbclass</a></td><td class="time"><a href="#t2020-11-16T11:50:35" class="time">11:50</a></td></tr>
<tr id="t2020-11-16T11:50:52"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">paulbarker: it sounds like it'd be a good addition and is in reasonable shape</td><td class="time"><a href="#t2020-11-16T11:50:52" class="time">11:50</a></td></tr>
<tr id="t2020-11-16T11:51:08"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">paulbarker: they dynamic patching you can do is actually scary. I keep quiet as I don't want to encourage it</td><td class="time"><a href="#t2020-11-16T11:51:08" class="time">11:51</a></td></tr>
<tr id="t2020-11-16T12:49:09"><th class="nick" style="background: #a25555">rfried</th><td class="text" style="color: #a25555">Hey. I have a package that is being build and I don't seem to find where it's configured for being included in the distribution.</td><td class="time"><a href="#t2020-11-16T12:49:09" class="time">12:49</a></td></tr>
<tr id="t2020-11-16T12:49:09-2"><th class="nick" style="background: #a25555">rfried</th><td class="text" style="color: #a25555">Is there a command I can use to figure that out ?</td><td class="time"><a href="#t2020-11-16T12:49:09-2" class="time">12:49</a></td></tr>
<tr id="t2020-11-16T12:49:34"><th class="nick" style="background: #a25555">rfried</th><td class="text" style="color: #a25555">I think it's probably a dependency of something, but I can't seem to figure out of what.</td><td class="time"><a href="#t2020-11-16T12:49:34" class="time">12:49</a></td></tr>
<tr id="t2020-11-16T12:50:32"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">hello, im trying to make my own distribution based on this <a href="https://github.com/STMicroelectronics/meta-st-openstlinux/blob/dunfell/conf/distro/openstlinux-eglfs.conf" rel="nofollow">https://github.com/STMicroelectronics/meta-st-openstlinux/blob/dunfell/conf/distro/openstlinux-eglfs.conf</a></td><td class="time"><a href="#t2020-11-16T12:50:32" class="time">12:50</a></td></tr>
<tr id="t2020-11-16T12:52:13"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">i have my own layer and this conf file <a href="https://pastebin.com/mJqFqNYE" rel="nofollow">https://pastebin.com/mJqFqNYE</a></td><td class="time"><a href="#t2020-11-16T12:52:13" class="time">12:52</a></td></tr>
<tr id="t2020-11-16T12:53:20"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">but when im trying to initialize the build enviroment with &quot;DISTRO=atlinux-eglfs MACHINE=stm32mp1 source layers/meta-st/scripts/envsetup.sh&quot; i get this error message: [ERROR] No 'atlinux-eglfs.conf' file available in layers/meta-st</td><td class="time"><a href="#t2020-11-16T12:53:20" class="time">12:53</a></td></tr>
<tr id="t2020-11-16T12:53:22"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">rfried: easiest way is to either remove the recipe completely and see what fails to build, or add PACKAGE_EXCLUDE = &quot;whatever&quot; in your local.conf</td><td class="time"><a href="#t2020-11-16T12:53:22" class="time">12:53</a></td></tr>
<tr id="t2020-11-16T12:54:31"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">nohit: wondering if your path shouldn't just be include conf/distro/openstlinux-eglfs.conf</td><td class="time"><a href="#t2020-11-16T12:54:31" class="time">12:54</a></td></tr>
<tr id="t2020-11-16T12:54:41"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">(the include is relative to **any** layers root</td><td class="time"><a href="#t2020-11-16T12:54:41" class="time">12:54</a></td></tr>
<tr id="t2020-11-16T12:54:52"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">ok ill try that, thanks</td><td class="time"><a href="#t2020-11-16T12:54:52" class="time">12:54</a></td></tr>
<tr id="t2020-11-16T12:55:28"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">what's the name of your conf file btw?</td><td class="time"><a href="#t2020-11-16T12:55:28" class="time">12:55</a></td></tr>
<tr id="t2020-11-16T12:55:43"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">are you also sure your layer is correctly named and added to bblayers.conf?</td><td class="time"><a href="#t2020-11-16T12:55:43" class="time">12:55</a></td></tr>
<tr id="t2020-11-16T12:56:02"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">atlinux-eglfs.conf</td><td class="time"><a href="#t2020-11-16T12:56:02" class="time">12:56</a></td></tr>
<tr id="t2020-11-16T12:57:13"><th class="nick" style="background: #a25555">rfried</th><td class="text" style="color: #a25555">qschulz: thanks.</td><td class="time"><a href="#t2020-11-16T12:57:13" class="time">12:57</a></td></tr>
<tr id="t2020-11-16T12:57:13-2"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">nohit: and you've put it into meta-mylayer/conf/distro/ right?</td><td class="time"><a href="#t2020-11-16T12:57:13-2" class="time">12:57</a></td></tr>
<tr id="t2020-11-16T12:57:29"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">yes</td><td class="time"><a href="#t2020-11-16T12:57:29" class="time">12:57</a></td></tr>
<tr id="t2020-11-16T12:59:59"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">path correction didnt help</td><td class="time"><a href="#t2020-11-16T12:59:59" class="time">12:59</a></td></tr>
<tr id="t2020-11-16T13:02:41"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">I have libarchive depending on zstd. On another recipe X there is a DEPENDS on libarchive. I would expect that libzstd would be in the sysroot due to X depending on libarchive. The dependency even shows on the pn-depends. Even so randomly the libzstd needed by libarchive on linking is not available. Any ideas?</td><td class="time"><a href="#t2020-11-16T13:02:41" class="time">13:02</a></td></tr>
<tr id="t2020-11-16T13:03:28"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">hell guys, the dynamic patching to add a fetcher is just insanely useful (even though proper plugability would probably be preferable) - I slap myself for not thinking about it and maintaining a branch of the poky repo just for our yarn fetcher...</td><td class="time"><a href="#t2020-11-16T13:03:28" class="time">13:03</a></td></tr>
<tr id="t2020-11-16T13:04:04"><th class="nick" style="background: #5959a9">qschulz</th><td class="text" style="color: #5959a9">nohit: debug their layers/meta-st/scripts/envsetup.sh script, it;s not original poky</td><td class="time"><a href="#t2020-11-16T13:04:04" class="time">13:04</a></td></tr>
<tr id="t2020-11-16T13:19:03"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">qschulz: seem that if i dont give the distro variable while initializing the build environment it works</td><td class="time"><a href="#t2020-11-16T13:19:03" class="time">13:19</a></td></tr>
<tr id="t2020-11-16T13:20:00"><th class="nick" style="background: #57a657">nohit</th><td class="text" style="color: #57a657">if i just change it in local.conf</td><td class="time"><a href="#t2020-11-16T13:20:00" class="time">13:20</a></td></tr>
<tr id="t2020-11-16T13:38:10"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">RP, paulbarker: I guess the approach for yarn has to be a bit different than for crate: I fear we cannot get into individual deps fetching without messing with how yarn internally manages them (of which I have near to no clue). I can see the upside of the approach, though</td><td class="time"><a href="#t2020-11-16T13:38:10" class="time">13:38</a></td></tr>
<tr id="t2020-11-16T13:47:47"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">yann: fair enough, I just thought it worth looking at. I don't know enough to help unfortunately</td><td class="time"><a href="#t2020-11-16T13:47:47" class="time">13:47</a></td></tr>
<tr id="t2020-11-16T13:52:51"><th class="nick" style="background: #97974f">yann</th><td class="text" style="color: #97974f">doing something similar would be great though, I'll have a quick look just in case</td><td class="time"><a href="#t2020-11-16T13:52:51" class="time">13:52</a></td></tr>
<tr id="t2020-11-16T13:56:55"><td class="nickchange" colspan="2">*** anoo1- is now known as help</td><td><a href="#t2020-11-16T13:56:55" class="time">13:56</a></td></tr>
<tr id="t2020-11-16T13:57:24"><td class="nickchange" colspan="2">*** help is now known as Guest99191</td><td><a href="#t2020-11-16T13:57:24" class="time">13:57</a></td></tr>
<tr id="t2020-11-16T13:57:53"><td class="nickchange" colspan="2">*** Guest99191 is now known as anoo1</td><td><a href="#t2020-11-16T13:57:53" class="time">13:57</a></td></tr>
<tr id="t2020-11-16T14:39:04"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">RP: Ah, accidentally sent that systemd patch against gatesgarth... pushed a V2</td><td class="time"><a href="#t2020-11-16T14:39:04" class="time">14:39</a></td></tr>
<tr id="t2020-11-16T14:54:06"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">JPEW: thanks</td><td class="time"><a href="#t2020-11-16T14:54:06" class="time">14:54</a></td></tr>
<tr id="t2020-11-16T14:57:49"><th class="nick" style="background: #adad5b">mcfrisk</th><td class="text" style="color: #adad5b">hmm what about removing mozjs from polkit dependencies by using duktape as optional patch <a href="https://gitlab.freedesktop.org/polkit/polkit/-/merge_requests/35" rel="nofollow">https://gitlab.freedesktop.org/polkit/polkit/-/merge_requests/35</a> in yocto?</td><td class="time"><a href="#t2020-11-16T14:57:49" class="time">14:57</a></td></tr>
<tr id="t2020-11-16T14:59:50"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">mcfrisk: Ya, I think that would be better long term, since it looks like systemd is moving in the direction of polkit being mandatory. However, IMHO they still have the regression in behavior when not using polkit that needs to be fixed :/</td><td class="time"><a href="#t2020-11-16T14:59:50" class="time">14:59</a></td></tr>
<tr id="t2020-11-16T15:01:05"><th class="nick" style="background: #adad5b">mcfrisk</th><td class="text" style="color: #adad5b">systemd requiring polkit, that ... is not good, hard to keep tone down</td><td class="time"><a href="#t2020-11-16T15:01:05" class="time">15:01</a></td></tr>
<tr id="t2020-11-16T15:01:26"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">mcfrisk: Ya, I'm not particularly thrilled either</td><td class="time"><a href="#t2020-11-16T15:01:26" class="time">15:01</a></td></tr>
<tr id="t2020-11-16T15:01:40"><th class="nick" style="background: #adad5b">mcfrisk</th><td class="text" style="color: #adad5b">having seen mozjs double in binary sizeon rootfs in past few years, now it also affects boot times...</td><td class="time"><a href="#t2020-11-16T15:01:40" class="time">15:01</a></td></tr>
<tr id="t2020-11-16T15:03:55"><th class="nick" style="background: #adad5b">mcfrisk</th><td class="text" style="color: #adad5b">JPEW: thanks for your patch!!</td><td class="time"><a href="#t2020-11-16T15:03:55" class="time">15:03</a></td></tr>
<tr id="t2020-11-16T15:04:52"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">mcfrisk: Ya. I *really* hope upstream takes it</td><td class="time"><a href="#t2020-11-16T15:04:52" class="time">15:04</a></td></tr>
<tr id="t2020-11-16T15:13:16"><th class="nick" style="background: #adad5b">mcfrisk</th><td class="text" style="color: #adad5b">JPEW: hope it helps, I reviewed the patches on systemd side. thanks again!</td><td class="time"><a href="#t2020-11-16T15:13:16" class="time">15:13</a></td></tr>
<tr id="t2020-11-16T15:26:52"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">mcfrisk: Thanks!</td><td class="time"><a href="#t2020-11-16T15:26:52" class="time">15:26</a></td></tr>
<tr id="t2020-11-16T15:32:02"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">Hey guys in cmake.bbclass there is this line: echo &quot;set( CMAKE_FIND_ROOT_PATH ${STAGING_DIR_HOST} ${STAGING_DIR_NATIVE} ${CROSS_DIR} )&quot; &gt;&gt; ${WORKDIR}/toolchain.cmake</td><td class="time"><a href="#t2020-11-16T15:32:02" class="time">15:32</a></td></tr>
<tr id="t2020-11-16T15:32:37"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">This is allowing a leakage of native libraries into the compilation if for some reason the STAGING_DIR_HOST does not have the library</td><td class="time"><a href="#t2020-11-16T15:32:37" class="time">15:32</a></td></tr>
<tr id="t2020-11-16T15:33:07"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">i did a git log -S for this line but from what i see it is this way since 2010. Am i missing something?</td><td class="time"><a href="#t2020-11-16T15:33:07" class="time">15:33</a></td></tr>
<tr id="t2020-11-16T15:33:29"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">ptsneves: is that necessary to make it able to find the native *binaries*? or is that only for the libraries? binaries from the native sysroot are necessary..</td><td class="time"><a href="#t2020-11-16T15:33:29" class="time">15:33</a></td></tr>
<tr id="t2020-11-16T15:33:48"><th class="nick" style="background: #5fb4b4">tepperson</th><td class="text" style="color: #5fb4b4">is there a way to use bmap-tools to resize the last partition to completely fill the target disk?</td><td class="time"><a href="#t2020-11-16T15:33:48" class="time">15:33</a></td></tr>
<tr id="t2020-11-16T15:34:17"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">tepperson: doubtful, you have to resize the filesystem too, no? most folks just set up a service to do it on first boot afaik</td><td class="time"><a href="#t2020-11-16T15:34:17" class="time">15:34</a></td></tr>
<tr id="t2020-11-16T15:34:24"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">96boards-tools has one, for example</td><td class="time"><a href="#t2020-11-16T15:34:24" class="time">15:34</a></td></tr>
<tr id="t2020-11-16T15:34:47"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">ptsneves The point is that i do not think it is correct in any way to have the native library path getting included into a cross compilation.</td><td class="time"><a href="#t2020-11-16T15:34:47" class="time">15:34</a></td></tr>
<tr id="t2020-11-16T15:35:30"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">but that's not correct. buildsystems *often* need to run host/native tooling to do their builds, or build *for* the host and then run those built tools to cross-compile</td><td class="time"><a href="#t2020-11-16T15:35:30" class="time">15:35</a></td></tr>
<tr id="t2020-11-16T15:35:33"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">you can't fully isolate</td><td class="time"><a href="#t2020-11-16T15:35:33" class="time">15:35</a></td></tr>
<tr id="t2020-11-16T15:35:57"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">you can prevent linking against or finding headers on the host, but tools are necessary</td><td class="time"><a href="#t2020-11-16T15:35:57" class="time">15:35</a></td></tr>
<tr id="t2020-11-16T15:36:35"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">defitely. but i cannot see any reason why native libraries are needed to be included in a cross compilation gcc command</td><td class="time"><a href="#t2020-11-16T15:36:35" class="time">15:36</a></td></tr>
<tr id="t2020-11-16T15:36:57"><th class="nick" style="background: #5fb4b4">tepperson</th><td class="text" style="color: #5fb4b4">kergoth: i thought wic write ./blabla/imagefile.wic /dev/whatever --resize=auto could accomplish this,(or does this only resize the partition</td><td class="time"><a href="#t2020-11-16T15:36:57" class="time">15:36</a></td></tr>
<tr id="t2020-11-16T15:37:13"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">hmm, good question</td><td class="time"><a href="#t2020-11-16T15:37:13" class="time">15:37</a></td></tr>
<tr id="t2020-11-16T15:43:30"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">kergoth the result is this</td><td class="time"><a href="#t2020-11-16T15:43:30" class="time">15:43</a></td></tr>
<tr id="t2020-11-16T15:43:35"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">| /build/tmp/sysroots/x86_64-linux/usr/bin/i686-pc-linux-gnu/../../libexec/i686-pc-linux-gnu/gcc/i686-pc-linux-gnu/9.1.0/ld: /build/tmp/sysroots/x86_64-linux/usr/lib/libprotobuf.so: error adding symbols: file in wrong format</td><td class="time"><a href="#t2020-11-16T15:43:35" class="time">15:43</a></td></tr>
<tr id="t2020-11-16T15:48:26"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">Hello, I'm attempting to override avahi-daemon.conf with a .bbappend file in my meta-layer, but I cannot seem to override the file and only seem to be able to insert files into the directory via the bbappend file.</td><td class="time"><a href="#t2020-11-16T15:48:26" class="time">15:48</a></td></tr>
<tr id="t2020-11-16T15:48:41"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">from my understanding of the documentation this seems like a cmake shortcoming. Could it be that we could put the package configs in the target sysroot and thus not need the native root path ?</td><td class="time"><a href="#t2020-11-16T15:48:41" class="time">15:48</a></td></tr>
<tr id="t2020-11-16T15:49:26"><th class="nick" style="background: #4d4d93">ptsneves</th><td class="text" style="color: #4d4d93">and the compiler of course...because otherwise cmake does not find the compiler</td><td class="time"><a href="#t2020-11-16T15:49:26" class="time">15:49</a></td></tr>
<tr id="t2020-11-16T15:50:33"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: I think that's a file provided by upstream, not in OE, so you can't override it that way?</td><td class="time"><a href="#t2020-11-16T15:50:33" class="time">15:50</a></td></tr>
<tr id="t2020-11-16T15:51:03"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: e.g. overriding a file in a bbappend only works for files provided in OE, not files installed by the recipe itself</td><td class="time"><a href="#t2020-11-16T15:51:03" class="time">15:51</a></td></tr>
<tr id="t2020-11-16T15:51:56"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">JPEW: ah that makes sense... What's the most recommended way to fix that?</td><td class="time"><a href="#t2020-11-16T15:51:56" class="time">15:51</a></td></tr>
<tr id="t2020-11-16T15:52:21"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">JPEW: this is my bbappend file if it helps -- <a href="https://gist.github.com/RobGries/9f8bdf4050ae8e73f74e790bd4fa0d84" rel="nofollow">https://gist.github.com/RobGries/9f8bdf4050ae8e73f74e790bd4fa0d84</a></td><td class="time"><a href="#t2020-11-16T15:52:21" class="time">15:52</a></td></tr>
<tr id="t2020-11-16T15:52:58"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: install over the upstream provided file in do_install_append()</td><td class="time"><a href="#t2020-11-16T15:52:58" class="time">15:52</a></td></tr>
<tr id="t2020-11-16T15:53:21"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: Looks like you have a comment to that effect...</td><td class="time"><a href="#t2020-11-16T15:53:21" class="time">15:53</a></td></tr>
<tr id="t2020-11-16T15:54:08"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">JPEW: Yeah, I took it out because I was worried about the &quot;multiple recipes affecting a single file problem&quot; but I guess that does not apply to bbappends?</td><td class="time"><a href="#t2020-11-16T15:54:08" class="time">15:54</a></td></tr>
<tr id="t2020-11-16T15:55:28"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: Ya, as long as the original .bb was providing avahi-daemon.conf, replacing it with a different one in a .bbappend won't cause that problem</td><td class="time"><a href="#t2020-11-16T15:55:28" class="time">15:55</a></td></tr>
<tr id="t2020-11-16T15:56:08"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">rob_gries: see recipetool appendfile and recipetool appendsrcfile</td><td class="time"><a href="#t2020-11-16T15:56:08" class="time">15:56</a></td></tr>
<tr id="t2020-11-16T15:56:18"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">the latter for files coming from oe or the upstream sources, the latter for files on target</td><td class="time"><a href="#t2020-11-16T15:56:18" class="time">15:56</a></td></tr>
<tr id="t2020-11-16T15:56:22"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">er, the former for files on target</td><td class="time"><a href="#t2020-11-16T15:56:22" class="time">15:56</a></td></tr>
<tr id="t2020-11-16T15:56:29"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">just a convenience around the bbappend setup</td><td class="time"><a href="#t2020-11-16T15:56:29" class="time">15:56</a></td></tr>
<tr id="t2020-11-16T15:56:43"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">JPEW: Thanks, I'll try that out</td><td class="time"><a href="#t2020-11-16T15:56:43" class="time">15:56</a></td></tr>
<tr id="t2020-11-16T15:57:08"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">rob_gries: FWIW, we are also modifying avahi-daemon.conf, just with a patch on the upstream source.... it might be worth adding support for a custom avahi-daemon.conf in OE-core?</td><td class="time"><a href="#t2020-11-16T15:57:08" class="time">15:57</a></td></tr>
<tr id="t2020-11-16T15:57:52"><th class="nick" style="background: #407a40">JPEW</th><td class="text" style="color: #407a40">note: I like your idea better than patching :)</td><td class="time"><a href="#t2020-11-16T15:57:52" class="time">15:57</a></td></tr>
<tr id="t2020-11-16T15:58:33"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">kergoth: are recipetool appendfile and recipetool appendsrcfile available in Yocto Jethro? (I know it's old, but the vendor (Qualcomm) of the BSP will not upgrade it)</td><td class="time"><a href="#t2020-11-16T15:58:33" class="time">15:58</a></td></tr>
<tr id="t2020-11-16T15:58:43"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">oof. no idea :)</td><td class="time"><a href="#t2020-11-16T15:58:43" class="time">15:58</a></td></tr>
<tr id="t2020-11-16T15:59:46"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">hi guys, I was trying to boot a yocto image from an sdcard into my embedded system and I'm having a message saying &quot;Could not find a valid device tree&quot;</td><td class="time"><a href="#t2020-11-16T15:59:46" class="time">15:59</a></td></tr>
<tr id="t2020-11-16T16:00:30"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">JPEW and kergoth: Thanks, I have an idea what I shall try next.</td><td class="time"><a href="#t2020-11-16T16:00:30" class="time">16:00</a></td></tr>
<tr id="t2020-11-16T16:00:53"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62"><a href="https://imgur.com/JycXcnC.png" rel="nofollow">https://imgur.com/JycXcnC.png</a></td><td class="time"><a href="#t2020-11-16T16:00:53" class="time">16:00</a></td></tr>
<tr id="t2020-11-16T16:01:10"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">what do you think could be the problem?</td><td class="time"><a href="#t2020-11-16T16:01:10" class="time">16:01</a></td></tr>
<tr id="t2020-11-16T16:03:47"><th class="nick" style="background: #b86161">rob_gries</th><td class="text" style="color: #b86161">wyre: looks like your dtb is either not existent or invalid, you should check if the DTB is on the card. Also, you should check the path of where the bootcmd 'bootcmd_mmc' is looking for your dtb files</td><td class="time"><a href="#t2020-11-16T16:03:47" class="time">16:03</a></td></tr>
<tr id="t2020-11-16T17:16:47"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">could I include some package manager in yocto?</td><td class="time"><a href="#t2020-11-16T17:16:47" class="time">17:16</a></td></tr>
<tr id="t2020-11-16T17:34:15"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">wyre: a package manager won't help with this issue though</td><td class="time"><a href="#t2020-11-16T17:34:15" class="time">17:34</a></td></tr>
<tr id="t2020-11-16T17:35:15"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">mckoan, which issue?</td><td class="time"><a href="#t2020-11-16T17:35:15" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:35:16"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">wyre: usually the package manager is included by EXTRA_IMAGE_FEATURES += &quot;package-management&quot;</td><td class="time"><a href="#t2020-11-16T17:35:16" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:35:30"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">wyre: the dtb above</td><td class="time"><a href="#t2020-11-16T17:35:30" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:35:35"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">oh, you mean the issue with dtb, yeah</td><td class="time"><a href="#t2020-11-16T17:35:35" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:35:40"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">no, that issue was solved</td><td class="time"><a href="#t2020-11-16T17:35:40" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:35:56"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">wyre: great. MicroGEA is a good choice</td><td class="time"><a href="#t2020-11-16T17:35:56" class="time">17:35</a></td></tr>
<tr id="t2020-11-16T17:36:35"><th class="nick" style="background: #42427e">mckoan</th><td class="text" style="color: #42427e">wyre: happy hacking, time to quit</td><td class="time"><a href="#t2020-11-16T17:36:35" class="time">17:36</a></td></tr>
<tr id="t2020-11-16T17:36:38"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2020-11-16T17:36:38" class="time">17:36</a></td></tr>
<tr id="t2020-11-16T17:37:55"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">the problem was the U-boot couldn't find the default device tree of the kernel. But I've fixed this switching the default device tree with editenv</td><td class="time"><a href="#t2020-11-16T17:37:55" class="time">17:37</a></td></tr>
<tr id="t2020-11-16T17:46:00"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">and which package manager will be added if I use that flag in building process?</td><td class="time"><a href="#t2020-11-16T17:46:00" class="time">17:46</a></td></tr>
<tr id="t2020-11-16T17:48:30"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">depends on what you've configured.</td><td class="time"><a href="#t2020-11-16T17:48:30" class="time">17:48</a></td></tr>
<tr id="t2020-11-16T17:48:48"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">see PACKAGE_CLASSES ?= &quot;package_rpm&quot;</td><td class="time"><a href="#t2020-11-16T17:48:48" class="time">17:48</a></td></tr>
<tr id="t2020-11-16T17:48:54"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">in your local.conf for option.</td><td class="time"><a href="#t2020-11-16T17:48:54" class="time">17:48</a></td></tr>
<tr id="t2020-11-16T17:48:57"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">s/option/options/</td><td class="time"><a href="#t2020-11-16T17:48:57" class="time">17:48</a></td></tr>
<tr id="t2020-11-16T18:19:37"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, just deb and rpm classes are supported?</td><td class="time"><a href="#t2020-11-16T18:19:37" class="time">18:19</a></td></tr>
<tr id="t2020-11-16T18:19:49"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">and what about the sources?</td><td class="time"><a href="#t2020-11-16T18:19:49" class="time">18:19</a></td></tr>
<tr id="t2020-11-16T18:19:59"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">they are listed in your local.conf template. there's deb, rpm and ipk</td><td class="time"><a href="#t2020-11-16T18:19:59" class="time">18:19</a></td></tr>
<tr id="t2020-11-16T18:27:07"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, so could I get a kind of Debian based on yocto?</td><td class="time"><a href="#t2020-11-16T18:27:07" class="time">18:27</a></td></tr>
<tr id="t2020-11-16T18:30:10"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">you could produce your own .debs, which are packaged based on the oe/yocto recipes. And you'd have your own package feed to grab packages from. The similarity is the package format, and that's about it. For updates, etc, you need to maintain your own feed.</td><td class="time"><a href="#t2020-11-16T18:30:10" class="time">18:30</a></td></tr>
<tr id="t2020-11-16T18:30:21"><td class="part" colspan="2">*** dmoseley` &lt;dmoseley`!~user@24.96.56.90&gt; has left #yocto</td><td><a href="#t2020-11-16T18:30:21" class="time">18:30</a></td></tr>
<tr id="t2020-11-16T18:32:52"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, so you could, for example, package your own kernel and manage it through the package manager?</td><td class="time"><a href="#t2020-11-16T18:32:52" class="time">18:32</a></td></tr>
<tr id="t2020-11-16T18:34:47"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">yes. of course, you picked the hardest thing to package / manage on target for upgrades :D But AFAIK in master, we have all the right changes to now have conflicting kernels, etc, if you do it via package updates.</td><td class="time"><a href="#t2020-11-16T18:34:47" class="time">18:34</a></td></tr>
<tr id="t2020-11-16T18:36:51"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, &quot;to now have conflicting kernels&quot;? what do you mean?</td><td class="time"><a href="#t2020-11-16T18:36:51" class="time">18:36</a></td></tr>
<tr id="t2020-11-16T18:37:38"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">and what's the link to the repo?</td><td class="time"><a href="#t2020-11-16T18:37:38" class="time">18:37</a></td></tr>
<tr id="t2020-11-16T18:37:42"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">the way the kernels were packaged in the past, you could only have one installed at a time, and that made some upgrades problematic. I think all the update-alernatives, symlinks, etc,</td><td class="time"><a href="#t2020-11-16T18:37:42" class="time">18:37</a></td></tr>
<tr id="t2020-11-16T18:37:53"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">are right now, but I haven't done it in a while. So I can't say</td><td class="time"><a href="#t2020-11-16T18:37:53" class="time">18:37</a></td></tr>
<tr id="t2020-11-16T18:38:07"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">there's no global repo, like debian, it would be your own.</td><td class="time"><a href="#t2020-11-16T18:38:07" class="time">18:38</a></td></tr>
<tr id="t2020-11-16T18:38:18"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">the yocto mega manual discusses the setup, IIRC.</td><td class="time"><a href="#t2020-11-16T18:38:18" class="time">18:38</a></td></tr>
<tr id="t2020-11-16T18:38:50"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">oh, I ask because you said &quot;in master, we have all the right changes ...&quot;</td><td class="time"><a href="#t2020-11-16T18:38:50" class="time">18:38</a></td></tr>
<tr id="t2020-11-16T18:39:29"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">meaning I don't know about any older releases, since I haven't tested it. but what's in the master branch of oe-core should work.</td><td class="time"><a href="#t2020-11-16T18:39:29" class="time">18:39</a></td></tr>
<tr id="t2020-11-16T18:41:32"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, and what's that master branch of oe-core?</td><td class="time"><a href="#t2020-11-16T18:41:32" class="time">18:41</a></td></tr>
<tr id="t2020-11-16T18:41:51"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">s/what's/where's/</td><td class="time"><a href="#t2020-11-16T18:41:51" class="time">18:41</a></td></tr>
<tr id="t2020-11-16T18:42:42"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">if you are cloning poky to build, you are getting it as part of that (meta/ and some other directories). which I assume you are, since you asked that question.</td><td class="time"><a href="#t2020-11-16T18:42:42" class="time">18:42</a></td></tr>
<tr id="t2020-11-16T18:43:13"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, well, I'm using the BSP provided by the manufacturer</td><td class="time"><a href="#t2020-11-16T18:43:13" class="time">18:43</a></td></tr>
<tr id="t2020-11-16T18:43:28"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">then I have no idea :D</td><td class="time"><a href="#t2020-11-16T18:43:28" class="time">18:43</a></td></tr>
<tr id="t2020-11-16T18:43:40"><th class="nick" style="background: #6464bf">zeddii</th><td class="text" style="color: #6464bf">I'm sure they are bundling up some random version, but I can't comment on that.</td><td class="time"><a href="#t2020-11-16T18:43:40" class="time">18:43</a></td></tr>
<tr id="t2020-11-16T18:43:53"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">zeddii, it mainly includes a vmware image for an Ubuntu where are these files</td><td class="time"><a href="#t2020-11-16T18:43:53" class="time">18:43</a></td></tr>
<tr id="t2020-11-16T18:44:56"><th class="nick" style="background: #62bb62">wyre</th><td class="text" style="color: #62bb62">I'm considering to use the crops docker container </td><td class="time"><a href="#t2020-11-16T18:44:56" class="time">18:44</a></td></tr>
<tr id="t2020-11-16T19:13:51"><td class="part" colspan="2">*** dmoseley` &lt;dmoseley`!~user@24.96.56.90&gt; has left #yocto</td><td><a href="#t2020-11-16T19:13:51" class="time">19:13</a></td></tr>
<tr id="t2020-11-16T19:16:53"><td class="nickchange" colspan="2">*** Guest84242 is now known as khem</td><td><a href="#t2020-11-16T19:16:53" class="time">19:16</a></td></tr>
<tr id="t2020-11-16T19:23:23"><td class="nickchange" colspan="2">*** mprokos is now known as rabbit9911</td><td><a href="#t2020-11-16T19:23:23" class="time">19:23</a></td></tr>
<tr id="t2020-11-16T19:24:30"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">How is the workdir determined between machine specific packages and generic?</td><td class="time"><a href="#t2020-11-16T19:24:30" class="time">19:24</a></td></tr>
<tr id="t2020-11-16T19:24:46"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">Happy to look at the code that does this but can't find it.</td><td class="time"><a href="#t2020-11-16T19:24:46" class="time">19:24</a></td></tr>
<tr id="t2020-11-16T19:27:40"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">For instance if I check a MACHINE_FEATURE in a recipe does that change the WORKDIR?</td><td class="time"><a href="#t2020-11-16T19:27:40" class="time">19:27</a></td></tr>
<tr id="t2020-11-16T19:31:36-2"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-11-16T19:31:36-2" class="time">19:31</a></td></tr>
<tr id="t2020-11-16T19:36:34"><th class="nick" style="background: #c668c6">khem</th><td class="text" style="color: #c668c6">rabbit9911: yes, it looks for MACHINE specific dependencies in recipe metadata and determines it. you can also force it via setting PACKAGE_ARCH explicitly in machine.</td><td class="time"><a href="#t2020-11-16T19:36:34" class="time">19:36</a></td></tr>
<tr id="t2020-11-16T19:37:10"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">khem: thanks! Do you know where that logic is?</td><td class="time"><a href="#t2020-11-16T19:37:10" class="time">19:37</a></td></tr>
<tr id="t2020-11-16T20:16:14"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">khem: In base.bbclass I see some logic that checks the src_uri. I dont se anything that checks for MACHINE_FEATURES</td><td class="time"><a href="#t2020-11-16T20:16:14" class="time">20:16</a></td></tr>
<tr id="t2020-11-16T20:17:16"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">Would this imply that if you have a recipe that checks MACHINE_FEATURES you might want to set PACKAGE_ARCH = &quot;${MACHINE_ARCH}&quot;?</td><td class="time"><a href="#t2020-11-16T20:17:16" class="time">20:17</a></td></tr>
<tr id="t2020-11-16T20:18:41"><th class="nick" style="background: #c3c366">rabbit9911</th><td class="text" style="color: #c3c366">Otherwise sharing a build directory would mean rebuilding that package for each MACHINE?</td><td class="time"><a href="#t2020-11-16T20:18:41" class="time">20:18</a></td></tr>
<tr id="t2020-11-16T20:38:20"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2020-11-16T20:38:20" class="time">20:38</a></td></tr>
<tr id="t2020-11-16T20:54:46"><td class="nickchange" colspan="2">*** bluelightning_ is now known as bluelightning</td><td><a href="#t2020-11-16T20:54:46" class="time">20:54</a></td></tr>
<tr id="t2020-11-16T22:33:02"><th class="nick" style="background: #9b519b">RP</th><td class="text" style="color: #9b519b">zeddii: I think I've merged the wrong version of the kernel 5.10 patch. Could you send the delta I need please?</td><td class="time"><a href="#t2020-11-16T22:33:02" class="time">22:33</a></td></tr>
<tr id="t2020-11-16T23:10:55"><td class="part" colspan="2">*** gpanders[m] &lt;gpanders[m]!gpandersma@gateway/shell/matrix.org/x-cxpcrkdfgkzzciev&gt; has left #yocto</td><td><a href="#t2020-11-16T23:10:55" class="time">23:10</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2020-11-15.log.html">&#171; Sunday, 2020-11-15</a> <a href="index.html">Index</a> <a href="%23yocto.2020-11-17.log.html">Tuesday, 2020-11-17 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
