<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Monday, 2020-12-14</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Monday, 2020-12-14</h1>
<div class="navigation"> <a href="%23yocto.2020-12-13.log.html">&#171; Sunday, 2020-12-13</a> <a href="index.html">Index</a> <a href="%23yocto.2020-12-15.log.html">Tuesday, 2020-12-15 &#187;</a> </div>
<table class="irclog">
<tr id="t2020-12-14T01:24:14"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">moto-timo: yah. but still hard to find. I just built the exact same hash as the working k3s reference from rancher, crashloop.</td><td class="time"><a href="#t2020-12-14T01:24:14" class="time">01:24</a></td></tr>
<tr id="t2020-12-14T01:24:24"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">so that means it is something in our go compiler or config.</td><td class="time"><a href="#t2020-12-14T01:24:24" class="time">01:24</a></td></tr>
<tr id="t2020-12-14T02:38:20"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">zeddii: I am still trying to figure out why k9s bitches about protobuf and other random fs perms bullshyte</td><td class="time"><a href="#t2020-12-14T02:38:20" class="time">02:38</a></td></tr>
<tr id="t2020-12-14T03:14:43"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">hah. sounds painful.</td><td class="time"><a href="#t2020-12-14T03:14:43" class="time">03:14</a></td></tr>
<tr id="t2020-12-14T03:15:03"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I'm spelunking in the k3s build scripts to see if the recipe is missing something .. nothing obvious so far.</td><td class="time"><a href="#t2020-12-14T03:15:03" class="time">03:15</a></td></tr>
<tr id="t2020-12-14T04:21:11"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">zeddii: trust me, I stared at it for a while and found nothing</td><td class="time"><a href="#t2020-12-14T04:21:11" class="time">04:21</a></td></tr>
<tr id="t2020-12-14T04:21:44"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I'm trying to find exactly how the reference one is built. ours is simply garbage.</td><td class="time"><a href="#t2020-12-14T04:21:44" class="time">04:21</a></td></tr>
<tr id="t2020-12-14T04:21:56"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">drop in the k3s binary, everything else the same. magic.</td><td class="time"><a href="#t2020-12-14T04:21:56" class="time">04:21</a></td></tr>
<tr id="t2020-12-14T04:22:15"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I'm building the exact same git hash, so it has to be something else in the cross build breaking it, or a config.</td><td class="time"><a href="#t2020-12-14T04:22:15" class="time">04:22</a></td></tr>
<tr id="t2020-12-14T04:22:46"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">I know. I fuckng hate that voodooo bullshit</td><td class="time"><a href="#t2020-12-14T04:22:46" class="time">04:22</a></td></tr>
<tr id="t2020-12-14T04:22:49"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">the k3s reference one is static, ours is dynamic. That implies CGO isn't being used, but yet, I can't build without CGO and can't get it to build statically otherwise.</td><td class="time"><a href="#t2020-12-14T04:22:49" class="time">04:22</a></td></tr>
<tr id="t2020-12-14T04:23:12"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I loathe the way go builds</td><td class="time"><a href="#t2020-12-14T04:23:12" class="time">04:23</a></td></tr>
<tr id="t2020-12-14T04:23:14"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">#2020 #dumpsterfire</td><td class="time"><a href="#t2020-12-14T04:23:14" class="time">04:23</a></td></tr>
<tr id="t2020-12-14T04:23:24"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">go can just go</td><td class="time"><a href="#t2020-12-14T04:23:24" class="time">04:23</a></td></tr>
<tr id="t2020-12-14T04:23:52"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">like why does k0s build gloriously the first time and then BITCH the xecond time?</td><td class="time"><a href="#t2020-12-14T04:23:52" class="time">04:23</a></td></tr>
<tr id="t2020-12-14T04:23:58"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">f' you</td><td class="time"><a href="#t2020-12-14T04:23:58" class="time">04:23</a></td></tr>
<tr id="t2020-12-14T04:24:02"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">yup. 11pm on a sunday, I'm moving off to call it a day. will work on this during the day tomorrow.</td><td class="time"><a href="#t2020-12-14T04:24:02" class="time">04:24</a></td></tr>
<tr id="t2020-12-14T04:24:26"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">I successfully built kicad nightly on a raspberrypi400</td><td class="time"><a href="#t2020-12-14T04:24:26" class="time">04:24</a></td></tr>
<tr id="t2020-12-14T04:24:34"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">I have spoken</td><td class="time"><a href="#t2020-12-14T04:24:34" class="time">04:24</a></td></tr>
<tr id="t2020-12-14T04:24:38"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">:D</td><td class="time"><a href="#t2020-12-14T04:24:38" class="time">04:24</a></td></tr>
<tr id="t2020-12-14T04:24:59"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">I thought it was Monday</td><td class="time"><a href="#t2020-12-14T04:24:59" class="time">04:24</a></td></tr>
<tr id="t2020-12-14T04:25:01"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">FUck me</td><td class="time"><a href="#t2020-12-14T04:25:01" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:12"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">hahah. blame your sabattical!</td><td class="time"><a href="#t2020-12-14T04:25:12" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:24"><td class="action" colspan="2">* moto-timo has lost his filter... forgive me it is sabbatical and #2020</td><td><a href="#t2020-12-14T04:25:24" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:33"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">lol</td><td class="time"><a href="#t2020-12-14T04:25:33" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:40"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I'm going to drool over some netflix and maybe get inspired to try another tactic tomorrow!</td><td class="time"><a href="#t2020-12-14T04:25:40" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:42"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">catch you later!</td><td class="time"><a href="#t2020-12-14T04:25:42" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:53"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">g'night zeddii</td><td class="time"><a href="#t2020-12-14T04:25:53" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:25:58"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">may the force be with you</td><td class="time"><a href="#t2020-12-14T04:25:58" class="time">04:25</a></td></tr>
<tr id="t2020-12-14T04:26:29"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">as always, ping me with random crap</td><td class="time"><a href="#t2020-12-14T04:26:29" class="time">04:26</a></td></tr>
<tr id="t2020-12-14T07:00:22"><th class="nick" style="background: #818144">zyga</th><td class="text" style="color: #818144">hello :)</td><td class="time"><a href="#t2020-12-14T07:00:22" class="time">07:00</a></td></tr>
<tr id="t2020-12-14T07:11:56-2"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2020-12-14T07:11:56-2" class="time">07:11</a></td></tr>
<tr id="t2020-12-14T07:32:53"><th class="nick" style="background: #854685">mihai</th><td class="text" style="color: #854685">morning</td><td class="time"><a href="#t2020-12-14T07:32:53" class="time">07:32</a></td></tr>
<tr id="t2020-12-14T07:38:21"><th class="nick" style="background: #488888">erbo</th><td class="text" style="color: #488888">morning!</td><td class="time"><a href="#t2020-12-14T07:38:21" class="time">07:38</a></td></tr>
<tr id="t2020-12-14T07:48:42"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">yo dudX</td><td class="time"><a href="#t2020-12-14T07:48:42" class="time">07:48</a></td></tr>
<tr id="t2020-12-14T08:03:35"><th class="nick" style="background: #4b904b">RobertBerger</th><td class="text" style="color: #4b904b">morning</td><td class="time"><a href="#t2020-12-14T08:03:35" class="time">08:03</a></td></tr>
<tr id="t2020-12-14T08:23:52"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2020-12-14T08:23:52" class="time">08:23</a></td></tr>
<tr id="t2020-12-14T08:23:56"><th class="nick" style="background: #4d4d93">mckoan</th><td class="text" style="color: #4d4d93">good morning</td><td class="time"><a href="#t2020-12-14T08:23:56" class="time">08:23</a></td></tr>
<tr id="t2020-12-14T09:11:26"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">hello there</td><td class="time"><a href="#t2020-12-14T09:11:26" class="time">09:11</a></td></tr>
<tr id="t2020-12-14T09:19:07"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">yo qschulz</td><td class="time"><a href="#t2020-12-14T09:19:07" class="time">09:19</a></td></tr>
<tr id="t2020-12-14T09:54:09"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">hi there .. i got a issue with a simple makefile situation ..&nbsp;&nbsp;i cannot get a correct Makefile.am which compiles my objects in parallel and not in a serial way</td><td class="time"><a href="#t2020-12-14T09:54:09" class="time">09:54</a></td></tr>
<tr id="t2020-12-14T09:54:57"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">some trys fail as the toolchain then misses paths , some fail because my lack of autotool knowledge</td><td class="time"><a href="#t2020-12-14T09:54:57" class="time">09:54</a></td></tr>
<tr id="t2020-12-14T09:59:58"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">rob_w: any particular requirement nailing you down on autotools then, if you're already having problems with it?</td><td class="time"><a href="#t2020-12-14T09:59:58" class="time">09:59</a></td></tr>
<tr id="t2020-12-14T10:01:02"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">itts a understanding issue i think .. .i got a Makefile.am where i place foo_SOURCES = 1.c 2.c 3.c etc then foo_LDADD and bin_PROGRAMS = foo</td><td class="time"><a href="#t2020-12-14T10:01:02" class="time">10:01</a></td></tr>
<tr id="t2020-12-14T10:01:27"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">but i want that 1.c 2.c 3.c etc are compile via make -j X&nbsp;&nbsp;.. in parallel so to speak</td><td class="time"><a href="#t2020-12-14T10:01:27" class="time">10:01</a></td></tr>
<tr id="t2020-12-14T10:01:42"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">but it compiles one after the other</td><td class="time"><a href="#t2020-12-14T10:01:42" class="time">10:01</a></td></tr>
<tr id="t2020-12-14T10:02:24"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">so i understand that i would need to specify the 1.o 2.o 3.o as seperate targets ?</td><td class="time"><a href="#t2020-12-14T10:02:24" class="time">10:02</a></td></tr>
<tr id="t2020-12-14T10:04:17"><th class="nick" style="background: #8c4a4a">LetoThe2nd</th><td class="text" style="color: #8c4a4a">my knowledge there is pretty limited too, but i dont think that this is the case.</td><td class="time"><a href="#t2020-12-14T10:04:17" class="time">10:04</a></td></tr>
<tr id="t2020-12-14T10:21:34"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">Hi, I don't want to interrupt an active conversation but I have an urgent question:</td><td class="time"><a href="#t2020-12-14T10:21:34" class="time">10:21</a></td></tr>
<tr id="t2020-12-14T10:21:46"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">I have an LCD display</td><td class="time"><a href="#t2020-12-14T10:21:46" class="time">10:21</a></td></tr>
<tr id="t2020-12-14T10:22:07"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">Where to put the video parameter ? in uboot devicetree bootargs ?</td><td class="time"><a href="#t2020-12-14T10:22:07" class="time">10:22</a></td></tr>
<tr id="t2020-12-14T10:22:22"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">Or somewhere in the kernel ?</td><td class="time"><a href="#t2020-12-14T10:22:22" class="time">10:22</a></td></tr>
<tr id="t2020-12-14T10:23:07"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">The LCD interface in MIPI DSI</td><td class="time"><a href="#t2020-12-14T10:23:07" class="time">10:23</a></td></tr>
<tr id="t2020-12-14T10:25:44"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">video parameters?</td><td class="time"><a href="#t2020-12-14T10:25:44" class="time">10:25</a></td></tr>
<tr id="t2020-12-14T10:28:37"><th class="nick" style="background: #4d4d93">mckoan</th><td class="text" style="color: #4d4d93">bhstalel: machine name ?</td><td class="time"><a href="#t2020-12-14T10:28:37" class="time">10:28</a></td></tr>
<tr id="t2020-12-14T10:29:45"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">I'm working on IMX8MM and I have an LCD display , and I'm told to add boot parameter to the kernel like this : &quot;video=mxcfb0:dev=mipi_dsi,if=RGB24&quot; , but I don't know where to add it</td><td class="time"><a href="#t2020-12-14T10:29:45" class="time">10:29</a></td></tr>
<tr id="t2020-12-14T10:33:03"><th class="nick" style="background: #4d4d93">mckoan</th><td class="text" style="color: #4d4d93">bhstalel: in u-boot, it is the kernel command line</td><td class="time"><a href="#t2020-12-14T10:33:03" class="time">10:33</a></td></tr>
<tr id="t2020-12-14T10:33:59"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">put it into the bootargs u-boot env variable</td><td class="time"><a href="#t2020-12-14T10:33:59" class="time">10:33</a></td></tr>
<tr id="t2020-12-14T10:35:27"><th class="nick" style="background: #539e9e">bhstalel</th><td class="text" style="color: #539e9e">Okay , I'll look into it, thanks all :))))</td><td class="time"><a href="#t2020-12-14T10:35:27" class="time">10:35</a></td></tr>
<tr id="t2020-12-14T10:40:52"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">well my problem just resolved .. i realized my code would not gain compile speed even with parallel make -j .. thx anyway</td><td class="time"><a href="#t2020-12-14T10:40:52" class="time">10:40</a></td></tr>
<tr id="t2020-12-14T10:41:31"><th class="nick" style="background: #9b519b">rob_w</th><td class="text" style="color: #9b519b">90% of my time is coming from one particular .c file .. so until i split this up it is what it is</td><td class="time"><a href="#t2020-12-14T10:41:31" class="time">10:41</a></td></tr>
<tr id="t2020-12-14T11:31:44"><th class="nick" style="background: #a25555">chris456</th><td class="text" style="color: #a25555">i want to compile a go program and i got an erro: <a href="https://codeshare.io/GkV64x" rel="nofollow">https://codeshare.io/GkV64x</a></td><td class="time"><a href="#t2020-12-14T11:31:44" class="time">11:31</a></td></tr>
<tr id="t2020-12-14T11:32:10"><th class="nick" style="background: #a25555">chris456</th><td class="text" style="color: #a25555">do i have to add a specific &quot;go&quot;-layer or should it work out of the box?</td><td class="time"><a href="#t2020-12-14T11:32:10" class="time">11:32</a></td></tr>
<tr id="t2020-12-14T11:32:42"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">RP: can you take a look at &quot;Strange segfault on native Go binaries&quot; on ml?</td><td class="time"><a href="#t2020-12-14T11:32:42" class="time">11:32</a></td></tr>
<tr id="t2020-12-14T11:33:18"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">chris456: on recent Yocto Project releases, we have Go support on OE-Core</td><td class="time"><a href="#t2020-12-14T11:33:18" class="time">11:33</a></td></tr>
<tr id="t2020-12-14T11:33:52"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: I had seen it. Are you using sstate generated by the nixos system on the ubuntu one?</td><td class="time"><a href="#t2020-12-14T11:33:52" class="time">11:33</a></td></tr>
<tr id="t2020-12-14T11:34:46"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: I'd suspect some kind of patchelf problem, particularly as nixos uses patchelf extensively itself</td><td class="time"><a href="#t2020-12-14T11:34:46" class="time">11:34</a></td></tr>
<tr id="t2020-12-14T11:36:17"><th class="nick" style="background: #a25555">chris456</th><td class="text" style="color: #a25555">octavio: <a href="https://layers.openembedded.org/layerindex/recipe/60594/" rel="nofollow">https://layers.openembedded.org/layerindex/recipe/60594/</a>&nbsp;&nbsp;&lt;- this one?</td><td class="time"><a href="#t2020-12-14T11:36:17" class="time">11:36</a></td></tr>
<tr id="t2020-12-14T11:36:32"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">RP: no, I did it all inside the docker</td><td class="time"><a href="#t2020-12-14T11:36:32" class="time">11:36</a></td></tr>
<tr id="t2020-12-14T11:37:27"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">RP: I did not run it inside the nixos. As I mentioned to khem I am using a Docker container with Ubuntu 20.04</td><td class="time"><a href="#t2020-12-14T11:37:27" class="time">11:37</a></td></tr>
<tr id="t2020-12-14T11:48:58"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">RP: I believe it is reproducible there.</td><td class="time"><a href="#t2020-12-14T11:48:58" class="time">11:48</a></td></tr>
<tr id="t2020-12-14T11:56:51"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: at that point you probably have to try and see if patchelf is breaking the binary...</td><td class="time"><a href="#t2020-12-14T11:56:51" class="time">11:56</a></td></tr>
<tr id="t2020-12-14T11:59:03"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">RP: can you tell me where to look?</td><td class="time"><a href="#t2020-12-14T11:59:03" class="time">11:59</a></td></tr>
<tr id="t2020-12-14T11:59:14"><th class="nick" style="background: #57a657">otavio</th><td class="text" style="color: #57a657">I can check, for sure</td><td class="time"><a href="#t2020-12-14T11:59:14" class="time">11:59</a></td></tr>
<tr id="t2020-12-14T12:03:47"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: have a look at the code in uninative.bbclass. You'd want to try the binary before and after the patchelf --set-interpreter call</td><td class="time"><a href="#t2020-12-14T12:03:47" class="time">12:03</a></td></tr>
<tr id="t2020-12-14T12:04:11"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: can you also check that the version of glibc used in uninative is newer or equal to the glibc version on the system you're building on?</td><td class="time"><a href="#t2020-12-14T12:04:11" class="time">12:04</a></td></tr>
<tr id="t2020-12-14T12:05:02"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">otavio: there are also chrpath calls from chrpath.bbclass which may edit the binary so those could also be a potential cause</td><td class="time"><a href="#t2020-12-14T12:05:02" class="time">12:05</a></td></tr>
<tr id="t2020-12-14T13:33:20"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">rburton: I think the syslinux changes aren't happy: <a href="https://autobuilder.yoctoproject.org/typhoon/#/builders/87/builds/1654/steps/14/logs/stdio" rel="nofollow">https://autobuilder.yoctoproject.org/typhoon/#/builders/87/builds/1654/steps/14/logs/stdio</a></td><td class="time"><a href="#t2020-12-14T13:33:20" class="time">13:33</a></td></tr>
<tr id="t2020-12-14T13:37:44"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">I'll reply on list so aesh can see it</td><td class="time"><a href="#t2020-12-14T13:37:44" class="time">13:37</a></td></tr>
<tr id="t2020-12-14T13:46:41"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">bah</td><td class="time"><a href="#t2020-12-14T13:46:41" class="time">13:46</a></td></tr>
<tr id="t2020-12-14T13:47:24"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">isohybrid: not found</td><td class="time"><a href="#t2020-12-14T13:47:24" class="time">13:47</a></td></tr>
<tr id="t2020-12-14T13:47:33"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">well at least it wasn't something i did to syslinux directly</td><td class="time"><a href="#t2020-12-14T13:47:33" class="time">13:47</a></td></tr>
<tr id="t2020-12-14T13:54:03"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">rburton: doesn't look too serious to fix</td><td class="time"><a href="#t2020-12-14T13:54:03" class="time">13:54</a></td></tr>
<tr id="t2020-12-14T13:54:27"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">you say that</td><td class="time"><a href="#t2020-12-14T13:54:27" class="time">13:54</a></td></tr>
<tr id="t2020-12-14T13:54:29"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">this is syslinux</td><td class="time"><a href="#t2020-12-14T13:54:29" class="time">13:54</a></td></tr>
<tr id="t2020-12-14T13:55:45"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">rburton: I'm trying to be positive ;-)</td><td class="time"><a href="#t2020-12-14T13:55:45" class="time">13:55</a></td></tr>
<tr id="t2020-12-14T13:55:58"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">rburton: I can tell you you're doomed if you like ;-)</td><td class="time"><a href="#t2020-12-14T13:55:58" class="time">13:55</a></td></tr>
<tr id="t2020-12-14T14:03:35"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">kicking a selftest run to verify the patches before submitting</td><td class="time"><a href="#t2020-12-14T14:03:35" class="time">14:03</a></td></tr>
<tr id="t2020-12-14T14:31:52"><td class="nickchange" colspan="2">*** ecdhe_ is now known as ecdhe</td><td><a href="#t2020-12-14T14:31:52" class="time">14:31</a></td></tr>
<tr id="t2020-12-14T14:45:39"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">Hello. currently integrating smack on one of our projects. do we really have to create 1600 bbappend files, one for each recipe we build in?</td><td class="time"><a href="#t2020-12-14T14:45:39" class="time">14:45</a></td></tr>
<tr id="t2020-12-14T14:46:40"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">each bbappend would add the proper extended attribute to the installed files</td><td class="time"><a href="#t2020-12-14T14:46:40" class="time">14:46</a></td></tr>
<tr id="t2020-12-14T14:50:25"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">don't know about smack but that sounds like a good use for something handled on the distro level?</td><td class="time"><a href="#t2020-12-14T14:50:25" class="time">14:50</a></td></tr>
<tr id="t2020-12-14T14:51:33"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">tardyp: there's a worked example of using smack in tizen/iot-dev-kit if you dig out the old repos</td><td class="time"><a href="#t2020-12-14T14:51:33" class="time">14:51</a></td></tr>
<tr id="t2020-12-14T14:51:41"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">not sure of anyone using it since then though</td><td class="time"><a href="#t2020-12-14T14:51:41" class="time">14:51</a></td></tr>
<tr id="t2020-12-14T14:52:14"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">tardyp: are the bbappend files similar and boilerplate? If so there are other ways you could inject into all recipes</td><td class="time"><a href="#t2020-12-14T14:52:14" class="time">14:52</a></td></tr>
<tr id="t2020-12-14T14:52:29"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">if they're custom to each recipe that gets harder</td><td class="time"><a href="#t2020-12-14T14:52:29" class="time">14:52</a></td></tr>
<tr id="t2020-12-14T14:53:31"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">we need to split our fs into a dozen&nbsp;&nbsp;domain, and then inject the right xattr to each file according to their domain</td><td class="time"><a href="#t2020-12-14T14:53:31" class="time">14:53</a></td></tr>
<tr id="t2020-12-14T14:54:24"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">are there any package managers that successfully package up extended attributes?</td><td class="time"><a href="#t2020-12-14T14:54:24" class="time">14:54</a></td></tr>
<tr id="t2020-12-14T14:54:53"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">I saw an old email saying it wasn't obvious</td><td class="time"><a href="#t2020-12-14T14:54:53" class="time">14:54</a></td></tr>
<tr id="t2020-12-14T14:56:09"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">tardyp: there are hooks during packaging for example where you could hook in such a generic processing function</td><td class="time"><a href="#t2020-12-14T14:56:09" class="time">14:56</a></td></tr>
<tr id="t2020-12-14T14:57:14"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">AGL uses postinst to do the labeling on first boot</td><td class="time"><a href="#t2020-12-14T14:57:14" class="time">14:57</a></td></tr>
<tr id="t2020-12-14T14:59:21"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1"><a href="https://www.irccloud.com/pastebin/cbCrbAJm/" rel="nofollow">https://www.irccloud.com/pastebin/cbCrbAJm/</a></td><td class="time"><a href="#t2020-12-14T14:59:21" class="time">14:59</a></td></tr>
<tr id="t2020-12-14T15:00:16"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">I saw something like this indeed. not sure if this is really scalable</td><td class="time"><a href="#t2020-12-14T15:00:16" class="time">15:00</a></td></tr>
<tr id="t2020-12-14T15:00:41"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">not sure how AGL does it, but a class you can globally inherit to write a postinst would be fairly simple to write</td><td class="time"><a href="#t2020-12-14T15:00:41" class="time">15:00</a></td></tr>
<tr id="t2020-12-14T15:01:52"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">yes, that was RP suggested I think. I worry it will increase the first boot, and the first boot is in the fab, and you don't want that to take too much time.</td><td class="time"><a href="#t2020-12-14T15:01:52" class="time">15:01</a></td></tr>
<tr id="t2020-12-14T15:01:54"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">rburton: the stuff in AGL currently does the base labels via a base-files bbappend, per-app stuff is done when they're installed at run-time (please don't ask ;) )</td><td class="time"><a href="#t2020-12-14T15:01:54" class="time">15:01</a></td></tr>
<tr id="t2020-12-14T15:02:12"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">smurray: i've done incredibly well by not asking anything about AGL so far ;)</td><td class="time"><a href="#t2020-12-14T15:02:12" class="time">15:02</a></td></tr>
<tr id="t2020-12-14T15:02:37"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">rburton: heh</td><td class="time"><a href="#t2020-12-14T15:02:37" class="time">15:02</a></td></tr>
<tr id="t2020-12-14T15:04:12"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">tardyp: one approach would be a task that does it via qemu, I've had idle thoughts about that wrt SELinux + read-only-root, but not tried doing it</td><td class="time"><a href="#t2020-12-14T15:04:12" class="time">15:04</a></td></tr>
<tr id="t2020-12-14T15:05:23"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">mkfs.ext4 is not capable of creating xattr at the beginning, right?</td><td class="time"><a href="#t2020-12-14T15:05:23" class="time">15:05</a></td></tr>
<tr id="t2020-12-14T15:06:14"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">I mean at the image creation time</td><td class="time"><a href="#t2020-12-14T15:06:14" class="time">15:06</a></td></tr>
<tr id="t2020-12-14T15:25:40"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">tardyp: not that I'm aware of</td><td class="time"><a href="#t2020-12-14T15:25:40" class="time">15:25</a></td></tr>
<tr id="t2020-12-14T15:31:38"><th class="nick" style="background: #b86161">dl9pf</th><td class="text" style="color: #b86161">hmm ... mkfs.ext4 -O&nbsp;&nbsp;flag ?&nbsp;&nbsp;maybe ?</td><td class="time"><a href="#t2020-12-14T15:31:38" class="time">15:31</a></td></tr>
<tr id="t2020-12-14T15:46:09"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">dl9pf: that's for filesystem features AFAIK?</td><td class="time"><a href="#t2020-12-14T15:46:09" class="time">15:46</a></td></tr>
<tr id="t2020-12-14T15:48:38"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">I think one sticking point wrt doing it outside of qemu is that assumes the host has all the xattr, etc. support, which you'd hope would be the case, but...</td><td class="time"><a href="#t2020-12-14T15:48:38" class="time">15:48</a></td></tr>
<tr id="t2020-12-14T15:52:18"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">and the easiest thing that comes to mind is loopback mounting, which seems potentially problematic wrt doing it as non-root</td><td class="time"><a href="#t2020-12-14T15:52:18" class="time">15:52</a></td></tr>
<tr id="t2020-12-14T16:01:12"><th class="nick" style="background: #b86161">dl9pf</th><td class="text" style="color: #b86161">right, right.</td><td class="time"><a href="#t2020-12-14T16:01:12" class="time">16:01</a></td></tr>
<tr id="t2020-12-14T16:04:11"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">indeed. qemu is hard to run in the CI, because you need kvm access for best perf. Maybe we can look at user mode linux</td><td class="time"><a href="#t2020-12-14T16:04:11" class="time">16:04</a></td></tr>
<tr id="t2020-12-14T16:04:40"><th class="nick" style="background: #b15db1">tardyp</th><td class="text" style="color: #b15db1">both options looks quite complicated for the usecase :-/</td><td class="time"><a href="#t2020-12-14T16:04:40" class="time">16:04</a></td></tr>
<tr id="t2020-12-14T16:13:58"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">tardyp: right, there's a reason why most distros end up doing it at boot</td><td class="time"><a href="#t2020-12-14T16:13:58" class="time">16:13</a></td></tr>
<tr id="t2020-12-14T16:15:47"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">tardyp: even for read-only-root, I could imagine maybe just doing it from initramfs before mounting r/o, though that doesn't work for some usecases</td><td class="time"><a href="#t2020-12-14T16:15:47" class="time">16:15</a></td></tr>
<tr id="t2020-12-14T16:39:23"><td class="nickchange" colspan="2">*** pit82 is now known as onkelpit</td><td><a href="#t2020-12-14T16:39:23" class="time">16:39</a></td></tr>
<tr id="t2020-12-14T16:54:31"><th class="nick" style="background: #62bb62">armpit</th><td class="text" style="color: #62bb62">zeddii, really</td><td class="time"><a href="#t2020-12-14T16:54:31" class="time">16:54</a></td></tr>
<tr id="t2020-12-14T16:56:27"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">really!</td><td class="time"><a href="#t2020-12-14T16:56:27" class="time">16:56</a></td></tr>
<tr id="t2020-12-14T16:56:29"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2020-12-14T16:56:29" class="time">16:56</a></td></tr>
<tr id="t2020-12-14T16:56:30"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">:D</td><td class="time"><a href="#t2020-12-14T16:56:30" class="time">16:56</a></td></tr>
<tr id="t2020-12-14T17:02:59"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">Is there a way to specify a sub directory in a SRC_URI resource such that yocto only hashes what is inside the subdirectory?</td><td class="time"><a href="#t2020-12-14T17:02:59" class="time">17:02</a></td></tr>
<tr id="t2020-12-14T17:03:47"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2020-12-14T17:03:47" class="time">17:03</a></td></tr>
<tr id="t2020-12-14T17:05:38"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">marler8997: you can give a directory to SRC_URI yes</td><td class="time"><a href="#t2020-12-14T17:05:38" class="time">17:05</a></td></tr>
<tr id="t2020-12-14T17:05:47"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">file://dir or file://dir/ will work</td><td class="time"><a href="#t2020-12-14T17:05:47" class="time">17:05</a></td></tr>
<tr id="t2020-12-14T17:05:58"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">everything in it will be taken</td><td class="time"><a href="#t2020-12-14T17:05:58" class="time">17:05</a></td></tr>
<tr id="t2020-12-14T17:06:05"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">DO NOT USE PATTERNS</td><td class="time"><a href="#t2020-12-14T17:06:05" class="time">17:06</a></td></tr>
<tr id="t2020-12-14T17:06:20"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">I repeat, DO NOT USE PATTERNS (globs, regexp, whatever) it does NOT work</td><td class="time"><a href="#t2020-12-14T17:06:20" class="time">17:06</a></td></tr>
<tr id="t2020-12-14T17:06:32"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">we have a repository where we keep around 40 small projects</td><td class="time"><a href="#t2020-12-14T17:06:32" class="time">17:06</a></td></tr>
<tr id="t2020-12-14T17:06:54"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">we put the SRC_URI for this repository in a class so all the recipes just inherit from this class and we only update one location</td><td class="time"><a href="#t2020-12-14T17:06:54" class="time">17:06</a></td></tr>
<tr id="t2020-12-14T17:07:09"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">you have to hash the whole repository, unless you break it up and check in branches.. (part of the reason mixng projects is a bad idea)</td><td class="time"><a href="#t2020-12-14T17:07:09" class="time">17:07</a></td></tr>
<tr id="t2020-12-14T17:07:13"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">but that means when any one project changes, the hash changes for all the projects</td><td class="time"><a href="#t2020-12-14T17:07:13" class="time">17:07</a></td></tr>
<tr id="t2020-12-14T17:07:34"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">yup, which is why you don't do that..&nbsp;&nbsp;there is no other way, on an SCM other then say 'this is the checkout point'</td><td class="time"><a href="#t2020-12-14T17:07:34" class="time">17:07</a></td></tr>
<tr id="t2020-12-14T17:07:45"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I don't think *yocto doesn't support this use case* means *this is a bad use case*</td><td class="time"><a href="#t2020-12-14T17:07:45" class="time">17:07</a></td></tr>
<tr id="t2020-12-14T17:07:58"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">first, I haven't established yet whether yocto support this or not</td><td class="time"><a href="#t2020-12-14T17:07:58" class="time">17:07</a></td></tr>
<tr id="t2020-12-14T17:08:18"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Yocto Project CAN share a single SCM across recipes.. easily.. we do it all the time</td><td class="time"><a href="#t2020-12-14T17:08:18" class="time">17:08</a></td></tr>
<tr id="t2020-12-14T17:08:30"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">yes I know, that's what we're doing</td><td class="time"><a href="#t2020-12-14T17:08:30" class="time">17:08</a></td></tr>
<tr id="t2020-12-14T17:08:45"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">However, it CAN'T distinguish one portion of a checkout from another.. it CAN distinuigh a branch from another branch or commit to another commit</td><td class="time"><a href="#t2020-12-14T17:08:45" class="time">17:08</a></td></tr>
<tr id="t2020-12-14T17:09:52"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">So either you need separate commits for each chunk (branch usually), or you can't do it..&nbsp;&nbsp;It really is a bad way to use a repository, but people do it all the time.. the problem when doing this is more then just YP integration, it affects all CI systems that can short-path and just check for an update based on the top of the tree.. (this isn't git specific)</td><td class="time"><a href="#t2020-12-14T17:09:52" class="time">17:09</a></td></tr>
<tr id="t2020-12-14T17:10:07"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">what alternative would you suggest?</td><td class="time"><a href="#t2020-12-14T17:10:07" class="time">17:10</a></td></tr>
<tr id="t2020-12-14T17:11:01"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it's over 40 small tools libraries, with alot of cross dependencies, putting them in one repo makes it convenient to build/test them because of all the dependencies</td><td class="time"><a href="#t2020-12-14T17:11:01" class="time">17:11</a></td></tr>
<tr id="t2020-12-14T17:11:09"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">What I've done in the past is break the repsoitory up.. If it's a git repository there are ways of breaking it up AND preserving history (if you need history).&nbsp;&nbsp;Some of this can be done automatically, so if your process/developers insist on a combined SCM you can do that and automate the individual prpoject ones.. but that can be troublesome..</td><td class="time"><a href="#t2020-12-14T17:11:09" class="time">17:11</a></td></tr>
<tr id="t2020-12-14T17:11:49"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">note breaking the repository up == into branches OR separage SCMs.. (I've done both)</td><td class="time"><a href="#t2020-12-14T17:11:49" class="time">17:11</a></td></tr>
<tr id="t2020-12-14T17:11:50"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">We can break it up into 40 repositories, but that's alot of work, it's alot of work to maintain 40 repositories with 40 different sets of reviewers and permissions</td><td class="time"><a href="#t2020-12-14T17:11:50" class="time">17:11</a></td></tr>
<tr id="t2020-12-14T17:12:31"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">depends on your backend systems.. I've certainly done that before and it wasn't, but we have tooling in place to assist.. gitolite was one case, github (enterprise) was another..</td><td class="time"><a href="#t2020-12-14T17:12:31" class="time">17:12</a></td></tr>
<tr id="t2020-12-14T17:12:43"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">but if it's simply a permissions management concern, you can do it by branch instead..</td><td class="time"><a href="#t2020-12-14T17:12:43" class="time">17:12</a></td></tr>
<tr id="t2020-12-14T17:12:57"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">that's going to be alot more work than the problem we have now, we'd be trading one problem for a much bigger problem</td><td class="time"><a href="#t2020-12-14T17:12:57" class="time">17:12</a></td></tr>
<tr id="t2020-12-14T17:13:19"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">module1/master module2/master module3/master&nbsp;&nbsp;then have a script that generates these adn keeps them up to date as post-process checkins</td><td class="time"><a href="#t2020-12-14T17:13:19" class="time">17:13</a></td></tr>
<tr id="t2020-12-14T17:13:28"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">perhaps just live with building it in a single recipe?&nbsp;&nbsp;If pieces of it are interdependent, you're triggering a bunch of rebuilds anyways if things are set up right...</td><td class="time"><a href="#t2020-12-14T17:13:28" class="time">17:13</a></td></tr>
<tr id="t2020-12-14T17:14:06"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">smurray, that doesn't solve the problem either because the entire recipe gets rebuilt even when only one project gets modified</td><td class="time"><a href="#t2020-12-14T17:14:06" class="time">17:14</a></td></tr>
<tr id="t2020-12-14T17:14:27"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">You have to remember SCM / branch / commit is ONE project..</td><td class="time"><a href="#t2020-12-14T17:14:27" class="time">17:14</a></td></tr>
<tr id="t2020-12-14T17:14:30"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">marler8997: such is life, you can't have everything</td><td class="time"><a href="#t2020-12-14T17:14:30" class="time">17:14</a></td></tr>
<tr id="t2020-12-14T17:14:44"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">directories are not projects, they're part of them..&nbsp;&nbsp;but it's up to your infrastructure and desired way to work</td><td class="time"><a href="#t2020-12-14T17:14:44" class="time">17:14</a></td></tr>
<tr id="t2020-12-14T17:14:50"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">that's not really a helpful pience of advice lol</td><td class="time"><a href="#t2020-12-14T17:14:50" class="time">17:14</a></td></tr>
<tr id="t2020-12-14T17:15:10"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I ask a question, &quot;how do I do this&quot; and I get an answer &quot;you can't have everything&quot;</td><td class="time"><a href="#t2020-12-14T17:15:10" class="time">17:15</a></td></tr>
<tr id="t2020-12-14T17:15:31"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">fray so far you haven't given me an alternative that is any better</td><td class="time"><a href="#t2020-12-14T17:15:31" class="time">17:15</a></td></tr>
<tr id="t2020-12-14T17:15:39"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">there is no standard way in SCM systems to say 'give me this commit, but only pay attention to the items in directory XYZ'... UNLESS you pull the SCM _first_ and then do something like (in git) git log</td><td class="time"><a href="#t2020-12-14T17:15:39" class="time">17:15</a></td></tr>
<tr id="t2020-12-14T17:15:44"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">you can say that &quot;directories are not projects&quot; but that doesn't mean it's true</td><td class="time"><a href="#t2020-12-14T17:15:44" class="time">17:15</a></td></tr>
<tr id="t2020-12-14T17:15:55"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">in our case, we have a single repository with multiple small projects inside it</td><td class="time"><a href="#t2020-12-14T17:15:55" class="time">17:15</a></td></tr>
<tr id="t2020-12-14T17:16:10"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">WIth the way an SCM (at a high level) is designed, an SCM is a 'project'.. an independent group of things..</td><td class="time"><a href="#t2020-12-14T17:16:10" class="time">17:16</a></td></tr>
<tr id="t2020-12-14T17:16:37"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Yes, and that happens.. but it's the cause of the problem in this case and can make management more difficult..&nbsp;&nbsp;but I understand why people do this.</td><td class="time"><a href="#t2020-12-14T17:16:37" class="time">17:16</a></td></tr>
<tr id="t2020-12-14T17:16:44"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">ok you've answered my question</td><td class="time"><a href="#t2020-12-14T17:16:44" class="time">17:16</a></td></tr>
<tr id="t2020-12-14T17:16:52"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">nothing more that I can suggest other then review it and break it apart..&nbsp;&nbsp;long term it will be better</td><td class="time"><a href="#t2020-12-14T17:16:52" class="time">17:16</a></td></tr>
<tr id="t2020-12-14T17:17:03"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I may add a prepend task to do fetch that allows me to specify a SRC_URL with a repository and a subdirectory</td><td class="time"><a href="#t2020-12-14T17:17:03" class="time">17:17</a></td></tr>
<tr id="t2020-12-14T17:17:31"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">You would be overriding the bitbake download, which means no cached download sources</td><td class="time"><a href="#t2020-12-14T17:17:31" class="time">17:17</a></td></tr>
<tr id="t2020-12-14T17:17:34"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I could have each project provide the hash to the subdirectory, then after it's fetched it could verify the hash</td><td class="time"><a href="#t2020-12-14T17:17:34" class="time">17:17</a></td></tr>
<tr id="t2020-12-14T17:17:41"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">This may work internally for you, but won't work in the general case</td><td class="time"><a href="#t2020-12-14T17:17:41" class="time">17:17</a></td></tr>
<tr id="t2020-12-14T17:18:50"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">yocto's git downloader is horrible anyway</td><td class="time"><a href="#t2020-12-14T17:18:50" class="time">17:18</a></td></tr>
<tr id="t2020-12-14T17:18:57"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">A lot of people using YP require downloads to come from a local cache directory.. so by passing that will make it impossible to use</td><td class="time"><a href="#t2020-12-14T17:18:57" class="time">17:18</a></td></tr>
<tr id="t2020-12-14T17:19:06"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it downloads the whole repository, then creates a compressed archive from it!</td><td class="time"><a href="#t2020-12-14T17:19:06" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:19:07"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">which part?</td><td class="time"><a href="#t2020-12-14T17:19:07" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:19:14"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">lol</td><td class="time"><a href="#t2020-12-14T17:19:14" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:19:26"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">You can do shallow clones you knwo</td><td class="time"><a href="#t2020-12-14T17:19:26" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:19:39"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">we build webkit inside yocto, it takes 20 minutes to download, then over 40 minutes to create the compressed archive</td><td class="time"><a href="#t2020-12-14T17:19:39" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:19:40"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">if you don't want the history for any reason (or a limited amount) just enable shallow cloning</td><td class="time"><a href="#t2020-12-14T17:19:40" class="time">17:19</a></td></tr>
<tr id="t2020-12-14T17:20:00"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it's the creating the archive that takes the most time (not the download)</td><td class="time"><a href="#t2020-12-14T17:20:00" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:20:16"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Again, shallow clone vs full clone.. full clone is default</td><td class="time"><a href="#t2020-12-14T17:20:16" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:20:27"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">irrelevant to the archive creation</td><td class="time"><a href="#t2020-12-14T17:20:27" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:20:36"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">No..</td><td class="time"><a href="#t2020-12-14T17:20:36" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:20:47"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">shallow clones are much smaller, as they don't have any hiustory behind them</td><td class="time"><a href="#t2020-12-14T17:20:47" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:20:56"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">you can also avoid creating an archive and use the git directly as well</td><td class="time"><a href="#t2020-12-14T17:20:56" class="time">17:20</a></td></tr>
<tr id="t2020-12-14T17:21:01"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">these are simply switches to be flipped</td><td class="time"><a href="#t2020-12-14T17:21:01" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:03"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">well I figured it was smart enough not to archive the git history</td><td class="time"><a href="#t2020-12-14T17:21:03" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:10"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">are you saying it archives the .git directory as well?</td><td class="time"><a href="#t2020-12-14T17:21:10" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:20"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">marler8997: if you don't want the archives for mirror population, disable mirror tarball generation</td><td class="time"><a href="#t2020-12-14T17:21:20" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:29"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">or switch to shallow tarball usage, as fray said</td><td class="time"><a href="#t2020-12-14T17:21:29" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:35"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Yes, the whole point of the downloads is reproducibility with no network access.. so it ONLY archives teh .git directory</td><td class="time"><a href="#t2020-12-14T17:21:35" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:45"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">somewhere in your setup enables BB_GENERATE_MIRROR_TARBALLS. if you don't want it, don't use it</td><td class="time"><a href="#t2020-12-14T17:21:45" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:21:48"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">turn off git archives, and it won't archive them..</td><td class="time"><a href="#t2020-12-14T17:21:48" class="time">17:21</a></td></tr>
<tr id="t2020-12-14T17:22:01"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">turn on shallow cloning and it will only fetch a limited set of commits..</td><td class="time"><a href="#t2020-12-14T17:22:01" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:22:14"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it only archive the .git directory...what?</td><td class="time"><a href="#t2020-12-14T17:22:14" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:22:37"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">that's definitely not what I remember seeing in the logs and the source</td><td class="time"><a href="#t2020-12-14T17:22:37" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:22:38"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">cost of the first is you have to store/distribute directories intead of tarballs..&nbsp;&nbsp;cost of the second you lose history if you are working on the component</td><td class="time"><a href="#t2020-12-14T17:22:38" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:22:50"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I saw that it archives the source, then extracts that archive into WORKDIR</td><td class="time"><a href="#t2020-12-14T17:22:50" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:22:51"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">What I am referring to is specific to git repositories..</td><td class="time"><a href="#t2020-12-14T17:22:51" class="time">17:22</a></td></tr>
<tr id="t2020-12-14T17:23:02"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">yes, I'm only talking about git repositories as well</td><td class="time"><a href="#t2020-12-14T17:23:02" class="time">17:23</a></td></tr>
<tr id="t2020-12-14T17:23:05"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">other SCMs may work different</td><td class="time"><a href="#t2020-12-14T17:23:05" class="time">17:23</a></td></tr>
<tr id="t2020-12-14T17:23:25"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">marler8997: maybe explain exactly what steps you're talking about</td><td class="time"><a href="#t2020-12-14T17:23:25" class="time">17:23</a></td></tr>
<tr id="t2020-12-14T17:23:25-2"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">ya, the system does 'git clone --bare .....' takes the result (and if tarballs are enabled) will then tar up those contents..</td><td class="time"><a href="#t2020-12-14T17:23:25-2" class="time">17:23</a></td></tr>
<tr id="t2020-12-14T17:24:12"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">when you specify a git:// in SRC_URI, yocto downloads the git respository to some global location, then it archives that repository into a .tar.xz (which takes 40 minutes for webkit), then it extracts that archive into WORKDIR</td><td class="time"><a href="#t2020-12-14T17:24:12" class="time">17:24</a></td></tr>
<tr id="t2020-12-14T17:24:48"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I created a &quot;fastgit.bbclass&quot; that uses a different mechanism and saved the 40 minutes on our webkit build</td><td class="time"><a href="#t2020-12-14T17:24:48" class="time">17:24</a></td></tr>
<tr id="t2020-12-14T17:24:50"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">yes, it downloads, via 'git clone --bare &lt;url&gt;' and archives what you did.. you can turn OFF the archive step, that is what we're saying</td><td class="time"><a href="#t2020-12-14T17:24:50" class="time">17:24</a></td></tr>
<tr id="t2020-12-14T17:25:11"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">sure, but then you said it only archived the .git directory</td><td class="time"><a href="#t2020-12-14T17:25:11" class="time">17:25</a></td></tr>
<tr id="t2020-12-14T17:25:21"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">what else would you want archived?</td><td class="time"><a href="#t2020-12-14T17:25:21" class="time">17:25</a></td></tr>
<tr id="t2020-12-14T17:25:37"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">everything except the .git directory</td><td class="time"><a href="#t2020-12-14T17:25:37" class="time">17:25</a></td></tr>
<tr id="t2020-12-14T17:25:51"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366"><a href="https://www.yoctoproject.org/docs/1.7/ref-manual/ref-manual.html#var-BB_GENERATE_MIRROR_TARBALLS" rel="nofollow">https://www.yoctoproject.org/docs/1.7/ref-manual/ref-manual.html#var-BB_GENERATE_MIRROR_TARBALLS</a></td><td class="time"><a href="#t2020-12-14T17:25:51" class="time">17:25</a></td></tr>
<tr id="t2020-12-14T17:25:55"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">look at that</td><td class="time"><a href="#t2020-12-14T17:25:55" class="time">17:25</a></td></tr>
<tr id="t2020-12-14T17:26:12"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">you really want to do what fray&nbsp;&nbsp;and kergoth&nbsp;&nbsp;have told you repeatedly, and turn off the thing you're upset at</td><td class="time"><a href="#t2020-12-14T17:26:12" class="time">17:26</a></td></tr>
<tr id="t2020-12-14T17:26:19"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">as it's not on by default</td><td class="time"><a href="#t2020-12-14T17:26:19" class="time">17:26</a></td></tr>
<tr id="t2020-12-14T17:26:27"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">If you are seeing the system archive them, then someone has turned on BB_GENERATE_MIRROR_TARBALLS in yoru build.. set it to 0</td><td class="time"><a href="#t2020-12-14T17:26:27" class="time">17:26</a></td></tr>
<tr id="t2020-12-14T17:26:33"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">it won't do the archiving step</td><td class="time"><a href="#t2020-12-14T17:26:33" class="time">17:26</a></td></tr>
<tr id="t2020-12-14T17:27:02"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">marler8997: haven't read the whople discussion, what about subpath= of the git fetcher?</td><td class="time"><a href="#t2020-12-14T17:27:02" class="time">17:27</a></td></tr>
<tr id="t2020-12-14T17:27:32"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">subpath is not what we're looking for, it puts the src into a subdir, it doesn't just take a subdir of the SRC</td><td class="time"><a href="#t2020-12-14T17:27:32" class="time">17:27</a></td></tr>
<tr id="t2020-12-14T17:27:34"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">more up to date link: <a href="https://docs.yoctoproject.org/ref-manual/ref-variables.html?highlight=bb_generate_mirror_tarballs#term-BB_GENERATE_MIRROR_TARBALLS" rel="nofollow">https://docs.yoctoproject.org/ref-manual/ref-variables.html?highlight=bb_generate_mirror_tarballs#term-BB_GENERATE_MIRROR_TARBALLS</a></td><td class="time"><a href="#t2020-12-14T17:27:34" class="time">17:27</a></td></tr>
<tr id="t2020-12-14T17:27:44"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">the usual system is&nbsp;&nbsp;1) do_fetch does a bare clones to DL_DIR 2) do_unpack does a local clone to WORKDIR.&nbsp;&nbsp;this way you have a central cache of the git repo that can be fetched again in the future and a local work tree you can delete on rebiuilds</td><td class="time"><a href="#t2020-12-14T17:27:44" class="time">17:27</a></td></tr>
<tr id="t2020-12-14T17:27:53"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">marler8997: no, read again</td><td class="time"><a href="#t2020-12-14T17:27:53" class="time">17:27</a></td></tr>
<tr id="t2020-12-14T17:28:27"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">&gt; Places the file (or extracts its contents) into the specified subdirectory of WORKDIR</td><td class="time"><a href="#t2020-12-14T17:28:27" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:29"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">the 20 minute download should be&nbsp;&nbsp;*once* as presumably you're sharing DL_DIR between builds.&nbsp;&nbsp;if not, do.</td><td class="time"><a href="#t2020-12-14T17:28:29" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:37"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">qschulz, again, not what I was asking about</td><td class="time"><a href="#t2020-12-14T17:28:37" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:51"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">&quot;subpath&quot;: Limits the checkout to a specific subpath of the tree. By default, the whole tree is checked out.</td><td class="time"><a href="#t2020-12-14T17:28:51" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:51-2"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">You were complaing your system was cloning, archiving and then extracting</td><td class="time"><a href="#t2020-12-14T17:28:51-2" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:58"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">we're telling you why and how to turn that off</td><td class="time"><a href="#t2020-12-14T17:28:58" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:28:59"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">rburton, yes, all this goes away after the first build</td><td class="time"><a href="#t2020-12-14T17:28:59" class="time">17:28</a></td></tr>
<tr id="t2020-12-14T17:29:24"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">fray yes I see that</td><td class="time"><a href="#t2020-12-14T17:29:24" class="time">17:29</a></td></tr>
<tr id="t2020-12-14T17:29:34"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">thank you for the suggestion there, I will have to try that out</td><td class="time"><a href="#t2020-12-14T17:29:34" class="time">17:29</a></td></tr>
<tr id="t2020-12-14T17:29:36"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f"><a href="https://docs.yoctoproject.org/bitbake/bitbake-user-manual/bitbake-user-manual-fetching.html#git-fetcher-git" rel="nofollow">https://docs.yoctoproject.org/bitbake/bitbake-user-manual/bitbake-user-manual-fetching.html#git-fetcher-git</a></td><td class="time"><a href="#t2020-12-14T17:29:36" class="time">17:29</a></td></tr>
<tr id="t2020-12-14T17:29:47"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">but I was confused by you saying that it only archived the .git directory</td><td class="time"><a href="#t2020-12-14T17:29:47" class="time">17:29</a></td></tr>
<tr id="t2020-12-14T17:30:14"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">the clone is a _bare_ clone.. what in in the .git directory of a 'normal' (not bare) is the same as what is in a abre clone</td><td class="time"><a href="#t2020-12-14T17:30:14" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:30:19"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">I was making an equivalence</td><td class="time"><a href="#t2020-12-14T17:30:19" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:30:25"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">oh qschulz, subpath!</td><td class="time"><a href="#t2020-12-14T17:30:25" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:30:32"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I thought it was &quot;subdir&quot;</td><td class="time"><a href="#t2020-12-14T17:30:32" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:30:33"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">you won't see a .git directory inside of a bare clone..</td><td class="time"><a href="#t2020-12-14T17:30:33" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:30:54"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">fray, oh I didn't realize it was a bare clone</td><td class="time"><a href="#t2020-12-14T17:30:54" class="time">17:30</a></td></tr>
<tr id="t2020-12-14T17:31:04"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">so it does a bare clone, archives that</td><td class="time"><a href="#t2020-12-14T17:31:04" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:13"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">and you can speed up the bare clone by using a 'shallow' clone</td><td class="time"><a href="#t2020-12-14T17:31:13" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:32"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">I'm not sure where the docs are for the shallow cloning though..</td><td class="time"><a href="#t2020-12-14T17:31:32" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:36"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">I rarely use it</td><td class="time"><a href="#t2020-12-14T17:31:36" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:45"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">so then after it extracts it needs to checkout a specific commit from the bare repository?</td><td class="time"><a href="#t2020-12-14T17:31:45" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:50"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">yes</td><td class="time"><a href="#t2020-12-14T17:31:50" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:31:54"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">gotcha</td><td class="time"><a href="#t2020-12-14T17:31:54" class="time">17:31</a></td></tr>
<tr id="t2020-12-14T17:32:18"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">obviously when you clone another repo that's on disk the .git basically just says 'look there'</td><td class="time"><a href="#t2020-12-14T17:32:18" class="time">17:32</a></td></tr>
<tr id="t2020-12-14T17:32:25"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">so the local clone is super fast</td><td class="time"><a href="#t2020-12-14T17:32:25" class="time">17:32</a></td></tr>
<tr id="t2020-12-14T17:32:36"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">bitbake can't currently directly do a bare clone due to the current fetcher design. recipes may specify an exact revision to check out</td><td class="time"><a href="#t2020-12-14T17:32:36" class="time">17:32</a></td></tr>
<tr id="t2020-12-14T17:32:43"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">and you can't clone a depth from a revision, that's a git limitation</td><td class="time"><a href="#t2020-12-14T17:32:43" class="time">17:32</a></td></tr>
<tr id="t2020-12-14T17:33:00"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">kergoth: time for fetch3</td><td class="time"><a href="#t2020-12-14T17:33:00" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:02"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">so the only thing we support is creating and using shallow git tarballs</td><td class="time"><a href="#t2020-12-14T17:33:02" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:21"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">i.e. you fetch it from scratch one time, populates a shallow mirror tarball, then you put that on a mirror and use that from then on, and provide it to your coworkers, or whatever</td><td class="time"><a href="#t2020-12-14T17:33:21" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:23"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Ahh didn't realize it was no archive _or_ shallow</td><td class="time"><a href="#t2020-12-14T17:33:23" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:38"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">technically shallow clone would work with autorev, i guess, but that'd be it</td><td class="time"><a href="#t2020-12-14T17:33:38" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:54"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">we don't know the precise depth from branch HEAD to the commit we want, so we can't specify it with --depth</td><td class="time"><a href="#t2020-12-14T17:33:54" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:33:58"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">Ya, I've only used shallow with autorev before</td><td class="time"><a href="#t2020-12-14T17:33:58" class="time">17:33</a></td></tr>
<tr id="t2020-12-14T17:34:05"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">when was this subpath option added to the Git fetcher?</td><td class="time"><a href="#t2020-12-14T17:34:05" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:21"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2020-12-14T17:34:21" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:34"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">actually I'm guessing it won't work either, because it's the SRCREV that's used in the recipe hash I believe</td><td class="time"><a href="#t2020-12-14T17:34:34" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:39"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">adb78a15e (Yu Ke&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2011-01-19 00:22:13 +0800 464)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subdir = ud.parm.get(&quot;subpath&quot;, &quot;&quot;)</td><td class="time"><a href="#t2020-12-14T17:34:39" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:45"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">There probably isn't a way to specify a subpath hash</td><td class="time"><a href="#t2020-12-14T17:34:45" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:49"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">that was the _latest_ it could have been added, but I'm pretty sure it was there before</td><td class="time"><a href="#t2020-12-14T17:34:49" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:34:58"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">noy uo can not hash the subpath.. the hash is still on the git commit id</td><td class="time"><a href="#t2020-12-14T17:34:58" class="time">17:34</a></td></tr>
<tr id="t2020-12-14T17:35:14"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">marler8997: right, subpath won't help with the single SRCREV issue, it just would allow setting up each recipe to only checkout the subdirector(y|ies) it uses</td><td class="time"><a href="#t2020-12-14T17:35:14" class="time">17:35</a></td></tr>
<tr id="t2020-12-14T17:35:31"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">gotcha, so doesn't solve the problem :(</td><td class="time"><a href="#t2020-12-14T17:35:31" class="time">17:35</a></td></tr>
<tr id="t2020-12-14T17:36:02"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">would probably be a simple feature to add though</td><td class="time"><a href="#t2020-12-14T17:36:02" class="time">17:36</a></td></tr>
<tr id="t2020-12-14T17:36:10"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">No the original question you asked it's the whole repository commit...&nbsp;&nbsp;for the second, why does it take so long.. that is what we were talking about</td><td class="time"><a href="#t2020-12-14T17:36:10" class="time">17:36</a></td></tr>
<tr id="t2020-12-14T17:36:26"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">when a subpath is given, don't put SRCREV in the recipe hash, and provide a way to hash everything in the subpath and specify that hash</td><td class="time"><a href="#t2020-12-14T17:36:26" class="time">17:36</a></td></tr>
<tr id="t2020-12-14T17:36:46"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">fray yes, two different problems</td><td class="time"><a href="#t2020-12-14T17:36:46" class="time">17:36</a></td></tr>
<tr id="t2020-12-14T17:37:05"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">there are alot of people talking so I'm sorry if it's confusing who I'm responding to and which problem I'm referring to</td><td class="time"><a href="#t2020-12-14T17:37:05" class="time">17:37</a></td></tr>
<tr id="t2020-12-14T17:37:45"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">I was saying that means subpath doesn't solve the first problem</td><td class="time"><a href="#t2020-12-14T17:37:45" class="time">17:37</a></td></tr>
<tr id="t2020-12-14T17:38:22"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it could be used to help solve it though, with the extra functionality I specified above</td><td class="time"><a href="#t2020-12-14T17:38:22" class="time">17:38</a></td></tr>
<tr id="t2020-12-14T17:39:07"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">SRCREV_SUBPATH = &quot;abcdefg...&quot;</td><td class="time"><a href="#t2020-12-14T17:39:07" class="time">17:39</a></td></tr>
<tr id="t2020-12-14T17:41:11"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">srcrev isn't jsut input into the rest of the build, but a specification of precisely what we're fetching. what you're talking about is only the former</td><td class="time"><a href="#t2020-12-14T17:41:11" class="time">17:41</a></td></tr>
<tr id="t2020-12-14T17:42:06"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">correct</td><td class="time"><a href="#t2020-12-14T17:42:06" class="time">17:42</a></td></tr>
<tr id="t2020-12-14T17:42:14"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">you would still need SRCREV</td><td class="time"><a href="#t2020-12-14T17:42:14" class="time">17:42</a></td></tr>
<tr id="t2020-12-14T17:42:18"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">well, you could have an SRCREV per recipe and you bump the ones you want when you want. Which means technically you can have an &quot;old&quot; revision for one recipe but if you haven't bumped it, it probably means that the content hasn't changed.</td><td class="time"><a href="#t2020-12-14T17:42:18" class="time">17:42</a></td></tr>
<tr id="t2020-12-14T17:42:49"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">qschulz, yes that would also work</td><td class="time"><a href="#t2020-12-14T17:42:49" class="time">17:42</a></td></tr>
<tr id="t2020-12-14T17:43:09"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">that comes with it's own problem as well though</td><td class="time"><a href="#t2020-12-14T17:43:09" class="time">17:43</a></td></tr>
<tr id="t2020-12-14T17:43:17"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">nothing's free :)</td><td class="time"><a href="#t2020-12-14T17:43:17" class="time">17:43</a></td></tr>
<tr id="t2020-12-14T17:43:30"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">you can see that your initial choice of everything in one git is already costing you :)</td><td class="time"><a href="#t2020-12-14T17:43:30" class="time">17:43</a></td></tr>
<tr id="t2020-12-14T17:43:47"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it seems to be the cheapest solution so far</td><td class="time"><a href="#t2020-12-14T17:43:47" class="time">17:43</a></td></tr>
<tr id="t2020-12-14T17:44:03"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">moving to a &quot;one repo per project&quot; would be quite a high cost</td><td class="time"><a href="#t2020-12-14T17:44:03" class="time">17:44</a></td></tr>
<tr id="t2020-12-14T17:44:04"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">(not saying it's bad per se, it's just that it's not straight-forward in Yocto considering the amount of discussion here today :) )</td><td class="time"><a href="#t2020-12-14T17:44:04" class="time">17:44</a></td></tr>
<tr id="t2020-12-14T17:44:52"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">It seems pretty straightforward to me</td><td class="time"><a href="#t2020-12-14T17:44:52" class="time">17:44</a></td></tr>
<tr id="t2020-12-14T17:45:51"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">the relevant discussion:&nbsp;&nbsp;can you base recipe hash on git subdirectory? No but subpath can limit the file?&nbsp;&nbsp;we could add a SRCREV_SUBPATH...</td><td class="time"><a href="#t2020-12-14T17:45:51" class="time">17:45</a></td></tr>
<tr id="t2020-12-14T17:46:49"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">SRCREV_SUBPATH is irrelevant since you have a recipe per project in your one git repo?</td><td class="time"><a href="#t2020-12-14T17:46:49" class="time">17:46</a></td></tr>
<tr id="t2020-12-14T17:47:09"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">or maybe I missed something (a lot went on :/)</td><td class="time"><a href="#t2020-12-14T17:47:09" class="time">17:47</a></td></tr>
<tr id="t2020-12-14T17:47:09-2"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">huh?</td><td class="time"><a href="#t2020-12-14T17:47:09-2" class="time">17:47</a></td></tr>
<tr id="t2020-12-14T17:47:36"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">the idea was, if you specify a subpath in your SRC_URI, and SRCREV_SUBPATH, then SRCREV would be omitted from the recipe hash in favor of SRCREV_SUBPATH</td><td class="time"><a href="#t2020-12-14T17:47:36" class="time">17:47</a></td></tr>
<tr id="t2020-12-14T17:48:13"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">I don't get it. You have a git repo with 40 small projects right?</td><td class="time"><a href="#t2020-12-14T17:48:13" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:48:17"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">yes</td><td class="time"><a href="#t2020-12-14T17:48:17" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:48:29"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">You have 40 recipes, one for each project?</td><td class="time"><a href="#t2020-12-14T17:48:29" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:48:32"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">yes</td><td class="time"><a href="#t2020-12-14T17:48:32" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:48:47"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">then one recipe has SRC_URI with subpath, and SRCREV</td><td class="time"><a href="#t2020-12-14T17:48:47" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:48:55"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">that's it?</td><td class="time"><a href="#t2020-12-14T17:48:55" class="time">17:48</a></td></tr>
<tr id="t2020-12-14T17:49:08"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">qschulz sounds like one SCM with a bunch of related, but sepeate projects..&nbsp;&nbsp;it's not unusual in companies I've worked with..</td><td class="time"><a href="#t2020-12-14T17:49:08" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:10"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">and SRCREV is *NOT* in common with all recipes</td><td class="time"><a href="#t2020-12-14T17:49:10" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:12"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">we don't use subpath at all right now, but the idea was they could all use subpath</td><td class="time"><a href="#t2020-12-14T17:49:12" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:25"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">it IS common to all recipes</td><td class="time"><a href="#t2020-12-14T17:49:25" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:29"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">we put the SRCREV in a class</td><td class="time"><a href="#t2020-12-14T17:49:29" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:33"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">marler8997: then don't</td><td class="time"><a href="#t2020-12-14T17:49:33" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:35"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">that they all inherit from</td><td class="time"><a href="#t2020-12-14T17:49:35" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:48"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">again, having a different SRCREV in every recipe comes with it's own problems</td><td class="time"><a href="#t2020-12-14T17:49:48" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:49:59"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">for example. for projects that depend on each other, they can get out of sync</td><td class="time"><a href="#t2020-12-14T17:49:59" class="time">17:49</a></td></tr>
<tr id="t2020-12-14T17:50:11"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">that's maintenance</td><td class="time"><a href="#t2020-12-14T17:50:11" class="time">17:50</a></td></tr>
<tr id="t2020-12-14T17:50:15"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">but yeah</td><td class="time"><a href="#t2020-12-14T17:50:15" class="time">17:50</a></td></tr>
<tr id="t2020-12-14T17:50:28"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">You'll have to make compromise somewhere</td><td class="time"><a href="#t2020-12-14T17:50:28" class="time">17:50</a></td></tr>
<tr id="t2020-12-14T17:50:40"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">not really helpful advice though is it?</td><td class="time"><a href="#t2020-12-14T17:50:40" class="time">17:50</a></td></tr>
<tr id="t2020-12-14T17:50:42"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">be it that you add support for the SRCREC_SUBPATH you're talking about or not</td><td class="time"><a href="#t2020-12-14T17:50:42" class="time">17:50</a></td></tr>
<tr id="t2020-12-14T17:51:15"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">what I'm asking for isn't impossible, nor difficult, it just sounds like it hasn't been implemented</td><td class="time"><a href="#t2020-12-14T17:51:15" class="time">17:51</a></td></tr>
<tr id="t2020-12-14T17:51:45"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">If it hasn't been implemented, it's because it's not a common use case, or no one with the resources has cared enough to make the change. If that's changed now, by all means submit a patch</td><td class="time"><a href="#t2020-12-14T17:51:45" class="time">17:51</a></td></tr>
<tr id="t2020-12-14T17:51:46"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">If you can find native git commands to do it, then it's possible.. otherwise it really is a custom request..</td><td class="time"><a href="#t2020-12-14T17:51:46" class="time">17:51</a></td></tr>
<tr id="t2020-12-14T17:51:54"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">marler8997: come on. We gave you multiple ways to do it. You had knowledgeable people on it. We can't decide for you, you test. You see if it works for you, if not, try another implementation or develop a new one</td><td class="time"><a href="#t2020-12-14T17:51:54" class="time">17:51</a></td></tr>
<tr id="t2020-12-14T17:51:58"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">kergeroth yes I agree</td><td class="time"><a href="#t2020-12-14T17:51:58" class="time">17:51</a></td></tr>
<tr id="t2020-12-14T17:52:14"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">this is clearly not as common of a use case as one project per repository</td><td class="time"><a href="#t2020-12-14T17:52:14" class="time">17:52</a></td></tr>
<tr id="t2020-12-14T17:52:17"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">but i doubt anyone else will do it for you, lacking the impetus that's driving you now</td><td class="time"><a href="#t2020-12-14T17:52:17" class="time">17:52</a></td></tr>
<tr id="t2020-12-14T17:52:22"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">not sure what your point is though</td><td class="time"><a href="#t2020-12-14T17:52:22" class="time">17:52</a></td></tr>
<tr id="t2020-12-14T17:52:31"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">lol, I never said anyone would</td><td class="time"><a href="#t2020-12-14T17:52:31" class="time">17:52</a></td></tr>
<tr id="t2020-12-14T17:52:36"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">who are you talking to?</td><td class="time"><a href="#t2020-12-14T17:52:36" class="time">17:52</a></td></tr>
<tr id="t2020-12-14T17:53:06"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">sounds like you're talking to some weird alternate reality version of me</td><td class="time"><a href="#t2020-12-14T17:53:06" class="time">17:53</a></td></tr>
<tr id="t2020-12-14T17:53:27"><th class="nick" style="background: #c668c6">kergoth</th><td class="text" style="color: #c668c6">Uh, weirdly defensive there. I didn't claim you said someone would, only clarified that if you wanted it done, you'd need to do it</td><td class="time"><a href="#t2020-12-14T17:53:27" class="time">17:53</a></td></tr>
<tr id="t2020-12-14T17:54:13"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">qshulz, what is your point?&nbsp;&nbsp;You asked for clarification and I provided it, and now you're talking to me as if I'm not listening to the adivce people have given</td><td class="time"><a href="#t2020-12-14T17:54:13" class="time">17:54</a></td></tr>
<tr id="t2020-12-14T17:54:20"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">&quot;come on, we gave you multiple ways to do it&quot;</td><td class="time"><a href="#t2020-12-14T17:54:20" class="time">17:54</a></td></tr>
<tr id="t2020-12-14T17:55:38"><th class="nick" style="background: #97974f">qschulz</th><td class="text" style="color: #97974f">you exhausted my patience for today, I'll let you with other people. Good luck</td><td class="time"><a href="#t2020-12-14T17:55:38" class="time">17:55</a></td></tr>
<tr id="t2020-12-14T17:56:31"><th class="nick" style="background: #6464bf">marler8997</th><td class="text" style="color: #6464bf">qschulz, you are the one asking questions, you can stop asking them at any time</td><td class="time"><a href="#t2020-12-14T17:56:31" class="time">17:56</a></td></tr>
<tr id="t2020-12-14T18:25:16"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">Hi folks, I'm seeing a build failure of `bitbake -cpopulate_sdk my-image` where my-image includes util-linux, causing the sdk to include util-linux-doc, resulting in the pkg_postinst_append_${MAN_PKG} from manpages.bbclass running, which tries to `chown man:man` but fails because that user/group doesn't exist (resulting in the do_populate_sdk failing).</td><td class="time"><a href="#t2020-12-14T18:25:16" class="time">18:25</a></td></tr>
<tr id="t2020-12-14T18:25:55"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">Any advise for how to fix this properly upstream? I'm probably going to workaround this by trying to disable the manpages in the sdk.</td><td class="time"><a href="#t2020-12-14T18:25:55" class="time">18:25</a></td></tr>
<tr id="t2020-12-14T18:27:46"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">I'm considering if a variable to allow controlling the user/group used for man pages makes sense here. Or doing some specialization of manpages.bbclass for nativesdk packages.</td><td class="time"><a href="#t2020-12-14T18:27:46" class="time">18:27</a></td></tr>
<tr id="t2020-12-14T18:28:50"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">(well, not actually nativesdk packages. `util-linux-doc` is a target package)</td><td class="time"><a href="#t2020-12-14T18:28:50" class="time">18:28</a></td></tr>
<tr id="t2020-12-14T18:31:16"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">target software is installed using pseudo, which uses it's own passwd/group file.&nbsp;&nbsp;Verify that the base-passwd on your system has man user and group in it</td><td class="time"><a href="#t2020-12-14T18:31:16" class="time">18:31</a></td></tr>
<tr id="t2020-12-14T18:32:31"><th class="nick" style="background: #c3c366">fray</th><td class="text" style="color: #c3c366">(check etc/passwd and etc/group inside of the target roofs)</td><td class="time"><a href="#t2020-12-14T18:32:31" class="time">18:32</a></td></tr>
<tr id="t2020-12-14T18:36:50"><th class="nick" style="background: #ce6c6c">stacktrust</th><td class="text" style="color: #ce6c6c">Does the Yocto autobuilder share a public sstate cache for dunfell and qemuarm64 machine?</td><td class="time"><a href="#t2020-12-14T18:36:50" class="time">18:36</a></td></tr>
<tr id="t2020-12-14T18:42:01"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">yes</td><td class="time"><a href="#t2020-12-14T18:42:01" class="time">18:42</a></td></tr>
<tr id="t2020-12-14T18:42:32"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">its mentioned in the sample local.conf iirc</td><td class="time"><a href="#t2020-12-14T18:42:32" class="time">18:42</a></td></tr>
<tr id="t2020-12-14T18:46:40"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">fray: where would I look for the sysroot with the passwd/group file used for TOOLCHAIN_TARGET_TASK installation? looking at `tmp/work/$MACHINE-$TARGET_VENDOR-linux-gnueabi/my-image/1.0-r0/sdk/image` only shows the stuff in the sdk (which doesn't include any `/etc/*` files, it's just all the sdk packages installed in `/opt`).</td><td class="time"><a href="#t2020-12-14T18:46:40" class="time">18:46</a></td></tr>
<tr id="t2020-12-14T18:49:00"><th class="nick" style="background: #ce6c6c">stacktrust</th><td class="text" style="color: #ce6c6c">@rburton thanks</td><td class="time"><a href="#t2020-12-14T18:49:00" class="time">18:49</a></td></tr>
<tr id="t2020-12-14T18:49:36"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">ah, one can drill down to the sysroot inside that. (`tmp/work/$MACHINE-$TARGET_VENDOR-linux-gnueabi/my-image/1.0-r0/sdk/image/opt/my-distro/sysroots/armv7vet2hf-neon-$TARGET_VENDOR-linux-gnueabi`) that `passwd` does include a `man` user, making the error more questionable.</td><td class="time"><a href="#t2020-12-14T18:49:36" class="time">18:49</a></td></tr>
<tr id="t2020-12-14T18:50:42"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">that `etc/group` also has a man group.</td><td class="time"><a href="#t2020-12-14T18:50:42" class="time">18:50</a></td></tr>
<tr id="t2020-12-14T18:56:51"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">Is there something in the log.do_populate_sdk which would indicate which sysroot exactly pseudo is using here?</td><td class="time"><a href="#t2020-12-14T18:56:51" class="time">18:56</a></td></tr>
<tr id="t2020-12-14T19:27:20"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">stacktrust: but you need to change the version to point to it... I think it still says 2.5 in the local.conf.sample</td><td class="time"><a href="#t2020-12-14T19:27:20" class="time">19:27</a></td></tr>
<tr id="t2020-12-14T19:37:21"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">am running a local dunfell build to generate a xen-image-minimal image with the qemuarm64 machine and I've got the SSTATE_MIRRORS pointed at: <a href="http://sstate.yoctoproject.org/3.1/PATH;downloadfilename=PATH" rel="nofollow">http://sstate.yoctoproject.org/3.1/PATH;downloadfilename=PATH</a> but don't seem to be seeing a lot of cache hits / acceleration</td><td class="time"><a href="#t2020-12-14T19:37:21" class="time">19:37</a></td></tr>
<tr id="t2020-12-14T19:37:37"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">would switching from rpm to ipk be expected to change the hit rate a lot?</td><td class="time"><a href="#t2020-12-14T19:37:37" class="time">19:37</a></td></tr>
<tr id="t2020-12-14T19:39:00"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">maybe the version should be 3.1.4 in the url?</td><td class="time"><a href="#t2020-12-14T19:39:00" class="time">19:39</a></td></tr>
<tr id="t2020-12-14T19:54:52"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">It looks like the autobuilder has quite a few more layers enabled than my minimal build, so maybe not much commonality once those are present.</td><td class="time"><a href="#t2020-12-14T19:54:52" class="time">19:54</a></td></tr>
<tr id="t2020-12-14T20:05:19"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">Welp, removing `manpages` from PACKAGECONFIG fixes the broken populate_sdk util-linux-doc due to `chown man:man`: `PACKAGECONFIG_remove_pn-util-linux = &quot;manpages&quot;`. I looked a bit further on the PSEUDO stuff, and found that PSEUDO_SYSROOT points to the sysroot pseudo is using. The passwd/group in sysroot does not have a man user. It's pretty minimal:</td><td class="time"><a href="#t2020-12-14T20:05:19" class="time">20:05</a></td></tr>
<tr id="t2020-12-14T20:05:21"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca"><a href="https://gist.github.com/4a13dd5729786eb2b7479c13ba1b4216" rel="nofollow">https://gist.github.com/4a13dd5729786eb2b7479c13ba1b4216</a></td><td class="time"><a href="#t2020-12-14T20:05:21" class="time">20:05</a></td></tr>
<tr id="t2020-12-14T20:09:25"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">I suspect the issue here is down to the packages being installed in the sdk modifying the etc/{passwd,group} in the sdk sysroot, but not the pseudo sysroot, resulting in the etc/{passwd,group} in the pseudo sysroot not having the required `man` user/group. Though it doesn't seem to make much sense to have `etc/{passwd,group}` in the sdk sysroot at all (not clear what would ever use them).</td><td class="time"><a href="#t2020-12-14T20:09:25" class="time">20:09</a></td></tr>
<tr id="t2020-12-14T20:24:46"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">RP: first pass with my 5.10-everything builds looks good. Hopefully I'll have it uprev'd early this cycle, and can focus on other features that I normally just kick down the road.</td><td class="time"><a href="#t2020-12-14T20:24:46" class="time">20:24</a></td></tr>
<tr id="t2020-12-14T20:36:43"><td class="nickchange" colspan="2">*** bluelightning_ is now known as bluelightning</td><td><a href="#t2020-12-14T20:36:43" class="time">20:36</a></td></tr>
<tr id="t2020-12-14T20:37:48"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">zeddii: heh, 5.10.1? ;)</td><td class="time"><a href="#t2020-12-14T20:37:48" class="time">20:37</a></td></tr>
<tr id="t2020-12-14T20:38:15"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">yup</td><td class="time"><a href="#t2020-12-14T20:38:15" class="time">20:38</a></td></tr>
<tr id="t2020-12-14T20:38:29"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">as of 10 minutes ago, its still rebuilding</td><td class="time"><a href="#t2020-12-14T20:38:29" class="time">20:38</a></td></tr>
<tr id="t2020-12-14T20:38:41"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">but if greg busted us in .1, that's a shin-kicking</td><td class="time"><a href="#t2020-12-14T20:38:41" class="time">20:38</a></td></tr>
<tr id="t2020-12-14T20:39:03"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">a .1 half an hour after the release is a brown paper bag fix</td><td class="time"><a href="#t2020-12-14T20:39:03" class="time">20:39</a></td></tr>
<tr id="t2020-12-14T20:41:10"><th class="nick" style="background: #7070d5">paulbarker</th><td class="text" style="color: #7070d5">I saw that before</td><td class="time"><a href="#t2020-12-14T20:41:10" class="time">20:41</a></td></tr>
<tr id="t2020-12-14T20:41:41"><th class="nick" style="background: #7070d5">paulbarker</th><td class="text" style="color: #7070d5">zeddii: <a href="https://twitter.com/kernellogger/status/1338379381392216065" rel="nofollow">https://twitter.com/kernellogger/status/1338379381392216065</a></td><td class="time"><a href="#t2020-12-14T20:41:41" class="time">20:41</a></td></tr>
<tr id="t2020-12-14T20:42:00"><th class="nick" style="background: #7070d5">paulbarker</th><td class="text" style="color: #7070d5">btrfs raid6 mounting issue I believe</td><td class="time"><a href="#t2020-12-14T20:42:00" class="time">20:42</a></td></tr>
<tr id="t2020-12-14T20:42:13"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">ahah</td><td class="time"><a href="#t2020-12-14T20:42:13" class="time">20:42</a></td></tr>
<tr id="t2020-12-14T20:42:51"><th class="nick" style="background: #5fb4b4">smurray</th><td class="text" style="color: #5fb4b4">yeah, definitely a brown paper bag bug</td><td class="time"><a href="#t2020-12-14T20:42:51" class="time">20:42</a></td></tr>
<tr id="t2020-12-14T20:42:58"><th class="nick" style="background: #7070d5">paulbarker</th><td class="text" style="color: #7070d5">TBH anyone using btrfs raid5/6 is a daredevil anyway</td><td class="time"><a href="#t2020-12-14T20:42:58" class="time">20:42</a></td></tr>
<tr id="t2020-12-14T20:43:15"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">truth! which is why I'd never, ever see that issue.</td><td class="time"><a href="#t2020-12-14T20:43:15" class="time">20:43</a></td></tr>
<tr id="t2020-12-14T21:40:10"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">zeddii: it was really the previous release which was why it worked so smoothly but they're fixing in .1? :)</td><td class="time"><a href="#t2020-12-14T21:40:10" class="time">21:40</a></td></tr>
<tr id="t2020-12-14T21:40:26"><th class="nick" style="background: #5959a9">RP</th><td class="text" style="color: #5959a9">zeddii: seriously, that sounds good to be able to look at other things for a change</td><td class="time"><a href="#t2020-12-14T21:40:26" class="time">21:40</a></td></tr>
<tr id="t2020-12-14T21:45:46"><th class="nick" style="background: #42427e">moto-timo</th><td class="text" style="color: #42427e">+1</td><td class="time"><a href="#t2020-12-14T21:45:46" class="time">21:45</a></td></tr>
<tr id="t2020-12-14T21:50:56"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">@zeddii: I think the 5.10 yocto-kernel-dev branch for standard/bcm-2xxx-rpi branch is broken on the Raspberry Pi 4 at the moment, with what looks like a rough merge in the vc4 graphics driver</td><td class="time"><a href="#t2020-12-14T21:50:56" class="time">21:50</a></td></tr>
<tr id="t2020-12-14T21:52:18"><th class="nick" style="background: #6ed16e">xtopher</th><td class="text" style="color: #6ed16e">5.9 seems to boot ok, and in switching branch I found that I need to get you an update for the dynamic-layers raspberry pi logic where KBRANCH is set for the raspberrypi4-64</td><td class="time"><a href="#t2020-12-14T21:52:18" class="time">21:52</a></td></tr>
<tr id="t2020-12-14T22:57:06"><th class="nick" style="background: #d9d972">mischief</th><td class="text" style="color: #d9d972">lets say i have N machines. should they be in N different layers or one layer? why?</td><td class="time"><a href="#t2020-12-14T22:57:06" class="time">22:57</a></td></tr>
<tr id="t2020-12-14T23:41:51"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">hmmm... so I just annotated the `pkg_postinst_append_${MAN_PKG}` in manpages.bbclass to dump the passwd/group files before trying to chown. They are _definitely_ my host system's passwd/group. Does pseudo not redirect reads of those and instead fiddle with getpwnam/getgrent ? While I've worked around the broken man page install in populate_sdk by disabling man pages, I would like to fix this</td><td class="time"><a href="#t2020-12-14T23:41:51" class="time">23:41</a></td></tr>
<tr id="t2020-12-14T23:41:52"><th class="nick" style="background: #6acaca">codyps</th><td class="text" style="color: #6acaca">correctly.</td><td class="time"><a href="#t2020-12-14T23:41:52" class="time">23:41</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2020-12-13.log.html">&#171; Sunday, 2020-12-13</a> <a href="index.html">Index</a> <a href="%23yocto.2020-12-15.log.html">Tuesday, 2020-12-15 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
